import { Fragment, useEffect, useState } from 'react';
import { useLocation, useNavigate } from 'react-router-dom';

import { UIButton2 } from '@/components/UI/atoms/UIButton2';
import { UIIcon2 } from '@/components/UI/atoms/UIIcon2';
import { IdeMovePopup } from '@/pages/home/webide';
import { IdeCreateWizard } from '@/pages/home/webide/IdeCreateWizard';
import { UIProjectBox, UIUserPopup } from '../../../molecules';

import { Button } from '@/components/common/auth';
import { UIHomeGuidePopup } from '@/components/UI/molecules/popup/UIHomeGuidePopup';
import { UIIDEPopup } from '@/components/UI/molecules/popup/UIIDEPopup';
import { AUTH_KEY } from '@/constants/auth';
import { useEnvCheck } from '@/hooks/common/util';
import type { UIHeaderProps } from './types';

export function UIHeader({
  title,
  showLogo = true,
  rightContent,
  className = '',
  onLogoClick,
  onHeaderClick,
  onProfileClick,
  name = '신한',
  navigateActions,
  locations = [],
  projectBoxProps,
  onAlarmClick,
  unreadAlarmCount = 0,
  userPopupProps,
}: UIHeaderProps) {
  const location = useLocation();
  const navigate = useNavigate();
  const [isGuideOpen, setIsGuideOpen] = useState(false);
  const { isProd } = useEnvCheck();

  useEffect(() => {
    if (location.state?.firstLogin) {
      setIsGuideOpen(true);
    }
  }, [location.state?.firstLogin]);

  const handleCloseGuide = () => {
    setIsGuideOpen(false);

    if (location.state?.firstLogin) {
      const newState = { ...location.state };
      delete newState.firstLogin;

      navigate(location.pathname, {
        replace: true,
        state: newState,
      });
    }
  };

  // IDE 팝업 열림 상태 관리
  const [isIdePopupOpen, setIsIdePopupOpen] = useState(false);

  // IDE 이동 팝업 열림 상태 관리
  const [isIdeMovePopupOpen, setIsIdeMovePopupOpen] = useState(false);

  // IDE 생성 위자드 열림 상태 관리
  const [isCreateWizardOpen, setIsCreateWizardOpen] = useState(false);

  /**
   * IDE 이동하기 버튼 클릭 핸들러
   * UIIDEPopup을 닫고 IDE 선택 팝업을 열어줌
   */
  const handleMoveClick = () => {
    setIsIdePopupOpen(false);
    setIsIdeMovePopupOpen(true);
  };

  return (
    <>
      <header className={`bg-white border-b border-gray-200 h-[70px] flex-shrink-0 ${className}`} onClick={onHeaderClick}>
        <div className='h-full pr-6 flex items-center justify-between'>
          {/* 왼쪽 영역: 로고 및 타이틀 */}
          <div className='flex items-center'>
            <div className='flex items-center pl-[32px] gap-[32px] h-[69px] w-[272px] border-r-[1px] border-r-[#E7EDF6]'>
              <div className='flex items-center'>
                {showLogo && (
                  <div
                    className='flex items-center gap-3 cursor-pointer flex-shrink-0'
                    onClick={e => {
                      e.stopPropagation();
                      onLogoClick?.();
                    }}
                  >
                    {/* 신한은행 로고 */}
                    {/* <UIImage src='/assets/images/system/BrandShinhanbankCI-Signature.svg' alt='신한은행 로고' className='h-8' loading='eager' /> */}
                    <svg width="117" height="28" viewBox="0 0 117 28" fill="none" xmlns="http://www.w3.org/2000/svg">
                      <g clip-path="url(#clip0_4026_1287)">
                        <path d="M28.0964 13.9973C28.0964 21.735 21.8206 28 14.1044 28C6.38822 28 0.096386 21.735 0.096386 13.9973C0.096386 6.25972 6.36145 1.33514e-05 14.0991 1.33514e-05C21.8367 1.33514e-05 28.091 6.26507 28.091 13.9973H28.0964Z" fill="white" />
                        <path d="M14.0991 27.3307C21.4565 27.3307 27.427 21.3655 27.427 13.9973C27.427 6.6292 21.4565 0.658651 14.0937 0.658651C6.73093 0.658651 0.765736 6.63456 0.765736 13.9973C0.765736 21.3601 6.73093 27.3307 14.1044 27.3307H14.0991Z" fill="#007BC4" />
                        <mask id="mask0_4026_1287" style={{ maskType: 'luminance' }} maskUnits="userSpaceOnUse" x="0" y="0" width="28" height="28">
                          <path d="M14.0991 27.3307C21.4565 27.3307 27.427 21.3655 27.427 13.9973C27.427 6.6292 21.4565 0.658651 14.0937 0.658651C6.73093 0.658651 0.765736 6.63456 0.765736 13.9973C0.765736 21.3601 6.73093 27.3307 14.1044 27.3307H14.0991Z" fill="white" />
                        </mask>
                        <g mask="url(#mask0_4026_1287)">
                          <path d="M14.1473 20.4391C20.0054 20.4391 25.0281 22.0723 27.1807 24.3856C27.9036 22.7256 28.2999 20.8996 28.2999 18.988C28.2999 11.336 21.9545 5.14057 14.1473 5.14057C6.34003 5.14057 7.62939e-06 11.3414 7.62939e-06 18.988C7.62939e-06 20.9103 0.396259 22.7256 1.11915 24.3856C3.26641 22.0723 8.28916 20.4391 14.1473 20.4391Z" fill="#007BC4" />
                          <path d="M14.1473 20.4498C19.9893 20.4498 25.0013 22.0723 27.1486 24.3641C27.8715 22.7149 28.2677 20.905 28.2677 19.0094C28.2677 11.4217 21.9438 5.25303 14.1526 5.25303C6.36145 5.25303 0.032135 11.4271 0.032135 19.0147C0.032135 20.921 0.428387 22.7256 1.14592 24.3695C3.28782 22.0723 8.29987 20.4552 14.1419 20.4552L14.1473 20.4498Z" fill="#007DC5" />
                          <path d="M14.1419 20.4659C19.9679 20.4659 24.9692 22.0723 27.1058 24.3481C27.8287 22.7149 28.2196 20.921 28.2196 19.0361C28.2196 11.5074 21.9117 5.37617 14.1366 5.37617C6.36146 5.37617 0.069622 11.5181 0.069622 19.0415C0.069622 20.9317 0.465874 22.7202 1.18341 24.3534C3.31996 22.0777 8.31594 20.4712 14.1419 20.4712V20.4659Z" fill="#007FC6" />
                          <path d="M14.1419 20.4819C19.9518 20.4819 24.9371 22.0723 27.0736 24.332C27.7912 22.7148 28.1874 20.9317 28.1874 19.0629C28.1874 11.5984 21.8956 5.49396 14.1419 5.49396C6.38823 5.49396 0.101749 11.6037 0.101749 19.0683C0.101749 20.9424 0.498001 22.7202 1.21018 24.3373C3.34137 22.0776 8.32665 20.4873 14.1366 20.4873L14.1419 20.4819Z" fill="#0080C7" />
                          <path d="M14.1419 20.498C19.9411 20.498 24.9103 22.0776 27.0415 24.3159C27.7591 22.7095 28.1499 20.9424 28.1499 19.0897C28.1499 11.6841 21.8742 5.61178 14.1419 5.61178C6.40965 5.61178 0.139236 11.6894 0.139236 19.095C0.139236 20.9531 0.535488 22.7149 1.24767 24.3213C3.37351 22.083 8.34272 20.5034 14.1419 20.5034V20.498Z" fill="#0082C9" />
                          <path d="M14.1366 20.5087C19.9197 20.5087 24.8782 22.0776 27.004 24.2999C27.7162 22.7095 28.1125 20.9585 28.1125 19.1165C28.1125 11.7751 21.8528 5.72957 14.1419 5.72957C6.43107 5.72957 0.171368 11.7804 0.171368 19.1165C0.171368 20.9638 0.562265 22.7041 1.27445 24.2999C3.39493 22.0776 8.35343 20.5087 14.1366 20.5087Z" fill="#0084CA" />
                          <path d="M14.1366 20.5248C19.9036 20.5248 24.8514 22.0777 26.9666 24.2838C27.6787 22.7042 28.0696 20.9692 28.0696 19.1432C28.0696 11.8608 21.826 5.84739 14.1366 5.84739C6.44714 5.84739 0.208855 11.8661 0.208855 19.1432C0.208855 20.9746 0.599752 22.7042 1.31193 24.2838C3.42706 22.0777 8.3695 20.5248 14.1419 20.5248H14.1366Z" fill="#0086CB" />
                          <path d="M14.1366 20.5408C19.8876 20.5408 24.8246 22.083 26.9344 24.2677C27.6466 22.7041 28.0375 20.9799 28.0375 19.1754C28.0375 11.9572 21.8099 5.97054 14.1366 5.97054C6.4632 5.97054 0.240982 11.9518 0.240982 19.17C0.240982 20.9853 0.631879 22.6988 1.33871 24.2624C3.44848 22.0776 8.38021 20.5355 14.1312 20.5355L14.1366 20.5408Z" fill="#0088CC" />
                          <path d="M14.1312 20.5569C19.8661 20.5569 24.7925 22.083 26.8969 24.2517C27.6038 22.6988 27.9947 20.9906 27.9947 19.2022C27.9947 12.0429 21.7831 6.08837 14.1312 6.08837C6.47926 6.08837 0.273106 12.0429 0.273106 19.1968C0.273106 20.996 0.664003 22.6988 1.37083 24.2463C3.47525 22.083 8.39627 20.5516 14.1312 20.5516V20.5569Z" fill="#008ACD" />
                          <path d="M14.1312 20.573C19.8501 20.573 24.7604 22.0884 26.8648 24.2356C27.5716 22.6988 27.9625 21.0067 27.9625 19.2289C27.9625 12.1339 21.7671 6.21151 14.1366 6.21151C6.50604 6.21151 0.310593 12.1285 0.310593 19.2236C0.310593 21.0067 0.70149 22.6934 1.40296 24.2303C3.49667 22.083 8.40698 20.5676 14.1312 20.5676V20.573Z" fill="#008CCF" />
                          <path d="M14.1312 20.5837C19.834 20.5837 24.7336 22.083 26.8273 24.2142C27.5342 22.6881 27.9197 21.0121 27.9197 19.2503C27.9197 12.2142 21.7403 6.32398 14.1312 6.32398C6.5221 6.32398 0.34272 12.2196 0.34272 19.2503C0.34272 21.0174 0.728262 22.6881 1.43509 24.2142C3.52344 22.083 8.42304 20.5837 14.1312 20.5837Z" fill="#008ED0" />
                          <path d="M14.1259 20.5997C19.8126 20.5997 24.7015 22.0884 26.7898 24.1981C27.4913 22.6881 27.8822 21.0228 27.8822 19.2771C27.8822 12.2999 21.7189 6.44176 14.1259 6.44176C6.53282 6.44176 0.380207 12.3052 0.380207 19.2771C0.380207 21.0281 0.765749 22.6881 1.46722 24.1981C3.55022 22.0884 8.43375 20.5997 14.1259 20.5997Z" fill="#0090D1" />
                          <path d="M14.1259 20.6158C19.8019 20.6158 24.6747 22.0884 26.7577 24.1821C27.4592 22.6827 27.8447 21.0335 27.8447 19.3039C27.8447 12.3909 21.6975 6.55959 14.1259 6.55959C6.55423 6.55959 0.412334 12.3909 0.412334 19.3039C0.412334 21.0388 0.797877 22.6827 1.49935 24.1821C3.57699 22.0884 8.44982 20.6158 14.1259 20.6158Z" fill="#0092D2" />
                          <path d="M14.1259 20.6319C19.7858 20.6319 24.648 22.0937 26.7256 24.166C27.4217 22.6827 27.8126 21.0495 27.8126 19.3307C27.8126 12.4766 21.6814 6.67737 14.1312 6.67737C6.58102 6.67737 0.449825 12.4819 0.449825 19.3307C0.449825 21.0495 0.835367 22.6827 1.53149 24.166C3.60377 22.0937 8.46589 20.6319 14.1259 20.6319Z" fill="#0094D3" />
                          <path d="M14.1205 20.6426C19.7644 20.6426 24.6158 22.0883 26.6828 24.1446C27.3789 22.672 27.7644 21.0549 27.7644 19.3574C27.7644 12.5676 21.6493 6.80052 14.1205 6.80052C6.59173 6.80052 0.481953 12.5676 0.481953 19.3574C0.481953 21.0602 0.867495 22.6774 1.56361 24.1446C3.63055 22.0883 8.4766 20.6426 14.1259 20.6426H14.1205Z" fill="#0096D4" />
                          <path d="M14.1205 20.6586C19.7484 20.6586 24.5837 22.0937 26.6506 24.1285C27.3467 22.672 27.7323 21.0656 27.7323 19.3842C27.7323 12.6533 21.6332 6.91834 14.1205 6.91834C6.60779 6.91834 0.51408 12.6533 0.51408 19.3842C0.51408 21.071 0.899622 22.6774 1.59039 24.1285C3.65196 22.0937 8.48731 20.6586 14.1205 20.6586Z" fill="#0098D5" />
                          <path d="M14.1205 20.6747C19.7323 20.6747 24.5569 22.0937 26.6185 24.1124C27.3093 22.6667 27.6948 21.0816 27.6948 19.411C27.6948 12.7443 21.6118 7.03613 14.1205 7.03613C6.62921 7.03613 0.551567 12.7443 0.551567 19.411C0.551567 21.0816 0.931755 22.672 1.62252 24.1124C3.67874 22.0937 8.49802 20.6747 14.1152 20.6747H14.1205Z" fill="#009AD7" />
                          <path d="M14.1152 20.6908C19.7109 20.6908 24.5248 22.0991 26.581 24.0964C27.2718 22.6667 27.652 21.0924 27.652 19.4378C27.652 12.83 21.585 7.15395 14.1152 7.15395C6.64527 7.15395 0.583691 12.83 0.583691 19.4378C0.583691 21.0924 0.963878 22.6667 1.65464 24.0964C3.70551 22.0991 8.51408 20.6908 14.1152 20.6908Z" fill="#009CD8" />
                          <path d="M14.1151 20.7015C19.6948 20.7015 24.498 22.0937 26.5435 24.075C27.2343 22.6559 27.6145 21.0977 27.6145 19.4592C27.6145 12.9103 21.5689 7.26638 14.1151 7.26638C6.6613 7.26638 0.621143 12.9156 0.621143 19.4645C0.621143 21.1084 1.00133 22.6667 1.68674 24.0803C3.73225 22.099 8.52476 20.7068 14.1151 20.7068V20.7015Z" fill="#009ED9" />
                          <path d="M14.1151 20.7175C19.6841 20.7175 24.4712 22.0991 26.5114 24.0589C27.1968 22.6506 27.577 21.1084 27.577 19.4859C27.577 13.0013 21.5475 7.38421 14.1098 7.38421C6.67201 7.38421 0.653271 13.0067 0.653271 19.4913C0.653271 21.1191 1.03346 22.6613 1.71887 24.0643C3.75903 22.1044 8.54082 20.7229 14.1151 20.7229V20.7175Z" fill="#00A0DA" />
                          <path d="M14.1098 20.7336C19.6626 20.7336 24.4337 22.0991 26.4739 24.0428C27.1593 22.6506 27.5395 21.1191 27.5395 19.5127C27.5395 13.087 21.5261 7.50735 14.1098 7.50735C6.69344 7.50735 0.690758 13.0924 0.690758 19.5181C0.690758 21.1298 1.07095 22.6613 1.751 24.0482C3.7858 22.1044 8.55689 20.7389 14.1098 20.7389V20.7336Z" fill="#00A2DB" />
                          <path d="M14.1098 20.7497C19.6466 20.7497 24.407 22.1044 26.4418 24.0268C27.1272 22.6453 27.502 21.1352 27.502 19.5395C27.502 13.1781 21.5047 7.62518 14.1098 7.62518C6.71486 7.62518 0.722889 13.1834 0.722889 19.5449C0.722889 21.1406 1.09772 22.656 1.78313 24.0321C3.81258 22.1098 8.5676 20.755 14.1098 20.755V20.7497Z" fill="#00A4DC" />
                          <path d="M14.1098 20.7604C19.6305 20.7604 24.3802 22.1044 26.4043 24.0107C27.0843 22.6452 27.4645 21.1459 27.4645 19.5716C27.4645 13.2691 21.4833 7.74833 14.1098 7.74833C6.73627 7.74833 0.755016 13.2691 0.755016 19.5663C0.755016 21.1459 1.12985 22.6452 1.8099 24.0054C3.834 22.0991 8.57831 20.755 14.1044 20.755L14.1098 20.7604Z" fill="#00A6DD" />
                          <path d="M14.1044 20.7765C19.6091 20.7765 24.3481 22.1044 26.3668 23.9947C27.0469 22.6399 27.4217 21.1566 27.4217 19.5984C27.4217 13.3601 21.4565 7.86615 14.1044 7.86615C6.75234 7.86615 0.792503 13.3548 0.792503 19.5931C0.792503 21.1566 1.16734 22.6453 1.84739 23.9893C3.86613 22.1044 8.59438 20.7711 14.1098 20.7711L14.1044 20.7765Z" fill="#00A8DE" />
                          <path d="M14.1044 20.7925C19.593 20.7925 24.3213 22.1098 26.3347 23.9786C27.0147 22.6399 27.3896 21.1727 27.3896 19.6252C27.3896 13.4458 21.4404 7.98394 14.1044 7.98394C6.76841 7.98394 0.824631 13.4458 0.824631 19.6198C0.824631 21.1673 1.19946 22.6399 1.87416 23.9732C3.88755 22.1044 8.60509 20.7871 14.0991 20.7871L14.1044 20.7925Z" fill="#00AADF" />
                          <path d="M14.1044 20.8086C19.577 20.8086 24.2892 22.1098 26.3025 23.9625C26.9772 22.6346 27.3521 21.1834 27.3521 19.652C27.3521 13.5368 21.419 8.10176 14.1044 8.10176C6.78983 8.10176 0.862118 13.5315 0.862118 19.6466C0.862118 21.1781 1.23695 22.6399 1.91165 23.9572C3.91968 22.1044 8.62651 20.8032 14.1044 20.8032V20.8086Z" fill="#00ACE0" />
                          <path d="M14.0991 20.8193C19.5556 20.8193 24.257 22.1098 26.2597 23.9411C26.9344 22.6292 27.3092 21.1888 27.3092 19.6734C27.3092 13.6171 21.3922 8.21955 14.0991 8.21955C6.80589 8.21955 0.894241 13.6171 0.894241 19.6734C0.894241 21.1888 1.26907 22.6345 1.93842 23.9411C3.9411 22.1098 8.63186 20.8193 14.0991 20.8193Z" fill="#11AEE1" />
                          <path d="M14.0991 20.8353C19.5449 20.8353 24.2303 22.1098 26.2276 23.925C26.8969 22.6292 27.2718 21.1995 27.2718 19.7001C27.2718 13.7028 21.3708 8.33734 14.0937 8.33734C6.8166 8.33734 0.931728 13.7082 0.931728 19.7001C0.931728 21.1995 1.30121 22.6292 1.97591 23.925C3.97323 22.1098 8.65328 20.8353 14.1044 20.8353H14.0991Z" fill="#1DB1E2" />
                          <path d="M14.0991 20.8514C19.5288 20.8514 24.2035 22.1151 26.1954 23.909C26.8648 22.6238 27.2396 21.2155 27.2396 19.7269C27.2396 13.7938 21.3548 8.45516 14.0991 8.45516C6.84337 8.45516 0.963856 13.7938 0.963856 19.7269C0.963856 21.2102 1.33333 22.6292 2.00268 23.909C3.99465 22.1151 8.65863 20.8514 14.0991 20.8514Z" fill="#26B3E3" />
                          <path d="M14.0991 20.8675C19.5127 20.8675 24.1767 22.1151 26.1633 23.8929C26.8327 22.6238 27.2022 21.2262 27.2022 19.7537C27.2022 13.8795 21.3333 8.57294 14.0991 8.57294C6.8648 8.57294 1.00135 13.8795 1.00135 19.7537C1.00135 21.2262 1.37082 22.6238 2.04017 23.8929C4.02678 22.1151 8.68006 20.8675 14.0991 20.8675Z" fill="#2EB5E5" />
                          <path d="M14.0937 20.8835C19.4913 20.8835 24.1446 22.1205 26.1258 23.8768C26.7898 22.6185 27.1647 21.237 27.1647 19.7858C27.1647 13.9759 21.3119 8.69613 14.0991 8.69613C6.88622 8.69613 1.03347 13.9706 1.03347 19.7805C1.03347 21.237 1.40295 22.6238 2.06694 23.8715C4.0482 22.1151 8.69077 20.8782 14.0937 20.8782V20.8835Z" fill="#34B7E6" />
                          <path d="M14.0937 20.8942C19.4752 20.8942 24.1125 22.1151 26.0884 23.8554C26.7523 22.6078 27.1218 21.2423 27.1218 19.8072C27.1218 14.0562 21.2851 8.80856 14.0937 8.80856C6.90228 8.80856 1.0656 14.0562 1.0656 19.8072C1.0656 21.2476 1.43508 22.6185 2.09371 23.8554C4.06962 22.1151 8.69612 20.8942 14.0884 20.8942H14.0937Z" fill="#3ABAE7" />
                          <path d="M14.0937 20.9317C19.4699 20.9317 24.1018 22.1473 26.0723 23.8715C26.7363 22.6345 27.1058 21.2798 27.1058 19.8501C27.1058 14.1365 21.2798 8.92102 14.0937 8.92102C6.90766 8.92102 1.08704 14.1365 1.08704 19.8501C1.08704 21.2798 1.45652 22.6452 2.11515 23.8715C4.0857 22.1419 8.70685 20.9317 14.0937 20.9317Z" fill="#47BCE8" />
                          <path d="M14.0937 20.9639C19.4645 20.9639 24.0857 22.1687 26.0562 23.8876C26.7202 22.6613 27.0897 21.3119 27.0897 19.8929C27.0897 14.2169 21.2691 9.03348 14.0937 9.03348C6.91835 9.03348 1.10309 14.2169 1.10309 19.8876C1.10309 21.3066 1.46721 22.6613 2.1312 23.8822C4.10175 22.1633 8.71755 20.9585 14.0937 20.9585V20.9639Z" fill="#53BEE8" />
                          <path d="M14.0937 20.996C19.4538 20.996 24.075 22.1955 26.0402 23.8983C26.6988 22.6774 27.0683 21.3387 27.0683 19.925C27.0683 14.2865 21.2584 9.12986 14.0937 9.12986C6.92907 9.12986 1.11917 14.2918 1.11917 19.9304C1.11917 21.3441 1.48329 22.6881 2.14728 23.9036C4.11247 22.2008 8.72292 21.0013 14.0937 21.0013V20.996Z" fill="#5DC0E9" />
                          <path d="M14.0937 21.0335C19.4485 21.0335 24.0589 22.2222 26.0241 23.9197C26.6827 22.7095 27.0522 21.3762 27.0522 19.9732C27.0522 14.3721 21.2477 9.24765 14.0937 9.24765C6.93977 9.24765 1.14058 14.3721 1.14058 19.9732C1.14058 21.3762 1.5047 22.7095 2.16333 23.9197C4.12853 22.2276 8.73361 21.0335 14.0937 21.0335Z" fill="#66C3EA" />
                          <path d="M14.0937 21.0656C19.4431 21.0656 24.0428 22.249 26.008 23.9304C26.6667 22.7256 27.0361 21.4029 27.0361 20.0107C27.0361 14.4471 21.2423 9.34939 14.0937 9.34939C6.94511 9.34939 1.15662 14.4525 1.15662 20.0107C1.15662 21.4029 1.52075 22.7309 2.17938 23.9304C4.13922 22.249 8.73895 21.0656 14.0937 21.0656Z" fill="#6FC5EB" />
                          <path d="M14.0937 21.0977C19.4324 21.0977 24.0321 22.2704 25.992 23.9411C26.6506 22.747 27.0201 21.4351 27.0201 20.0482C27.0201 14.5221 21.2316 9.45649 14.0991 9.45649C6.96655 9.45649 1.17271 14.5274 1.17271 20.0535C1.17271 21.4351 1.53683 22.7523 2.19546 23.9465C4.1553 22.2758 8.74433 21.1031 14.0937 21.1031V21.0977Z" fill="#77C8EC" />
                          <path d="M14.0937 21.1299C19.427 21.1299 24.0161 22.2972 25.9759 23.9572C26.6345 22.7684 26.9987 21.4672 26.9987 20.091C26.9987 14.6024 21.2155 9.56895 14.0937 9.56895C6.97189 9.56895 1.19411 14.6078 1.19411 20.0964C1.19411 21.4726 1.55823 22.7791 2.21151 23.9625C4.166 22.3026 8.75502 21.1352 14.0937 21.1352V21.1299Z" fill="#7ECAED" />
                          <path d="M14.0937 21.1673C19.4217 21.1673 24.0054 22.3239 25.9599 23.9732C26.6131 22.7952 26.9826 21.4993 26.9826 20.1339C26.9826 14.6827 21.2102 9.67602 14.0937 9.67602C6.97726 9.67602 1.21019 14.6881 1.21019 20.1339C1.21019 21.4993 1.57432 22.7952 2.2276 23.9732C4.18208 22.3239 8.76039 21.1673 14.0937 21.1673Z" fill="#85CCEE" />
                          <path d="M14.0937 21.1995C19.411 21.1995 23.9893 22.3507 25.9438 23.9893C26.5971 22.8166 26.9665 21.5315 26.9665 20.1767C26.9665 14.763 21.1995 9.78848 14.0991 9.78848C6.99866 9.78848 1.22624 14.763 1.22624 20.1767C1.22624 21.5315 1.58501 22.8219 2.24364 23.9893C4.19277 22.3507 8.77108 21.1995 14.0937 21.1995Z" fill="#8CCFEF" />
                          <path d="M14.0937 21.237C19.4056 21.237 23.9786 22.3775 25.9277 24.0054C26.581 22.8434 26.9451 21.5636 26.9451 20.2195C26.9451 14.8434 21.1888 9.89559 14.0937 9.89559C6.99868 9.89559 1.24768 14.8434 1.24768 20.2195C1.24768 21.5636 1.60645 22.8434 2.25972 24.0054C4.20885 22.3775 8.77646 21.237 14.0937 21.237Z" fill="#93D1F0" />
                          <path d="M14.0937 21.2691C19.4003 21.2691 23.9625 22.4043 25.9117 24.0161C26.5649 22.8594 26.9291 21.5957 26.9291 20.257C26.9291 14.9184 21.1781 10.0027 14.0937 10.0027C7.00938 10.0027 1.26373 14.9237 1.26373 20.257C1.26373 21.5957 1.6225 22.8648 2.27578 24.0161C4.21955 22.4043 8.78716 21.2691 14.0937 21.2691Z" fill="#99D3F1" />
                          <path d="M14.0937 21.3012C19.3949 21.3012 23.9518 22.4257 25.8956 24.0321C26.5489 22.8862 26.913 21.6278 26.913 20.2999C26.913 14.9987 21.1727 10.1151 14.0991 10.1151C7.02545 10.1151 1.2798 14.9987 1.2798 20.2999C1.2798 21.6278 1.63857 22.8862 2.29185 24.0321C4.23562 22.431 8.79252 21.3012 14.0937 21.3012Z" fill="#9FD5F2" />
                          <path d="M14.0937 21.3387C19.3842 21.3387 23.9357 22.4578 25.8742 24.0482C26.5221 22.9076 26.8916 21.66 26.8916 20.3427C26.8916 15.079 21.1566 10.2222 14.0937 10.2222C7.03079 10.2222 1.29585 15.079 1.29585 20.3427C1.29585 21.66 1.65462 22.913 2.30254 24.0482C4.24096 22.4578 8.7925 21.3387 14.0884 21.3387H14.0937Z" fill="#A5D8F3" />
                          <path d="M14.0937 21.3708C19.3789 21.3708 23.9251 22.4793 25.8581 24.0643C26.5061 22.9344 26.8702 21.6921 26.8702 20.3855C26.8702 15.1593 21.1459 10.3347 14.0884 10.3347C7.03082 10.3347 1.3173 15.1593 1.3173 20.3802C1.3173 21.6868 1.67606 22.9291 2.32399 24.0589C4.26241 22.4793 8.80859 21.3655 14.0937 21.3655V21.3708Z" fill="#ABDAF3" />
                          <path d="M14.0937 21.403C19.3735 21.403 23.909 22.506 25.842 24.075C26.49 22.9505 26.8541 21.7189 26.8541 20.423C26.8541 15.2343 21.1352 10.4364 14.0937 10.4364C7.05221 10.4364 1.33334 15.2343 1.33334 20.423C1.33334 21.7242 1.6921 22.9558 2.34003 24.075C4.27309 22.506 8.81393 21.403 14.0937 21.403Z" fill="#B1DCF4" />
                          <path d="M14.0937 21.4404C19.3628 21.4404 23.8929 22.5328 25.826 24.091C26.4739 22.9772 26.838 21.7563 26.838 20.4659C26.838 15.3146 21.1245 10.5488 14.0937 10.5488C7.06294 10.5488 1.34941 15.3146 1.34941 20.4659C1.34941 21.7563 1.70283 22.9826 2.35611 24.091C4.28917 22.5328 8.82465 21.4404 14.0937 21.4404Z" fill="#B6DFF5" />
                          <path d="M14.0937 21.4726C19.3574 21.4726 23.8822 22.5596 25.8099 24.1071C26.4525 22.9987 26.8166 21.7885 26.8166 20.5087C26.8166 15.3949 21.1138 10.6613 14.0884 10.6613C7.06292 10.6613 1.37082 15.3949 1.37082 20.5033C1.37082 21.7831 1.72423 22.9987 2.37216 24.1017C4.30522 22.5542 8.82999 21.4672 14.0937 21.4672V21.4726Z" fill="#BCE1F6" />
                          <path d="M14.0937 21.5047C19.3521 21.5047 23.8662 22.581 25.7939 24.1178C26.4364 23.0201 26.8006 21.8153 26.8006 20.5462C26.8006 15.4699 21.1031 10.7631 14.0937 10.7631C7.08436 10.7631 1.3869 15.4752 1.3869 20.5462C1.3869 21.8153 1.74032 23.0201 2.38824 24.1178C4.31595 22.581 8.83536 21.5047 14.0937 21.5047Z" fill="#C1E3F7" />
                          <path d="M14.0937 21.5368C19.3414 21.5368 23.8554 22.6078 25.7778 24.1285C26.4204 23.0362 26.7845 21.842 26.7845 20.5837C26.7845 15.5449 21.0977 10.8702 14.0937 10.8702C7.0897 10.8702 1.40295 15.5502 1.40295 20.589C1.40295 21.8528 1.75636 23.0469 2.40429 24.1339C4.32665 22.6078 8.84606 21.5422 14.0937 21.5422V21.5368Z" fill="#C7E6F8" />
                          <path d="M14.0937 21.5743C19.336 21.5743 23.8394 22.6399 25.7617 24.1499C26.4043 23.0683 26.7684 21.8795 26.7684 20.6318C26.7684 15.6305 21.087 10.9826 14.0937 10.9826C7.1004 10.9826 1.42436 15.6305 1.42436 20.6265C1.42436 21.8795 1.77777 23.0683 2.42034 24.1446C4.3427 22.6345 8.8514 21.5689 14.0937 21.5689V21.5743Z" fill="#CCE8F8" />
                          <path d="M14.0937 21.6064C19.3307 21.6064 23.8287 22.6613 25.7457 24.1606C26.3882 23.0897 26.747 21.9116 26.747 20.6693C26.747 15.7055 21.0763 11.0897 14.0937 11.0897C7.11112 11.0897 1.44044 15.7108 1.44044 20.6693C1.44044 21.9116 1.79385 23.0897 2.43642 24.1606C4.35342 22.6613 8.86212 21.6064 14.0937 21.6064Z" fill="#D1EAF9" />
                          <path d="M14.0937 21.6386C19.3199 21.6386 23.8126 22.6881 25.7296 24.1767C26.3668 23.1111 26.7309 21.9438 26.7309 20.7122C26.7309 15.7858 21.0656 11.2021 14.0937 11.2021C7.12181 11.2021 1.45649 15.7858 1.45649 20.7122C1.45649 21.9491 1.8099 23.1165 2.45247 24.1767C4.36947 22.6881 8.86746 21.6386 14.0937 21.6386Z" fill="#D5ECFA" />
                          <path d="M14.0937 21.676C19.3146 21.676 23.7965 22.7149 25.7135 24.1928C26.3507 23.1379 26.7149 21.9759 26.7149 20.755C26.7149 15.8661 21.0602 11.3092 14.0937 11.3092C7.12718 11.3092 1.47256 15.8661 1.47256 20.7497C1.47256 21.9759 1.82062 23.1325 2.46319 24.1874C4.38019 22.7095 8.86748 21.6707 14.0884 21.6707L14.0937 21.676Z" fill="#DAEEFA" />
                          <path d="M14.0937 21.7082C19.3092 21.7082 23.7858 22.7363 25.6975 24.2035C26.3347 23.1539 26.6988 22.0027 26.6988 20.7925C26.6988 15.9411 21.0495 11.4163 14.0991 11.4163C7.14859 11.4163 1.49397 15.9464 1.49397 20.7925C1.49397 22.008 1.84203 23.1593 2.4846 24.2035C4.39625 22.7363 8.88353 21.7082 14.0937 21.7082Z" fill="#DFF0FB" />
                          <path d="M14.0937 21.7403C19.3039 21.7403 23.7698 22.763 25.6814 24.2195C26.3186 23.1807 26.6774 22.0348 26.6774 20.8353C26.6774 16.0214 21.0335 11.5234 14.0937 11.5234C7.15396 11.5234 1.51005 16.0214 1.51005 20.8353C1.51005 22.0402 1.85811 23.1807 2.50068 24.2195C4.41233 22.763 8.8889 21.7403 14.0937 21.7403Z" fill="#E4F3FC" />
                          <path d="M14.0937 21.7778C19.2932 21.7778 23.759 22.7898 25.6653 24.2356C26.3025 23.2021 26.6613 22.0723 26.6613 20.8728C26.6613 16.0964 21.0281 11.6305 14.0937 11.6305C7.1593 11.6305 1.5261 16.1017 1.5261 20.8728C1.5261 22.0723 1.87416 23.2021 2.51673 24.2356C4.42303 22.7898 8.8996 21.7778 14.0937 21.7778Z" fill="#E8F5FD" />
                          <path d="M14.0937 21.8099C19.2878 21.8099 23.743 22.8166 25.6493 24.2517C26.2811 23.2236 26.6453 22.1044 26.6453 20.9157C26.6453 16.1767 21.0174 11.743 14.0991 11.743C7.18074 11.743 1.54754 16.1821 1.54754 20.9157C1.54754 22.1044 1.8956 23.2236 2.53281 24.2517C4.43911 22.8166 8.90497 21.8099 14.0937 21.8099Z" fill="#EDF7FD" />
                          <path d="M14.0937 21.842C19.2825 21.842 23.7323 22.8434 25.6278 24.2624C26.2597 23.245 26.6185 22.1312 26.6185 20.9532C26.6185 16.2517 21.0013 11.8447 14.0884 11.8447C7.17537 11.8447 1.56359 16.257 1.56359 20.9585C1.56359 22.1366 1.91165 23.2503 2.54887 24.2678C4.4498 22.8434 8.91031 21.8474 14.0937 21.8474V21.842Z" fill="#F2F9FE" />
                          <path d="M14.0937 21.8795C19.2718 21.8795 23.7162 22.8701 25.6118 24.2784C26.2437 23.2717 26.6024 22.1633 26.6024 20.996C26.6024 16.332 20.9906 11.9572 14.0884 11.9572C7.18609 11.9572 1.57967 16.3373 1.57967 20.996C1.57967 22.1687 1.92773 23.2664 2.56494 24.2784C4.46588 22.8701 8.92103 21.8795 14.0937 21.8795Z" fill="#F6FBFE" />
                          <path d="M14.0937 21.9116C19.2664 21.9116 23.7055 22.8969 25.5957 24.2945C26.2276 23.2932 26.5863 22.2008 26.5863 21.0388C26.5863 16.4123 20.9853 12.0643 14.0937 12.0643C7.20215 12.0643 1.60107 16.4177 1.60107 21.0388C1.60107 22.2008 1.94378 23.2932 2.58099 24.2945C4.47658 22.8969 8.92638 21.9116 14.0937 21.9116Z" fill="#FBFDFF" />
                          <path d="M14.0937 21.9438C19.2611 21.9438 23.6894 22.9183 25.5797 24.3052C26.2115 23.3146 26.5703 22.2276 26.5703 21.0763C26.5703 16.4873 20.9746 12.1714 14.0937 12.1714C7.21287 12.1714 1.61716 16.4926 1.61716 21.0817C1.61716 22.2329 1.95986 23.3146 2.59708 24.3106C4.49266 22.9237 8.9371 21.9491 14.0991 21.9491L14.0937 21.9438Z" fill="white" />
                        </g>
                        <path d="M14.0937 17.3601C9.57431 17.3601 5.38154 18.1205 1.91166 19.4164C3.98931 24.0803 8.66401 27.3253 14.1044 27.3253C19.5449 27.3253 24.1928 24.0803 26.2758 19.4164C22.8166 18.1205 18.6238 17.3601 14.0991 17.3601H14.0937Z" fill="#007BC4" />
                        <path d="M75.6305 17.8099H78.5167C78.7684 17.8367 78.9772 17.9224 79.1539 18.2008C79.2878 18.4257 79.2664 19.1861 79.2664 19.1861V24.3856C79.3092 24.8728 79.5395 25.7189 81.328 25.7939H94.5756V23.9625H83.2717C82.5649 24 82.49 23.652 82.4739 23.2182V18.8648C82.4739 18.4364 82.415 18.0455 82.0402 17.8099H96.0161V15.9893H75.6198V17.8099H75.6305Z" fill="#035995" />
                        <path d="M86.3186 14.0937C90.3454 14.0937 93.6011 11.8983 93.6011 8.64258C93.6011 5.38689 90.3454 3.20215 86.3186 3.20215C82.2918 3.20215 79.0415 5.39224 79.0415 8.64258C79.0415 11.8929 82.2972 14.0937 86.3186 14.0937ZM86.3186 5.05489C88.5194 5.05489 90.3133 6.44713 90.3133 8.63722C90.3133 10.8273 88.5194 12.2356 86.3186 12.2356C84.1178 12.2356 82.3347 10.8434 82.3347 8.63722C82.3347 6.43107 84.1232 5.05489 86.3186 5.05489Z" fill="#035995" />
                        <path d="M31.8929 18.5542H40.573V26.3936H43.909V18.5542H52.5997V16.6533H31.8929V18.5542Z" fill="#035995" />
                        <path d="M42.2436 14.6131C46.4739 14.6131 49.8902 12.3052 49.8902 8.88889C49.8902 5.47255 46.4685 3.17001 42.2436 3.17001C38.0187 3.17001 34.5971 5.47791 34.5971 8.88889C34.5971 12.2999 38.0187 14.6131 42.2436 14.6131ZM42.2436 5.12449C44.5569 5.12449 46.4364 6.58634 46.4364 8.89424C46.4364 11.2021 44.5569 12.664 42.2436 12.664C39.9304 12.664 38.0562 11.2021 38.0562 8.89424C38.0562 6.58634 39.9304 5.12449 42.2436 5.12449Z" fill="#035995" />
                        <path d="M101.617 4.31058V4.97457H97.0388V6.79518H99.2128C98.0669 7.63053 97.3387 8.88889 97.3387 10.4096C97.3387 13.2584 99.8714 15.1754 103.009 15.1754C106.147 15.1754 108.669 13.2584 108.669 10.4096C108.669 8.88889 107.946 7.63053 106.79 6.79518H108.819V4.97457H104.477V3.94646C104.477 3.44311 104.321 3.17002 103.625 3.17002H101.349C101.349 3.17002 101.612 3.33066 101.612 4.31058H101.617ZM100.262 10.4043C100.262 8.58367 101.489 7.42705 103.009 7.42705C104.53 7.42705 105.746 8.58367 105.746 10.4043C105.746 12.2249 104.519 13.3869 103.009 13.3869C101.499 13.3869 100.262 12.2303 100.262 10.4043Z" fill="#035995" />
                        <path d="M109.258 15.8822C105.376 15.8822 102.228 17.9759 102.228 21.0817C102.228 24.1874 105.376 26.2758 109.258 26.2758C113.141 26.2758 116.284 24.1821 116.284 21.0817C116.284 17.9813 113.13 15.8822 109.258 15.8822ZM109.258 24.4766C107.17 24.4766 105.483 23.1593 105.483 21.0817C105.483 19.004 107.17 17.6975 109.258 17.6975C111.347 17.6975 113.012 19.0094 113.012 21.0817C113.012 23.1539 111.331 24.4766 109.258 24.4766Z" fill="#035995" />
                        <path d="M113.697 5.37615V7.99463H112.482V4.29985C112.482 3.81256 112.321 3.55554 111.593 3.55554H109.58C109.58 3.55554 109.853 3.7965 109.853 5.38151V14.8701H112.482V9.87415H113.697V14.8701H116.332V4.29985C116.332 3.81256 116.171 3.55554 115.438 3.55554H113.424C113.424 3.55554 113.703 3.81792 113.703 5.38151L113.697 5.37615Z" fill="#035995" />
                        <path d="M71.4003 3.55557H69.0656C69.0656 3.55557 69.3387 3.76976 69.3387 5.40296V16.3802C69.3119 18.067 66.7042 18.0295 66.7042 18.0295H59.0415C58.324 18.0723 58.2597 17.7296 58.2383 17.2905V12.6694H64.8514C65.5797 12.6694 65.7457 12.3963 65.7457 11.9036V4.99064C65.7457 4.49801 65.5797 4.24098 64.8407 4.24098H54.6292V6.07766H62.49V10.8273H54.6988C54.6988 10.8273 54.9773 11.1914 54.9773 12.1446V18.4578C55.0094 18.9505 55.2504 19.8019 57.0388 19.8715H66.0027C66.0027 19.8715 68.6265 19.9465 69.3387 19.2504V25.7885H72.4605V4.31059C72.4605 3.81795 72.1285 3.55022 71.3949 3.55022L71.4003 3.55557Z" fill="#035995" />
                      </g>
                      <defs>
                        <clipPath id="clip0_4026_1287">
                          <rect width="116.327" height="28" fill="white" />
                        </clipPath>
                      </defs>
                    </svg>

                  </div>
                )}
              </div>
              <div className='h-[20px] flex gap-[16px]'>
                <UIButton2
                  className={navigateActions?.left.available ? 'ic-system-20-gnb-arrow-left-black cursor-pointer' : 'ic-system-20-gnb-arrow-left-gray'}
                  disabled={!navigateActions?.left.available}
                  onClick={navigateActions?.left.onClick}
                />
                <UIButton2
                  className={navigateActions?.right.available ? 'ic-system-20-gnb-arrow-right-black cursor-pointer' : 'ic-system-20-gnb-arrow-right-gray'}
                  disabled={!navigateActions?.right.available}
                  onClick={navigateActions?.right.onClick}
                />
              </div>
            </div>
            <div>
              <div className='flex items-center gap-[8px] pl-[48px]'>
                {locations.map((location, index) => (
                  <Fragment key={index}>
                    <span key={index} className='font-normal text-base leading-6 tracking-[-0.05%] text-[#8B95A9]'>
                      {location}
                    </span>
                    {index !== locations.length - 1 && <UIIcon2 className='ic-system-24-header-history-arr-right' />}
                  </Fragment>
                ))}
              </div>
            </div>
          </div>

          {/* 오른쪽 영역: 사용자 정보, 알림 등 */}
          <div className='flex items-center absolute right-[24px] gap-3'>
            {title && (
              <UIButton2 className='text-[11px] font-semibold bg-blue-900 text-white p-2 rounded-md my-auto' disabled>
                {title}
              </UIButton2>
            )}
            {/* 프로젝트박스 */}
            {/* [251106_퍼블수정] : UIProjectBox 컴포넌트   */}
            <UIProjectBox {...projectBoxProps} />
            <div className='flex items-center gap-[16px]'>
              {/* IDE 버튼 */}
              <Button
                auth={AUTH_KEY.HOME.IDE_MOVE}
                className='btn-option-bgfull text-body-2'
                onClick={e => {
                  e.stopPropagation();
                  // IDE 팝업이 열릴 때 사용자 팝업 닫기
                  if (!isIdePopupOpen) {
                    userPopupProps?.onClose?.();
                  }
                  setIsIdePopupOpen(prev => !prev);
                }}
              >
                IDE 이동
              </Button>
              {/* 알림 */}
              <UIButton2 className={unreadAlarmCount > 0 ? 'ic-gnb-32-alarm-on' : 'ic-gnb-32-alarm'} onClick={onAlarmClick} />
              {rightContent || (
                <button
                  className='w-8 h-8 bg-[#0046FF] text-white text-sm rounded-full hover:bg-blue-700 transition-colors flex items-center justify-center cursor-pointer'
                  onClick={e => {
                    e.stopPropagation();
                    // 프로필 클릭 시 IDE 팝업 닫기
                    setIsIdePopupOpen(false);
                    onProfileClick?.();
                  }}
                >
                  {name}
                </button>
              )}
            </div>
          </div>
        </div>
      </header>
      {userPopupProps && <UIUserPopup {...userPopupProps} />}

      {/* IDE 팝업 */}
      <UIIDEPopup isOpen={isIdePopupOpen} onClose={() => setIsIdePopupOpen(false)} onMoveClick={handleMoveClick} />

      {/* IDE 이동 팝업 */}
      {isIdeMovePopupOpen && <IdeMovePopup isOpen={isIdeMovePopupOpen} onClose={() => setIsIdeMovePopupOpen(false)} onAddIde={() => setIsCreateWizardOpen(true)} />}

      {/* IDE 생성 위자드 */}
      <IdeCreateWizard isOpen={isCreateWizardOpen} onClose={() => setIsCreateWizardOpen(false)} />

      {/* [251224_퍼블수정] : 홈 메인 가이드 팝업 - /home/dashboard 경로에서만 표시 */}
      {!isProd && location.pathname === '/home/dashboard' && <UIHomeGuidePopup isOpen={isGuideOpen} onClose={handleCloseGuide} />}
    </>
  );
}
