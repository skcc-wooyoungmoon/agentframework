# ì—ëŸ¬ì²˜ë¦¬ ê°œë°œê°€ì´ë“œ

## ğŸ“‹ ëª©ì°¨

### 1. ê°œìš”
- [1.1 ì—ëŸ¬ì²˜ë¦¬ì˜ ì¤‘ìš”ì„±](#11-ì—ëŸ¬ì²˜ë¦¬ì˜-ì¤‘ìš”ì„±)
- [1.2 Spring Boot ì—ëŸ¬ì²˜ë¦¬ ì•„í‚¤í…ì²˜](#12-spring-boot-ì—ëŸ¬ì²˜ë¦¬-ì•„í‚¤í…ì²˜)
- [1.3 í”„ë¡œì íŠ¸ ì—ëŸ¬ì²˜ë¦¬ ë°©í–¥ì„±](#13-í”„ë¡œì íŠ¸-ì—ëŸ¬ì²˜ë¦¬-ë°©í–¥ì„±)
- [1.4 ê°€ì´ë“œ í™œìš©ë²•](#14-ê°€ì´ë“œ-í™œìš©ë²•)

### 2. ì—ëŸ¬ì²˜ë¦¬ ê¸°ë³¸ ê°œë…
- [2.1 Exception vs Error](#21-exception-vs-error)
- [2.2 Checked vs Unchecked Exception](#22-checked-vs-unchecked-exception)
- [2.3 Spring Boot ì—ëŸ¬ì²˜ë¦¬ ë©”ì»¤ë‹ˆì¦˜](#23-spring-boot-ì—ëŸ¬ì²˜ë¦¬-ë©”ì»¤ë‹ˆì¦˜)
- [2.4 HTTP ìƒíƒœ ì½”ë“œì™€ ì—ëŸ¬ì˜ ê´€ê³„](#24-http-ìƒíƒœ-ì½”ë“œì™€-ì—ëŸ¬ì˜-ê´€ê³„)

### 3. ì»¤ìŠ¤í…€ ì˜ˆì™¸ ì„¤ê³„
- [3.1 ì˜ˆì™¸ ê³„ì¸µêµ¬ì¡° ì„¤ê³„](#31-ì˜ˆì™¸-ê³„ì¸µêµ¬ì¡°-ì„¤ê³„)
- [3.2 BaseException ë° í•˜ìœ„ ì˜ˆì™¸ í´ë˜ìŠ¤](#32-baseexception-ë°-í•˜ìœ„-ì˜ˆì™¸-í´ë˜ìŠ¤)
- [3.3 ErrorCode Enum ì„¤ê³„ íŒ¨í„´](#33-errorcode-enum-ì„¤ê³„-íŒ¨í„´)
- [3.4 ë„ë©”ì¸ë³„ ì˜ˆì™¸ ë¶„ë¥˜ ë° ëª…ëª… ê·œì¹™](#34-ë„ë©”ì¸ë³„-ì˜ˆì™¸-ë¶„ë¥˜-ë°-ëª…ëª…-ê·œì¹™)

### 4. ErrorCode í‘œì¤€í™”
- [4.1 ErrorCode êµ¬ì¡° ë° í•„ë“œ ì •ì˜](#41-errorcode-êµ¬ì¡°-ë°-í•„ë“œ-ì •ì˜)
- [4.2 ë„ë©”ì¸ë³„ ì—ëŸ¬ ì½”ë“œ ì²´ê³„](#42-ë„ë©”ì¸ë³„-ì—ëŸ¬-ì½”ë“œ-ì²´ê³„)
- [4.3 HTTP ìƒíƒœì™€ ì—ëŸ¬ ì½”ë“œ ë§¤í•‘](#43-http-ìƒíƒœì™€-ì—ëŸ¬-ì½”ë“œ-ë§¤í•‘)
- [4.4 ë‹¤êµ­ì–´ ì§€ì›ì„ ìœ„í•œ ë©”ì‹œì§€ ì„¤ê³„](#44-ë‹¤êµ­ì–´-ì§€ì›ì„-ìœ„í•œ-ë©”ì‹œì§€-ì„¤ê³„)

### 5. GlobalExceptionHandler êµ¬í˜„
- [5.1 @ControllerAdvice ê¸°ë³¸ êµ¬ì¡°](#51-controlleradvice-ê¸°ë³¸-êµ¬ì¡°)
- [5.2 ì˜ˆì™¸ íƒ€ì…ë³„ í•¸ë“¤ë§ ë©”ì„œë“œ](#52-ì˜ˆì™¸-íƒ€ì…ë³„-í•¸ë“¤ë§-ë©”ì„œë“œ)
- [5.3 Validation ì˜ˆì™¸ ì²˜ë¦¬](#53-validation-ì˜ˆì™¸-ì²˜ë¦¬)
- [5.4 Security ì˜ˆì™¸ ì²˜ë¦¬](#54-security-ì˜ˆì™¸-ì²˜ë¦¬)
- [5.5 External API ì˜ˆì™¸ ì²˜ë¦¬](#55-external-api-ì˜ˆì™¸-ì²˜ë¦¬)
- [5.6 Database ì˜ˆì™¸ ì²˜ë¦¬](#56-database-ì˜ˆì™¸-ì²˜ë¦¬)

### 6. AxResponseEntity í™œìš©
- [6.1 í†µí•© ì‘ë‹µ í˜•ì‹ ì„¤ê³„](#61-í†µí•©-ì‘ë‹µ-í˜•ì‹-ì„¤ê³„)
- [6.2 ì„±ê³µ ì‘ë‹µ í‘œì¤€ ë©”ì„œë“œ](#62-ì„±ê³µ-ì‘ë‹µ-í‘œì¤€-ë©”ì„œë“œ)
- [6.3 ì‹¤íŒ¨ ì‘ë‹µ í‘œì¤€ ë©”ì„œë“œ](#63-ì‹¤íŒ¨-ì‘ë‹µ-í‘œì¤€-ë©”ì„œë“œ)
- [6.4 í˜ì´ì§• ì‘ë‹µê³¼ ì—ëŸ¬ì²˜ë¦¬](#64-í˜ì´ì§•-ì‘ë‹µê³¼-ì—ëŸ¬ì²˜ë¦¬)
- [6.5 ì»¤ìŠ¤í…€ ë©”ì‹œì§€ì™€ Detail í™œìš©](#65-ì»¤ìŠ¤í…€-ë©”ì‹œì§€ì™€-detail-í™œìš©)

### 7. ê³„ì¸µë³„ ì—ëŸ¬ì²˜ë¦¬ ì „ëµ
- [7.1 Controller ê³„ì¸µ ì—ëŸ¬ì²˜ë¦¬](#71-controller-ê³„ì¸µ-ì—ëŸ¬ì²˜ë¦¬)
- [7.2 Service ê³„ì¸µ ì—ëŸ¬ì²˜ë¦¬ ë° ì˜ˆì™¸ ë³€í™˜](#72-service-ê³„ì¸µ-ì—ëŸ¬ì²˜ë¦¬-ë°-ì˜ˆì™¸-ë³€í™˜)
- [7.3 Repository ê³„ì¸µ ì—ëŸ¬ì²˜ë¦¬](#73-repository-ê³„ì¸µ-ì—ëŸ¬ì²˜ë¦¬)
- [7.4 External Client ê³„ì¸µ ì—ëŸ¬ì²˜ë¦¬](#74-external-client-ê³„ì¸µ-ì—ëŸ¬ì²˜ë¦¬)

### 8. ë„ë©”ì¸ë³„ ì—ëŸ¬ì²˜ë¦¬ íŒ¨í„´
- [8.1 ì‚¬ìš©ì ê´€ë¦¬ ë„ë©”ì¸ ì—ëŸ¬ì²˜ë¦¬](#81-ì‚¬ìš©ì-ê´€ë¦¬-ë„ë©”ì¸-ì—ëŸ¬ì²˜ë¦¬)
- [8.2 ì¸ì¦/ì¸ê°€ ì—ëŸ¬ì²˜ë¦¬](#82-ì¸ì¦ì¸ê°€-ì—ëŸ¬ì²˜ë¦¬)
- [8.3 íŒŒì¼ ì—…ë¡œë“œ/ë‹¤ìš´ë¡œë“œ ì—ëŸ¬ì²˜ë¦¬](#83-íŒŒì¼-ì—…ë¡œë“œë‹¤ìš´ë¡œë“œ-ì—ëŸ¬ì²˜ë¦¬)
- [8.4 ì™¸ë¶€ API ì—°ë™ ì—ëŸ¬ì²˜ë¦¬](#84-ì™¸ë¶€-api-ì—°ë™-ì—ëŸ¬ì²˜ë¦¬)

### 9. ì…ë ¥ê°’ ê²€ì¦ê³¼ ì—ëŸ¬ì²˜ë¦¬
- [9.1 Jakarta Validation í™œìš©](#91-jakarta-validation-í™œìš©)
- [9.2 ì»¤ìŠ¤í…€ Validator êµ¬í˜„](#92-ì»¤ìŠ¤í…€-validator-êµ¬í˜„)
- [9.3 Request DTO ê²€ì¦ ì—ëŸ¬ì²˜ë¦¬](#93-request-dto-ê²€ì¦-ì—ëŸ¬ì²˜ë¦¬)
- [9.4 PathVariable, RequestParam ê²€ì¦](#94-pathvariable-requestparam-ê²€ì¦)

### 10. ë¡œê¹…ê³¼ ëª¨ë‹ˆí„°ë§
- [10.1 ì—ëŸ¬ ë¡œê¹… ì „ëµ ë° ë ˆë²¨ ì„¤ì •](#101-ì—ëŸ¬-ë¡œê¹…-ì „ëµ-ë°-ë ˆë²¨-ì„¤ì •)
- [10.2 êµ¬ì¡°í™”ëœ ë¡œê·¸ í¬ë§·](#102-êµ¬ì¡°í™”ëœ-ë¡œê·¸-í¬ë§·)
- [10.3 ì—ëŸ¬ ì¶”ì ì„ ìœ„í•œ Request ID](#103-ì—ëŸ¬-ì¶”ì ì„-ìœ„í•œ-request-id)
- [10.4 ë¯¼ê°ì •ë³´ ë¡œê¹… ë°©ì§€](#104-ë¯¼ê°ì •ë³´-ë¡œê¹…-ë°©ì§€)

### 11. ì™¸ë¶€ API ì—ëŸ¬ì²˜ë¦¬
- [11.1 Feign Client ì—ëŸ¬ì²˜ë¦¬](#111-feign-client-ì—ëŸ¬ì²˜ë¦¬)
- [11.2 ErrorDecoder êµ¬í˜„](#112-errordecoder-êµ¬í˜„)
- [11.3 ì¬ì‹œë„ ì •ì±…ê³¼ Circuit Breaker](#113-ì¬ì‹œë„-ì •ì±…ê³¼-circuit-breaker)
- [11.4 íƒ€ì„ì•„ì›ƒ ë° ë„¤íŠ¸ì›Œí¬ ì—ëŸ¬ ì²˜ë¦¬](#114-íƒ€ì„ì•„ì›ƒ-ë°-ë„¤íŠ¸ì›Œí¬-ì—ëŸ¬-ì²˜ë¦¬)

### 12. ë³´ì•ˆ ê´€ë ¨ ì—ëŸ¬ì²˜ë¦¬
- [12.1 ì¸ì¦ ì‹¤íŒ¨ ì²˜ë¦¬](#121-ì¸ì¦-ì‹¤íŒ¨-ì²˜ë¦¬)
- [12.2 ê¶Œí•œ ë¶€ì¡± ì²˜ë¦¬](#122-ê¶Œí•œ-ë¶€ì¡±-ì²˜ë¦¬)
- [12.3 JWT í† í° ê´€ë ¨ ì—ëŸ¬ì²˜ë¦¬](#123-jwt-í† í°-ê´€ë ¨-ì—ëŸ¬ì²˜ë¦¬)
- [12.4 ë³´ì•ˆ ì •ë³´ ë…¸ì¶œ ë°©ì§€](#124-ë³´ì•ˆ-ì •ë³´-ë…¸ì¶œ-ë°©ì§€)

### 13. ì„±ëŠ¥ê³¼ ì—ëŸ¬ì²˜ë¦¬
- [13.1 ì—ëŸ¬ì²˜ë¦¬ê°€ ì„±ëŠ¥ì— ë¯¸ì¹˜ëŠ” ì˜í–¥](#131-ì—ëŸ¬ì²˜ë¦¬ê°€-ì„±ëŠ¥ì—-ë¯¸ì¹˜ëŠ”-ì˜í–¥)
- [13.2 ë©”ëª¨ë¦¬ íš¨ìœ¨ì ì¸ ì˜ˆì™¸ ì²˜ë¦¬](#132-ë©”ëª¨ë¦¬-íš¨ìœ¨ì ì¸-ì˜ˆì™¸-ì²˜ë¦¬)
- [13.3 ëŒ€ìš©ëŸ‰ ì²˜ë¦¬ì‹œ ì—ëŸ¬ í•¸ë“¤ë§](#133-ëŒ€ìš©ëŸ‰-ì²˜ë¦¬ì‹œ-ì—ëŸ¬-í•¸ë“¤ë§)
- [13.4 ë¹„ë™ê¸° ì²˜ë¦¬ì—ì„œì˜ ì—ëŸ¬ì²˜ë¦¬](#134-ë¹„ë™ê¸°-ì²˜ë¦¬ì—ì„œì˜-ì—ëŸ¬ì²˜ë¦¬)

### 14. í…ŒìŠ¤íŠ¸ ì „ëµ
- [14.1 ì˜ˆì™¸ ìƒí™© ë‹¨ìœ„ í…ŒìŠ¤íŠ¸](#141-ì˜ˆì™¸-ìƒí™©-ë‹¨ìœ„-í…ŒìŠ¤íŠ¸)
- [14.2 í†µí•© í…ŒìŠ¤íŠ¸ì—ì„œì˜ ì—ëŸ¬ ì‹œë‚˜ë¦¬ì˜¤](#142-í†µí•©-í…ŒìŠ¤íŠ¸ì—ì„œì˜-ì—ëŸ¬-ì‹œë‚˜ë¦¬ì˜¤)
- [14.3 MockMvcë¥¼ í™œìš©í•œ ì—ëŸ¬ ì‘ë‹µ í…ŒìŠ¤íŠ¸](#143-mockmvcë¥¼-í™œìš©í•œ-ì—ëŸ¬-ì‘ë‹µ-í…ŒìŠ¤íŠ¸)
- [14.4 WireMockì„ í™œìš©í•œ ì™¸ë¶€ API ì—ëŸ¬ í…ŒìŠ¤íŠ¸](#144-wiremockì„-í™œìš©í•œ-ì™¸ë¶€-api-ì—ëŸ¬-í…ŒìŠ¤íŠ¸)

### 15. í´ë¼ì´ì–¸íŠ¸ ì¹œí™”ì  ì—ëŸ¬ ì„¤ê³„
- [15.1 ì‚¬ìš©ì ì¹œí™”ì  ì—ëŸ¬ ë©”ì‹œì§€](#151-ì‚¬ìš©ì-ì¹œí™”ì -ì—ëŸ¬-ë©”ì‹œì§€)
- [15.2 í´ë¼ì´ì–¸íŠ¸ ê°œë°œìë¥¼ ìœ„í•œ ì—ëŸ¬ ì •ë³´](#152-í´ë¼ì´ì–¸íŠ¸-ê°œë°œìë¥¼-ìœ„í•œ-ì—ëŸ¬-ì •ë³´)
- [15.3 Field Error ìƒì„¸ ì •ë³´ ì œê³µ](#153-field-error-ìƒì„¸-ì •ë³´-ì œê³µ)
- [15.4 Action Typeì„ í†µí•œ UI ê°€ì´ë“œ](#154-action-typeì„-í†µí•œ-ui-ê°€ì´ë“œ)

### 16. í™˜ê²½ë³„ ì—ëŸ¬ì²˜ë¦¬ ì„¤ì •
- [16.1 ê°œë°œ/ìŠ¤í…Œì´ì§•/ìš´ì˜ í™˜ê²½ë³„ ì—ëŸ¬ ì²˜ë¦¬](#161-ê°œë°œìŠ¤í…Œì´ì§•ìš´ì˜-í™˜ê²½ë³„-ì—ëŸ¬-ì²˜ë¦¬)
- [16.2 ë””ë²„ê·¸ ì •ë³´ ë…¸ì¶œ ì œì–´](#162-ë””ë²„ê·¸-ì •ë³´-ë…¸ì¶œ-ì œì–´)
- [16.3 í™˜ê²½ë³„ ë¡œê·¸ ë ˆë²¨ ì„¤ì •](#163-í™˜ê²½ë³„-ë¡œê·¸-ë ˆë²¨-ì„¤ì •)
- [16.4 í”„ë¡œíŒŒì¼ë³„ ì—ëŸ¬ ì‘ë‹µ ì»¤ìŠ¤í„°ë§ˆì´ì§•](#164-í”„ë¡œíŒŒì¼ë³„-ì—ëŸ¬-ì‘ë‹µ-ì»¤ìŠ¤í„°ë§ˆì´ì§•)

### 17. API ë¬¸ì„œí™”
- [17.1 OpenAPI 3.0ì„ í™œìš©í•œ ì—ëŸ¬ ì‘ë‹µ ë¬¸ì„œí™”](#171-openapi-30ì„-í™œìš©í•œ-ì—ëŸ¬-ì‘ë‹µ-ë¬¸ì„œí™”)
- [17.2 @ApiResponseë¥¼ í†µí•œ ì—ëŸ¬ ì‹œë‚˜ë¦¬ì˜¤ ëª…ì„¸](#172-apiresponseë¥¼-í†µí•œ-ì—ëŸ¬-ì‹œë‚˜ë¦¬ì˜¤-ëª…ì„¸)
- [17.3 ì—ëŸ¬ ì½”ë“œë³„ ìƒì„¸ ì„¤ëª… ë¬¸ì„œí™”](#173-ì—ëŸ¬-ì½”ë“œë³„-ìƒì„¸-ì„¤ëª…-ë¬¸ì„œí™”)
- [17.4 í´ë¼ì´ì–¸íŠ¸ ê°œë°œìë¥¼ ìœ„í•œ ì—ëŸ¬ ì²˜ë¦¬ ê°€ì´ë“œ](#174-í´ë¼ì´ì–¸íŠ¸-ê°œë°œìë¥¼-ìœ„í•œ-ì—ëŸ¬-ì²˜ë¦¬-ê°€ì´ë“œ)

### 18. ì‹¤ë¬´ ì ìš© ê°€ì´ë“œ
- [18.1 ê¸°ì¡´ í”„ë¡œì íŠ¸ ë§ˆì´ê·¸ë ˆì´ì…˜ ì „ëµ](#181-ê¸°ì¡´-í”„ë¡œì íŠ¸-ë§ˆì´ê·¸ë ˆì´ì…˜-ì „ëµ)
- [18.2 íŒ€ ê°œë°œ ì‹œ ì—ëŸ¬ì²˜ë¦¬ ì»¨ë²¤ì…˜](#182-íŒ€-ê°œë°œ-ì‹œ-ì—ëŸ¬ì²˜ë¦¬-ì»¨ë²¤ì…˜)
- [18.3 ì½”ë“œ ë¦¬ë·° ì²´í¬ë¦¬ìŠ¤íŠ¸](#183-ì½”ë“œ-ë¦¬ë·°-ì²´í¬ë¦¬ìŠ¤íŠ¸)
- [18.4 ë°°í¬ ì „ ì—ëŸ¬ì²˜ë¦¬ ê²€ì¦ í•­ëª©](#184-ë°°í¬-ì „-ì—ëŸ¬ì²˜ë¦¬-ê²€ì¦-í•­ëª©)

### 19. íŠ¸ëŸ¬ë¸”ìŠˆíŒ…
- [19.1 ìì£¼ ë°œìƒí•˜ëŠ” ì—ëŸ¬ ì‹œë‚˜ë¦¬ì˜¤ì™€ í•´ê²°ì±…](#191-ìì£¼-ë°œìƒí•˜ëŠ”-ì—ëŸ¬-ì‹œë‚˜ë¦¬ì˜¤ì™€-í•´ê²°ì±…)
- [19.2 ì„±ëŠ¥ ì´ìŠˆë¥¼ ìœ ë°œí•˜ëŠ” ì—ëŸ¬ì²˜ë¦¬ ì•ˆí‹°íŒ¨í„´](#192-ì„±ëŠ¥-ì´ìŠˆë¥¼-ìœ ë°œí•˜ëŠ”-ì—ëŸ¬ì²˜ë¦¬-ì•ˆí‹°íŒ¨í„´)
- [19.3 ë©”ëª¨ë¦¬ ë¦¬í¬ë¥¼ ìœ ë°œí•˜ëŠ” ì˜ˆì™¸ ì²˜ë¦¬](#193-ë©”ëª¨ë¦¬-ë¦¬í¬ë¥¼-ìœ ë°œí•˜ëŠ”-ì˜ˆì™¸-ì²˜ë¦¬)
- [19.4 ì™¸ë¶€ ì˜ì¡´ì„± ê´€ë ¨ ì—ëŸ¬ í•´ê²°](#194-ì™¸ë¶€-ì˜ì¡´ì„±-ê´€ë ¨-ì—ëŸ¬-í•´ê²°)

### 20. ë¶€ë¡
- [20.1 ErrorCode ì „ì²´ ëª©ë¡](#201-errorcode-ì „ì²´-ëª©ë¡)
- [20.2 HTTP ìƒíƒœ ì½”ë“œ ë§¤í•‘ í…Œì´ë¸”](#202-http-ìƒíƒœ-ì½”ë“œ-ë§¤í•‘-í…Œì´ë¸”)
- [20.3 ì˜ˆì™¸ ì²˜ë¦¬ ì²´í¬ë¦¬ìŠ¤íŠ¸](#203-ì˜ˆì™¸-ì²˜ë¦¬-ì²´í¬ë¦¬ìŠ¤íŠ¸)
- [20.4 ì—ëŸ¬ ë©”ì‹œì§€ ë‹¤êµ­ì–´ í…œí”Œë¦¿](#204-ì—ëŸ¬-ë©”ì‹œì§€-ë‹¤êµ­ì–´-í…œí”Œë¦¿)
- [20.5 ìƒ˜í”Œ ì½”ë“œ ë° í…œí”Œë¦¿](#205-ìƒ˜í”Œ-ì½”ë“œ-ë°-í…œí”Œë¦¿)

---

## ğŸ“š ê°€ì´ë“œ ê°œìš”

ì´ ë¬¸ì„œëŠ” **AXPORTAL Backend í”„ë¡œì íŠ¸**ì—ì„œ ì¼ê´€ë˜ê³  íš¨ìœ¨ì ì¸ ì—ëŸ¬ì²˜ë¦¬ë¥¼ ìœ„í•œ ì¢…í•© ê°€ì´ë“œì…ë‹ˆë‹¤.

### ğŸ¯ ëª©ì 
- Spring Boot ê¸°ë°˜ í”„ë¡œì íŠ¸ì˜ ì²´ê³„ì ì¸ ì—ëŸ¬ì²˜ë¦¬ êµ¬í˜„
- AxResponseEntityì™€ ErrorCodeë¥¼ í™œìš©í•œ í‘œì¤€í™”ëœ ì‘ë‹µ í˜•ì‹
- ê°œë°œíŒ€ ê°„ ì¼ê´€ëœ ì—ëŸ¬ì²˜ë¦¬ ì»¨ë²¤ì…˜ ì œê³µ
- í´ë¼ì´ì–¸íŠ¸ ì¹œí™”ì ì¸ ì—ëŸ¬ ì‘ë‹µ ì„¤ê³„

### ğŸ—ï¸ í”„ë¡œì íŠ¸ ì•„í‚¤í…ì²˜ ê¸°ë°˜
- **Spring Boot 3.5.4** + **Java 17**
- **AxResponseEntity** í†µí•© ì‘ë‹µ í˜•ì‹
- **ErrorCode Enum** ê¸°ë°˜ ì—ëŸ¬ ë¶„ë¥˜
- **GlobalExceptionHandler** ì¤‘ì•™ ì§‘ì¤‘ì‹ ì˜ˆì™¸ ì²˜ë¦¬
- **PageResponse** í˜ì´ì§• ì‘ë‹µ í‘œì¤€í™”

### ğŸ“ ì ìš© ë²”ìœ„
- **Controller ê³„ì¸µ**: REST API ì—ëŸ¬ ì‘ë‹µ
- **Service ê³„ì¸µ**: ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ ì˜ˆì™¸ ì²˜ë¦¬
- **Repository ê³„ì¸µ**: ë°ì´í„° ì•¡ì„¸ìŠ¤ ì˜ˆì™¸ ë³€í™˜
- **External Client**: Feign Client ì—ëŸ¬ ì²˜ë¦¬
- **Security**: ì¸ì¦/ì¸ê°€ ì˜ˆì™¸ ì²˜ë¦¬

### ğŸš€ ì£¼ìš” íŠ¹ì§•
- **íƒ€ì… ì•ˆì „ì„±**: ErrorCode ê¸°ë°˜ ì»´íŒŒì¼ íƒ€ì„ ê²€ì¦
- **ì¼ê´€ì„±**: í†µì¼ëœ ì‘ë‹µ í˜•ì‹ê³¼ ì—ëŸ¬ ì½”ë“œ ì²´ê³„
- **í™•ì¥ì„±**: ë„ë©”ì¸ë³„ ì—ëŸ¬ ì½”ë“œ ë¶„ë¥˜ ì§€ì›
- **ë‹¤êµ­ì–´ ì§€ì›**: ë©”ì‹œì§€ êµ­ì œí™” ê¸°ë°˜ ì„¤ê³„
- **ëª¨ë‹ˆí„°ë§**: êµ¬ì¡°í™”ëœ ë¡œê¹…ê³¼ ì—ëŸ¬ ì¶”ì 

---

*ì´ ê°€ì´ë“œëŠ” ì‹¤ë¬´ì—ì„œ ë°”ë¡œ ì ìš©í•  ìˆ˜ ìˆëŠ” êµ¬ì²´ì ì´ê³  ì‹¤ìš©ì ì¸ ë‚´ìš©ìœ¼ë¡œ êµ¬ì„±ë˜ì—ˆìŠµë‹ˆë‹¤.*
*ê° ì„¹ì…˜ì€ ì´ë¡ ì  ì„¤ëª…ê³¼ í•¨ê»˜ ì‹¤ì œ ì½”ë“œ ì˜ˆì‹œë¥¼ í¬í•¨í•˜ê³  ìˆìŠµë‹ˆë‹¤.*

**ì‘ì„±ì¼**: 2025ë…„ 10ì›” 9ì¼  
**ì‘ì„±ì**: ByounggwanLee  
**í”„ë¡œì íŠ¸**: AXPORTAL Backend  
**ë²„ì „**: 1.0

---

## 1. ê°œìš”

### 1.1 ì—ëŸ¬ì²˜ë¦¬ì˜ ì¤‘ìš”ì„±

í˜„ëŒ€ì˜ ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œ ì—ëŸ¬ì²˜ë¦¬ëŠ” ë‹¨ìˆœíˆ ì˜ˆì™¸ë¥¼ ì¡ì•„ì„œ ì²˜ë¦¬í•˜ëŠ” ê²ƒì„ ë„˜ì–´ì„œ, **ì‚¬ìš©ì ê²½í—˜**, **ì‹œìŠ¤í…œ ì•ˆì •ì„±**, **ê°œë°œ íš¨ìœ¨ì„±**ì„ ì¢Œìš°í•˜ëŠ” í•µì‹¬ ìš”ì†Œì…ë‹ˆë‹¤.

#### ğŸ¯ ì—ëŸ¬ì²˜ë¦¬ê°€ ì¤‘ìš”í•œ ì´ìœ 

##### 1. ì‚¬ìš©ì ê²½í—˜ í–¥ìƒ
```json
// âŒ ë‚˜ìœ ì—ëŸ¬ ì‘ë‹µ
{
  "timestamp": "2025-10-09T10:30:00.000+00:00",
  "status": 500,
  "error": "Internal Server Error",
  "path": "/api/users"
}

// âœ… ì¢‹ì€ ì—ëŸ¬ ì‘ë‹µ
{
  "success": false,
  "message": "ì‚¬ìš©ìë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤",
  "error": {
    "hscode": "NOT_FOUND",
    "code": "U001",
    "message": "ì‚¬ìš©ìë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤",
    "details": "ì‚¬ìš©ì ID 123ì— í•´ë‹¹í•˜ëŠ” ì‚¬ìš©ìê°€ ì¡´ì¬í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤",
    "timestamp": "2025-10-09T10:30:00",
    "path": "/api/users/123"
  }
}
```

##### 2. ê°œë°œ íš¨ìœ¨ì„± ì¦ëŒ€
- **ì¼ê´€ëœ ì—ëŸ¬ í˜•ì‹**: í´ë¼ì´ì–¸íŠ¸ ê°œë°œìê°€ ì˜ˆì¸¡ ê°€ëŠ¥í•œ ì—ëŸ¬ ì²˜ë¦¬ ë¡œì§ êµ¬í˜„
- **ëª…í™•í•œ ì—ëŸ¬ ì½”ë“œ**: ë””ë²„ê¹… ì‹œê°„ ë‹¨ì¶• ë° ë¬¸ì œ ì›ì¸ ë¹ ë¥¸ íŒŒì•…
- **ìë™í™”ëœ ì—ëŸ¬ ì²˜ë¦¬**: GlobalExceptionHandlerë¥¼ í†µí•œ ì¤‘ì•™ ì§‘ì¤‘ì‹ ê´€ë¦¬

##### 3. ì‹œìŠ¤í…œ ì•ˆì •ì„± í™•ë³´
- **Graceful Degradation**: ì˜ˆìƒì¹˜ ëª»í•œ ì˜¤ë¥˜ ìƒí™©ì—ì„œë„ ì‹œìŠ¤í…œì´ ì™„ì „íˆ ì¤‘ë‹¨ë˜ì§€ ì•ŠìŒ
- **ì—ëŸ¬ ì¶”ì **: ë¡œê¹…ì„ í†µí•œ ë¬¸ì œ ìƒí™© ëª¨ë‹ˆí„°ë§ ë° ë¶„ì„
- **ë³´ì•ˆ ê°•í™”**: ë¯¼ê°í•œ ì •ë³´ ë…¸ì¶œ ë°©ì§€

#### ğŸ“Š ì—ëŸ¬ì²˜ë¦¬ì˜ ë¹„ì¦ˆë‹ˆìŠ¤ ì˜í–¥

| êµ¬ë¶„ | ë‚˜ìœ ì—ëŸ¬ì²˜ë¦¬ | ì¢‹ì€ ì—ëŸ¬ì²˜ë¦¬ |
|------|---------------|---------------|
| **ì‚¬ìš©ì ì´íƒˆë¥ ** | ë†’ìŒ (ëª¨í˜¸í•œ ì—ëŸ¬ ë©”ì‹œì§€) | ë‚®ìŒ (ëª…í™•í•œ ê°€ì´ë“œ) |
| **ê°œë°œ ì†ë„** | ëŠë¦¼ (ë””ë²„ê¹… ì‹œê°„ ì¦ê°€) | ë¹ ë¦„ (ëª…í™•í•œ ì—ëŸ¬ ì •ë³´) |
| **ìœ ì§€ë³´ìˆ˜ì„±** | ì–´ë ¤ì›€ (ë¶„ì‚°ëœ ì—ëŸ¬ ì²˜ë¦¬) | ì‰¬ì›€ (ì¤‘ì•™ ì§‘ì¤‘ì‹) |
| **ê³ ê° ì§€ì›** | ë¹„íš¨ìœ¨ì  (ë¬¸ì œ íŒŒì•… ì–´ë ¤ì›€) | íš¨ìœ¨ì  (ì—ëŸ¬ ì½”ë“œ ê¸°ë°˜) |

### 1.2 Spring Boot ì—ëŸ¬ì²˜ë¦¬ ì•„í‚¤í…ì²˜

Spring BootëŠ” ì—ëŸ¬ì²˜ë¦¬ë¥¼ ìœ„í•œ ê°•ë ¥í•˜ê³  ìœ ì—°í•œ ì•„í‚¤í…ì²˜ë¥¼ ì œê³µí•©ë‹ˆë‹¤.

#### ğŸ—ï¸ Spring Boot ì—ëŸ¬ì²˜ë¦¬ êµ¬ì¡°

```mermaid
graph TD
    A[HTTP Request] --> B[DispatcherServlet]
    B --> C[Controller]
    C --> D{Exception ë°œìƒ?}
    D -->|Yes| E[ExceptionResolver]
    E --> F[GlobalExceptionHandler]
    F --> G[ErrorResponse]
    D -->|No| H[Normal Response]
    G --> I[HTTP Response]
    H --> I
```

#### ğŸ“‹ ì£¼ìš” ì»´í¬ë„ŒíŠ¸

##### 1. ExceptionResolver ì²´ì¸
```java
// Spring Boot ê¸°ë³¸ ExceptionResolver ìˆœì„œ
1. ExceptionHandlerExceptionResolver    // @ExceptionHandler
2. ResponseStatusExceptionResolver      // @ResponseStatus  
3. DefaultHandlerExceptionResolver      // Spring MVC ê¸°ë³¸ ì˜ˆì™¸
```

##### 2. @ControllerAdviceì™€ @ExceptionHandler
```java
@ControllerAdvice
@Slf4j
public class GlobalExceptionHandler {
    
    /**
     * ë¹„ì¦ˆë‹ˆìŠ¤ ì˜ˆì™¸ ì²˜ë¦¬
     */
    @ExceptionHandler(BusinessException.class)
    public AxResponseEntity<Void> handleBusinessException(BusinessException ex) {
        log.warn("Business exception: {}", ex.getMessage(), ex);
        return AxResponseEntity.error(ex.getErrorCode());
    }
}
```

##### 3. ìë™ êµ¬ì„± (Auto Configuration)
Spring BootëŠ” ë‹¤ìŒê³¼ ê°™ì€ ì—ëŸ¬ì²˜ë¦¬ ê´€ë ¨ ì„¤ì •ì„ ìë™ìœ¼ë¡œ ì œê³µí•©ë‹ˆë‹¤:

```yaml
# application.yml - ê¸°ë³¸ ì—ëŸ¬ ì²˜ë¦¬ ì„¤ì •
server:
  error:
    include-message: always           # ì—ëŸ¬ ë©”ì‹œì§€ í¬í•¨
    include-binding-errors: always    # ë°”ì¸ë”© ì—ëŸ¬ í¬í•¨  
    include-stacktrace: on_param      # ìŠ¤íƒíŠ¸ë ˆì´ìŠ¤ ì¡°ê±´ë¶€ í¬í•¨
    include-exception: false          # ì˜ˆì™¸ í´ë˜ìŠ¤ëª… ë¯¸í¬í•¨
```

#### ğŸ”„ ì—ëŸ¬ì²˜ë¦¬ í”Œë¡œìš°

```java
// 1. ì»¨íŠ¸ë¡¤ëŸ¬ì—ì„œ ì˜ˆì™¸ ë°œìƒ
@GetMapping("/users/{id}")
public AxResponseEntity<UserResponse> getUser(@PathVariable Long id) {
    UserResponse user = userService.getUserById(id); // ì˜ˆì™¸ ë°œìƒ ê°€ëŠ¥
    return AxResponseEntity.ok(user);
}

// 2. Serviceì—ì„œ ë¹„ì¦ˆë‹ˆìŠ¤ ì˜ˆì™¸ ë°œìƒ
public UserResponse getUserById(Long id) {
    User user = userRepository.findById(id)
        .orElseThrow(() -> new BusinessException(ErrorCode.USER_NOT_FOUND));
    return userMapper.toResponse(user);
}

// 3. GlobalExceptionHandlerì—ì„œ ì²˜ë¦¬
@ExceptionHandler(BusinessException.class)
public AxResponseEntity<Void> handleBusinessException(BusinessException ex) {
    return AxResponseEntity.error(ex.getErrorCode());
}
```

### 1.3 í”„ë¡œì íŠ¸ ì—ëŸ¬ì²˜ë¦¬ ë°©í–¥ì„±

AXPORTAL Backend í”„ë¡œì íŠ¸ì˜ ì—ëŸ¬ì²˜ë¦¬ëŠ” ë‹¤ìŒê³¼ ê°™ì€ ë°©í–¥ì„±ì„ ê°€ì§€ê³  ì„¤ê³„ë˜ì—ˆìŠµë‹ˆë‹¤.

#### ğŸ¯ í•µì‹¬ ì›ì¹™

##### 1. íƒ€ì… ì•ˆì „ì„± (Type Safety)
```java
// ErrorCode Enumì„ í†µí•œ ì»´íŒŒì¼ íƒ€ì„ ê²€ì¦
public enum ErrorCode {
    USER_NOT_FOUND(HttpStatus.NOT_FOUND, "U001", "ì‚¬ìš©ìë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤"),
    USER_ALREADY_EXISTS(HttpStatus.CONFLICT, "U002", "ì´ë¯¸ ì¡´ì¬í•˜ëŠ” ì‚¬ìš©ìì…ë‹ˆë‹¤");
    
    private final HttpStatus status;
    private final String code;
    private final String message;
}
```

##### 2. ì¼ê´€ì„± (Consistency)
```java
// ëª¨ë“  API ì‘ë‹µì— ë™ì¼í•œ í˜•ì‹ ì ìš©
public class AxResponseEntity<T> {
    private AxResponse<T> body;
    private HttpStatus status;
    
    // í†µì¼ëœ ì„±ê³µ/ì‹¤íŒ¨ ì‘ë‹µ ë©”ì„œë“œ ì œê³µ
    public static <T> AxResponseEntity<T> ok(T data, String message) { ... }
    public static <T> AxResponseEntity<T> error(ErrorCode errorCode) { ... }
}
```

##### 3. í™•ì¥ì„± (Scalability)
```java
// ë„ë©”ì¸ë³„ ì—ëŸ¬ ì½”ë“œ ë¶„ë¥˜ ì²´ê³„
// U001~U099: ì‚¬ìš©ì ê´€ë ¨
// S001~S099: ìƒ˜í”Œ ê´€ë ¨  
// A001~A099: ì¸ì¦/ì¸ê°€ ê´€ë ¨
// E001~E099: ì„œë²„ ì˜¤ë¥˜
```

#### ğŸ›ï¸ ì•„í‚¤í…ì²˜ ì„¤ê³„

##### ê³„ì¸µë³„ ì±…ì„ ë¶„ë¦¬
```java
// Controller: HTTP ê´€ë ¨ ì˜ˆì™¸ë§Œ ì²˜ë¦¬
@RestController
public class UserController {
    public AxResponseEntity<UserResponse> getUser(@PathVariable Long id) {
        // ë¹„ì¦ˆë‹ˆìŠ¤ ì˜ˆì™¸ëŠ” Serviceì—ì„œ ë°œìƒ, GlobalExceptionHandlerì—ì„œ ì²˜ë¦¬
    }
}

// Service: ë¹„ì¦ˆë‹ˆìŠ¤ ì˜ˆì™¸ ë°œìƒ
@Service
public class UserService {
    public UserResponse getUserById(Long id) {
        // BusinessException ë°œìƒ
        throw new BusinessException(ErrorCode.USER_NOT_FOUND);
    }
}

// GlobalExceptionHandler: ëª¨ë“  ì˜ˆì™¸ ì¤‘ì•™ ì²˜ë¦¬
@ControllerAdvice
public class GlobalExceptionHandler {
    // ì˜ˆì™¸ íƒ€ì…ë³„ ì²˜ë¦¬ ë¡œì§
}
```

#### ğŸŒ í´ë¼ì´ì–¸íŠ¸ ì¤‘ì‹¬ ì„¤ê³„

##### 1. ê°œë°œì ì¹œí™”ì  ì—ëŸ¬ ì •ë³´
```json
{
  "success": false,
  "message": "ì…ë ¥ê°’ ê²€ì¦ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤",
  "error": {
    "hscode": "BAD_REQUEST",
    "code": "C002",
    "fieldErrors": [
      {
        "field": "email",
        "rejectedValue": "invalid-email",
        "message": "ì˜¬ë°”ë¥¸ ì´ë©”ì¼ í˜•ì‹ì´ ì•„ë‹™ë‹ˆë‹¤"
      }
    ]
  }
}
```

##### 2. ì•¡ì…˜ ê°€ì´ë“œ ì œê³µ
```java
public enum ActionType {
    CONFIRM,    // í™•ì¸ í›„ ê³„ì†
    RETRY,      // ì¬ì‹œë„ ê¶Œì¥
    PREVIOUS,   // ì´ì „ ë‹¨ê³„ë¡œ
    CANCEL      // ì‘ì—… ì·¨ì†Œ
}
```

### 1.4 ê°€ì´ë“œ í™œìš©ë²•

ì´ ê°€ì´ë“œë¥¼ íš¨ê³¼ì ìœ¼ë¡œ í™œìš©í•˜ê¸° ìœ„í•œ ë°©ë²•ì„ ì•ˆë‚´í•©ë‹ˆë‹¤.

#### ğŸ“– í•™ìŠµ ìˆœì„œ

##### 1ë‹¨ê³„: ê¸°ë³¸ ê°œë… ì´í•´ (2-4ì„¹ì…˜)
- Exceptionê³¼ Errorì˜ ì°¨ì´ì 
- Spring Boot ì—ëŸ¬ì²˜ë¦¬ ë©”ì»¤ë‹ˆì¦˜
- HTTP ìƒíƒœ ì½”ë“œ ì´í•´
- ì»¤ìŠ¤í…€ ì˜ˆì™¸ ì„¤ê³„ ì›ì¹™

##### 2ë‹¨ê³„: êµ¬í˜„ ë°©ë²• ìˆ™ì§€ (5-7ì„¹ì…˜)  
- GlobalExceptionHandler êµ¬í˜„
- AxResponseEntity í™œìš©ë²•
- ê³„ì¸µë³„ ì—ëŸ¬ì²˜ë¦¬ ì „ëµ

##### 3ë‹¨ê³„: ì‹¤ë¬´ ì ìš© (8-15ì„¹ì…˜)
- ë„ë©”ì¸ë³„ ì—ëŸ¬ì²˜ë¦¬ íŒ¨í„´
- ì…ë ¥ê°’ ê²€ì¦ê³¼ ì—ëŸ¬ì²˜ë¦¬
- ì™¸ë¶€ API ì—ëŸ¬ì²˜ë¦¬
- ë³´ì•ˆ ê´€ë ¨ ì—ëŸ¬ì²˜ë¦¬

##### 4ë‹¨ê³„: ê³ ê¸‰ ì£¼ì œ (16-20ì„¹ì…˜)
- ì„±ëŠ¥ ìµœì í™”
- í…ŒìŠ¤íŠ¸ ì „ëµ
- í™˜ê²½ë³„ ì„¤ì •
- íŠ¸ëŸ¬ë¸”ìŠˆíŒ…

#### ğŸ› ï¸ ì‹¤ë¬´ ì ìš© ì²´í¬ë¦¬ìŠ¤íŠ¸

##### ìƒˆ ê¸°ëŠ¥ ê°œë°œ ì‹œ
- [ ] ë„ë©”ì¸ë³„ ErrorCode ì •ì˜
- [ ] ë¹„ì¦ˆë‹ˆìŠ¤ ì˜ˆì™¸ í´ë˜ìŠ¤ ìƒì„±
- [ ] Controllerì—ì„œ AxResponseEntity ì‚¬ìš©
- [ ] Serviceì—ì„œ ì ì ˆí•œ ì˜ˆì™¸ ë°œìƒ
- [ ] í…ŒìŠ¤íŠ¸ ì½”ë“œì— ì˜ˆì™¸ ì‹œë‚˜ë¦¬ì˜¤ í¬í•¨

##### ê¸°ì¡´ ì½”ë“œ ê°œì„  ì‹œ
- [ ] í•˜ë“œì½”ë”©ëœ ì—ëŸ¬ ë©”ì‹œì§€ë¥¼ ErrorCodeë¡œ ë³€ê²½
- [ ] ResponseEntityë¥¼ AxResponseEntityë¡œ êµì²´
- [ ] GlobalExceptionHandlerì— ìƒˆ ì˜ˆì™¸ ì²˜ë¦¬ ì¶”ê°€
- [ ] ë¡œê¹… ë ˆë²¨ ë° í˜•ì‹ í‘œì¤€í™”

#### ğŸ“‹ íŒ€ í˜‘ì—… ê°€ì´ë“œ

##### ì½”ë“œ ë¦¬ë·° ì²´í¬í¬ì¸íŠ¸
```markdown
## ì—ëŸ¬ì²˜ë¦¬ ì½”ë“œ ë¦¬ë·° ì²´í¬ë¦¬ìŠ¤íŠ¸

### ì˜ˆì™¸ ì„¤ê³„
- [ ] ì ì ˆí•œ ErrorCode ì‚¬ìš© ì—¬ë¶€
- [ ] ì»¤ìŠ¤í…€ ë©”ì‹œì§€ì™€ detail í™œìš© ì ì ˆì„±
- [ ] ì˜ˆì™¸ ê³„ì¸µêµ¬ì¡° ì¤€ìˆ˜ ì—¬ë¶€

### ì‘ë‹µ í˜•ì‹
- [ ] AxResponseEntity ì‚¬ìš© ì—¬ë¶€
- [ ] HTTP ìƒíƒœ ì½”ë“œì™€ ErrorCode ì¼ì¹˜ì„±
- [ ] í´ë¼ì´ì–¸íŠ¸ ì¹œí™”ì  ì—ëŸ¬ ë©”ì‹œì§€

### ë¡œê¹…
- [ ] ì ì ˆí•œ ë¡œê·¸ ë ˆë²¨ ì‚¬ìš©
- [ ] ë¯¼ê°ì •ë³´ ë¡œê¹… ë°©ì§€
- [ ] êµ¬ì¡°í™”ëœ ë¡œê·¸ í˜•ì‹ ì¤€ìˆ˜
```

##### ê°œë°œ ì»¨ë²¤ì…˜
```java
// âœ… ê¶Œì¥ íŒ¨í„´
@ExceptionHandler(BusinessException.class)
public AxResponseEntity<Void> handleBusinessException(BusinessException ex) {
    log.warn("Business exception: {}", ex.getMessage(), ex);
    ErrorCode errorCode = ex.getErrorCode();
    String customMessage = ex.getMessage();
    
    if (customMessage != null && !customMessage.equals(errorCode.getMessage())) {
        return AxResponseEntity.error(errorCode, errorCode.getMessage(), customMessage);
    }
    return AxResponseEntity.error(errorCode);
}

// âŒ í”¼í•´ì•¼ í•  íŒ¨í„´  
@ExceptionHandler(Exception.class)
public ResponseEntity<String> handleException(Exception ex) {
    return ResponseEntity.status(500).body("ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤");
}
```

#### ğŸ“ í•™ìŠµ ìë£Œ í™œìš©

##### ì½”ë“œ í…œí”Œë¦¿ ì‚¬ìš©
- **20.5 ìƒ˜í”Œ ì½”ë“œ ë° í…œí”Œë¦¿** ì„¹ì…˜ì˜ ë³´ì¼ëŸ¬í”Œë ˆì´íŠ¸ ì½”ë“œ í™œìš©
- IDE ì½”ë“œ í…œí”Œë¦¿ìœ¼ë¡œ ë“±ë¡í•˜ì—¬ ê°œë°œ ì†ë„ í–¥ìƒ
- íŒ€ í‘œì¤€ ì½”ë“œ ìŠ¤íƒ€ì¼ ìœ ì§€

##### ì°¸ê³  ë¬¸ì„œ ì—°ê³„
- **ë¶€ë¡** ì„¹ì…˜ì˜ ErrorCode ì „ì²´ ëª©ë¡ ì°¸ì¡°
- HTTP ìƒíƒœ ì½”ë“œ ë§¤í•‘ í…Œì´ë¸” í™œìš©
- ì²´í¬ë¦¬ìŠ¤íŠ¸ë¥¼ í†µí•œ ìê°€ ì ê²€

---

## 2. ì—ëŸ¬ì²˜ë¦¬ ê¸°ë³¸ ê°œë…

### 2.1 Exception vs Error

Javaì™€ Spring Bootì—ì„œ Exceptionê³¼ ErrorëŠ” ì„œë¡œ ë‹¤ë¥¸ ëª©ì ê³¼ íŠ¹ì„±ì„ ê°€ì§€ê³  ìˆìŠµë‹ˆë‹¤. ì´ë¥¼ ëª…í™•íˆ êµ¬ë¶„í•˜ì—¬ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ íš¨ê³¼ì ì¸ ì—ëŸ¬ì²˜ë¦¬ì˜ ì²« ë²ˆì§¸ ë‹¨ê³„ì…ë‹ˆë‹¤.

#### ğŸ” ê¸°ë³¸ ê°œë… ë¹„êµ

##### Exception (ì˜ˆì™¸)
```java
// Exception ê³„ì¸µêµ¬ì¡°
Throwable
â”œâ”€â”€ Exception
â”‚   â”œâ”€â”€ RuntimeException (Unchecked)
â”‚   â”‚   â”œâ”€â”€ NullPointerException
â”‚   â”‚   â”œâ”€â”€ IllegalArgumentException
â”‚   â”‚   â””â”€â”€ BusinessException (ì»¤ìŠ¤í…€)
â”‚   â””â”€â”€ CheckedException (Checked)
â”‚       â”œâ”€â”€ IOException
â”‚       â”œâ”€â”€ SQLException
â”‚       â””â”€â”€ ClassNotFoundException
â””â”€â”€ Error (ì‹œìŠ¤í…œ ë ˆë²¨ ì˜¤ë¥˜)
    â”œâ”€â”€ OutOfMemoryError
    â”œâ”€â”€ StackOverflowError
    â””â”€â”€ NoClassDefFoundError
```

##### Error (ì—ëŸ¬)
- **ì‹œìŠ¤í…œ ë ˆë²¨ ì˜¤ë¥˜**: JVMì´ë‚˜ ì‹œìŠ¤í…œ ìì› ë¶€ì¡±ìœ¼ë¡œ ë°œìƒ
- **ë³µêµ¬ ë¶ˆê°€ëŠ¥**: ì¼ë°˜ì ìœ¼ë¡œ ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œ ì²˜ë¦¬í•  ìˆ˜ ì—†ìŒ
- **ì˜ˆì¸¡ ì–´ë ¤ì›€**: ê°œë°œìê°€ ì˜ˆìƒí•˜ê¸° ì–´ë ¤ìš´ ìƒí™©

#### ğŸ“Š Exception vs Error ë¹„êµí‘œ

| êµ¬ë¶„ | Exception | Error |
|------|-----------|-------|
| **ë³µêµ¬ ê°€ëŠ¥ì„±** | ê°€ëŠ¥ (try-catchë¡œ ì²˜ë¦¬) | ë¶ˆê°€ëŠ¥ (ì‹œìŠ¤í…œ ì¬ì‹œì‘ í•„ìš”) |
| **ë°œìƒ ì›ì¸** | í”„ë¡œê·¸ë¨ ë¡œì§, ì™¸ë¶€ ìš”ì¸ | JVM, ì‹œìŠ¤í…œ ìì› |
| **ì²˜ë¦¬ ë°©ë²•** | ì˜ˆì™¸ ì²˜ë¦¬ ë¡œì§ êµ¬í˜„ | ë¡œê¹… í›„ ì‹œìŠ¤í…œ ì¢…ë£Œ |
| **ì˜ˆë°© ë°©ë²•** | ê²€ì¦ ë¡œì§, ë°©ì–´ ì½”ë“œ | ì‹œìŠ¤í…œ ëª¨ë‹ˆí„°ë§, ìì› ê´€ë¦¬ |

#### ğŸ’¡ ì‹¤ë¬´ ì ìš© ê°€ì´ë“œ

##### Exception ì²˜ë¦¬ íŒ¨í„´
```java
// âœ… ì˜¬ë°”ë¥¸ Exception ì²˜ë¦¬
@Service
public class UserService {
    
    public UserResponse getUserById(Long id) {
        // 1. ì…ë ¥ê°’ ê²€ì¦
        if (id == null || id <= 0) {
            throw new ValidationException(ErrorCode.INVALID_INPUT_VALUE, 
                "ì‚¬ìš©ì IDëŠ” 1 ì´ìƒì˜ ê°’ì´ì–´ì•¼ í•©ë‹ˆë‹¤");
        }
        
        // 2. ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ ì˜ˆì™¸ ì²˜ë¦¬
        User user = userRepository.findById(id)
            .orElseThrow(() -> new BusinessException(ErrorCode.USER_NOT_FOUND,
                "ì‚¬ìš©ì ID " + id + "ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤"));
        
        return userMapper.toResponse(user);
    }
}
```

##### Error ëª¨ë‹ˆí„°ë§ íŒ¨í„´
```java
// Error ë°œìƒ ì‹œ ëª¨ë‹ˆí„°ë§ ë° ì•Œë¦¼
@ControllerAdvice
public class GlobalExceptionHandler {
    
    @ExceptionHandler(OutOfMemoryError.class)
    public AxResponseEntity<Void> handleOutOfMemoryError(OutOfMemoryError error) {
        log.error("ğŸš¨ OutOfMemoryError ë°œìƒ - ì¦‰ì‹œ ì‹œìŠ¤í…œ ì ê²€ í•„ìš”", error);
        
        // ì™¸ë¶€ ëª¨ë‹ˆí„°ë§ ì‹œìŠ¤í…œì— ì•Œë¦¼ (ì˜ˆ: Slack, ì´ë©”ì¼)
        alertService.sendCriticalAlert("ë©”ëª¨ë¦¬ ë¶€ì¡± ì˜¤ë¥˜ ë°œìƒ", error);
        
        return AxResponseEntity.internalServerError("ì‹œìŠ¤í…œ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤. ê´€ë¦¬ìì—ê²Œ ë¬¸ì˜í•˜ì„¸ìš”.");
    }
}
```

### 2.2 Checked vs Unchecked Exception

Javaì˜ ì˜ˆì™¸ëŠ” ì»´íŒŒì¼ íƒ€ì„ ì²˜ë¦¬ ì—¬ë¶€ì— ë”°ë¼ Checkedì™€ Uncheckedë¡œ ë¶„ë¥˜ë©ë‹ˆë‹¤.

#### ğŸ”„ Checked Exception

##### íŠ¹ì§•
- **ì»´íŒŒì¼ íƒ€ì„ ê²€ì¦**: ë°˜ë“œì‹œ try-catch ë˜ëŠ” throws ì„ ì–¸ í•„ìš”
- **ì™¸ë¶€ ì˜ì¡´ì„±**: íŒŒì¼ I/O, ë„¤íŠ¸ì›Œí¬, ë°ì´í„°ë² ì´ìŠ¤ ë“±
- **ì˜ˆì¸¡ ê°€ëŠ¥**: ê°œë°œìê°€ ì˜ˆìƒí•  ìˆ˜ ìˆëŠ” ì˜ˆì™¸ ìƒí™©

##### ì˜ˆì‹œì™€ ì²˜ë¦¬ ë°©ë²•
```java
// Checked Exception ì²˜ë¦¬ íŒ¨í„´
@Service
public class FileService {
    
    // 1. try-catchë¡œ ì²˜ë¦¬
    public String readFile(String filePath) {
        try {
            return Files.readString(Paths.get(filePath));
        } catch (IOException e) {
            log.error("íŒŒì¼ ì½ê¸° ì‹¤íŒ¨: {}", filePath, e);
            throw new BusinessException(ErrorCode.FILE_READ_ERROR, 
                "íŒŒì¼ì„ ì½ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤: " + filePath);
        }
    }
    
    // 2. throwsë¡œ ìœ„ì„
    public void writeFile(String filePath, String content) throws IOException {
        Files.writeString(Paths.get(filePath), content);
    }
}
```

#### âš¡ Unchecked Exception (RuntimeException)

##### íŠ¹ì§•
- **ëŸ°íƒ€ì„ ê²€ì¦**: ì»´íŒŒì¼ ì‹œì ì— ì²˜ë¦¬ ê°•ì œí•˜ì§€ ì•ŠìŒ
- **í”„ë¡œê·¸ë¨ ë¡œì§ ì˜¤ë¥˜**: NPE, IllegalArgument ë“±
- **ì„ íƒì  ì²˜ë¦¬**: í•„ìš”ì— ë”°ë¼ ì²˜ë¦¬

##### Spring Bootì—ì„œì˜ í™œìš©
```java
// Unchecked Exceptionì„ í™œìš©í•œ ë¹„ì¦ˆë‹ˆìŠ¤ ì˜ˆì™¸
@Getter
@RequiredArgsConstructor
public class BusinessException extends RuntimeException {
    private final ErrorCode errorCode;
    
    public BusinessException(ErrorCode errorCode, String customMessage) {
        super(customMessage);
        this.errorCode = errorCode;
    }
}

// ì‚¬ìš© ì˜ˆì‹œ
@Service
public class OrderService {
    
    public OrderResponse createOrder(OrderCreateRequest request) {
        // ì¬ê³  í™•ì¸
        if (!inventoryService.hasStock(request.getProductId(), request.getQuantity())) {
            throw new BusinessException(ErrorCode.INSUFFICIENT_STOCK,
                "ìƒí’ˆ ì¬ê³ ê°€ ë¶€ì¡±í•©ë‹ˆë‹¤. ìš”ì²­ëŸ‰: " + request.getQuantity());
        }
        
        // ì£¼ë¬¸ ìƒì„± ë¡œì§...
    }
}
```

#### ğŸ¯ ì„ íƒ ê¸°ì¤€

| ìƒí™© | ê¶Œì¥ íƒ€ì… | ì´ìœ  |
|------|-----------|------|
| **ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ ê²€ì¦** | Unchecked | ê°œë°œì ì˜ë„ëœ ì œì–´ íë¦„ |
| **ì™¸ë¶€ API í˜¸ì¶œ** | Checked â†’ Unchecked ë³€í™˜ | ì¼ê´€ëœ ì˜ˆì™¸ ì²˜ë¦¬ |
| **íŒŒì¼/ë„¤íŠ¸ì›Œí¬ I/O** | Checked ìœ ì§€ ë˜ëŠ” ë³€í™˜ | ìƒí™©ì— ë”°ë¼ ê²°ì • |
| **ë°ì´í„°ë² ì´ìŠ¤ ì ‘ê·¼** | Unchecked (Spring ê¸°ë³¸) | Springì˜ DataAccessException í™œìš© |

### 2.3 Spring Boot ì—ëŸ¬ì²˜ë¦¬ ë©”ì»¤ë‹ˆì¦˜

Spring BootëŠ” ë‹¤ê³„ì¸µì— ê±¸ì¹œ í¬ê´„ì ì¸ ì—ëŸ¬ì²˜ë¦¬ ë©”ì»¤ë‹ˆì¦˜ì„ ì œê³µí•©ë‹ˆë‹¤.

#### ğŸ—ï¸ ì²˜ë¦¬ ê³„ì¸µ êµ¬ì¡°

```mermaid
graph TD
    A[Client Request] --> B[Filter Chain]
    B --> C[DispatcherServlet]
    C --> D[HandlerMapping]
    D --> E[HandlerAdapter]
    E --> F[Controller]
    F --> G{Exception?}
    G -->|Yes| H[HandlerExceptionResolver]
    G -->|No| I[ViewResolver]
    H --> J[@ExceptionHandler]
    J --> K[AxResponseEntity]
    I --> L[Response]
    K --> L
```

#### ğŸ“‹ ExceptionResolver ì²˜ë¦¬ ìˆœì„œ

##### 1. ExceptionHandlerExceptionResolver
```java
// @ExceptionHandler ë©”ì„œë“œë¥¼ ì°¾ì•„ì„œ ì²˜ë¦¬
@ControllerAdvice
public class GlobalExceptionHandler {
    
    @ExceptionHandler(ValidationException.class)
    public AxResponseEntity<Void> handleValidationException(ValidationException ex) {
        log.warn("Validation error: {}", ex.getMessage());
        return AxResponseEntity.badRequest(ex.getErrorCode());
    }
}
```

##### 2. ResponseStatusExceptionResolver
```java
// @ResponseStatus ì–´ë…¸í…Œì´ì…˜ ê¸°ë°˜ ì²˜ë¦¬
@ResponseStatus(HttpStatus.NOT_FOUND)
public class ResourceNotFoundException extends RuntimeException {
    public ResourceNotFoundException(String message) {
        super(message);
    }
}
```

##### 3. DefaultHandlerExceptionResolver
```java
// Spring MVC ê¸°ë³¸ ì˜ˆì™¸ ì²˜ë¦¬
// - MethodArgumentNotValidException
// - MissingServletRequestParameterException
// - HttpRequestMethodNotSupportedException
// ë“±ì„ ê¸°ë³¸ HTTP ìƒíƒœ ì½”ë“œë¡œ ë³€í™˜
```

#### ğŸ”§ Auto Configuration

Spring BootëŠ” ê¸°ë³¸ì ìœ¼ë¡œ ë‹¤ìŒê³¼ ê°™ì€ ì—ëŸ¬ì²˜ë¦¬ ì„¤ì •ì„ ì œê³µí•©ë‹ˆë‹¤:

```yaml
# application.yml
server:
  error:
    # ê¸°ë³¸ ì—ëŸ¬ í˜ì´ì§€ ì„¤ì •
    path: /error
    whitelabel:
      enabled: false  # ê¸°ë³¸ ì—ëŸ¬ í˜ì´ì§€ ë¹„í™œì„±í™”
    
    # ì—ëŸ¬ ì‘ë‹µì— í¬í•¨í•  ì •ë³´
    include-message: always
    include-binding-errors: always
    include-stacktrace: on_param  # ?trace=true ì‹œì—ë§Œ í¬í•¨
    include-exception: false

# ë¡œê¹… ì„¤ì •
logging:
  level:
    com.skax.aiplatform: DEBUG
    org.springframework.web: DEBUG
```

#### ğŸ›ï¸ ì»¤ìŠ¤í„°ë§ˆì´ì§• í¬ì¸íŠ¸

##### 1. ErrorAttributes ì»¤ìŠ¤í„°ë§ˆì´ì§•
```java
@Component
public class CustomErrorAttributes extends DefaultErrorAttributes {
    
    @Override
    public Map<String, Object> getErrorAttributes(WebRequest webRequest, 
                                                 ErrorAttributeOptions options) {
        Map<String, Object> errorAttributes = super.getErrorAttributes(webRequest, options);
        
        // ì»¤ìŠ¤í…€ ì—ëŸ¬ ì •ë³´ ì¶”ê°€
        errorAttributes.put("errorId", UUID.randomUUID().toString());
        errorAttributes.put("supportContact", "support@skax.com");
        
        return errorAttributes;
    }
}
```

##### 2. ErrorController êµ¬í˜„
```java
@RestController
public class CustomErrorController implements ErrorController {
    
    @RequestMapping("/error")
    public AxResponseEntity<Void> handleError(HttpServletRequest request) {
        Integer statusCode = (Integer) request.getAttribute(RequestDispatcher.ERROR_STATUS_CODE);
        String message = (String) request.getAttribute(RequestDispatcher.ERROR_MESSAGE);
        
        ErrorCode errorCode = mapToErrorCode(statusCode);
        return AxResponseEntity.error(errorCode, message);
    }
    
    private ErrorCode mapToErrorCode(Integer statusCode) {
        return switch (statusCode) {
            case 404 -> ErrorCode.RESOURCE_NOT_FOUND;
            case 403 -> ErrorCode.ACCESS_DENIED;
            case 401 -> ErrorCode.AUTHENTICATION_FAILED;
            default -> ErrorCode.INTERNAL_SERVER_ERROR;
        };
    }
}
```

### 2.4 HTTP ìƒíƒœ ì½”ë“œì™€ ì—ëŸ¬ì˜ ê´€ê³„

HTTP ìƒíƒœ ì½”ë“œëŠ” í´ë¼ì´ì–¸íŠ¸ì—ê²Œ ìš”ì²­ ì²˜ë¦¬ ê²°ê³¼ë¥¼ ëª…í™•í•˜ê²Œ ì „ë‹¬í•˜ëŠ” í•µì‹¬ ìˆ˜ë‹¨ì…ë‹ˆë‹¤.

#### ğŸ“Š ìƒíƒœ ì½”ë“œ ë¶„ë¥˜ì™€ ì˜ë¯¸

##### 4xx í´ë¼ì´ì–¸íŠ¸ ì˜¤ë¥˜
```java
// 400 Bad Request - ì˜ëª»ëœ ìš”ì²­
@ExceptionHandler(MethodArgumentNotValidException.class)
public AxResponseEntity<Void> handleValidationError(MethodArgumentNotValidException ex) {
    List<FieldError> fieldErrors = ex.getBindingResult().getFieldErrors();
    
    return AxResponseEntity.badRequest(
        ErrorCode.VALIDATION_FAILED,
        "ì…ë ¥ê°’ ê²€ì¦ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤",
        fieldErrors.stream()
            .map(error -> error.getField() + ": " + error.getDefaultMessage())
            .collect(Collectors.joining(", "))
    );
}

// 401 Unauthorized - ì¸ì¦ ì‹¤íŒ¨
@ExceptionHandler(AuthenticationException.class)
public AxResponseEntity<Void> handleAuthenticationError(AuthenticationException ex) {
    return AxResponseEntity.unauthorized(ErrorCode.AUTHENTICATION_FAILED);
}

// 403 Forbidden - ê¶Œí•œ ë¶€ì¡±
@ExceptionHandler(AccessDeniedException.class)
public AxResponseEntity<Void> handleAccessDenied(AccessDeniedException ex) {
    return AxResponseEntity.forbidden(ErrorCode.ACCESS_DENIED);
}

// 404 Not Found - ë¦¬ì†ŒìŠ¤ ì—†ìŒ
@ExceptionHandler(ResourceNotFoundException.class)
public AxResponseEntity<Void> handleResourceNotFound(ResourceNotFoundException ex) {
    return AxResponseEntity.notFound(ErrorCode.RESOURCE_NOT_FOUND);
}

// 409 Conflict - ë¦¬ì†ŒìŠ¤ ì¶©ëŒ
@ExceptionHandler(DataIntegrityViolationException.class)
public AxResponseEntity<Void> handleDataIntegrityViolation(DataIntegrityViolationException ex) {
    return AxResponseEntity.conflict(ErrorCode.DATA_INTEGRITY_VIOLATION);
}
```

##### 5xx ì„œë²„ ì˜¤ë¥˜
```java
// 500 Internal Server Error - ì„œë²„ ë‚´ë¶€ ì˜¤ë¥˜
@ExceptionHandler(Exception.class)
public AxResponseEntity<Void> handleInternalError(Exception ex) {
    log.error("Unexpected error occurred", ex);
    return AxResponseEntity.internalServerError(ErrorCode.INTERNAL_SERVER_ERROR);
}

// 502 Bad Gateway - ì™¸ë¶€ ì„œë¹„ìŠ¤ ì˜¤ë¥˜
@ExceptionHandler(FeignException.class)
public AxResponseEntity<Void> handleFeignError(FeignException ex) {
    log.error("External service error: {}", ex.getMessage());
    return AxResponseEntity.badGateway(ErrorCode.EXTERNAL_SERVICE_ERROR);
}

// 503 Service Unavailable - ì„œë¹„ìŠ¤ ì¼ì‹œ ì¤‘ë‹¨
@ExceptionHandler(ServiceUnavailableException.class)
public AxResponseEntity<Void> handleServiceUnavailable(ServiceUnavailableException ex) {
    return AxResponseEntity.serviceUnavailable(ErrorCode.SERVICE_UNAVAILABLE);
}
```

#### ğŸ¯ ìƒíƒœ ì½”ë“œ ì„ íƒ ê°€ì´ë“œë¼ì¸

##### ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ ì—ëŸ¬ ë§¤í•‘
```java
public enum ErrorCode {
    // 400 Bad Request
    INVALID_INPUT_VALUE(HttpStatus.BAD_REQUEST, "C001", "ì˜ëª»ëœ ì…ë ¥ê°’ì…ë‹ˆë‹¤"),
    VALIDATION_FAILED(HttpStatus.BAD_REQUEST, "C002", "ì…ë ¥ê°’ ê²€ì¦ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤"),
    
    // 401 Unauthorized  
    AUTHENTICATION_FAILED(HttpStatus.UNAUTHORIZED, "A001", "ì¸ì¦ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤"),
    TOKEN_EXPIRED(HttpStatus.UNAUTHORIZED, "A003", "í† í°ì´ ë§Œë£Œë˜ì—ˆìŠµë‹ˆë‹¤"),
    
    // 403 Forbidden
    ACCESS_DENIED(HttpStatus.FORBIDDEN, "A002", "ì ‘ê·¼ ê¶Œí•œì´ ì—†ìŠµë‹ˆë‹¤"),
    INSUFFICIENT_PERMISSION(HttpStatus.FORBIDDEN, "A004", "ê¶Œí•œì´ ë¶€ì¡±í•©ë‹ˆë‹¤"),
    
    // 404 Not Found
    USER_NOT_FOUND(HttpStatus.NOT_FOUND, "U001", "ì‚¬ìš©ìë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤"),
    RESOURCE_NOT_FOUND(HttpStatus.NOT_FOUND, "C003", "ìš”ì²­í•œ ë¦¬ì†ŒìŠ¤ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤"),
    
    // 409 Conflict
    USER_ALREADY_EXISTS(HttpStatus.CONFLICT, "U002", "ì´ë¯¸ ì¡´ì¬í•˜ëŠ” ì‚¬ìš©ìì…ë‹ˆë‹¤"),
    DATA_INTEGRITY_VIOLATION(HttpStatus.CONFLICT, "C004", "ë°ì´í„° ë¬´ê²°ì„± ìœ„ë°˜"),
    
    // 500 Internal Server Error
    INTERNAL_SERVER_ERROR(HttpStatus.INTERNAL_SERVER_ERROR, "E001", "ì„œë²„ ë‚´ë¶€ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤"),
    
    // 502 Bad Gateway
    EXTERNAL_SERVICE_ERROR(HttpStatus.BAD_GATEWAY, "E002", "ì™¸ë¶€ ì„œë¹„ìŠ¤ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤");
}
```

#### ğŸ”„ ìƒíƒœ ì½”ë“œ ë§¤í•‘ ê·œì¹™

##### 1. RESTful API ì›ì¹™ ì¤€ìˆ˜
```java
// âœ… ì˜¬ë°”ë¥¸ ìƒíƒœ ì½”ë“œ ì‚¬ìš©
@PostMapping("/users")
public AxResponseEntity<UserResponse> createUser(@Valid @RequestBody UserCreateRequest request) {
    UserResponse user = userService.createUser(request);
    return AxResponseEntity.created(user, "ì‚¬ìš©ìê°€ ì„±ê³µì ìœ¼ë¡œ ìƒì„±ë˜ì—ˆìŠµë‹ˆë‹¤");  // 201 Created
}

@GetMapping("/users/{id}")
public AxResponseEntity<UserResponse> getUser(@PathVariable Long id) {
    UserResponse user = userService.getUserById(id);
    return AxResponseEntity.ok(user, "ì‚¬ìš©ì ì •ë³´ë¥¼ ì„±ê³µì ìœ¼ë¡œ ì¡°íšŒí–ˆìŠµë‹ˆë‹¤");  // 200 OK
}

@DeleteMapping("/users/{id}")
public AxResponseEntity<Void> deleteUser(@PathVariable Long id) {
    userService.deleteUser(id);
    return AxResponseEntity.deleted("ì‚¬ìš©ìê°€ ì„±ê³µì ìœ¼ë¡œ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤");  // 200 OK
}
```

##### 2. í´ë¼ì´ì–¸íŠ¸ ê°€ì´ë“œ ì œê³µ
```java
// ìƒíƒœ ì½”ë“œë³„ í´ë¼ì´ì–¸íŠ¸ ì•¡ì…˜ ê°€ì´ë“œ
public enum ActionType {
    CONFIRM(Arrays.asList(200, 201, 204)),     // ì„±ê³µ - ê³„ì† ì§„í–‰
    RETRY(Arrays.asList(429, 502, 503)),       // ì¬ì‹œë„ ê¶Œì¥
    FIX_INPUT(Arrays.asList(400, 422)),        // ì…ë ¥ê°’ ìˆ˜ì • í•„ìš”
    AUTHENTICATE(Arrays.asList(401)),          // ì¬ì¸ì¦ í•„ìš”
    CONTACT_ADMIN(Arrays.asList(403, 500));    // ê´€ë¦¬ì ë¬¸ì˜
    
    private final List<Integer> statusCodes;
}
```

#### ğŸ“ˆ ëª¨ë‹ˆí„°ë§ê³¼ ë©”íŠ¸ë¦­ìŠ¤

##### ìƒíƒœ ì½”ë“œë³„ ëª¨ë‹ˆí„°ë§ ì„¤ì •
```yaml
# application.yml
management:
  endpoints:
    web:
      exposure:
        include: health,metrics,prometheus
  metrics:
    export:
      prometheus:
        enabled: true
    web:
      server:
        request:
          autotime:
            enabled: true
            percentiles: 0.5,0.95,0.99
            percentiles-histogram: true

# ìƒíƒœ ì½”ë“œë³„ ì•Œë¦¼ ì„ê³„ê°’ ì„¤ì •
alert:
  error-rate:
    4xx-threshold: 10%  # 4xx ì—ëŸ¬ìœ¨ 10% ì´ˆê³¼ ì‹œ ì•Œë¦¼
    5xx-threshold: 5%   # 5xx ì—ëŸ¬ìœ¨ 5% ì´ˆê³¼ ì‹œ ì•Œë¦¼
  response-time:
    p95-threshold: 2000ms  # 95% ì‘ë‹µì‹œê°„ 2ì´ˆ ì´ˆê³¼ ì‹œ ì•Œë¦¼
```

---

## 3. ì»¤ìŠ¤í…€ ì˜ˆì™¸ ì„¤ê³„

### 3.1 ì˜ˆì™¸ ê³„ì¸µêµ¬ì¡° ì„¤ê³„

íš¨ê³¼ì ì¸ ì—ëŸ¬ì²˜ë¦¬ë¥¼ ìœ„í•´ì„œëŠ” ì²´ê³„ì ì¸ ì˜ˆì™¸ ê³„ì¸µêµ¬ì¡°ê°€ í•„ìš”í•©ë‹ˆë‹¤. AXPORTAL Backend í”„ë¡œì íŠ¸ì—ì„œëŠ” íƒ€ì… ì•ˆì „ì„±ê³¼ í™•ì¥ì„±ì„ ê³ ë ¤í•œ ì˜ˆì™¸ ê³„ì¸µì„ ì„¤ê³„í•©ë‹ˆë‹¤.

#### ğŸ—ï¸ ì˜ˆì™¸ ê³„ì¸µêµ¬ì¡° ì•„í‚¤í…ì²˜

```mermaid
graph TD
    A[RuntimeException] --> B[CustomException]
    B --> C[BusinessException]
    B --> D[ValidationException]
    B --> E[ExternalApiException]
    B --> F[SecurityException]
    B --> G[SystemException]
    
    C --> C1[UserBusinessException]
    C --> C2[OrderBusinessException]
    C --> C3[ProductBusinessException]
    
    D --> D1[InputValidationException]
    D --> D2[FileValidationException]
    
    E --> E1[FeignClientException]
    E --> E2[RestTemplateException]
    
    F --> F1[AuthenticationException]
    F --> F2[AuthorizationException]
    
    G --> G1[DatabaseException]
    G --> G2[FileSystemException]
```

#### ğŸ“‹ ê³„ì¸µë³„ ì±…ì„ê³¼ ì—­í• 

##### 1. CustomException (ìµœìƒìœ„ ì¶”ìƒ í´ë˜ìŠ¤)
```java
/**
 * ëª¨ë“  ì»¤ìŠ¤í…€ ì˜ˆì™¸ì˜ ìµœìƒìœ„ í´ë˜ìŠ¤
 * 
 * <p>í”„ë¡œì íŠ¸ ë‚´ ëª¨ë“  ì»¤ìŠ¤í…€ ì˜ˆì™¸ëŠ” ì´ í´ë˜ìŠ¤ë¥¼ ìƒì†ë°›ì•„ì•¼ í•©ë‹ˆë‹¤.
 * ErrorCode ê¸°ë°˜ íƒ€ì… ì•ˆì „ì„±ê³¼ í†µì¼ëœ ì˜ˆì™¸ ì²˜ë¦¬ë¥¼ ë³´ì¥í•©ë‹ˆë‹¤.</p>
 * 
 * @author ByounggwanLee
 * @since 2025-10-09
 * @version 1.0
 */
@Getter
@RequiredArgsConstructor
public abstract class CustomException extends RuntimeException {
    
    /**
     * ì—ëŸ¬ ì½”ë“œ
     * 
     * <p>HTTP ìƒíƒœ ì½”ë“œ, ì—ëŸ¬ ì½”ë“œ, ë©”ì‹œì§€ë¥¼ í¬í•¨í•˜ëŠ” Enumì…ë‹ˆë‹¤.
     * íƒ€ì… ì•ˆì „ì„±ì„ ë³´ì¥í•˜ê³  ì¼ê´€ëœ ì—ëŸ¬ ì‘ë‹µì„ ì œê³µí•©ë‹ˆë‹¤.</p>
     */
    private final ErrorCode errorCode;
    
    /**
     * ErrorCodeì™€ ì»¤ìŠ¤í…€ ë©”ì‹œì§€ë¥¼ í•¨ê»˜ ì‚¬ìš©í•˜ëŠ” ìƒì„±ì
     * 
     * @param errorCode ì—ëŸ¬ ì½”ë“œ Enum
     * @param customMessage ìƒí™©ë³„ ìƒì„¸ ë©”ì‹œì§€
     */
    public CustomException(ErrorCode errorCode, String customMessage) {
        super(customMessage);
        this.errorCode = errorCode;
    }
    
    /**
     * ErrorCodeì™€ ì›ì¸ ì˜ˆì™¸ë¥¼ í•¨ê»˜ ì‚¬ìš©í•˜ëŠ” ìƒì„±ì
     * 
     * @param errorCode ì—ëŸ¬ ì½”ë“œ Enum
     * @param cause ì›ì¸ ì˜ˆì™¸
     */
    public CustomException(ErrorCode errorCode, Throwable cause) {
        super(errorCode.getMessage(), cause);
        this.errorCode = errorCode;
    }
    
    /**
     * ëª¨ë“  ì •ë³´ë¥¼ í¬í•¨í•˜ëŠ” ìƒì„±ì
     * 
     * @param errorCode ì—ëŸ¬ ì½”ë“œ Enum
     * @param customMessage ìƒí™©ë³„ ìƒì„¸ ë©”ì‹œì§€
     * @param cause ì›ì¸ ì˜ˆì™¸
     */
    public CustomException(ErrorCode errorCode, String customMessage, Throwable cause) {
        super(customMessage, cause);
        this.errorCode = errorCode;
    }
}
```

##### 2. BusinessException (ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ ì˜ˆì™¸)
```java
/**
 * ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ ê´€ë ¨ ì˜ˆì™¸
 * 
 * <p>ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ë¹„ì¦ˆë‹ˆìŠ¤ ê·œì¹™ ìœ„ë°˜ì´ë‚˜ ë„ë©”ì¸ ë¡œì§ ì˜¤ë¥˜ ì‹œ ë°œìƒí•©ë‹ˆë‹¤.
 * ì‚¬ìš©ìì˜ ìš”ì²­ì€ ì˜¬ë°”ë¥´ì§€ë§Œ, ë¹„ì¦ˆë‹ˆìŠ¤ ê·œì¹™ì— ì–´ê¸‹ë‚˜ëŠ” ê²½ìš°ì— ì‚¬ìš©í•©ë‹ˆë‹¤.</p>
 * 
 * <h3>ì‚¬ìš© ì‹œë‚˜ë¦¬ì˜¤:</h3>
 * <ul>
 *   <li>ì‚¬ìš©ìê°€ ì¡´ì¬í•˜ì§€ ì•ŠìŒ</li>
 *   <li>ì¤‘ë³µëœ ì´ë©”ì¼ë¡œ ê°€ì… ì‹œë„</li>
 *   <li>ì¬ê³  ë¶€ì¡±ìœ¼ë¡œ ì£¼ë¬¸ ë¶ˆê°€</li>
 *   <li>ê¶Œí•œ ë¶€ì¡±ìœ¼ë¡œ ì ‘ê·¼ ë¶ˆê°€</li>
 * </ul>
 * 
 * @author ByounggwanLee
 * @since 2025-10-09
 */
public class BusinessException extends CustomException {
    
    public BusinessException(ErrorCode errorCode) {
        super(errorCode);
    }
    
    public BusinessException(ErrorCode errorCode, String customMessage) {
        super(errorCode, customMessage);
    }
    
    public BusinessException(ErrorCode errorCode, Throwable cause) {
        super(errorCode, cause);
    }
    
    public BusinessException(ErrorCode errorCode, String customMessage, Throwable cause) {
        super(errorCode, customMessage, cause);
    }
}
```

##### 3. ValidationException (ì…ë ¥ê°’ ê²€ì¦ ì˜ˆì™¸)
```java
/**
 * ì…ë ¥ê°’ ê²€ì¦ ê´€ë ¨ ì˜ˆì™¸
 * 
 * <p>í´ë¼ì´ì–¸íŠ¸ë¡œë¶€í„° ë°›ì€ ì…ë ¥ê°’ì´ ìœ íš¨í•˜ì§€ ì•Šì„ ë•Œ ë°œìƒí•©ë‹ˆë‹¤.
 * Jakarta Validationê³¼ ì—°ê³„í•˜ì—¬ ì‚¬ìš©í•˜ë©°, í•„ë“œë³„ ìƒì„¸ ê²€ì¦ ì˜¤ë¥˜ë¥¼ í¬í•¨í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
 * 
 * <h3>ì‚¬ìš© ì‹œë‚˜ë¦¬ì˜¤:</h3>
 * <ul>
 *   <li>í•„ìˆ˜ í•„ë“œ ëˆ„ë½</li>
 *   <li>ì˜ëª»ëœ ì´ë©”ì¼ í˜•ì‹</li>
 *   <li>ë²”ìœ„ë¥¼ ë²—ì–´ë‚œ ê°’</li>
 *   <li>íŒ¨í„´ ë¶ˆì¼ì¹˜</li>
 * </ul>
 * 
 * @author ByounggwanLee
 * @since 2025-10-09
 */
@Getter
public class ValidationException extends CustomException {
    
    /**
     * í•„ë“œë³„ ê²€ì¦ ì˜¤ë¥˜ ëª©ë¡
     */
    private final List<FieldValidationError> fieldErrors;
    
    public ValidationException(ErrorCode errorCode) {
        super(errorCode);
        this.fieldErrors = Collections.emptyList();
    }
    
    public ValidationException(ErrorCode errorCode, String customMessage) {
        super(errorCode, customMessage);
        this.fieldErrors = Collections.emptyList();
    }
    
    public ValidationException(ErrorCode errorCode, List<FieldValidationError> fieldErrors) {
        super(errorCode);
        this.fieldErrors = fieldErrors != null ? fieldErrors : Collections.emptyList();
    }
    
    public ValidationException(ErrorCode errorCode, String customMessage, List<FieldValidationError> fieldErrors) {
        super(errorCode, customMessage);
        this.fieldErrors = fieldErrors != null ? fieldErrors : Collections.emptyList();
    }
    
    /**
     * í•„ë“œ ê²€ì¦ ì˜¤ë¥˜ ì •ë³´
     */
    @Getter
    @AllArgsConstructor
    @Builder
    public static class FieldValidationError {
        private final String field;           // í•„ë“œëª…
        private final Object rejectedValue;   // ê±°ë¶€ëœ ê°’
        private final String message;         // ì˜¤ë¥˜ ë©”ì‹œì§€
    }
}
```

##### 4. ExternalApiException (ì™¸ë¶€ API ì˜ˆì™¸)
```java
/**
 * ì™¸ë¶€ API í˜¸ì¶œ ê´€ë ¨ ì˜ˆì™¸
 * 
 * <p>ì™¸ë¶€ ì‹œìŠ¤í…œê³¼ì˜ í†µì‹ ì—ì„œ ë°œìƒí•˜ëŠ” ì˜ˆì™¸ë¥¼ ì²˜ë¦¬í•©ë‹ˆë‹¤.
 * Feign Client, RestTemplate ë“±ì„ í†µí•œ ì™¸ë¶€ API í˜¸ì¶œ ì‹œ ë°œìƒí•˜ëŠ” ì˜¤ë¥˜ë¥¼ ë˜í•‘í•©ë‹ˆë‹¤.</p>
 * 
 * <h3>ì‚¬ìš© ì‹œë‚˜ë¦¬ì˜¤:</h3>
 * <ul>
 *   <li>ì™¸ë¶€ API í˜¸ì¶œ ì‹¤íŒ¨</li>
 *   <li>íƒ€ì„ì•„ì›ƒ ë°œìƒ</li>
 *   <li>ë„¤íŠ¸ì›Œí¬ ì—°ê²° ì˜¤ë¥˜</li>
 *   <li>ì™¸ë¶€ ì„œë¹„ìŠ¤ ì¼ì‹œ ì¤‘ë‹¨</li>
 * </ul>
 * 
 * @author ByounggwanLee
 * @since 2025-10-09
 */
@Getter
public class ExternalApiException extends CustomException {
    
    /**
     * ì™¸ë¶€ API ì •ë³´
     */
    private final String apiName;
    private final String endpoint;
    private final Integer responseStatus;
    
    public ExternalApiException(ErrorCode errorCode, String apiName, String endpoint) {
        super(errorCode);
        this.apiName = apiName;
        this.endpoint = endpoint;
        this.responseStatus = null;
    }
    
    public ExternalApiException(ErrorCode errorCode, String apiName, String endpoint, 
                               Integer responseStatus, String customMessage) {
        super(errorCode, customMessage);
        this.apiName = apiName;
        this.endpoint = endpoint;
        this.responseStatus = responseStatus;
    }
    
    public ExternalApiException(ErrorCode errorCode, String apiName, String endpoint, Throwable cause) {
        super(errorCode, cause);
        this.apiName = apiName;
        this.endpoint = endpoint;
        this.responseStatus = null;
    }
}
```

#### ğŸ¯ ê³„ì¸µêµ¬ì¡° ì„¤ê³„ ì›ì¹™

##### 1. ë‹¨ì¼ ì±…ì„ ì›ì¹™ (SRP)
```java
// âœ… ê° ì˜ˆì™¸ í´ë˜ìŠ¤ëŠ” ëª…í™•í•œ ì±…ì„ì„ ê°€ì§
BusinessException    // ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ ì˜¤ë¥˜ë§Œ ë‹´ë‹¹
ValidationException  // ì…ë ¥ê°’ ê²€ì¦ ì˜¤ë¥˜ë§Œ ë‹´ë‹¹
ExternalApiException // ì™¸ë¶€ API ì˜¤ë¥˜ë§Œ ë‹´ë‹¹
```

##### 2. ê°œë°©-íì‡„ ì›ì¹™ (OCP)
```java
// âœ… ìƒˆë¡œìš´ ì˜ˆì™¸ íƒ€ì… ì¶”ê°€ ì‹œ ê¸°ì¡´ ì½”ë“œ ìˆ˜ì • ì—†ì´ í™•ì¥ ê°€ëŠ¥
public class PaymentException extends BusinessException {
    // ê²°ì œ ê´€ë ¨ íŠ¹í™” ê¸°ëŠ¥ ì¶”ê°€
}

public class FileUploadException extends ValidationException {
    // íŒŒì¼ ì—…ë¡œë“œ ê²€ì¦ íŠ¹í™” ê¸°ëŠ¥ ì¶”ê°€
}
```

##### 3. ë¦¬ìŠ¤ì½”í”„ ì¹˜í™˜ ì›ì¹™ (LSP)
```java
// âœ… ëª¨ë“  í•˜ìœ„ ì˜ˆì™¸ëŠ” CustomExceptionìœ¼ë¡œ ì¹˜í™˜ ê°€ëŠ¥
public void handleException(CustomException ex) {
    // BusinessException, ValidationException ë“± ëª¨ë‘ ì²˜ë¦¬ ê°€ëŠ¥
    ErrorCode errorCode = ex.getErrorCode();
    log.warn("Exception occurred: {}", errorCode);
}
```

### 3.2 BaseException ë° í•˜ìœ„ ì˜ˆì™¸ í´ë˜ìŠ¤

BaseExceptionì€ í”„ë¡œì íŠ¸ì˜ ëª¨ë“  ì˜ˆì™¸ í´ë˜ìŠ¤ê°€ ìƒì†ë°›ëŠ” ê¸°ë³¸ í´ë˜ìŠ¤ë¡œ, ê³µí†µ ê¸°ëŠ¥ê³¼ í‘œì¤€í™”ëœ ì¸í„°í˜ì´ìŠ¤ë¥¼ ì œê³µí•©ë‹ˆë‹¤.

#### ğŸ›ï¸ BaseException ì„¤ê³„

```java
/**
 * ëª¨ë“  ì»¤ìŠ¤í…€ ì˜ˆì™¸ì˜ ê¸°ë³¸ í´ë˜ìŠ¤
 * 
 * <p>í”„ë¡œì íŠ¸ ë‚´ ëª¨ë“  ì»¤ìŠ¤í…€ ì˜ˆì™¸ëŠ” ì´ í´ë˜ìŠ¤ë¥¼ ìƒì†ë°›ì•„ì•¼ í•©ë‹ˆë‹¤.
 * ErrorCode ê¸°ë°˜ íƒ€ì… ì•ˆì „ì„±ê³¼ í†µì¼ëœ ì˜ˆì™¸ ì²˜ë¦¬ë¥¼ ë³´ì¥í•©ë‹ˆë‹¤.</p>
 * 
 * <h3>ì£¼ìš” ê¸°ëŠ¥:</h3>
 * <ul>
 *   <li>ErrorCode ê¸°ë°˜ íƒ€ì… ì•ˆì „í•œ ì˜ˆì™¸ ì²˜ë¦¬</li>
 *   <li>ë‹¤ì–‘í•œ ìƒì„±ìë¥¼ í†µí•œ ìœ ì—°í•œ ì˜ˆì™¸ ìƒì„±</li>
 *   <li>ì²´ì´ë‹ì„ í†µí•œ ì›ì¸ ì˜ˆì™¸ ì¶”ì </li>
 *   <li>êµ¬ì¡°í™”ëœ ë¡œê¹… ì§€ì›</li>
 * </ul>
 * 
 * @author ByounggwanLee
 * @since 2025-10-09
 * @version 1.0
 */
@Getter
@Slf4j
public abstract class BaseException extends RuntimeException {
    
    /**
     * ì—ëŸ¬ ì½”ë“œ - HTTP ìƒíƒœ, ì½”ë“œ, ë©”ì‹œì§€ í¬í•¨
     */
    private final ErrorCode errorCode;
    
    /**
     * ì˜ˆì™¸ ë°œìƒ ì‹œê°„
     */
    private final LocalDateTime occurredAt;
    
    /**
     * ì˜ˆì™¸ ê³ ìœ  ID (ì¶”ì ìš©)
     */
    private final String exceptionId;
    
    /**
     * ê¸°ë³¸ ìƒì„±ì - ErrorCodeë§Œ ì‚¬ìš©
     * 
     * @param errorCode ì—ëŸ¬ ì½”ë“œ Enum
     */
    protected BaseException(ErrorCode errorCode) {
        super(errorCode.getMessage());
        this.errorCode = errorCode;
        this.occurredAt = LocalDateTime.now();
        this.exceptionId = UUID.randomUUID().toString();
        logException();
    }
    
    /**
     * ì»¤ìŠ¤í…€ ë©”ì‹œì§€ë¥¼ í¬í•¨í•˜ëŠ” ìƒì„±ì
     * 
     * @param errorCode ì—ëŸ¬ ì½”ë“œ Enum
     * @param customMessage ìƒí™©ë³„ ìƒì„¸ ë©”ì‹œì§€
     */
    protected BaseException(ErrorCode errorCode, String customMessage) {
        super(customMessage);
        this.errorCode = errorCode;
        this.occurredAt = LocalDateTime.now();
        this.exceptionId = UUID.randomUUID().toString();
        logException();
    }
    
    /**
     * ì›ì¸ ì˜ˆì™¸ë¥¼ í¬í•¨í•˜ëŠ” ìƒì„±ì
     * 
     * @param errorCode ì—ëŸ¬ ì½”ë“œ Enum
     * @param cause ì›ì¸ ì˜ˆì™¸
     */
    protected BaseException(ErrorCode errorCode, Throwable cause) {
        super(errorCode.getMessage(), cause);
        this.errorCode = errorCode;
        this.occurredAt = LocalDateTime.now();
        this.exceptionId = UUID.randomUUID().toString();
        logException();
    }
    
    /**
     * ëª¨ë“  ì •ë³´ë¥¼ í¬í•¨í•˜ëŠ” ìƒì„±ì
     * 
     * @param errorCode ì—ëŸ¬ ì½”ë“œ Enum
     * @param customMessage ìƒí™©ë³„ ìƒì„¸ ë©”ì‹œì§€
     * @param cause ì›ì¸ ì˜ˆì™¸
     */
    protected BaseException(ErrorCode errorCode, String customMessage, Throwable cause) {
        super(customMessage, cause);
        this.errorCode = errorCode;
        this.occurredAt = LocalDateTime.now();
        this.exceptionId = UUID.randomUUID().toString();
        logException();
    }
    
    /**
     * ì˜ˆì™¸ ë°œìƒ ì‹œ ìë™ ë¡œê¹…
     */
    private void logException() {
        if (errorCode.getStatus().is5xxServerError()) {
            log.error("ğŸš¨ Server Error [{}] {}: {} - ExceptionId: {}", 
                errorCode.getCode(), errorCode.getStatus(), getMessage(), exceptionId, this);
        } else if (errorCode.getStatus().is4xxClientError()) {
            log.warn("âš ï¸ Client Error [{}] {}: {} - ExceptionId: {}", 
                errorCode.getCode(), errorCode.getStatus(), getMessage(), exceptionId);
        } else {
            log.info("â„¹ï¸ Exception [{}] {}: {} - ExceptionId: {}", 
                errorCode.getCode(), errorCode.getStatus(), getMessage(), exceptionId);
        }
    }
    
    /**
     * ì˜ˆì™¸ ì •ë³´ë¥¼ Mapìœ¼ë¡œ ë°˜í™˜ (ë¡œê¹…, ëª¨ë‹ˆí„°ë§ìš©)
     * 
     * @return ì˜ˆì™¸ ì •ë³´ Map
     */
    public Map<String, Object> toLogMap() {
        Map<String, Object> logMap = new HashMap<>();
        logMap.put("exceptionId", exceptionId);
        logMap.put("errorCode", errorCode.getCode());
        logMap.put("httpStatus", errorCode.getStatus().value());
        logMap.put("message", getMessage());
        logMap.put("occurredAt", occurredAt);
        logMap.put("exceptionType", this.getClass().getSimpleName());
        
        if (getCause() != null) {
            logMap.put("rootCause", getCause().getClass().getSimpleName());
            logMap.put("rootCauseMessage", getCause().getMessage());
        }
        
        return logMap;
    }
    
    /**
     * ì˜ˆì™¸ ì²´ì´ë‹ì„ í†µí•œ ê·¼ë³¸ ì›ì¸ íƒìƒ‰
     * 
     * @return ê·¼ë³¸ ì›ì¸ ì˜ˆì™¸
     */
    public Throwable getRootCause() {
        Throwable cause = this.getCause();
        if (cause == null) {
            return this;
        }
        
        while (cause.getCause() != null) {
            cause = cause.getCause();
        }
        
        return cause;
    }
}
```

#### ğŸ”§ ë„ë©”ì¸ë³„ í•˜ìœ„ ì˜ˆì™¸ í´ë˜ìŠ¤

##### 1. ì‚¬ìš©ì ê´€ë¦¬ ë„ë©”ì¸ ì˜ˆì™¸
```java
/**
 * ì‚¬ìš©ì ê´€ë¦¬ ë„ë©”ì¸ ì˜ˆì™¸
 * 
 * <p>ì‚¬ìš©ì ìƒì„±, ì¡°íšŒ, ìˆ˜ì •, ì‚­ì œì™€ ê´€ë ¨ëœ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ ì˜ˆì™¸ë¥¼ ì²˜ë¦¬í•©ë‹ˆë‹¤.</p>
 * 
 * @author ByounggwanLee
 * @since 2025-10-09
 */
public class UserException extends BusinessException {
    
    public UserException(ErrorCode errorCode) {
        super(errorCode);
    }
    
    public UserException(ErrorCode errorCode, String customMessage) {
        super(errorCode, customMessage);
    }
    
    // ì •ì  íŒ©í† ë¦¬ ë©”ì„œë“œë¥¼ í†µí•œ ì˜ë¯¸ìˆëŠ” ì˜ˆì™¸ ìƒì„±
    public static UserException notFound(Long userId) {
        return new UserException(ErrorCode.USER_NOT_FOUND, 
            "ì‚¬ìš©ì ID " + userId + "ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤");
    }
    
    public static UserException alreadyExists(String email) {
        return new UserException(ErrorCode.USER_ALREADY_EXISTS, 
            "ì´ë¯¸ ì¡´ì¬í•˜ëŠ” ì´ë©”ì¼ì…ë‹ˆë‹¤: " + email);
    }
    
    public static UserException inactive(Long userId) {
        return new UserException(ErrorCode.USER_INACTIVE, 
            "ë¹„í™œì„±í™”ëœ ì‚¬ìš©ìì…ë‹ˆë‹¤: " + userId);
    }
    
    public static UserException invalidPassword() {
        return new UserException(ErrorCode.INVALID_PASSWORD, 
            "ì˜ëª»ëœ ë¹„ë°€ë²ˆí˜¸ì…ë‹ˆë‹¤");
    }
}
```

##### 2. íŒŒì¼ ì²˜ë¦¬ ë„ë©”ì¸ ì˜ˆì™¸
```java
/**
 * íŒŒì¼ ì²˜ë¦¬ ë„ë©”ì¸ ì˜ˆì™¸
 * 
 * <p>íŒŒì¼ ì—…ë¡œë“œ, ë‹¤ìš´ë¡œë“œ, ê²€ì¦ê³¼ ê´€ë ¨ëœ ì˜ˆì™¸ë¥¼ ì²˜ë¦¬í•©ë‹ˆë‹¤.</p>
 * 
 * @author ByounggwanLee
 * @since 2025-10-09
 */
@Getter
public class FileException extends ValidationException {
    
    private final String fileName;
    private final Long fileSize;
    private final String contentType;
    
    public FileException(ErrorCode errorCode, String fileName) {
        super(errorCode);
        this.fileName = fileName;
        this.fileSize = null;
        this.contentType = null;
    }
    
    public FileException(ErrorCode errorCode, String fileName, Long fileSize, String contentType) {
        super(errorCode);
        this.fileName = fileName;
        this.fileSize = fileSize;
        this.contentType = contentType;
    }
    
    // ì •ì  íŒ©í† ë¦¬ ë©”ì„œë“œ
    public static FileException tooLarge(String fileName, Long fileSize, Long maxSize) {
        return new FileException(ErrorCode.FILE_SIZE_EXCEEDED, 
            String.format("íŒŒì¼ í¬ê¸°ê°€ ì´ˆê³¼ë˜ì—ˆìŠµë‹ˆë‹¤. íŒŒì¼: %s, í¬ê¸°: %d bytes, ìµœëŒ€: %d bytes", 
                fileName, fileSize, maxSize), fileSize, null);
    }
    
    public static FileException unsupportedType(String fileName, String contentType) {
        return new FileException(ErrorCode.UNSUPPORTED_FILE_TYPE, 
            String.format("ì§€ì›í•˜ì§€ ì•ŠëŠ” íŒŒì¼ í˜•ì‹ì…ë‹ˆë‹¤. íŒŒì¼: %s, íƒ€ì…: %s", fileName, contentType),
            null, contentType);
    }
    
    public static FileException uploadFailed(String fileName, Throwable cause) {
        FileException exception = new FileException(ErrorCode.FILE_UPLOAD_FAILED, fileName);
        exception.initCause(cause);
        return exception;
    }
}
```

##### 3. ì™¸ë¶€ API ì—°ë™ ì˜ˆì™¸
```java
/**
 * SKTAI API ì—°ë™ ì˜ˆì™¸
 * 
 * <p>SKTAI ì™¸ë¶€ API í˜¸ì¶œê³¼ ê´€ë ¨ëœ ì˜ˆì™¸ë¥¼ ì²˜ë¦¬í•©ë‹ˆë‹¤.</p>
 * 
 * @author ByounggwanLee
 * @since 2025-10-09
 */
@Getter
public class SktaiApiException extends ExternalApiException {
    
    private final String requestId;
    private final String projectId;
    
    public SktaiApiException(ErrorCode errorCode, String endpoint, String requestId) {
        super(errorCode, "SKTAI-API", endpoint);
        this.requestId = requestId;
        this.projectId = null;
    }
    
    public SktaiApiException(ErrorCode errorCode, String endpoint, String requestId, 
                            String projectId, Integer responseStatus) {
        super(errorCode, "SKTAI-API", endpoint, responseStatus, 
            String.format("SKTAI API í˜¸ì¶œ ì‹¤íŒ¨ - ProjectId: %s, RequestId: %s", projectId, requestId));
        this.requestId = requestId;
        this.projectId = projectId;
    }
    
    // ì •ì  íŒ©í† ë¦¬ ë©”ì„œë“œ
    public static SktaiApiException authenticationFailed(String endpoint, String requestId) {
        return new SktaiApiException(ErrorCode.SKTAI_AUTH_FAILED, endpoint, requestId);
    }
    
    public static SktaiApiException quotaExceeded(String endpoint, String requestId, String projectId) {
        return new SktaiApiException(ErrorCode.SKTAI_QUOTA_EXCEEDED, endpoint, requestId, projectId, 429);
    }
    
    public static SktaiApiException serviceUnavailable(String endpoint, String requestId) {
        return new SktaiApiException(ErrorCode.SKTAI_SERVICE_UNAVAILABLE, endpoint, requestId, null, 503);
    }
}
```

### 3.3 ErrorCode Enum ì„¤ê³„ íŒ¨í„´

ErrorCodeëŠ” ì—ëŸ¬ ì •ë³´ë¥¼ íƒ€ì… ì•ˆì „í•˜ê²Œ ê´€ë¦¬í•˜ëŠ” í•µì‹¬ ì»´í¬ë„ŒíŠ¸ì…ë‹ˆë‹¤. HTTP ìƒíƒœ ì½”ë“œ, ë¹„ì¦ˆë‹ˆìŠ¤ ì—ëŸ¬ ì½”ë“œ, ë©”ì‹œì§€ë¥¼ í•˜ë‚˜ë¡œ í†µí•©í•˜ì—¬ ê´€ë¦¬í•©ë‹ˆë‹¤.

#### ğŸ¯ ErrorCode ê¸°ë³¸ êµ¬ì¡°

```java
/**
 * ì—ëŸ¬ ì½”ë“œ ì •ì˜ Enum
 * 
 * <p>ëª¨ë“  ì—ëŸ¬ ìƒí™©ì— ëŒ€í•œ HTTP ìƒíƒœ ì½”ë“œ, ë¹„ì¦ˆë‹ˆìŠ¤ ì—ëŸ¬ ì½”ë“œ, ë©”ì‹œì§€ë¥¼ í†µí•© ê´€ë¦¬í•©ë‹ˆë‹¤.
 * íƒ€ì… ì•ˆì „ì„±ì„ ë³´ì¥í•˜ê³  ì¼ê´€ëœ ì—ëŸ¬ ì‘ë‹µì„ ì œê³µí•©ë‹ˆë‹¤.</p>
 * 
 * <h3>ì½”ë“œ ì²´ê³„:</h3>
 * <ul>
 *   <li><strong>U001~U099</strong>: ì‚¬ìš©ì ê´€ë ¨</li>
 *   <li><strong>S001~S099</strong>: ìƒ˜í”Œ ê´€ë ¨</li>
 *   <li><strong>A001~A099</strong>: ì¸ì¦/ì¸ê°€ ê´€ë ¨</li>
 *   <li><strong>C001~C099</strong>: ê³µí†µ/ê²€ì¦ ê´€ë ¨</li>
 *   <li><strong>F001~F099</strong>: íŒŒì¼ ê´€ë ¨</li>
 *   <li><strong>E001~E099</strong>: ì„œë²„/ì‹œìŠ¤í…œ ê´€ë ¨</li>
 *   <li><strong>X001~X099</strong>: ì™¸ë¶€ API ê´€ë ¨</li>
 * </ul>
 * 
 * @author ByounggwanLee
 * @since 2025-10-09
 * @version 1.0
 */
@Getter
@RequiredArgsConstructor
public enum ErrorCode {
    
    // ========== ì‚¬ìš©ì ê´€ë ¨ (U001~U099) ==========
    /**
     * ì‚¬ìš©ìë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŒ
     */
    USER_NOT_FOUND(HttpStatus.NOT_FOUND, "U001", "ì‚¬ìš©ìë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤"),
    
    /**
     * ì´ë¯¸ ì¡´ì¬í•˜ëŠ” ì‚¬ìš©ì
     */
    USER_ALREADY_EXISTS(HttpStatus.CONFLICT, "U002", "ì´ë¯¸ ì¡´ì¬í•˜ëŠ” ì‚¬ìš©ìì…ë‹ˆë‹¤"),
    
    /**
     * ë¹„í™œì„±í™”ëœ ì‚¬ìš©ì
     */
    USER_INACTIVE(HttpStatus.FORBIDDEN, "U003", "ë¹„í™œì„±í™”ëœ ì‚¬ìš©ìì…ë‹ˆë‹¤"),
    
    /**
     * ì˜ëª»ëœ ë¹„ë°€ë²ˆí˜¸
     */
    INVALID_PASSWORD(HttpStatus.UNAUTHORIZED, "U004", "ì˜ëª»ëœ ë¹„ë°€ë²ˆí˜¸ì…ë‹ˆë‹¤"),
    
    /**
     * ì‚¬ìš©ì ê¶Œí•œ ë¶€ì¡±
     */
    USER_PERMISSION_DENIED(HttpStatus.FORBIDDEN, "U005", "ì‚¬ìš©ì ê¶Œí•œì´ ë¶€ì¡±í•©ë‹ˆë‹¤"),
    
    // ========== ìƒ˜í”Œ ê´€ë ¨ (S001~S099) ==========
    /**
     * ìƒ˜í”Œì„ ì°¾ì„ ìˆ˜ ì—†ìŒ
     */
    SAMPLE_NOT_FOUND(HttpStatus.NOT_FOUND, "S001", "ìƒ˜í”Œì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤"),
    
    /**
     * ì´ë¯¸ ì¡´ì¬í•˜ëŠ” ìƒ˜í”Œ
     */
    SAMPLE_ALREADY_EXISTS(HttpStatus.CONFLICT, "S002", "ì´ë¯¸ ì¡´ì¬í•˜ëŠ” ìƒ˜í”Œì…ë‹ˆë‹¤"),
    
    // ========== ì¸ì¦/ì¸ê°€ ê´€ë ¨ (A001~A099) ==========
    /**
     * ì¸ì¦ ì‹¤íŒ¨
     */
    AUTHENTICATION_FAILED(HttpStatus.UNAUTHORIZED, "A001", "ì¸ì¦ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤"),
    
    /**
     * ì ‘ê·¼ ê¶Œí•œ ì—†ìŒ
     */
    ACCESS_DENIED(HttpStatus.FORBIDDEN, "A002", "ì ‘ê·¼ ê¶Œí•œì´ ì—†ìŠµë‹ˆë‹¤"),
    
    /**
     * í† í° ë§Œë£Œ
     */
    TOKEN_EXPIRED(HttpStatus.UNAUTHORIZED, "A003", "í† í°ì´ ë§Œë£Œë˜ì—ˆìŠµë‹ˆë‹¤"),
    
    /**
     * ìœ íš¨í•˜ì§€ ì•Šì€ í† í°
     */
    INVALID_TOKEN(HttpStatus.UNAUTHORIZED, "A004", "ìœ íš¨í•˜ì§€ ì•Šì€ í† í°ì…ë‹ˆë‹¤"),
    
    /**
     * ê¶Œí•œ ë¶€ì¡±
     */
    INSUFFICIENT_PERMISSION(HttpStatus.FORBIDDEN, "A005", "ê¶Œí•œì´ ë¶€ì¡±í•©ë‹ˆë‹¤"),
    
    // ========== ê³µí†µ/ê²€ì¦ ê´€ë ¨ (C001~C099) ==========
    /**
     * ì˜ëª»ëœ ì…ë ¥ê°’
     */
    INVALID_INPUT_VALUE(HttpStatus.BAD_REQUEST, "C001", "ì˜ëª»ëœ ì…ë ¥ê°’ì…ë‹ˆë‹¤"),
    
    /**
     * ì…ë ¥ê°’ ê²€ì¦ ì‹¤íŒ¨
     */
    VALIDATION_FAILED(HttpStatus.BAD_REQUEST, "C002", "ì…ë ¥ê°’ ê²€ì¦ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤"),
    
    /**
     * ìš”ì²­í•œ ë¦¬ì†ŒìŠ¤ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŒ
     */
    RESOURCE_NOT_FOUND(HttpStatus.NOT_FOUND, "C003", "ìš”ì²­í•œ ë¦¬ì†ŒìŠ¤ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤"),
    
    /**
     * ë°ì´í„° ë¬´ê²°ì„± ìœ„ë°˜
     */
    DATA_INTEGRITY_VIOLATION(HttpStatus.CONFLICT, "C004", "ë°ì´í„° ë¬´ê²°ì„± ìœ„ë°˜ì…ë‹ˆë‹¤"),
    
    /**
     * ì¤‘ë³µëœ ë¦¬ì†ŒìŠ¤
     */
    DUPLICATE_RESOURCE(HttpStatus.CONFLICT, "C005", "ì¤‘ë³µëœ ë¦¬ì†ŒìŠ¤ì…ë‹ˆë‹¤"),
    
    // ========== íŒŒì¼ ê´€ë ¨ (F001~F099) ==========
    /**
     * íŒŒì¼ í¬ê¸° ì´ˆê³¼
     */
    FILE_SIZE_EXCEEDED(HttpStatus.BAD_REQUEST, "F001", "íŒŒì¼ í¬ê¸°ê°€ ì´ˆê³¼ë˜ì—ˆìŠµë‹ˆë‹¤"),
    
    /**
     * ì§€ì›í•˜ì§€ ì•ŠëŠ” íŒŒì¼ í˜•ì‹
     */
    UNSUPPORTED_FILE_TYPE(HttpStatus.BAD_REQUEST, "F002", "ì§€ì›í•˜ì§€ ì•ŠëŠ” íŒŒì¼ í˜•ì‹ì…ë‹ˆë‹¤"),
    
    /**
     * íŒŒì¼ ì—…ë¡œë“œ ì‹¤íŒ¨
     */
    FILE_UPLOAD_FAILED(HttpStatus.INTERNAL_SERVER_ERROR, "F003", "íŒŒì¼ ì—…ë¡œë“œì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤"),
    
    /**
     * íŒŒì¼ ë‹¤ìš´ë¡œë“œ ì‹¤íŒ¨
     */
    FILE_DOWNLOAD_FAILED(HttpStatus.INTERNAL_SERVER_ERROR, "F004", "íŒŒì¼ ë‹¤ìš´ë¡œë“œì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤"),
    
    /**
     * íŒŒì¼ì„ ì°¾ì„ ìˆ˜ ì—†ìŒ
     */
    FILE_NOT_FOUND(HttpStatus.NOT_FOUND, "F005", "íŒŒì¼ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤"),
    
    // ========== ì„œë²„/ì‹œìŠ¤í…œ ê´€ë ¨ (E001~E099) ==========
    /**
     * ì„œë²„ ë‚´ë¶€ ì˜¤ë¥˜
     */
    INTERNAL_SERVER_ERROR(HttpStatus.INTERNAL_SERVER_ERROR, "E001", "ì„œë²„ ë‚´ë¶€ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤"),
    
    /**
     * ì™¸ë¶€ ì„œë¹„ìŠ¤ ì˜¤ë¥˜
     */
    EXTERNAL_SERVICE_ERROR(HttpStatus.BAD_GATEWAY, "E002", "ì™¸ë¶€ ì„œë¹„ìŠ¤ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤"),
    
    /**
     * ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²° ì˜¤ë¥˜
     */
    DATABASE_CONNECTION_ERROR(HttpStatus.INTERNAL_SERVER_ERROR, "E003", "ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²° ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤"),
    
    /**
     * ì„œë¹„ìŠ¤ ì¼ì‹œ ì¤‘ë‹¨
     */
    SERVICE_UNAVAILABLE(HttpStatus.SERVICE_UNAVAILABLE, "E004", "ì„œë¹„ìŠ¤ê°€ ì¼ì‹œì ìœ¼ë¡œ ì¤‘ë‹¨ë˜ì—ˆìŠµë‹ˆë‹¤"),
    
    /**
     * íƒ€ì„ì•„ì›ƒ ë°œìƒ
     */
    REQUEST_TIMEOUT(HttpStatus.REQUEST_TIMEOUT, "E005", "ìš”ì²­ ì‹œê°„ì´ ì´ˆê³¼ë˜ì—ˆìŠµë‹ˆë‹¤"),
    
    // ========== ì™¸ë¶€ API ê´€ë ¨ (X001~X099) ==========
    /**
     * SKTAI API ì¸ì¦ ì‹¤íŒ¨
     */
    SKTAI_AUTH_FAILED(HttpStatus.UNAUTHORIZED, "X001", "SKTAI API ì¸ì¦ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤"),
    
    /**
     * SKTAI API í• ë‹¹ëŸ‰ ì´ˆê³¼
     */
    SKTAI_QUOTA_EXCEEDED(HttpStatus.TOO_MANY_REQUESTS, "X002", "SKTAI API í• ë‹¹ëŸ‰ì„ ì´ˆê³¼í–ˆìŠµë‹ˆë‹¤"),
    
    /**
     * SKTAI API ì„œë¹„ìŠ¤ ì¤‘ë‹¨
     */
    SKTAI_SERVICE_UNAVAILABLE(HttpStatus.SERVICE_UNAVAILABLE, "X003", "SKTAI API ì„œë¹„ìŠ¤ê°€ ì¼ì‹œ ì¤‘ë‹¨ë˜ì—ˆìŠµë‹ˆë‹¤"),
    
    /**
     * ì™¸ë¶€ API í˜¸ì¶œ ì‹¤íŒ¨
     */
    EXTERNAL_API_CALL_FAILED(HttpStatus.BAD_GATEWAY, "X004", "ì™¸ë¶€ API í˜¸ì¶œì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤");
    
    /**
     * HTTP ìƒíƒœ ì½”ë“œ
     */
    private final HttpStatus status;
    
    /**
     * ë¹„ì¦ˆë‹ˆìŠ¤ ì—ëŸ¬ ì½”ë“œ
     */
    private final String code;
    
    /**
     * ì—ëŸ¬ ë©”ì‹œì§€
     */
    private final String message;
    
    /**
     * ì—ëŸ¬ ì½”ë“œë¥¼ ë¬¸ìì—´ë¡œ ë°˜í™˜
     * 
     * @return "ìƒíƒœì½”ë“œ-ì—ëŸ¬ì½”ë“œ" í˜•ì‹ì˜ ë¬¸ìì—´
     */
    public String getFullCode() {
        return status.value() + "-" + code;
    }
    
    /**
     * ì—ëŸ¬ ì •ë³´ë¥¼ Mapìœ¼ë¡œ ë°˜í™˜
     * 
     * @return ì—ëŸ¬ ì •ë³´ê°€ ë‹´ê¸´ Map
     */
    public Map<String, Object> toMap() {
        Map<String, Object> map = new HashMap<>();
        map.put("status", status.value());
        map.put("code", code);
        map.put("message", message);
        map.put("fullCode", getFullCode());
        return map;
    }
    
    /**
     * HTTP ìƒíƒœ ì½”ë“œë³„ ErrorCode ëª©ë¡ ì¡°íšŒ
     * 
     * @param status HTTP ìƒíƒœ ì½”ë“œ
     * @return í•´ë‹¹ ìƒíƒœ ì½”ë“œë¥¼ ê°€ì§„ ErrorCode ëª©ë¡
     */
    public static List<ErrorCode> getByStatus(HttpStatus status) {
        return Arrays.stream(values())
                .filter(errorCode -> errorCode.getStatus() == status)
                .collect(Collectors.toList());
    }
    
    /**
     * ì—ëŸ¬ ì½”ë“œë¡œ ErrorCode ì¡°íšŒ
     * 
     * @param code ì—ëŸ¬ ì½”ë“œ
     * @return í•´ë‹¹ ì½”ë“œë¥¼ ê°€ì§„ ErrorCode
     * @throws IllegalArgumentException í•´ë‹¹ ì½”ë“œê°€ ì—†ëŠ” ê²½ìš°
     */
    public static ErrorCode getByCode(String code) {
        return Arrays.stream(values())
                .filter(errorCode -> errorCode.getCode().equals(code))
                .findFirst()
                .orElseThrow(() -> new IllegalArgumentException("Unknown error code: " + code));
    }
}
```

#### ğŸ·ï¸ ErrorCode ì‚¬ìš© íŒ¨í„´

##### 1. ê¸°ë³¸ ì‚¬ìš©ë²•
```java
// âœ… ê¸°ë³¸ ErrorCode ì‚¬ìš©
throw new BusinessException(ErrorCode.USER_NOT_FOUND);

// âœ… ì»¤ìŠ¤í…€ ë©”ì‹œì§€ì™€ í•¨ê»˜ ì‚¬ìš©
throw new BusinessException(ErrorCode.USER_NOT_FOUND, 
    "ì‚¬ìš©ì ID " + userId + "ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤");
```

##### 2. ì •ì  íŒ©í† ë¦¬ ë©”ì„œë“œ í™œìš©
```java
// UserService í´ë˜ìŠ¤ ë‚´ë¶€
public UserResponse getUserById(Long id) {
    return userRepository.findById(id)
        .map(userMapper::toResponse)
        .orElseThrow(() -> UserException.notFound(id));
}

public UserResponse createUser(UserCreateRequest request) {
    if (userRepository.existsByEmail(request.getEmail())) {
        throw UserException.alreadyExists(request.getEmail());
    }
    // ì‚¬ìš©ì ìƒì„± ë¡œì§...
}
```

##### 3. ì¡°ê±´ë¶€ ErrorCode ì„ íƒ
```java
public class ValidationService {
    
    public void validateUserInput(UserCreateRequest request) {
        List<FieldValidationError> errors = new ArrayList<>();
        
        if (StringUtils.isBlank(request.getName())) {
            errors.add(FieldValidationError.builder()
                .field("name")
                .rejectedValue(request.getName())
                .message("ì´ë¦„ì€ í•„ìˆ˜ì…ë‹ˆë‹¤")
                .build());
        }
        
        if (!EmailValidator.isValid(request.getEmail())) {
            errors.add(FieldValidationError.builder()
                .field("email")
                .rejectedValue(request.getEmail())
                .message("ì˜¬ë°”ë¥¸ ì´ë©”ì¼ í˜•ì‹ì´ ì•„ë‹™ë‹ˆë‹¤")
                .build());
        }
        
        if (!errors.isEmpty()) {
            throw new ValidationException(ErrorCode.VALIDATION_FAILED, errors);
        }
    }
}
```

### 3.4 ë„ë©”ì¸ë³„ ì˜ˆì™¸ ë¶„ë¥˜ ë° ëª…ëª… ê·œì¹™

ì²´ê³„ì ì¸ ì˜ˆì™¸ ê´€ë¦¬ë¥¼ ìœ„í•´ ë„ë©”ì¸ë³„ë¡œ ì˜ˆì™¸ë¥¼ ë¶„ë¥˜í•˜ê³  ì¼ê´€ëœ ëª…ëª… ê·œì¹™ì„ ì ìš©í•©ë‹ˆë‹¤.

#### ğŸ—‚ï¸ ë„ë©”ì¸ë³„ ë¶„ë¥˜ ì²´ê³„

##### 1. ì‚¬ìš©ì ê´€ë¦¬ ë„ë©”ì¸ (User Domain)
```java
// íŒ¨í‚¤ì§€ êµ¬ì¡°: com.skax.aiplatform.common.exception.user
UserException.java              // ì‚¬ìš©ì ê´€ë ¨ ê¸°ë³¸ ì˜ˆì™¸
UserNotFoundException.java      // ì‚¬ìš©ì ë¯¸ë°œê²¬ íŠ¹í™” ì˜ˆì™¸
UserDuplicateException.java     // ì‚¬ìš©ì ì¤‘ë³µ íŠ¹í™” ì˜ˆì™¸
UserInactiveException.java      // ë¹„í™œì„± ì‚¬ìš©ì íŠ¹í™” ì˜ˆì™¸

// ErrorCode ë²”ìœ„: U001~U099
USER_NOT_FOUND(U001)
USER_ALREADY_EXISTS(U002)
USER_INACTIVE(U003)
INVALID_PASSWORD(U004)
USER_PERMISSION_DENIED(U005)
```

##### 2. ì¸ì¦/ì¸ê°€ ë„ë©”ì¸ (Auth Domain)
```java
// íŒ¨í‚¤ì§€ êµ¬ì¡°: com.skax.aiplatform.common.exception.auth
AuthException.java              // ì¸ì¦/ì¸ê°€ ê¸°ë³¸ ì˜ˆì™¸
AuthenticationException.java    // ì¸ì¦ ì‹¤íŒ¨ íŠ¹í™” ì˜ˆì™¸
AuthorizationException.java     // ê¶Œí•œ ë¶€ì¡± íŠ¹í™” ì˜ˆì™¸
TokenException.java            // í† í° ê´€ë ¨ íŠ¹í™” ì˜ˆì™¸

// ErrorCode ë²”ìœ„: A001~A099
AUTHENTICATION_FAILED(A001)
ACCESS_DENIED(A002)
TOKEN_EXPIRED(A003)
INVALID_TOKEN(A004)
INSUFFICIENT_PERMISSION(A005)
```

##### 3. íŒŒì¼ ì²˜ë¦¬ ë„ë©”ì¸ (File Domain)
```java
// íŒ¨í‚¤ì§€ êµ¬ì¡°: com.skax.aiplatform.common.exception.file
FileException.java              // íŒŒì¼ ê´€ë ¨ ê¸°ë³¸ ì˜ˆì™¸
FileUploadException.java        // íŒŒì¼ ì—…ë¡œë“œ íŠ¹í™” ì˜ˆì™¸
FileValidationException.java    // íŒŒì¼ ê²€ì¦ íŠ¹í™” ì˜ˆì™¸
FileStorageException.java       // íŒŒì¼ ì €ì¥ íŠ¹í™” ì˜ˆì™¸

// ErrorCode ë²”ìœ„: F001~F099
FILE_SIZE_EXCEEDED(F001)
UNSUPPORTED_FILE_TYPE(F002)
FILE_UPLOAD_FAILED(F003)
FILE_DOWNLOAD_FAILED(F004)
FILE_NOT_FOUND(F005)
```

##### 4. ì™¸ë¶€ API ë„ë©”ì¸ (External API Domain)
```java
// íŒ¨í‚¤ì§€ êµ¬ì¡°: com.skax.aiplatform.common.exception.external
ExternalApiException.java       // ì™¸ë¶€ API ê¸°ë³¸ ì˜ˆì™¸
SktaiApiException.java         // SKTAI API íŠ¹í™” ì˜ˆì™¸
FeignClientException.java      // Feign Client íŠ¹í™” ì˜ˆì™¸
RestTemplateException.java     // RestTemplate íŠ¹í™” ì˜ˆì™¸

// ErrorCode ë²”ìœ„: X001~X099
SKTAI_AUTH_FAILED(X001)
SKTAI_QUOTA_EXCEEDED(X002)
SKTAI_SERVICE_UNAVAILABLE(X003)
EXTERNAL_API_CALL_FAILED(X004)
```

#### ğŸ“ ëª…ëª… ê·œì¹™ ê°€ì´ë“œë¼ì¸

##### 1. ì˜ˆì™¸ í´ë˜ìŠ¤ ëª…ëª… ê·œì¹™
```java
// âœ… ê¶Œì¥ íŒ¨í„´
{Domain}{Purpose}Exception

// ì˜ˆì‹œ
UserException              // ì‚¬ìš©ì ë„ë©”ì¸ ê¸°ë³¸ ì˜ˆì™¸
UserNotFoundException      // ì‚¬ìš©ì ë¯¸ë°œê²¬ íŠ¹í™” ì˜ˆì™¸
FileUploadException       // íŒŒì¼ ì—…ë¡œë“œ íŠ¹í™” ì˜ˆì™¸
SktaiApiException         // SKTAI API íŠ¹í™” ì˜ˆì™¸

// âŒ ì§€ì–‘í•  íŒ¨í„´
UserError                 // Error ì ‘ë¯¸ì‚¬ ì‚¬ìš© ì§€ì–‘
UserExceptionClass       // ë¶ˆí•„ìš”í•œ Class ì ‘ë¯¸ì‚¬
InvalidUserException     // ëª¨í˜¸í•œ í˜•ìš©ì‚¬ ì‚¬ìš©
```

##### 2. ErrorCode ëª…ëª… ê·œì¹™
```java
// âœ… ê¶Œì¥ íŒ¨í„´
{DOMAIN}_{ACTION}_{RESULT}

// ì˜ˆì‹œ
USER_NOT_FOUND           // ì‚¬ìš©ì_ë¯¸ë°œê²¬
FILE_SIZE_EXCEEDED       // íŒŒì¼_í¬ê¸°_ì´ˆê³¼
SKTAI_AUTH_FAILED       // SKTAI_ì¸ì¦_ì‹¤íŒ¨
TOKEN_EXPIRED           // í† í°_ë§Œë£Œ

// âŒ ì§€ì–‘í•  íŒ¨í„´
BAD_USER                // ëª¨í˜¸í•œ í‘œí˜„
ERROR_001               // ìˆ«ìë§Œìœ¼ë¡œ êµ¬ì„±
user_not_found          // ì†Œë¬¸ì ì‚¬ìš©
```

##### 3. ë©”ì‹œì§€ ëª…ëª… ê·œì¹™
```java
// âœ… ê¶Œì¥ íŒ¨í„´: ëª…í™•í•˜ê³  ì‚¬ìš©ì ì¹œí™”ì 
"ì‚¬ìš©ìë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤"
"íŒŒì¼ í¬ê¸°ê°€ ì´ˆê³¼ë˜ì—ˆìŠµë‹ˆë‹¤"
"ì ‘ê·¼ ê¶Œí•œì´ ì—†ìŠµë‹ˆë‹¤"
"ì…ë ¥ê°’ ê²€ì¦ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤"

// âŒ ì§€ì–‘í•  íŒ¨í„´: ëª¨í˜¸í•˜ê±°ë‚˜ ê¸°ìˆ ì 
"ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤"
"Exception occurred"
"NullPointerException"
"Database error"
```

#### ğŸ—ï¸ ë„ë©”ì¸ë³„ ì˜ˆì™¸ êµ¬ì¡° í…œí”Œë¦¿

##### ê¸°ë³¸ ë„ë©”ì¸ ì˜ˆì™¸ í…œí”Œë¦¿
```java
/**
 * {ë„ë©”ì¸ëª…} ë„ë©”ì¸ ì˜ˆì™¸
 * 
 * <p>{ë„ë©”ì¸ ì„¤ëª… ë° ì‚¬ìš© ëª©ì }</p>
 * 
 * <h3>ì‚¬ìš© ì‹œë‚˜ë¦¬ì˜¤:</h3>
 * <ul>
 *   <li>ì‹œë‚˜ë¦¬ì˜¤ 1</li>
 *   <li>ì‹œë‚˜ë¦¬ì˜¤ 2</li>
 *   <li>ì‹œë‚˜ë¦¬ì˜¤ 3</li>
 * </ul>
 * 
 * @author ByounggwanLee
 * @since 2025-10-09
 */
public class {Domain}Exception extends BusinessException {
    
    public {Domain}Exception(ErrorCode errorCode) {
        super(errorCode);
    }
    
    public {Domain}Exception(ErrorCode errorCode, String customMessage) {
        super(errorCode, customMessage);
    }
    
    // ì •ì  íŒ©í† ë¦¬ ë©”ì„œë“œ
    public static {Domain}Exception {specificCase}({parameters}) {
        return new {Domain}Exception(ErrorCode.{ERROR_CODE}, 
            "{êµ¬ì²´ì ì¸ ë©”ì‹œì§€}");
    }
}
```

##### ì‚¬ìš© ì˜ˆì‹œ: ì£¼ë¬¸ ë„ë©”ì¸ ì˜ˆì™¸
```java
/**
 * ì£¼ë¬¸ ë„ë©”ì¸ ì˜ˆì™¸
 * 
 * <p>ì£¼ë¬¸ ìƒì„±, ìˆ˜ì •, ì·¨ì†Œì™€ ê´€ë ¨ëœ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ ì˜ˆì™¸ë¥¼ ì²˜ë¦¬í•©ë‹ˆë‹¤.</p>
 * 
 * <h3>ì‚¬ìš© ì‹œë‚˜ë¦¬ì˜¤:</h3>
 * <ul>
 *   <li>ì£¼ë¬¸ì„ ì°¾ì„ ìˆ˜ ì—†ìŒ</li>
 *   <li>ì¬ê³  ë¶€ì¡±ìœ¼ë¡œ ì£¼ë¬¸ ë¶ˆê°€</li>
 *   <li>ì´ë¯¸ ì·¨ì†Œëœ ì£¼ë¬¸</li>
 *   <li>ì£¼ë¬¸ ìˆ˜ëŸ‰ ì œí•œ ì´ˆê³¼</li>
 * </ul>
 * 
 * @author ByounggwanLee
 * @since 2025-10-09
 */
public class OrderException extends BusinessException {
    
    public OrderException(ErrorCode errorCode) {
        super(errorCode);
    }
    
    public OrderException(ErrorCode errorCode, String customMessage) {
        super(errorCode, customMessage);
    }
    
    // ì •ì  íŒ©í† ë¦¬ ë©”ì„œë“œ
    public static OrderException notFound(Long orderId) {
        return new OrderException(ErrorCode.ORDER_NOT_FOUND, 
            "ì£¼ë¬¸ ID " + orderId + "ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤");
    }
    
    public static OrderException insufficientStock(Long productId, Integer requestedQuantity, Integer availableStock) {
        return new OrderException(ErrorCode.INSUFFICIENT_STOCK, 
            String.format("ì¬ê³ ê°€ ë¶€ì¡±í•©ë‹ˆë‹¤. ìƒí’ˆID: %d, ìš”ì²­ìˆ˜ëŸ‰: %d, ì¬ê³ : %d", 
                productId, requestedQuantity, availableStock));
    }
    
    public static OrderException alreadyCancelled(Long orderId) {
        return new OrderException(ErrorCode.ORDER_ALREADY_CANCELLED, 
            "ì´ë¯¸ ì·¨ì†Œëœ ì£¼ë¬¸ì…ë‹ˆë‹¤: " + orderId);
    }
    
    public static OrderException quantityExceeded(Integer requestedQuantity, Integer maxQuantity) {
        return new OrderException(ErrorCode.ORDER_QUANTITY_EXCEEDED, 
            String.format("ì£¼ë¬¸ ìˆ˜ëŸ‰ì´ ì´ˆê³¼ë˜ì—ˆìŠµë‹ˆë‹¤. ìš”ì²­: %d, ìµœëŒ€: %d", 
                requestedQuantity, maxQuantity));
    }
}
```

ì´ëŸ¬í•œ ì²´ê³„ì ì¸ ë„ë©”ì¸ë³„ ì˜ˆì™¸ ë¶„ë¥˜ì™€ ëª…ëª… ê·œì¹™ì„ í†µí•´ ì½”ë“œì˜ ê°€ë…ì„±ê³¼ ìœ ì§€ë³´ìˆ˜ì„±ì„ í¬ê²Œ í–¥ìƒì‹œí‚¬ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

---

## 4. ErrorCode í‘œì¤€í™”

### 4.1 ErrorCode êµ¬ì¡° ë° í•„ë“œ ì •ì˜

ErrorCodeëŠ” ì—ëŸ¬ ì •ë³´ë¥¼ ì²´ê³„ì ì´ê³  ì¼ê´€ë˜ê²Œ ê´€ë¦¬í•˜ëŠ” í•µì‹¬ ì»´í¬ë„ŒíŠ¸ì…ë‹ˆë‹¤. HTTP ìƒíƒœ ì½”ë“œ, ë¹„ì¦ˆë‹ˆìŠ¤ ì—ëŸ¬ ì½”ë“œ, ë©”ì‹œì§€, ê·¸ë¦¬ê³  ì¶”ê°€ ë©”íƒ€ë°ì´í„°ë¥¼ í•˜ë‚˜ë¡œ í†µí•©í•˜ì—¬ íƒ€ì… ì•ˆì „í•œ ì—ëŸ¬ ì²˜ë¦¬ë¥¼ ì œê³µí•©ë‹ˆë‹¤.

#### ğŸ—ï¸ ErrorCode ê¸°ë³¸ êµ¬ì¡°

```java
/**
 * ì—ëŸ¬ ì½”ë“œ ì •ì˜ Enum
 * 
 * <p>ëª¨ë“  ì—ëŸ¬ ìƒí™©ì— ëŒ€í•œ í†µí•©ì ì¸ ì •ë³´ë¥¼ ê´€ë¦¬í•©ë‹ˆë‹¤.
 * HTTP ìƒíƒœ ì½”ë“œ, ë¹„ì¦ˆë‹ˆìŠ¤ ì—ëŸ¬ ì½”ë“œ, ë©”ì‹œì§€, ê·¸ë¦¬ê³  ì¶”ê°€ ë©”íƒ€ë°ì´í„°ë¥¼ í¬í•¨í•˜ì—¬
 * íƒ€ì… ì•ˆì „í•˜ê³  í™•ì¥ ê°€ëŠ¥í•œ ì—ëŸ¬ ì²˜ë¦¬ ì‹œìŠ¤í…œì„ ì œê³µí•©ë‹ˆë‹¤.</p>
 * 
 * <h3>ì„¤ê³„ ì›ì¹™:</h3>
 * <ul>
 *   <li><strong>íƒ€ì… ì•ˆì „ì„±</strong>: Enumì„ í†µí•œ ì»´íŒŒì¼ íƒ€ì„ ê²€ì¦</li>
 *   <li><strong>ì¼ê´€ì„±</strong>: ëª¨ë“  ì—ëŸ¬ì— ëŒ€í•œ í†µì¼ëœ êµ¬ì¡°</li>
 *   <li><strong>í™•ì¥ì„±</strong>: ìƒˆë¡œìš´ ì—ëŸ¬ íƒ€ì… ì‰½ê²Œ ì¶”ê°€ ê°€ëŠ¥</li>
 *   <li><strong>êµ­ì œí™”</strong>: ë‹¤êµ­ì–´ ë©”ì‹œì§€ ì§€ì›</li>
 *   <li><strong>ì¶”ì ì„±</strong>: ì—ëŸ¬ ë¶„ë¥˜ ë° í†µê³„ ì§€ì›</li>
 * </ul>
 * 
 * @author ByounggwanLee
 * @since 2025-10-09
 * @version 1.0
 */
@Getter
@RequiredArgsConstructor
public enum ErrorCode {
    
    // ì—ëŸ¬ ì½”ë“œ ì •ì˜ (ì´ì „ ì„¹ì…˜ì—ì„œ ì •ì˜ëœ ë‚´ìš©)
    
    /**
     * HTTP ìƒíƒœ ì½”ë“œ
     * 
     * <p>REST API ì‘ë‹µì— ì‚¬ìš©ë  HTTP ìƒíƒœ ì½”ë“œì…ë‹ˆë‹¤.
     * í´ë¼ì´ì–¸íŠ¸ê°€ ì—ëŸ¬ì˜ ì„±ê²©ì„ ë¹ ë¥´ê²Œ íŒŒì•…í•  ìˆ˜ ìˆë„ë¡ ë„ì™€ì¤ë‹ˆë‹¤.</p>
     */
    private final HttpStatus status;
    
    /**
     * ë¹„ì¦ˆë‹ˆìŠ¤ ì—ëŸ¬ ì½”ë“œ
     * 
     * <p>ì• í”Œë¦¬ì¼€ì´ì…˜ ë‚´ë¶€ì—ì„œ ì‚¬ìš©í•˜ëŠ” ê³ ìœ í•œ ì—ëŸ¬ ì‹ë³„ìì…ë‹ˆë‹¤.
     * ë„ë©”ì¸ë³„ë¡œ ë¶„ë¥˜ë˜ì–´ ìˆìœ¼ë©°, ë¡œê¹… ë° ëª¨ë‹ˆí„°ë§ì— í™œìš©ë©ë‹ˆë‹¤.</p>
     * 
     * @implNote í˜•ì‹: {ë„ë©”ì¸ ì½”ë“œ}{ì¼ë ¨ë²ˆí˜¸} (ì˜ˆ: U001, A002, C003)
     */
    private final String code;
    
    /**
     * ê¸°ë³¸ ì—ëŸ¬ ë©”ì‹œì§€
     * 
     * <p>ì‚¬ìš©ìì—ê²Œ í‘œì‹œë  ê¸°ë³¸ ë©”ì‹œì§€ì…ë‹ˆë‹¤.
     * í•œêµ­ì–´ë¡œ ì‘ì„±ë˜ì–´ ìˆìœ¼ë©°, êµ­ì œí™”ë¥¼ í†µí•´ ë‹¤êµ­ì–´ ì§€ì›ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤.</p>
     */
    private final String message;
    
    /**
     * ì—ëŸ¬ ë¶„ë¥˜ (ì„ íƒì )
     * 
     * <p>ì—ëŸ¬ì˜ ì„±ê²©ì„ ë¶„ë¥˜í•˜ì—¬ í†µê³„ ë° ëª¨ë‹ˆí„°ë§ì— í™œìš©í•©ë‹ˆë‹¤.</p>
     */
    private final ErrorCategory category;
    
    /**
     * í´ë¼ì´ì–¸íŠ¸ ì•¡ì…˜ ê°€ì´ë“œ (ì„ íƒì )
     * 
     * <p>í´ë¼ì´ì–¸íŠ¸ê°€ ì—ëŸ¬ ë°œìƒ ì‹œ ì·¨í•´ì•¼ í•  ê¶Œì¥ ì•¡ì…˜ì„ ì œê³µí•©ë‹ˆë‹¤.</p>
     */
    private final ActionType actionType;
    
    /**
     * ë¡œê·¸ ë ˆë²¨ (ì„ íƒì )
     * 
     * <p>í•´ë‹¹ ì—ëŸ¬ê°€ ë°œìƒí–ˆì„ ë•Œ ì‚¬ìš©í•  ë¡œê·¸ ë ˆë²¨ì„ ì§€ì •í•©ë‹ˆë‹¤.</p>
     */
    private final LogLevel logLevel;
    
    // ìƒì„±ì (ê¸°ë³¸ í•„ë“œë§Œ ì‚¬ìš©)
    ErrorCode(HttpStatus status, String code, String message) {
        this.status = status;
        this.code = code;
        this.message = message;
        this.category = ErrorCategory.BUSINESS;  // ê¸°ë³¸ê°’
        this.actionType = ActionType.CONFIRM;    // ê¸°ë³¸ê°’
        this.logLevel = determineLogLevel(status); // ìƒíƒœ ì½”ë“œ ê¸°ë°˜ ìë™ ê²°ì •
    }
    
    // ìƒì„±ì (ëª¨ë“  í•„ë“œ ì‚¬ìš©)
    ErrorCode(HttpStatus status, String code, String message, 
             ErrorCategory category, ActionType actionType, LogLevel logLevel) {
        this.status = status;
        this.code = code;
        this.message = message;
        this.category = category;
        this.actionType = actionType;
        this.logLevel = logLevel;
    }
    
    /**
     * HTTP ìƒíƒœ ì½”ë“œ ê¸°ë°˜ ë¡œê·¸ ë ˆë²¨ ìë™ ê²°ì •
     */
    private static LogLevel determineLogLevel(HttpStatus status) {
        if (status.is5xxServerError()) {
            return LogLevel.ERROR;
        } else if (status.is4xxClientError()) {
            return status == HttpStatus.UNAUTHORIZED || status == HttpStatus.FORBIDDEN 
                ? LogLevel.WARN : LogLevel.INFO;
        } else {
            return LogLevel.DEBUG;
        }
    }
}
```

#### ğŸ“‹ í•„ë“œë³„ ìƒì„¸ ì„¤ëª…

##### 1. status (HttpStatus) - í•„ìˆ˜ í•„ë“œ
```java
/**
 * HTTP ìƒíƒœ ì½”ë“œ ë§¤í•‘ ê°€ì´ë“œë¼ì¸
 */
public class HttpStatusGuide {
    
    // 2xx Success - ì„±ê³µì ì¸ ìš”ì²­ ì²˜ë¦¬
    HttpStatus.OK;              // 200 - ì¼ë°˜ì ì¸ ì„±ê³µ ì‘ë‹µ
    HttpStatus.CREATED;         // 201 - ë¦¬ì†ŒìŠ¤ ìƒì„± ì„±ê³µ
    HttpStatus.NO_CONTENT;      // 204 - ì„±ê³µí–ˆì§€ë§Œ ì‘ë‹µ ë°”ë”” ì—†ìŒ
    
    // 4xx Client Error - í´ë¼ì´ì–¸íŠ¸ ì˜¤ë¥˜
    HttpStatus.BAD_REQUEST;           // 400 - ì˜ëª»ëœ ìš”ì²­
    HttpStatus.UNAUTHORIZED;          // 401 - ì¸ì¦ ì‹¤íŒ¨
    HttpStatus.FORBIDDEN;             // 403 - ê¶Œí•œ ë¶€ì¡±
    HttpStatus.NOT_FOUND;             // 404 - ë¦¬ì†ŒìŠ¤ ì—†ìŒ
    HttpStatus.METHOD_NOT_ALLOWED;    // 405 - í—ˆìš©ë˜ì§€ ì•Šì€ ë©”ì„œë“œ
    HttpStatus.CONFLICT;              // 409 - ë¦¬ì†ŒìŠ¤ ì¶©ëŒ
    HttpStatus.UNPROCESSABLE_ENTITY;  // 422 - ì²˜ë¦¬í•  ìˆ˜ ì—†ëŠ” ì—”í‹°í‹°
    HttpStatus.TOO_MANY_REQUESTS;     // 429 - ìš”ì²­ í•œë„ ì´ˆê³¼
    
    // 5xx Server Error - ì„œë²„ ì˜¤ë¥˜
    HttpStatus.INTERNAL_SERVER_ERROR;  // 500 - ì„œë²„ ë‚´ë¶€ ì˜¤ë¥˜
    HttpStatus.BAD_GATEWAY;            // 502 - ê²Œì´íŠ¸ì›¨ì´ ì˜¤ë¥˜
    HttpStatus.SERVICE_UNAVAILABLE;    // 503 - ì„œë¹„ìŠ¤ ì´ìš© ë¶ˆê°€
    HttpStatus.GATEWAY_TIMEOUT;        // 504 - ê²Œì´íŠ¸ì›¨ì´ íƒ€ì„ì•„ì›ƒ
}
```

##### 2. code (String) - í•„ìˆ˜ í•„ë“œ
```java
/**
 * ì—ëŸ¬ ì½”ë“œ ëª…ëª… ê·œì¹™
 */
public class ErrorCodeNamingGuide {
    
    // í˜•ì‹: {ë„ë©”ì¸ ì½”ë“œ}{ì¼ë ¨ë²ˆí˜¸}
    // ë„ë©”ì¸ ì½”ë“œ: 1-2ìë¦¬ ì˜ë¬¸ì
    // ì¼ë ¨ë²ˆí˜¸: 3ìë¦¬ ìˆ«ì (001ë¶€í„° ì‹œì‘)
    
    // ì‚¬ìš©ì ê´€ë¦¬ ë„ë©”ì¸ (U)
    "U001", "U002", "U003" ... "U099"
    
    // ì¸ì¦/ì¸ê°€ ë„ë©”ì¸ (A)  
    "A001", "A002", "A003" ... "A099"
    
    // ê³µí†µ/ê²€ì¦ ë„ë©”ì¸ (C)
    "C001", "C002", "C003" ... "C099"
    
    // íŒŒì¼ ì²˜ë¦¬ ë„ë©”ì¸ (F)
    "F001", "F002", "F003" ... "F099"
    
    // ì„œë²„/ì‹œìŠ¤í…œ ë„ë©”ì¸ (E)
    "E001", "E002", "E003" ... "E099"
    
    // ì™¸ë¶€ API ë„ë©”ì¸ (X)
    "X001", "X002", "X003" ... "X099"
    
    // í”„ë¡œì íŠ¸ ê´€ë¦¬ ë„ë©”ì¸ (P) - ìƒˆë¡œ ì¶”ê°€
    "P001", "P002", "P003" ... "P099"
    
    // ì—­í•  ê´€ë¦¬ ë„ë©”ì¸ (R) - ìƒˆë¡œ ì¶”ê°€
    "R001", "R002", "R003" ... "R099"
}
```

##### 3. message (String) - í•„ìˆ˜ í•„ë“œ
```java
/**
 * ë©”ì‹œì§€ ì‘ì„± ê°€ì´ë“œë¼ì¸
 */
public class MessageGuide {
    
    // âœ… ì¢‹ì€ ë©”ì‹œì§€ ì˜ˆì‹œ
    "ì‚¬ìš©ìë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤"          // ëª…í™•í•˜ê³  êµ¬ì²´ì 
    "íŒŒì¼ í¬ê¸°ê°€ ì´ˆê³¼ë˜ì—ˆìŠµë‹ˆë‹¤"         // ë¬¸ì œ ìƒí™© ëª…ì‹œ
    "ì…ë ¥ê°’ ê²€ì¦ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤"         // ì›ì¸ ì œì‹œ
    "ì ‘ê·¼ ê¶Œí•œì´ ì—†ìŠµë‹ˆë‹¤"              // ê°„ê²°í•˜ê³  ì´í•´í•˜ê¸° ì‰¬ì›€
    
    // âŒ í”¼í•´ì•¼ í•  ë©”ì‹œì§€ ì˜ˆì‹œ
    "ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤"               // ë„ˆë¬´ ëª¨í˜¸í•¨
    "Exception occurred"             // ê¸°ìˆ ì  ìš©ì–´ ì‚¬ìš©
    "NullPointerException"          // ì˜ˆì™¸ í´ë˜ìŠ¤ëª… ë…¸ì¶œ
    "ë°ì´í„°ë² ì´ìŠ¤ ì—ëŸ¬"                 // ë‚´ë¶€ êµ¬í˜„ ì •ë³´ ë…¸ì¶œ
    
    // ë©”ì‹œì§€ ì‘ì„± ì›ì¹™
    // 1. ì‚¬ìš©ì ê´€ì ì—ì„œ ì´í•´í•˜ê¸° ì‰½ê²Œ
    // 2. êµ¬ì²´ì ì´ê³  ëª…í™•í•˜ê²Œ
    // 3. ê¸°ìˆ ì  ì„¸ë¶€ì‚¬í•­ ìˆ¨ê¸°ê¸°  
    // 4. í•´ê²° ë°©í–¥ ì œì‹œ (ê°€ëŠ¥í•œ ê²½ìš°)
    // 5. ì¼ê´€ëœ ì–´ì¡°ì™€ í‘œí˜„ ì‚¬ìš©
}
```

#### ğŸ”§ í™•ì¥ í•„ë“œ ì •ì˜

##### 1. ErrorCategory Enum
```java
/**
 * ì—ëŸ¬ ë¶„ë¥˜ ì¹´í…Œê³ ë¦¬
 * 
 * <p>ì—ëŸ¬ì˜ ì„±ê²©ì„ ë¶„ë¥˜í•˜ì—¬ í†µê³„ ë° ëª¨ë‹ˆí„°ë§ì— í™œìš©í•©ë‹ˆë‹¤.</p>
 * 
 * @author ByounggwanLee
 * @since 2025-10-09
 */
@Getter
@RequiredArgsConstructor
public enum ErrorCategory {
    
    /**
     * ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ ì˜¤ë¥˜
     * ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ë¹„ì¦ˆë‹ˆìŠ¤ ê·œì¹™ ìœ„ë°˜
     */
    BUSINESS("ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ ì˜¤ë¥˜", "business"),
    
    /**
     * ì…ë ¥ê°’ ê²€ì¦ ì˜¤ë¥˜
     * í´ë¼ì´ì–¸íŠ¸ë¡œë¶€í„° ë°›ì€ ì…ë ¥ê°’ì˜ í˜•ì‹ì´ë‚˜ ê°’ì´ ì˜ëª»ë¨
     */
    VALIDATION("ì…ë ¥ê°’ ê²€ì¦ ì˜¤ë¥˜", "validation"),
    
    /**
     * ì¸ì¦/ì¸ê°€ ì˜¤ë¥˜
     * ì‚¬ìš©ì ì¸ì¦ ì‹¤íŒ¨ ë˜ëŠ” ê¶Œí•œ ë¶€ì¡±
     */
    SECURITY("ì¸ì¦/ì¸ê°€ ì˜¤ë¥˜", "security"),
    
    /**
     * ì™¸ë¶€ ì‹œìŠ¤í…œ ì—°ë™ ì˜¤ë¥˜
     * ì™¸ë¶€ API, ë°ì´í„°ë² ì´ìŠ¤ ë“±ê³¼ì˜ í†µì‹  ë¬¸ì œ
     */
    EXTERNAL("ì™¸ë¶€ ì‹œìŠ¤í…œ ì—°ë™ ì˜¤ë¥˜", "external"),
    
    /**
     * ì‹œìŠ¤í…œ ë¦¬ì†ŒìŠ¤ ì˜¤ë¥˜
     * ë©”ëª¨ë¦¬, ë””ìŠ¤í¬, ë„¤íŠ¸ì›Œí¬ ë“± ì‹œìŠ¤í…œ ìì› ê´€ë ¨ ë¬¸ì œ
     */
    SYSTEM("ì‹œìŠ¤í…œ ë¦¬ì†ŒìŠ¤ ì˜¤ë¥˜", "system"),
    
    /**
     * ì„¤ì • ì˜¤ë¥˜
     * ì• í”Œë¦¬ì¼€ì´ì…˜ ì„¤ì • íŒŒì¼ì´ë‚˜ í™˜ê²½ ë³€ìˆ˜ ê´€ë ¨ ë¬¸ì œ
     */
    CONFIGURATION("ì„¤ì • ì˜¤ë¥˜", "configuration");
    
    private final String description;
    private final String code;
}
```

##### 2. ActionType Enum
```java
/**
 * í´ë¼ì´ì–¸íŠ¸ ì•¡ì…˜ ê°€ì´ë“œ
 * 
 * <p>ì—ëŸ¬ ë°œìƒ ì‹œ í´ë¼ì´ì–¸íŠ¸ê°€ ì·¨í•´ì•¼ í•  ê¶Œì¥ ì•¡ì…˜ì„ ì œê³µí•©ë‹ˆë‹¤.</p>
 * 
 * @author ByounggwanLee
 * @since 2025-10-09
 */
@Getter
@RequiredArgsConstructor
public enum ActionType {
    
    /**
     * í™•ì¸ í›„ ê³„ì†
     * ì‚¬ìš©ìê°€ í™•ì¸ ë²„íŠ¼ì„ í´ë¦­í•œ í›„ í˜„ì¬ í™”ë©´ì—ì„œ ê³„ì† ì§„í–‰
     */
    CONFIRM("í™•ì¸ í›„ ê³„ì†", "confirm"),
    
    /**
     * ì¬ì‹œë„ ê¶Œì¥
     * ì¼ì‹œì ì¸ ì˜¤ë¥˜ë¡œ ì¬ì‹œë„í•˜ë©´ ì„±ê³µí•  ê°€ëŠ¥ì„±ì´ ë†’ìŒ
     */
    RETRY("ì¬ì‹œë„ ê¶Œì¥", "retry"),
    
    /**
     * ì´ì „ ë‹¨ê³„ë¡œ
     * í˜„ì¬ ë‹¨ê³„ì—ì„œ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìœ¼ë¯€ë¡œ ì´ì „ ë‹¨ê³„ë¡œ ëŒì•„ê°€ì•¼ í•¨
     */
    PREVIOUS("ì´ì „ ë‹¨ê³„ë¡œ", "previous"),
    
    /**
     * ë‹¤ìŒ ë‹¨ê³„ë¡œ
     * í˜„ì¬ ì˜¤ë¥˜ëŠ” ë¬´ì‹œí•˜ê³  ë‹¤ìŒ ë‹¨ê³„ë¡œ ì§„í–‰ ê°€ëŠ¥
     */
    NEXT("ë‹¤ìŒ ë‹¨ê³„ë¡œ", "next"),
    
    /**
     * ì‘ì—… ì·¨ì†Œ
     * í˜„ì¬ ì‘ì—…ì„ ì·¨ì†Œí•˜ê³  ì´ˆê¸° ìƒíƒœë¡œ ëŒì•„ê°€ì•¼ í•¨
     */
    CANCEL("ì‘ì—… ì·¨ì†Œ", "cancel"),
    
    /**
     * ìƒˆë¡œê³ ì¹¨
     * í˜ì´ì§€ë‚˜ ë°ì´í„°ë¥¼ ìƒˆë¡œê³ ì¹¨í•˜ì—¬ ë¬¸ì œ í•´ê²° ì‹œë„
     */
    REFRESH("ìƒˆë¡œê³ ì¹¨", "refresh"),
    
    /**
     * ê´€ë¦¬ì ë¬¸ì˜
     * ì‚¬ìš©ìê°€ í•´ê²°í•  ìˆ˜ ì—†ëŠ” ë¬¸ì œë¡œ ê´€ë¦¬ìì—ê²Œ ë¬¸ì˜ í•„ìš”
     */
    CONTACT_ADMIN("ê´€ë¦¬ì ë¬¸ì˜", "contact_admin");
    
    private final String description;
    private final String code;
}
```

##### 3. LogLevel Enum
```java
/**
 * ë¡œê·¸ ë ˆë²¨ ì •ì˜
 * 
 * <p>ì—ëŸ¬ ë°œìƒ ì‹œ ì‚¬ìš©í•  ë¡œê·¸ ë ˆë²¨ì„ ì§€ì •í•©ë‹ˆë‹¤.</p>
 * 
 * @author ByounggwanLee
 * @since 2025-10-09
 */
@Getter
@RequiredArgsConstructor
public enum LogLevel {
    
    /**
     * ì—ëŸ¬ ë ˆë²¨
     * ì‹œìŠ¤í…œì— ì‹¬ê°í•œ ì˜í–¥ì„ ë¯¸ì¹˜ëŠ” ì˜¤ë¥˜
     */
    ERROR("ERROR", 40),
    
    /**
     * ê²½ê³  ë ˆë²¨
     * ì£¼ì˜ê°€ í•„ìš”í•œ ìƒí™©ì´ì§€ë§Œ ì‹œìŠ¤í…œ ë™ì‘ì—ëŠ” ë¬¸ì œì—†ìŒ
     */
    WARN("WARN", 30),
    
    /**
     * ì •ë³´ ë ˆë²¨
     * ì¼ë°˜ì ì¸ ì •ë³´ì„± ë¡œê·¸
     */
    INFO("INFO", 20),
    
    /**
     * ë””ë²„ê·¸ ë ˆë²¨
     * ê°œë°œ ë° ë””ë²„ê¹… ëª©ì ì˜ ìƒì„¸ ì •ë³´
     */
    DEBUG("DEBUG", 10);
    
    private final String name;
    private final int level;
}
```

#### ğŸ› ï¸ ErrorCode ìœ í‹¸ë¦¬í‹° ë©”ì„œë“œ

```java
/**
 * ErrorCode ìœ í‹¸ë¦¬í‹° ë©”ì„œë“œ (ErrorCode Enum ë‚´ë¶€)
 */
public enum ErrorCode {
    
    // ... ì—ëŸ¬ ì½”ë“œ ì •ì˜ ...
    
    /**
     * ì—ëŸ¬ ì½”ë“œë¥¼ ì „ì²´ ì½”ë“œ í˜•ì‹ìœ¼ë¡œ ë°˜í™˜
     * 
     * @return "HTTPìƒíƒœì½”ë“œ-ì—ëŸ¬ì½”ë“œ" í˜•ì‹ì˜ ë¬¸ìì—´ (ì˜ˆ: "404-U001")
     */
    public String getFullCode() {
        return status.value() + "-" + code;
    }
    
    /**
     * ì—ëŸ¬ ì •ë³´ë¥¼ Map í˜•íƒœë¡œ ë°˜í™˜
     * 
     * @return ì—ëŸ¬ ì •ë³´ê°€ ë‹´ê¸´ Map
     */
    public Map<String, Object> toMap() {
        Map<String, Object> map = new HashMap<>();
        map.put("status", status.value());
        map.put("statusText", status.getReasonPhrase());
        map.put("code", code);
        map.put("message", message);
        map.put("category", category.getCode());
        map.put("actionType", actionType.getCode());
        map.put("logLevel", logLevel.getName());
        map.put("fullCode", getFullCode());
        return map;
    }
    
    /**
     * HTTP ìƒíƒœ ì½”ë“œë³„ ErrorCode ëª©ë¡ ì¡°íšŒ
     * 
     * @param status HTTP ìƒíƒœ ì½”ë“œ
     * @return í•´ë‹¹ ìƒíƒœ ì½”ë“œë¥¼ ê°€ì§„ ErrorCode ëª©ë¡
     */
    public static List<ErrorCode> getByStatus(HttpStatus status) {
        return Arrays.stream(values())
                .filter(errorCode -> errorCode.getStatus() == status)
                .collect(Collectors.toList());
    }
    
    /**
     * ì—ëŸ¬ ì½”ë“œë¡œ ErrorCode ì¡°íšŒ
     * 
     * @param code ì—ëŸ¬ ì½”ë“œ
     * @return í•´ë‹¹ ì½”ë“œë¥¼ ê°€ì§„ ErrorCode
     * @throws IllegalArgumentException í•´ë‹¹ ì½”ë“œê°€ ì—†ëŠ” ê²½ìš°
     */
    public static ErrorCode getByCode(String code) {
        return Arrays.stream(values())
                .filter(errorCode -> errorCode.getCode().equals(code))
                .findFirst()
                .orElseThrow(() -> new IllegalArgumentException("Unknown error code: " + code));
    }
    
    /**
     * ì¹´í…Œê³ ë¦¬ë³„ ErrorCode ëª©ë¡ ì¡°íšŒ
     * 
     * @param category ì—ëŸ¬ ì¹´í…Œê³ ë¦¬
     * @return í•´ë‹¹ ì¹´í…Œê³ ë¦¬ì˜ ErrorCode ëª©ë¡
     */
    public static List<ErrorCode> getByCategory(ErrorCategory category) {
        return Arrays.stream(values())
                .filter(errorCode -> errorCode.getCategory() == category)
                .collect(Collectors.toList());
    }
    
    /**
     * ì•¡ì…˜ íƒ€ì…ë³„ ErrorCode ëª©ë¡ ì¡°íšŒ
     * 
     * @param actionType ì•¡ì…˜ íƒ€ì…
     * @return í•´ë‹¹ ì•¡ì…˜ íƒ€ì…ì˜ ErrorCode ëª©ë¡
     */
    public static List<ErrorCode> getByActionType(ActionType actionType) {
        return Arrays.stream(values())
                .filter(errorCode -> errorCode.getActionType() == actionType)
                .collect(Collectors.toList());
    }
    
    /**
     * ì—ëŸ¬ í†µê³„ ì •ë³´ ìƒì„±
     * 
     * @return ì¹´í…Œê³ ë¦¬ë³„, ìƒíƒœì½”ë“œë³„ ì—ëŸ¬ í†µê³„
     */
    public static Map<String, Object> getStatistics() {
        Map<String, Object> stats = new HashMap<>();
        
        // ì¹´í…Œê³ ë¦¬ë³„ í†µê³„
        Map<ErrorCategory, Long> categoryStats = Arrays.stream(values())
                .collect(Collectors.groupingBy(
                    ErrorCode::getCategory,
                    Collectors.counting()
                ));
        stats.put("byCategory", categoryStats);
        
        // HTTP ìƒíƒœì½”ë“œë³„ í†µê³„
        Map<HttpStatus, Long> statusStats = Arrays.stream(values())
                .collect(Collectors.groupingBy(
                    ErrorCode::getStatus,
                    Collectors.counting()
                ));
        stats.put("byStatus", statusStats);
        
        // ì•¡ì…˜ íƒ€ì…ë³„ í†µê³„
        Map<ActionType, Long> actionStats = Arrays.stream(values())
                .collect(Collectors.groupingBy(
                    ErrorCode::getActionType,
                    Collectors.counting()
                ));
        stats.put("byActionType", actionStats);
        
        stats.put("total", values().length);
        
        return stats;
    }
    
    /**
     * í´ë¼ì´ì–¸íŠ¸ìš© ì—ëŸ¬ ì •ë³´ ìƒì„±
     * ë¯¼ê°í•œ ì •ë³´ë¥¼ ì œì™¸í•˜ê³  í´ë¼ì´ì–¸íŠ¸ì— ì „ë‹¬í•  ì •ë³´ë§Œ í¬í•¨
     * 
     * @return í´ë¼ì´ì–¸íŠ¸ìš© ì—ëŸ¬ ì •ë³´
     */
    public Map<String, Object> toClientMap() {
        Map<String, Object> map = new HashMap<>();
        map.put("code", code);
        map.put("message", message);
        map.put("actionType", actionType.getCode());
        map.put("actionDescription", actionType.getDescription());
        return map;
    }
}
```

### 4.2 ë„ë©”ì¸ë³„ ì—ëŸ¬ ì½”ë“œ ì²´ê³„

ë„ë©”ì¸ë³„ë¡œ ì²´ê³„ì ì¸ ì—ëŸ¬ ì½”ë“œë¥¼ ê´€ë¦¬í•¨ìœ¼ë¡œì¨ ì½”ë“œì˜ ê°€ë…ì„±ì„ ë†’ì´ê³ , íŒ€ ê°„ í˜‘ì—…ì„ ì›í™œí•˜ê²Œ í•˜ë©°, ì—ëŸ¬ ì¶”ì  ë° ë¶„ì„ì„ ìš©ì´í•˜ê²Œ í•©ë‹ˆë‹¤.

#### ğŸ—‚ï¸ ë„ë©”ì¸ ë¶„ë¥˜ ì²´ê³„

##### 1. ì‚¬ìš©ì ê´€ë¦¬ ë„ë©”ì¸ (U001~U099)
```java
/**
 * ì‚¬ìš©ì ê´€ë¦¬ ë„ë©”ì¸ ì—ëŸ¬ ì½”ë“œ
 * 
 * <p>ì‚¬ìš©ì ìƒì„±, ì¡°íšŒ, ìˆ˜ì •, ì‚­ì œì™€ ê´€ë ¨ëœ ëª¨ë“  ì—ëŸ¬ë¥¼ ì •ì˜í•©ë‹ˆë‹¤.</p>
 */
public enum UserErrorCode {
    
    // ê¸°ë³¸ CRUD ì˜¤ë¥˜ (U001~U020)
    USER_NOT_FOUND(HttpStatus.NOT_FOUND, "U001", "ì‚¬ìš©ìë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤",
                   ErrorCategory.BUSINESS, ActionType.CONFIRM, LogLevel.INFO),
    
    USER_ALREADY_EXISTS(HttpStatus.CONFLICT, "U002", "ì´ë¯¸ ì¡´ì¬í•˜ëŠ” ì‚¬ìš©ìì…ë‹ˆë‹¤",
                        ErrorCategory.BUSINESS, ActionType.CONFIRM, LogLevel.WARN),
    
    USER_CREATION_FAILED(HttpStatus.INTERNAL_SERVER_ERROR, "U003", "ì‚¬ìš©ì ìƒì„±ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤",
                         ErrorCategory.SYSTEM, ActionType.RETRY, LogLevel.ERROR),
    
    USER_UPDATE_FAILED(HttpStatus.INTERNAL_SERVER_ERROR, "U004", "ì‚¬ìš©ì ì •ë³´ ìˆ˜ì •ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤",
                       ErrorCategory.SYSTEM, ActionType.RETRY, LogLevel.ERROR),
    
    USER_DELETION_FAILED(HttpStatus.INTERNAL_SERVER_ERROR, "U005", "ì‚¬ìš©ì ì‚­ì œì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤",
                         ErrorCategory.SYSTEM, ActionType.CONTACT_ADMIN, LogLevel.ERROR),
    
    // ì‚¬ìš©ì ìƒíƒœ ê´€ë ¨ (U021~U040)
    USER_INACTIVE(HttpStatus.FORBIDDEN, "U021", "ë¹„í™œì„±í™”ëœ ì‚¬ìš©ìì…ë‹ˆë‹¤",
                  ErrorCategory.BUSINESS, ActionType.CONTACT_ADMIN, LogLevel.WARN),
    
    USER_SUSPENDED(HttpStatus.FORBIDDEN, "U022", "ì •ì§€ëœ ì‚¬ìš©ìì…ë‹ˆë‹¤",
                   ErrorCategory.SECURITY, ActionType.CONTACT_ADMIN, LogLevel.WARN),
    
    USER_DORMANT(HttpStatus.FORBIDDEN, "U023", "íœ´ë©´ ê³„ì •ì…ë‹ˆë‹¤",
                 ErrorCategory.BUSINESS, ActionType.CONFIRM, LogLevel.INFO),
    
    USER_WITHDRAWAL(HttpStatus.FORBIDDEN, "U024", "íƒˆí‡´í•œ ì‚¬ìš©ìì…ë‹ˆë‹¤",
                    ErrorCategory.BUSINESS, ActionType.CONFIRM, LogLevel.INFO),
    
    // ì‚¬ìš©ì ê²€ì¦ ê´€ë ¨ (U041~U060)
    INVALID_USER_EMAIL(HttpStatus.BAD_REQUEST, "U041", "ì˜¬ë°”ë¥´ì§€ ì•Šì€ ì´ë©”ì¼ í˜•ì‹ì…ë‹ˆë‹¤",
                       ErrorCategory.VALIDATION, ActionType.PREVIOUS, LogLevel.INFO),
    
    INVALID_USER_PASSWORD(HttpStatus.BAD_REQUEST, "U042", "ë¹„ë°€ë²ˆí˜¸ í˜•ì‹ì´ ì˜¬ë°”ë¥´ì§€ ì•ŠìŠµë‹ˆë‹¤",
                          ErrorCategory.VALIDATION, ActionType.PREVIOUS, LogLevel.INFO),
    
    PASSWORD_TOO_WEAK(HttpStatus.BAD_REQUEST, "U043", "ë¹„ë°€ë²ˆí˜¸ê°€ ë„ˆë¬´ ì•½í•©ë‹ˆë‹¤",
                      ErrorCategory.VALIDATION, ActionType.PREVIOUS, LogLevel.INFO),
    
    PASSWORD_MISMATCH(HttpStatus.BAD_REQUEST, "U044", "ë¹„ë°€ë²ˆí˜¸ê°€ ì¼ì¹˜í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤",
                      ErrorCategory.VALIDATION, ActionType.PREVIOUS, LogLevel.INFO),
    
    // ì‚¬ìš©ì ê¶Œí•œ ê´€ë ¨ (U061~U080)
    USER_PERMISSION_DENIED(HttpStatus.FORBIDDEN, "U061", "ì‚¬ìš©ì ê¶Œí•œì´ ë¶€ì¡±í•©ë‹ˆë‹¤",
                           ErrorCategory.SECURITY, ActionType.CONTACT_ADMIN, LogLevel.WARN),
    
    USER_ROLE_NOT_ASSIGNED(HttpStatus.FORBIDDEN, "U062", "ì‚¬ìš©ìì—ê²Œ ì—­í• ì´ í• ë‹¹ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤",
                           ErrorCategory.SECURITY, ActionType.CONTACT_ADMIN, LogLevel.WARN),
    
    INVALID_USER_ROLE(HttpStatus.BAD_REQUEST, "U063", "ì˜¬ë°”ë¥´ì§€ ì•Šì€ ì‚¬ìš©ì ì—­í• ì…ë‹ˆë‹¤",
                      ErrorCategory.VALIDATION, ActionType.PREVIOUS, LogLevel.INFO),
    
    // ì‚¬ìš©ì í”„ë¡œí•„ ê´€ë ¨ (U081~U099)
    PROFILE_UPDATE_FAILED(HttpStatus.INTERNAL_SERVER_ERROR, "U081", "í”„ë¡œí•„ ì—…ë°ì´íŠ¸ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤",
                          ErrorCategory.SYSTEM, ActionType.RETRY, LogLevel.ERROR),
    
    PROFILE_IMAGE_UPLOAD_FAILED(HttpStatus.INTERNAL_SERVER_ERROR, "U082", "í”„ë¡œí•„ ì´ë¯¸ì§€ ì—…ë¡œë“œì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤",
                                ErrorCategory.SYSTEM, ActionType.RETRY, LogLevel.ERROR),
    
    INVALID_PROFILE_DATA(HttpStatus.BAD_REQUEST, "U083", "ì˜¬ë°”ë¥´ì§€ ì•Šì€ í”„ë¡œí•„ ë°ì´í„°ì…ë‹ˆë‹¤",
                         ErrorCategory.VALIDATION, ActionType.PREVIOUS, LogLevel.INFO);
}
```

##### 2. í”„ë¡œì íŠ¸ ê´€ë¦¬ ë„ë©”ì¸ (P001~P099)
```java
/**
 * í”„ë¡œì íŠ¸ ê´€ë¦¬ ë„ë©”ì¸ ì—ëŸ¬ ì½”ë“œ
 * 
 * <p>í”„ë¡œì íŠ¸ ìƒì„±, ì¡°íšŒ, ìˆ˜ì •, ì‚­ì œ ë° êµ¬ì„±ì› ê´€ë¦¬ì™€ ê´€ë ¨ëœ ëª¨ë“  ì—ëŸ¬ë¥¼ ì •ì˜í•©ë‹ˆë‹¤.</p>
 */
public enum ProjectErrorCode {
    
    // ê¸°ë³¸ CRUD ì˜¤ë¥˜ (P001~P020)
    PROJECT_NOT_FOUND(HttpStatus.NOT_FOUND, "P001", "í”„ë¡œì íŠ¸ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤",
                      ErrorCategory.BUSINESS, ActionType.CONFIRM, LogLevel.INFO),
    
    PROJECT_ALREADY_EXISTS(HttpStatus.CONFLICT, "P002", "ì´ë¯¸ ì¡´ì¬í•˜ëŠ” í”„ë¡œì íŠ¸ì…ë‹ˆë‹¤",
                           ErrorCategory.BUSINESS, ActionType.CONFIRM, LogLevel.WARN),
    
    PROJECT_CREATION_FAILED(HttpStatus.INTERNAL_SERVER_ERROR, "P003", "í”„ë¡œì íŠ¸ ìƒì„±ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤",
                           ErrorCategory.SYSTEM, ActionType.RETRY, LogLevel.ERROR),
    
    PROJECT_UPDATE_FAILED(HttpStatus.INTERNAL_SERVER_ERROR, "P004", "í”„ë¡œì íŠ¸ ìˆ˜ì •ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤",
                          ErrorCategory.SYSTEM, ActionType.RETRY, LogLevel.ERROR),
    
    PROJECT_DELETION_FAILED(HttpStatus.INTERNAL_SERVER_ERROR, "P005", "í”„ë¡œì íŠ¸ ì‚­ì œì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤",
                           ErrorCategory.SYSTEM, ActionType.CONTACT_ADMIN, LogLevel.ERROR),
    
    // í”„ë¡œì íŠ¸ ìƒíƒœ ê´€ë ¨ (P021~P040)
    PROJECT_ALREADY_COMPLETED(HttpStatus.CONFLICT, "P021", "ì´ë¯¸ ì™„ë£Œëœ í”„ë¡œì íŠ¸ì…ë‹ˆë‹¤",
                              ErrorCategory.BUSINESS, ActionType.CONFIRM, LogLevel.INFO),
    
    PROJECT_IN_PROGRESS(HttpStatus.CONFLICT, "P022", "ì§„í–‰ ì¤‘ì¸ í”„ë¡œì íŠ¸ëŠ” ì‚­ì œí•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤",
                        ErrorCategory.BUSINESS, ActionType.CONFIRM, LogLevel.WARN),
    
    PROJECT_SUSPENDED(HttpStatus.FORBIDDEN, "P023", "ì¼ì‹œ ì¤‘ë‹¨ëœ í”„ë¡œì íŠ¸ì…ë‹ˆë‹¤",
                      ErrorCategory.BUSINESS, ActionType.CONTACT_ADMIN, LogLevel.WARN),
    
    CANNOT_COMPLETE_PROJECT(HttpStatus.CONFLICT, "P024", "í”„ë¡œì íŠ¸ë¥¼ ì™„ë£Œí•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤",
                           ErrorCategory.BUSINESS, ActionType.CONFIRM, LogLevel.WARN),
    
    // í”„ë¡œì íŠ¸ ê¶Œí•œ ê´€ë ¨ (P041~P060)
    PROJECT_ACCESS_DENIED(HttpStatus.FORBIDDEN, "P041", "í”„ë¡œì íŠ¸ì— ì ‘ê·¼í•  ê¶Œí•œì´ ì—†ìŠµë‹ˆë‹¤",
                          ErrorCategory.SECURITY, ActionType.CONTACT_ADMIN, LogLevel.WARN),
    
    PROJECT_ADMIN_REQUIRED(HttpStatus.FORBIDDEN, "P042", "í”„ë¡œì íŠ¸ ê´€ë¦¬ì ê¶Œí•œì´ í•„ìš”í•©ë‹ˆë‹¤",
                          ErrorCategory.SECURITY, ActionType.CONTACT_ADMIN, LogLevel.WARN),
    
    PORTAL_ADMIN_REQUIRED(HttpStatus.FORBIDDEN, "P043", "í¬í„¸ ê´€ë¦¬ì ê¶Œí•œì´ í•„ìš”í•©ë‹ˆë‹¤",
                         ErrorCategory.SECURITY, ActionType.CONTACT_ADMIN, LogLevel.WARN),
    
    // í”„ë¡œì íŠ¸ êµ¬ì„±ì› ê´€ë¦¬ (P061~P080)
    USER_NOT_IN_PROJECT(HttpStatus.NOT_FOUND, "P061", "í”„ë¡œì íŠ¸ì— ì†í•˜ì§€ ì•Šì€ ì‚¬ìš©ìì…ë‹ˆë‹¤",
                        ErrorCategory.BUSINESS, ActionType.CONFIRM, LogLevel.INFO),
    
    USER_ALREADY_IN_PROJECT(HttpStatus.CONFLICT, "P062", "ì´ë¯¸ í”„ë¡œì íŠ¸ì— ì°¸ì—¬ ì¤‘ì¸ ì‚¬ìš©ìì…ë‹ˆë‹¤",
                           ErrorCategory.BUSINESS, ActionType.CONFIRM, LogLevel.WARN),
    
    CANNOT_REMOVE_PROJECT_ADMIN(HttpStatus.CONFLICT, "P063", "í”„ë¡œì íŠ¸ ê´€ë¦¬ìëŠ” ì œê±°í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤",
                                ErrorCategory.BUSINESS, ActionType.CONFIRM, LogLevel.WARN),
    
    PROJECT_MEMBER_LIMIT_EXCEEDED(HttpStatus.CONFLICT, "P064", "í”„ë¡œì íŠ¸ êµ¬ì„±ì› ìˆ˜ ì œí•œì„ ì´ˆê³¼í–ˆìŠµë‹ˆë‹¤",
                                 ErrorCategory.BUSINESS, ActionType.CONFIRM, LogLevel.WARN),
    
    // í”„ë¡œì íŠ¸ ê²€ì¦ ê´€ë ¨ (P081~P099)
    INVALID_PROJECT_NAME(HttpStatus.BAD_REQUEST, "P081", "ì˜¬ë°”ë¥´ì§€ ì•Šì€ í”„ë¡œì íŠ¸ëª…ì…ë‹ˆë‹¤",
                         ErrorCategory.VALIDATION, ActionType.PREVIOUS, LogLevel.INFO),
    
    PROJECT_NAME_TOO_LONG(HttpStatus.BAD_REQUEST, "P082", "í”„ë¡œì íŠ¸ëª…ì´ ë„ˆë¬´ ê¹ë‹ˆë‹¤",
                          ErrorCategory.VALIDATION, ActionType.PREVIOUS, LogLevel.INFO),
    
    INVALID_PROJECT_DESCRIPTION(HttpStatus.BAD_REQUEST, "P083", "ì˜¬ë°”ë¥´ì§€ ì•Šì€ í”„ë¡œì íŠ¸ ì„¤ëª…ì…ë‹ˆë‹¤",
                               ErrorCategory.VALIDATION, ActionType.PREVIOUS, LogLevel.INFO),
    
    INVALID_PROJECT_DATES(HttpStatus.BAD_REQUEST, "P084", "ì˜¬ë°”ë¥´ì§€ ì•Šì€ í”„ë¡œì íŠ¸ ì¼ì •ì…ë‹ˆë‹¤",
                          ErrorCategory.VALIDATION, ActionType.PREVIOUS, LogLevel.INFO);
}
```

##### 3. ì—­í•  ê´€ë¦¬ ë„ë©”ì¸ (R001~R099)
```java
/**
 * ì—­í•  ê´€ë¦¬ ë„ë©”ì¸ ì—ëŸ¬ ì½”ë“œ
 * 
 * <p>ì—­í•  ìƒì„±, ì¡°íšŒ, ìˆ˜ì •, ì‚­ì œ ë° ê¶Œí•œ ê´€ë¦¬ì™€ ê´€ë ¨ëœ ëª¨ë“  ì—ëŸ¬ë¥¼ ì •ì˜í•©ë‹ˆë‹¤.</p>
 */
public enum RoleErrorCode {
    
    // ê¸°ë³¸ CRUD ì˜¤ë¥˜ (R001~R020)
    ROLE_NOT_FOUND(HttpStatus.NOT_FOUND, "R001", "ì—­í• ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤",
                   ErrorCategory.BUSINESS, ActionType.CONFIRM, LogLevel.INFO),
    
    ROLE_ALREADY_EXISTS(HttpStatus.CONFLICT, "R002", "ì´ë¯¸ ì¡´ì¬í•˜ëŠ” ì—­í• ì…ë‹ˆë‹¤",
                        ErrorCategory.BUSINESS, ActionType.CONFIRM, LogLevel.WARN),
    
    ROLE_CREATION_FAILED(HttpStatus.INTERNAL_SERVER_ERROR, "R003", "ì—­í•  ìƒì„±ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤",
                         ErrorCategory.SYSTEM, ActionType.RETRY, LogLevel.ERROR),
    
    ROLE_UPDATE_FAILED(HttpStatus.INTERNAL_SERVER_ERROR, "R004", "ì—­í•  ìˆ˜ì •ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤",
                       ErrorCategory.SYSTEM, ActionType.RETRY, LogLevel.ERROR),
    
    ROLE_DELETION_FAILED(HttpStatus.INTERNAL_SERVER_ERROR, "R005", "ì—­í•  ì‚­ì œì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤",
                         ErrorCategory.SYSTEM, ActionType.CONTACT_ADMIN, LogLevel.ERROR),
    
    // ì—­í•  ìƒíƒœ ê´€ë ¨ (R021~R040)
    ROLE_INACTIVE(HttpStatus.FORBIDDEN, "R021", "ë¹„í™œì„±í™”ëœ ì—­í• ì…ë‹ˆë‹¤",
                  ErrorCategory.BUSINESS, ActionType.CONTACT_ADMIN, LogLevel.WARN),
    
    DEFAULT_ROLE_CANNOT_DELETE(HttpStatus.CONFLICT, "R022", "ê¸°ë³¸ ì—­í• ì€ ì‚­ì œí•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤",
                               ErrorCategory.BUSINESS, ActionType.CONFIRM, LogLevel.WARN),
    
    ROLE_IN_USE(HttpStatus.CONFLICT, "R023", "ì‚¬ìš© ì¤‘ì¸ ì—­í• ì€ ì‚­ì œí•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤",
                ErrorCategory.BUSINESS, ActionType.CONFIRM, LogLevel.WARN),
    
    // ì—­í•  ê¶Œí•œ ê´€ë ¨ (R041~R060)
    PERMISSION_NOT_FOUND(HttpStatus.NOT_FOUND, "R041", "ê¶Œí•œì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤",
                         ErrorCategory.BUSINESS, ActionType.CONFIRM, LogLevel.INFO),
    
    PERMISSION_ALREADY_ASSIGNED(HttpStatus.CONFLICT, "R042", "ì´ë¯¸ í• ë‹¹ëœ ê¶Œí•œì…ë‹ˆë‹¤",
                               ErrorCategory.BUSINESS, ActionType.CONFIRM, LogLevel.WARN),
    
    PERMISSION_NOT_ASSIGNED(HttpStatus.NOT_FOUND, "R043", "í• ë‹¹ë˜ì§€ ì•Šì€ ê¶Œí•œì…ë‹ˆë‹¤",
                           ErrorCategory.BUSINESS, ActionType.CONFIRM, LogLevel.INFO),
    
    INSUFFICIENT_PERMISSION(HttpStatus.FORBIDDEN, "R044", "ê¶Œí•œì´ ë¶€ì¡±í•©ë‹ˆë‹¤",
                           ErrorCategory.SECURITY, ActionType.CONTACT_ADMIN, LogLevel.WARN),
    
    // ì—­í•  ê²€ì¦ ê´€ë ¨ (R061~R080)
    INVALID_ROLE_NAME(HttpStatus.BAD_REQUEST, "R061", "ì˜¬ë°”ë¥´ì§€ ì•Šì€ ì—­í• ëª…ì…ë‹ˆë‹¤",
                      ErrorCategory.VALIDATION, ActionType.PREVIOUS, LogLevel.INFO),
    
    ROLE_NAME_TOO_LONG(HttpStatus.BAD_REQUEST, "R062", "ì—­í• ëª…ì´ ë„ˆë¬´ ê¹ë‹ˆë‹¤",
                       ErrorCategory.VALIDATION, ActionType.PREVIOUS, LogLevel.INFO),
    
    INVALID_ROLE_DESCRIPTION(HttpStatus.BAD_REQUEST, "R063", "ì˜¬ë°”ë¥´ì§€ ì•Šì€ ì—­í•  ì„¤ëª…ì…ë‹ˆë‹¤",
                            ErrorCategory.VALIDATION, ActionType.PREVIOUS, LogLevel.INFO),
    
    INVALID_PERMISSION_CODE(HttpStatus.BAD_REQUEST, "R064", "ì˜¬ë°”ë¥´ì§€ ì•Šì€ ê¶Œí•œ ì½”ë“œì…ë‹ˆë‹¤",
                           ErrorCategory.VALIDATION, ActionType.PREVIOUS, LogLevel.INFO),
    
    // ì—­í•  í• ë‹¹ ê´€ë ¨ (R081~R099)
    ROLE_ASSIGNMENT_FAILED(HttpStatus.INTERNAL_SERVER_ERROR, "R081", "ì—­í•  í• ë‹¹ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤",
                          ErrorCategory.SYSTEM, ActionType.RETRY, LogLevel.ERROR),
    
    ROLE_UNASSIGNMENT_FAILED(HttpStatus.INTERNAL_SERVER_ERROR, "R082", "ì—­í•  í•´ì œì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤",
                            ErrorCategory.SYSTEM, ActionType.RETRY, LogLevel.ERROR),
    
    CANNOT_UNASSIGN_LAST_ADMIN(HttpStatus.CONFLICT, "R083", "ë§ˆì§€ë§‰ ê´€ë¦¬ì ì—­í• ì€ í•´ì œí•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤",
                              ErrorCategory.BUSINESS, ActionType.CONFIRM, LogLevel.WARN);
}
```

#### ğŸ“Š ë„ë©”ì¸ ì½”ë“œ í• ë‹¹ í˜„í™©

| ë„ë©”ì¸ ì½”ë“œ | ë„ë©”ì¸ëª… | í• ë‹¹ ë²”ìœ„ | ì‚¬ìš© í˜„í™© | í™•ì¥ ê°€ëŠ¥ì„± |
|-------------|----------|-----------|-----------|-------------|
| **U** | ì‚¬ìš©ì ê´€ë¦¬ | U001~U099 | 23ê°œ í• ë‹¹ | ë†’ìŒ |
| **P** | í”„ë¡œì íŠ¸ ê´€ë¦¬ | P001~P099 | 18ê°œ í• ë‹¹ | ë†’ìŒ |
| **R** | ì—­í•  ê´€ë¦¬ | R001~R099 | 15ê°œ í• ë‹¹ | ì¤‘ê°„ |
| **A** | ì¸ì¦/ì¸ê°€ | A001~A099 | 5ê°œ í• ë‹¹ | ì¤‘ê°„ |
| **C** | ê³µí†µ/ê²€ì¦ | C001~C099 | 6ê°œ í• ë‹¹ | ë†’ìŒ |
| **F** | íŒŒì¼ ì²˜ë¦¬ | F001~F099 | 5ê°œ í• ë‹¹ | ì¤‘ê°„ |
| **E** | ì„œë²„/ì‹œìŠ¤í…œ | E001~E099 | 5ê°œ í• ë‹¹ | ë‚®ìŒ |
| **X** | ì™¸ë¶€ API | X001~X099 | 4ê°œ í• ë‹¹ | ë†’ìŒ |
| **S** | ìƒ˜í”Œ/ì˜ˆì œ | S001~S099 | 2ê°œ í• ë‹¹ | ë‚®ìŒ |

#### ğŸ”„ ë„ë©”ì¸ í™•ì¥ ê°€ì´ë“œë¼ì¸

##### 1. ìƒˆ ë„ë©”ì¸ ì¶”ê°€ ì‹œ ê³ ë ¤ì‚¬í•­
```java
/**
 * ìƒˆ ë„ë©”ì¸ ì¶”ê°€ ì²´í¬ë¦¬ìŠ¤íŠ¸
 */
public class NewDomainGuide {
    
    // 1. ë„ë©”ì¸ ì½”ë“œ ì„ íƒ
    // - ì´ë¯¸ ì‚¬ìš© ì¤‘ì¸ ì½”ë“œì™€ ì¤‘ë³µë˜ì§€ ì•ŠëŠ”ì§€ í™•ì¸
    // - ì˜ë¯¸ìƒ í˜¼ë™ì„ ì¼ìœ¼í‚¤ì§€ ì•ŠëŠ” ì½”ë“œ ì„ íƒ
    // - ê°€ëŠ¥í•˜ë©´ ë„ë©”ì¸ ì´ë¦„ì˜ ì²« ê¸€ì ì‚¬ìš©
    
    // 2. ì—ëŸ¬ ì½”ë“œ ë²”ìœ„ í• ë‹¹
    // - ë„ë©”ì¸ í¬ê¸°ì— ë”°ë¼ ì ì ˆí•œ ë²”ìœ„ ê²°ì •
    // - ì¼ë°˜ì ìœ¼ë¡œ 001~099 (99ê°œ) í• ë‹¹
    // - ëŒ€ê·œëª¨ ë„ë©”ì¸ì€ A01~A99, B01~B99 í˜•íƒœë¡œ í™•ì¥ ê³ ë ¤
    
    // 3. ì—ëŸ¬ ì½”ë“œ ë¶„ë¥˜
    // - ê¸°ë³¸ CRUD ì˜¤ë¥˜: 001~020
    // - ìƒíƒœ ê´€ë ¨ ì˜¤ë¥˜: 021~040  
    // - ê¶Œí•œ ê´€ë ¨ ì˜¤ë¥˜: 041~060
    // - ê²€ì¦ ê´€ë ¨ ì˜¤ë¥˜: 061~080
    // - ê¸°íƒ€ ë„ë©”ì¸ íŠ¹í™”: 081~099
    
    // 4. ë¬¸ì„œí™”
    // - ErrorCode Enumì— ìƒì„¸ ì£¼ì„ ì¶”ê°€
    // - ë„ë©”ì¸ë³„ ì—ëŸ¬ ì½”ë“œ ë§¤í•‘ í…Œì´ë¸” ì—…ë°ì´íŠ¸
    // - API ë¬¸ì„œì— ìƒˆ ì—ëŸ¬ ì½”ë“œ ì¶”ê°€
}
```

##### 2. ì‹¤ì œ ë„ë©”ì¸ ì¶”ê°€ ì˜ˆì‹œ: ì•Œë¦¼ ê´€ë¦¬ (N001~N099)
```java
/**
 * ì•Œë¦¼ ê´€ë¦¬ ë„ë©”ì¸ ì—ëŸ¬ ì½”ë“œ
 * 
 * <p>ì•Œë¦¼ ìƒì„±, ë°œì†¡, ì¡°íšŒ, ì„¤ì • ê´€ë¦¬ì™€ ê´€ë ¨ëœ ëª¨ë“  ì—ëŸ¬ë¥¼ ì •ì˜í•©ë‹ˆë‹¤.</p>
 */
public enum NotificationErrorCode {
    
    // ê¸°ë³¸ CRUD ì˜¤ë¥˜ (N001~N020)
    NOTIFICATION_NOT_FOUND(HttpStatus.NOT_FOUND, "N001", "ì•Œë¦¼ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤"),
    NOTIFICATION_CREATION_FAILED(HttpStatus.INTERNAL_SERVER_ERROR, "N002", "ì•Œë¦¼ ìƒì„±ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤"),
    NOTIFICATION_SEND_FAILED(HttpStatus.INTERNAL_SERVER_ERROR, "N003", "ì•Œë¦¼ ë°œì†¡ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤"),
    
    // ì•Œë¦¼ ìƒíƒœ ê´€ë ¨ (N021~N040)
    NOTIFICATION_ALREADY_READ(HttpStatus.CONFLICT, "N021", "ì´ë¯¸ ì½ì€ ì•Œë¦¼ì…ë‹ˆë‹¤"),
    NOTIFICATION_EXPIRED(HttpStatus.GONE, "N022", "ë§Œë£Œëœ ì•Œë¦¼ì…ë‹ˆë‹¤"),
    
    // ì•Œë¦¼ ì„¤ì • ê´€ë ¨ (N041~N060)
    NOTIFICATION_DISABLED(HttpStatus.FORBIDDEN, "N041", "ì•Œë¦¼ì´ ë¹„í™œì„±í™”ë˜ì–´ ìˆìŠµë‹ˆë‹¤"),
    INVALID_NOTIFICATION_TYPE(HttpStatus.BAD_REQUEST, "N042", "ì˜¬ë°”ë¥´ì§€ ì•Šì€ ì•Œë¦¼ ìœ í˜•ì…ë‹ˆë‹¤"),
    
    // ì•Œë¦¼ ê²€ì¦ ê´€ë ¨ (N061~N080)
    INVALID_NOTIFICATION_CONTENT(HttpStatus.BAD_REQUEST, "N061", "ì•Œë¦¼ ë‚´ìš©ì´ ì˜¬ë°”ë¥´ì§€ ì•ŠìŠµë‹ˆë‹¤"),
    NOTIFICATION_CONTENT_TOO_LONG(HttpStatus.BAD_REQUEST, "N062", "ì•Œë¦¼ ë‚´ìš©ì´ ë„ˆë¬´ ê¹ë‹ˆë‹¤"),
    
    // ì™¸ë¶€ ì•Œë¦¼ ì„œë¹„ìŠ¤ ê´€ë ¨ (N081~N099)
    EMAIL_SERVICE_UNAVAILABLE(HttpStatus.SERVICE_UNAVAILABLE, "N081", "ì´ë©”ì¼ ì„œë¹„ìŠ¤ë¥¼ ì‚¬ìš©í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤"),
    SMS_SERVICE_UNAVAILABLE(HttpStatus.SERVICE_UNAVAILABLE, "N082", "SMS ì„œë¹„ìŠ¤ë¥¼ ì‚¬ìš©í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤"),
    PUSH_NOTIFICATION_FAILED(HttpStatus.INTERNAL_SERVER_ERROR, "N083", "í‘¸ì‹œ ì•Œë¦¼ ë°œì†¡ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤");
}
```

### 4.3 HTTP ìƒíƒœì™€ ì—ëŸ¬ ì½”ë“œ ë§¤í•‘

HTTP ìƒíƒœ ì½”ë“œì™€ ë¹„ì¦ˆë‹ˆìŠ¤ ì—ëŸ¬ ì½”ë“œ ê°„ì˜ ì •í™•í•œ ë§¤í•‘ì€ RESTful APIì˜ ì¼ê´€ì„±ê³¼ í´ë¼ì´ì–¸íŠ¸ ê°œë°œ íš¨ìœ¨ì„±ì„ ë³´ì¥í•˜ëŠ” í•µì‹¬ ìš”ì†Œì…ë‹ˆë‹¤.

#### ğŸ¯ ë§¤í•‘ ì›ì¹™

##### 1. ì˜ë¯¸ë¡ ì  ì¼ì¹˜ì„±
```java
/**
 * HTTP ìƒíƒœ ì½”ë“œì™€ ë¹„ì¦ˆë‹ˆìŠ¤ ì—ëŸ¬ì˜ ì˜ë¯¸ì  ë§¤í•‘
 */
public class HttpErrorMapping {
    
    // âœ… ì˜¬ë°”ë¥¸ ë§¤í•‘ ì˜ˆì‹œ
    USER_NOT_FOUND(HttpStatus.NOT_FOUND, "U001", "ì‚¬ìš©ìë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤")
    // 404: ìš”ì²­í•œ ë¦¬ì†ŒìŠ¤(ì‚¬ìš©ì)ê°€ ì¡´ì¬í•˜ì§€ ì•ŠìŒ
    
    INVALID_PASSWORD(HttpStatus.BAD_REQUEST, "U042", "ë¹„ë°€ë²ˆí˜¸ í˜•ì‹ì´ ì˜¬ë°”ë¥´ì§€ ì•ŠìŠµë‹ˆë‹¤")
    // 400: í´ë¼ì´ì–¸íŠ¸ì˜ ì˜ëª»ëœ ìš”ì²­ (í˜•ì‹ ì˜¤ë¥˜)
    
    ACCESS_DENIED(HttpStatus.FORBIDDEN, "A002", "ì ‘ê·¼ ê¶Œí•œì´ ì—†ìŠµë‹ˆë‹¤")
    // 403: ì¸ì¦ì€ ë˜ì—ˆì§€ë§Œ í•´ë‹¹ ë¦¬ì†ŒìŠ¤ì— ëŒ€í•œ ê¶Œí•œ ì—†ìŒ
    
    // âŒ ì˜ëª»ëœ ë§¤í•‘ ì˜ˆì‹œ
    USER_NOT_FOUND(HttpStatus.BAD_REQUEST, "U001", "ì‚¬ìš©ìë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤")
    // 400ì€ ìš”ì²­ í˜•ì‹ ì˜¤ë¥˜ì— ì‚¬ìš©í•´ì•¼ í•¨
    
    INVALID_PASSWORD(HttpStatus.NOT_FOUND, "U042", "ë¹„ë°€ë²ˆí˜¸ê°€ í‹€ë ¸ìŠµë‹ˆë‹¤")
    // 404ëŠ” ë¦¬ì†ŒìŠ¤ ë¶€ì¬ì— ì‚¬ìš©í•´ì•¼ í•¨
}
```

##### 2. í´ë¼ì´ì–¸íŠ¸ í–‰ë™ ìœ ë„
```java
/**
 * HTTP ìƒíƒœ ì½”ë“œë³„ í´ë¼ì´ì–¸íŠ¸ ê¸°ëŒ€ í–‰ë™
 */
public class ClientBehaviorGuide {
    
    // 2xx: ì„±ê³µ - ì •ìƒ ì§„í–‰
    HttpStatus.OK           -> "ìš”ì²­ ì„±ê³µ, ê²°ê³¼ ì‚¬ìš©"
    HttpStatus.CREATED      -> "ë¦¬ì†ŒìŠ¤ ìƒì„± ì„±ê³µ, ìƒì„±ëœ ë¦¬ì†ŒìŠ¤ ì •ë³´ í™œìš©"
    HttpStatus.NO_CONTENT   -> "ìš”ì²­ ì„±ê³µ, ì¶”ê°€ ì²˜ë¦¬ ì—†ìŒ"
    
    // 4xx: í´ë¼ì´ì–¸íŠ¸ ì˜¤ë¥˜ - ìš”ì²­ ìˆ˜ì • í•„ìš”
    HttpStatus.BAD_REQUEST      -> "ìš”ì²­ ë°ì´í„° ê²€í†  ë° ìˆ˜ì • í›„ ì¬ìš”ì²­"
    HttpStatus.UNAUTHORIZED     -> "ì¸ì¦ ì •ë³´ í™•ì¸ ë° ì¬ì¸ì¦"
    HttpStatus.FORBIDDEN        -> "ê¶Œí•œ í™•ì¸, ê´€ë¦¬ì ë¬¸ì˜"
    HttpStatus.NOT_FOUND        -> "ìš”ì²­ ê²½ë¡œ ë° ë¦¬ì†ŒìŠ¤ ID í™•ì¸"
    HttpStatus.CONFLICT         -> "ì¤‘ë³µ ë°ì´í„° í™•ì¸, ë¹„ì¦ˆë‹ˆìŠ¤ ê·œì¹™ ê²€í† "
    
    // 5xx: ì„œë²„ ì˜¤ë¥˜ - ì¬ì‹œë„ ë˜ëŠ” ê´€ë¦¬ì ë¬¸ì˜
    HttpStatus.INTERNAL_SERVER_ERROR -> "ì ì‹œ í›„ ì¬ì‹œë„, ì§€ì† ì‹œ ê´€ë¦¬ì ë¬¸ì˜"
    HttpStatus.BAD_GATEWAY          -> "ì™¸ë¶€ ì„œë¹„ìŠ¤ ìƒíƒœ í™•ì¸, ì¬ì‹œë„"
    HttpStatus.SERVICE_UNAVAILABLE  -> "ì„œë¹„ìŠ¤ ë³µêµ¬ ëŒ€ê¸° í›„ ì¬ì‹œë„"
}
```

#### ğŸ“Š ìƒíƒœ ì½”ë“œë³„ ì—ëŸ¬ ë§¤í•‘ í…Œì´ë¸”

##### 1. 4xx í´ë¼ì´ì–¸íŠ¸ ì˜¤ë¥˜ ë§¤í•‘
```java
/**
 * 4xx í´ë¼ì´ì–¸íŠ¸ ì˜¤ë¥˜ ìƒì„¸ ë§¤í•‘
 */
public enum ClientErrorMapping {
    
    // 400 Bad Request - ì˜ëª»ëœ ìš”ì²­ í˜•ì‹
    BAD_REQUEST_ERRORS(HttpStatus.BAD_REQUEST, Arrays.asList(
        "C001", // INVALID_INPUT_VALUE
        "C002", // VALIDATION_FAILED
        "U042", // INVALID_USER_PASSWORD
        "U043", // PASSWORD_TOO_WEAK
        "U044", // PASSWORD_MISMATCH
        "U041", // INVALID_USER_EMAIL
        "P081", // INVALID_PROJECT_NAME
        "P082", // PROJECT_NAME_TOO_LONG
        "P083", // INVALID_PROJECT_DESCRIPTION
        "P084", // INVALID_PROJECT_DATES
        "R061", // INVALID_ROLE_NAME
        "R062", // ROLE_NAME_TOO_LONG
        "R063", // INVALID_ROLE_DESCRIPTION
        "R064", // INVALID_PERMISSION_CODE
        "F001", // FILE_SIZE_EXCEEDED
        "F002"  // UNSUPPORTED_FILE_TYPE
    )),
    
    // 401 Unauthorized - ì¸ì¦ ì‹¤íŒ¨
    UNAUTHORIZED_ERRORS(HttpStatus.UNAUTHORIZED, Arrays.asList(
        "A001", // AUTHENTICATION_FAILED
        "A003", // TOKEN_EXPIRED
        "A004", // INVALID_TOKEN
        "U004", // INVALID_PASSWORD
        "X001"  // SKTAI_AUTH_FAILED
    )),
    
    // 403 Forbidden - ê¶Œí•œ ë¶€ì¡±
    FORBIDDEN_ERRORS(HttpStatus.FORBIDDEN, Arrays.asList(
        "A002", // ACCESS_DENIED
        "A005", // INSUFFICIENT_PERMISSION
        "U003", // USER_INACTIVE
        "U021", // USER_SUSPENDED
        "U022", // USER_DORMANT
        "U023", // USER_WITHDRAWAL
        "U061", // USER_PERMISSION_DENIED
        "U062", // USER_ROLE_NOT_ASSIGNED
        "P041", // PROJECT_ACCESS_DENIED
        "P042", // PROJECT_ADMIN_REQUIRED
        "P043", // PORTAL_ADMIN_REQUIRED
        "R021", // ROLE_INACTIVE
        "R044"  // INSUFFICIENT_PERMISSION
    )),
    
    // 404 Not Found - ë¦¬ì†ŒìŠ¤ ì—†ìŒ
    NOT_FOUND_ERRORS(HttpStatus.NOT_FOUND, Arrays.asList(
        "C003", // RESOURCE_NOT_FOUND
        "U001", // USER_NOT_FOUND
        "P001", // PROJECT_NOT_FOUND
        "P061", // USER_NOT_IN_PROJECT
        "R001", // ROLE_NOT_FOUND
        "R041", // PERMISSION_NOT_FOUND
        "R043", // PERMISSION_NOT_ASSIGNED
        "F005"  // FILE_NOT_FOUND
    )),
    
    // 409 Conflict - ë¦¬ì†ŒìŠ¤ ì¶©ëŒ
    CONFLICT_ERRORS(HttpStatus.CONFLICT, Arrays.asList(
        "C004", // DATA_INTEGRITY_VIOLATION
        "C005", // DUPLICATE_RESOURCE
        "U002", // USER_ALREADY_EXISTS
        "P002", // PROJECT_ALREADY_EXISTS
        "P021", // PROJECT_ALREADY_COMPLETED
        "P022", // PROJECT_IN_PROGRESS
        "P024", // CANNOT_COMPLETE_PROJECT
        "P062", // USER_ALREADY_IN_PROJECT
        "P063", // CANNOT_REMOVE_PROJECT_ADMIN
        "P064", // PROJECT_MEMBER_LIMIT_EXCEEDED
        "R002", // ROLE_ALREADY_EXISTS
        "R022", // DEFAULT_ROLE_CANNOT_DELETE
        "R023", // ROLE_IN_USE
        "R042", // PERMISSION_ALREADY_ASSIGNED
        "R083"  // CANNOT_UNASSIGN_LAST_ADMIN
    )),
    
    // 429 Too Many Requests - ìš”ì²­ í•œë„ ì´ˆê³¼
    TOO_MANY_REQUESTS_ERRORS(HttpStatus.TOO_MANY_REQUESTS, Arrays.asList(
        "X002"  // SKTAI_QUOTA_EXCEEDED
    ));
}
```

##### 2. 5xx ì„œë²„ ì˜¤ë¥˜ ë§¤í•‘
```java
/**
 * 5xx ì„œë²„ ì˜¤ë¥˜ ìƒì„¸ ë§¤í•‘
 */
public enum ServerErrorMapping {
    
    // 500 Internal Server Error - ì„œë²„ ë‚´ë¶€ ì˜¤ë¥˜
    INTERNAL_SERVER_ERROR_CODES(HttpStatus.INTERNAL_SERVER_ERROR, Arrays.asList(
        "E001", // INTERNAL_SERVER_ERROR
        "E003", // DATABASE_CONNECTION_ERROR
        "U003", // USER_CREATION_FAILED
        "U004", // USER_UPDATE_FAILED
        "U005", // USER_DELETION_FAILED
        "P003", // PROJECT_CREATION_FAILED
        "P004", // PROJECT_UPDATE_FAILED
        "P005", // PROJECT_DELETION_FAILED
        "R003", // ROLE_CREATION_FAILED
        "R004", // ROLE_UPDATE_FAILED
        "R005", // ROLE_DELETION_FAILED
        "R081", // ROLE_ASSIGNMENT_FAILED
        "R082", // ROLE_UNASSIGNMENT_FAILED
        "F003", // FILE_UPLOAD_FAILED
        "F004", // FILE_DOWNLOAD_FAILED
        "U081", // PROFILE_UPDATE_FAILED
        "U082", // PROFILE_IMAGE_UPLOAD_FAILED
        "N002", // NOTIFICATION_CREATION_FAILED
        "N003", // NOTIFICATION_SEND_FAILED
        "N083"  // PUSH_NOTIFICATION_FAILED
    )),
    
    // 502 Bad Gateway - ì™¸ë¶€ ì„œë¹„ìŠ¤ ì˜¤ë¥˜
    BAD_GATEWAY_ERRORS(HttpStatus.BAD_GATEWAY, Arrays.asList(
        "E002", // EXTERNAL_SERVICE_ERROR
        "X004"  // EXTERNAL_API_CALL_FAILED
    )),
    
    // 503 Service Unavailable - ì„œë¹„ìŠ¤ ì¼ì‹œ ì¤‘ë‹¨
    SERVICE_UNAVAILABLE_ERRORS(HttpStatus.SERVICE_UNAVAILABLE, Arrays.asList(
        "E004", // SERVICE_UNAVAILABLE
        "X003", // SKTAI_SERVICE_UNAVAILABLE
        "N081", // EMAIL_SERVICE_UNAVAILABLE
        "N082"  // SMS_SERVICE_UNAVAILABLE
    )),
    
    // 504 Gateway Timeout - íƒ€ì„ì•„ì›ƒ
    GATEWAY_TIMEOUT_ERRORS(HttpStatus.GATEWAY_TIMEOUT, Arrays.asList(
        "E005"  // REQUEST_TIMEOUT
    ));
}
```

#### ğŸ”§ ë™ì  ë§¤í•‘ ê²€ì¦ ë„êµ¬

##### 1. ë§¤í•‘ ì¼ê´€ì„± ê²€ì¦ê¸°
```java
/**
 * HTTP ìƒíƒœ ì½”ë“œì™€ ì—ëŸ¬ ì½”ë“œ ë§¤í•‘ ê²€ì¦ ë„êµ¬
 * 
 * <p>ì»´íŒŒì¼ íƒ€ì„ ë° ëŸ°íƒ€ì„ì— ë§¤í•‘ì˜ ì¼ê´€ì„±ì„ ê²€ì¦í•©ë‹ˆë‹¤.</p>
 * 
 * @author ByounggwanLee
 * @since 2025-10-09
 */
@Component
@Slf4j
public class ErrorCodeMappingValidator {
    
    /**
     * ì• í”Œë¦¬ì¼€ì´ì…˜ ì‹œì‘ ì‹œ ë§¤í•‘ ê²€ì¦ ìˆ˜í–‰
     */
    @EventListener(ApplicationReadyEvent.class)
    public void validateErrorCodeMapping() {
        log.info("ğŸ” ErrorCode ë§¤í•‘ ê²€ì¦ ì‹œì‘...");
        
        List<String> violations = new ArrayList<>();
        
        // 1. HTTP ìƒíƒœì™€ ì—ëŸ¬ ì½”ë“œ ì˜ë¯¸ ì¼ì¹˜ì„± ê²€ì¦
        violations.addAll(validateSemanticConsistency());
        
        // 2. ì¤‘ë³µ ì—ëŸ¬ ì½”ë“œ ê²€ì¦
        violations.addAll(validateUniqueErrorCodes());
        
        // 3. ë¯¸ì‚¬ìš© HTTP ìƒíƒœ ê²€ì¦
        violations.addAll(validateHttpStatusCoverage());
        
        // 4. ë„ë©”ì¸ë³„ ì½”ë“œ ë²”ìœ„ ê²€ì¦
        violations.addAll(validateDomainCodeRanges());
        
        if (violations.isEmpty()) {
            log.info("âœ… ErrorCode ë§¤í•‘ ê²€ì¦ ì„±ê³µ");
        } else {
            log.error("âŒ ErrorCode ë§¤í•‘ ê²€ì¦ ì‹¤íŒ¨:");
            violations.forEach(violation -> log.error("  - {}", violation));
            throw new IllegalStateException("ErrorCode ë§¤í•‘ ì˜¤ë¥˜ê°€ ë°œê²¬ë˜ì—ˆìŠµë‹ˆë‹¤.");
        }
    }
    
    /**
     * ì˜ë¯¸ì  ì¼ê´€ì„± ê²€ì¦
     */
    private List<String> validateSemanticConsistency() {
        List<String> violations = new ArrayList<>();
        
        for (ErrorCode errorCode : ErrorCode.values()) {
            String code = errorCode.getCode();
            HttpStatus status = errorCode.getStatus();
            
            // 4xx ì—ëŸ¬ì¸ë° ì„œë²„ ì˜¤ë¥˜ ë©”ì‹œì§€ê°€ ìˆëŠ” ê²½ìš° ê²€ì¦
            if (status.is4xxClientError() && 
                errorCode.getMessage().contains("ì„œë²„") || 
                errorCode.getMessage().contains("ì‹œìŠ¤í…œ")) {
                violations.add(String.format(
                    "4xx ìƒíƒœì½”ë“œ(%s)ì¸ë° ì„œë²„ ê´€ë ¨ ë©”ì‹œì§€ë¥¼ í¬í•¨: %s - %s", 
                    status, code, errorCode.getMessage()));
            }
            
            // 5xx ì—ëŸ¬ì¸ë° í´ë¼ì´ì–¸íŠ¸ ì˜¤ë¥˜ ë©”ì‹œì§€ê°€ ìˆëŠ” ê²½ìš° ê²€ì¦
            if (status.is5xxServerError() && 
                errorCode.getMessage().contains("ì…ë ¥") || 
                errorCode.getMessage().contains("í˜•ì‹")) {
                violations.add(String.format(
                    "5xx ìƒíƒœì½”ë“œ(%s)ì¸ë° í´ë¼ì´ì–¸íŠ¸ ê´€ë ¨ ë©”ì‹œì§€ë¥¼ í¬í•¨: %s - %s", 
                    status, code, errorCode.getMessage()));
            }
        }
        
        return violations;
    }
    
    /**
     * ì¤‘ë³µ ì—ëŸ¬ ì½”ë“œ ê²€ì¦
     */
    private List<String> validateUniqueErrorCodes() {
        List<String> violations = new ArrayList<>();
        Map<String, List<ErrorCode>> codeGroups = Arrays.stream(ErrorCode.values())
                .collect(Collectors.groupingBy(ErrorCode::getCode));
        
        codeGroups.entrySet().stream()
                .filter(entry -> entry.getValue().size() > 1)
                .forEach(entry -> violations.add(
                    String.format("ì¤‘ë³µëœ ì—ëŸ¬ ì½”ë“œ: %s (ì‚¬ìš© ìœ„ì¹˜: %s)", 
                        entry.getKey(), 
                        entry.getValue().stream()
                            .map(Enum::name)
                            .collect(Collectors.joining(", ")))));
        
        return violations;
    }
    
    /**
     * HTTP ìƒíƒœ ì»¤ë²„ë¦¬ì§€ ê²€ì¦
     */
    private List<String> validateHttpStatusCoverage() {
        List<String> violations = new ArrayList<>();
        Set<HttpStatus> usedStatuses = Arrays.stream(ErrorCode.values())
                .map(ErrorCode::getStatus)
                .collect(Collectors.toSet());
        
        // ì£¼ìš” HTTP ìƒíƒœ ì½”ë“œê°€ ëˆ„ë½ë˜ì—ˆëŠ”ì§€ í™•ì¸
        List<HttpStatus> requiredStatuses = Arrays.asList(
            HttpStatus.BAD_REQUEST,
            HttpStatus.UNAUTHORIZED,
            HttpStatus.FORBIDDEN,
            HttpStatus.NOT_FOUND,
            HttpStatus.CONFLICT,
            HttpStatus.INTERNAL_SERVER_ERROR
        );
        
        requiredStatuses.stream()
                .filter(status -> !usedStatuses.contains(status))
                .forEach(status -> violations.add(
                    String.format("í•„ìˆ˜ HTTP ìƒíƒœ ì½”ë“œê°€ ëˆ„ë½ë¨: %s", status)));
        
        return violations;
    }
    
    /**
     * ë„ë©”ì¸ë³„ ì½”ë“œ ë²”ìœ„ ê²€ì¦
     */
    private List<String> validateDomainCodeRanges() {
        List<String> violations = new ArrayList<>();
        Map<String, List<String>> domainGroups = Arrays.stream(ErrorCode.values())
                .collect(Collectors.groupingBy(
                    errorCode -> errorCode.getCode().substring(0, 1),
                    Collectors.mapping(ErrorCode::getCode, Collectors.toList())
                ));
        
        domainGroups.forEach((domain, codes) -> {
            if (codes.size() > 99) {
                violations.add(String.format(
                    "ë„ë©”ì¸ %sì˜ ì—ëŸ¬ ì½”ë“œê°€ í• ë‹¹ í•œê³„(99ê°œ)ë¥¼ ì´ˆê³¼: %dê°œ", domain, codes.size()));
            }
        });
        
        return violations;
    }
    
    /**
     * ëŸ°íƒ€ì„ ë§¤í•‘ ê²€ì¦ (í…ŒìŠ¤íŠ¸ìš©)
     */
    public boolean validateMapping(ErrorCode errorCode, HttpStatus expectedStatus) {
        return errorCode.getStatus().equals(expectedStatus);
    }
    
    /**
     * ë§¤í•‘ í†µê³„ ìƒì„±
     */
    public Map<String, Object> getMappingStatistics() {
        Map<String, Object> stats = new HashMap<>();
        
        // HTTP ìƒíƒœë³„ ë¶„í¬
        Map<HttpStatus, Long> statusDistribution = Arrays.stream(ErrorCode.values())
                .collect(Collectors.groupingBy(
                    ErrorCode::getStatus,
                    Collectors.counting()
                ));
        stats.put("statusDistribution", statusDistribution);
        
        // ë„ë©”ì¸ë³„ ë¶„í¬
        Map<String, Long> domainDistribution = Arrays.stream(ErrorCode.values())
                .collect(Collectors.groupingBy(
                    errorCode -> errorCode.getCode().substring(0, 1),
                    Collectors.counting()
                ));
        stats.put("domainDistribution", domainDistribution);
        
        // ì¹´í…Œê³ ë¦¬ë³„ ë¶„í¬
        Map<ErrorCategory, Long> categoryDistribution = Arrays.stream(ErrorCode.values())
                .collect(Collectors.groupingBy(
                    ErrorCode::getCategory,
                    Collectors.counting()
                ));
        stats.put("categoryDistribution", categoryDistribution);
        
        return stats;
    }
}
```

##### 2. í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ ìë™ ìƒì„±
```java
/**
 * ErrorCode ë§¤í•‘ í…ŒìŠ¤íŠ¸ ìë™ ìƒì„±ê¸°
 * 
 * @author ByounggwanLee
 * @since 2025-10-09
 */
@ExtendWith(SpringExtension.class)
@SpringBootTest
class ErrorCodeMappingTest {
    
    @Autowired
    private ErrorCodeMappingValidator validator;
    
    /**
     * ëª¨ë“  ErrorCodeì˜ HTTP ìƒíƒœ ë§¤í•‘ ê²€ì¦
     */
    @ParameterizedTest
    @EnumSource(ErrorCode.class)
    @DisplayName("ErrorCode HTTP ìƒíƒœ ë§¤í•‘ ê²€ì¦")
    void testErrorCodeHttpStatusMapping(ErrorCode errorCode) {
        // Given
        HttpStatus status = errorCode.getStatus();
        String code = errorCode.getCode();
        String message = errorCode.getMessage();
        
        // When & Then
        assertThat(status).isNotNull();
        assertThat(code).isNotBlank();
        assertThat(message).isNotBlank();
        
        // HTTP ìƒíƒœì™€ ë©”ì‹œì§€ ì¼ê´€ì„± ê²€ì¦
        if (status.is4xxClientError()) {
            assertThat(message)
                .as("4xx ì—ëŸ¬ëŠ” í´ë¼ì´ì–¸íŠ¸ ì˜¤ë¥˜ ë©”ì‹œì§€ì—¬ì•¼ í•¨")
                .doesNotContainIgnoringCase("ì„œë²„", "ì‹œìŠ¤í…œ", "ë‚´ë¶€");
        }
        
        if (status.is5xxServerError()) {
            assertThat(message)
                .as("5xx ì—ëŸ¬ëŠ” ì„œë²„ ì˜¤ë¥˜ ë©”ì‹œì§€ì—¬ì•¼ í•¨")
                .doesNotContainIgnoringCase("ì…ë ¥", "í˜•ì‹", "ê²€ì¦");
        }
    }
    
    /**
     * ë„ë©”ì¸ë³„ ì—ëŸ¬ ì½”ë“œ ë²”ìœ„ ê²€ì¦
     */
    @Test
    @DisplayName("ë„ë©”ì¸ë³„ ì—ëŸ¬ ì½”ë“œ ë²”ìœ„ ê²€ì¦")
    void testDomainCodeRanges() {
        Map<String, List<ErrorCode>> domainGroups = Arrays.stream(ErrorCode.values())
                .collect(Collectors.groupingBy(
                    errorCode -> errorCode.getCode().substring(0, 1)
                ));
        
        domainGroups.forEach((domain, errorCodes) -> {
            assertThat(errorCodes.size())
                .as("ë„ë©”ì¸ %sì˜ ì—ëŸ¬ ì½”ë“œ ìˆ˜", domain)
                .isLessThanOrEqualTo(99);
            
            // ì—ëŸ¬ ì½”ë“œ í˜•ì‹ ê²€ì¦
            errorCodes.forEach(errorCode -> {
                assertThat(errorCode.getCode())
                    .as("ì—ëŸ¬ ì½”ë“œ í˜•ì‹")
                    .matches("^[A-Z]\\d{3}$");
            });
        });
    }
    
    /**
     * RESTful API ê·œì¹™ ì¤€ìˆ˜ ê²€ì¦
     */
    @Test
    @DisplayName("RESTful API ê·œì¹™ ì¤€ìˆ˜ ê²€ì¦")
    void testRestfulApiCompliance() {
        // CRUD ì‘ì—…ë³„ ì ì ˆí•œ HTTP ìƒíƒœ ì‚¬ìš© ê²€ì¦
        List<ErrorCode> notFoundErrors = Arrays.stream(ErrorCode.values())
                .filter(code -> code.getMessage().contains("ì°¾ì„ ìˆ˜ ì—†"))
                .collect(Collectors.toList());
        
        notFoundErrors.forEach(errorCode -> {
            assertThat(errorCode.getStatus())
                .as("'ì°¾ì„ ìˆ˜ ì—†ìŒ' ë©”ì‹œì§€ëŠ” 404 ìƒíƒœì—¬ì•¼ í•¨")
                .isEqualTo(HttpStatus.NOT_FOUND);
        });
        
        List<ErrorCode> alreadyExistsErrors = Arrays.stream(ErrorCode.values())
                .filter(code -> code.getMessage().contains("ì´ë¯¸ ì¡´ì¬"))
                .collect(Collectors.toList());
        
        alreadyExistsErrors.forEach(errorCode -> {
            assertThat(errorCode.getStatus())
                .as("'ì´ë¯¸ ì¡´ì¬' ë©”ì‹œì§€ëŠ” 409 ìƒíƒœì—¬ì•¼ í•¨")
                .isEqualTo(HttpStatus.CONFLICT);
        });
    }
}
```

### 4.4 ë‹¤êµ­ì–´ ì§€ì›ì„ ìœ„í•œ ë©”ì‹œì§€ ì„¤ê³„

ê¸€ë¡œë²Œ ì„œë¹„ìŠ¤ë¥¼ ìœ„í•œ ë‹¤êµ­ì–´ ì§€ì›ì€ í˜„ëŒ€ ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ í•„ìˆ˜ ìš”ì†Œì…ë‹ˆë‹¤. ì²´ê³„ì ì¸ ë©”ì‹œì§€ êµ­ì œí™” ì„¤ê³„ë¥¼ í†µí•´ í™•ì¥ ê°€ëŠ¥í•˜ê³  ìœ ì§€ë³´ìˆ˜í•˜ê¸° ì‰¬ìš´ ë‹¤êµ­ì–´ ì—ëŸ¬ ì²˜ë¦¬ ì‹œìŠ¤í…œì„ êµ¬ì¶•í•©ë‹ˆë‹¤.

#### ğŸŒ êµ­ì œí™” ì•„í‚¤í…ì²˜ ì„¤ê³„

##### 1. ë©”ì‹œì§€ í‚¤ ì²´ê³„
```java
/**
 * ë‹¤êµ­ì–´ ë©”ì‹œì§€ í‚¤ ëª…ëª… ê·œì¹™
 * 
 * <p>ì¼ê´€ë˜ê³  ì˜ˆì¸¡ ê°€ëŠ¥í•œ ë©”ì‹œì§€ í‚¤ ì²´ê³„ë¥¼ ì •ì˜í•©ë‹ˆë‹¤.</p>
 */
public class MessageKeySchema {
    
    /**
     * ê¸°ë³¸ í‚¤ êµ¬ì¡°: {category}.{domain}.{action}.{result}
     */
    
    // ì—ëŸ¬ ë©”ì‹œì§€ í‚¤ íŒ¨í„´
    "error.user.find.notFound"        // ì‚¬ìš©ì ì¡°íšŒ ì‹¤íŒ¨
    "error.user.create.alreadyExists"  // ì‚¬ìš©ì ìƒì„± ì‹œ ì¤‘ë³µ
    "error.user.update.failed"        // ì‚¬ìš©ì ìˆ˜ì • ì‹¤íŒ¨
    "error.user.delete.inUse"         // ì‚¬ìš©ì¤‘ì¸ ì‚¬ìš©ì ì‚­ì œ ì‹œë„
    
    "error.project.find.notFound"     // í”„ë¡œì íŠ¸ ì¡°íšŒ ì‹¤íŒ¨
    "error.project.access.denied"     // í”„ë¡œì íŠ¸ ì ‘ê·¼ ê¶Œí•œ ì—†ìŒ
    "error.project.complete.failed"   // í”„ë¡œì íŠ¸ ì™„ë£Œ ì‹¤íŒ¨
    
    "error.role.assign.failed"        // ì—­í•  í• ë‹¹ ì‹¤íŒ¨
    "error.role.permission.insufficient" // ê¶Œí•œ ë¶€ì¡±
    
    "error.file.upload.sizeLimitExceeded" // íŒŒì¼ í¬ê¸° ì´ˆê³¼
    "error.file.type.unsupported"     // ì§€ì›í•˜ì§€ ì•ŠëŠ” íŒŒì¼ í˜•ì‹
    
    "error.auth.login.failed"         // ë¡œê·¸ì¸ ì‹¤íŒ¨
    "error.auth.token.expired"        // í† í° ë§Œë£Œ
    "error.auth.permission.denied"    // ê¶Œí•œ ê±°ë¶€
    
    "error.system.database.connectionFailed" // DB ì—°ê²° ì‹¤íŒ¨
    "error.system.external.serviceUnavailable" // ì™¸ë¶€ ì„œë¹„ìŠ¤ ì¤‘ë‹¨
    
    // ì„±ê³µ ë©”ì‹œì§€ í‚¤ íŒ¨í„´
    "success.user.create.completed"   // ì‚¬ìš©ì ìƒì„± ì„±ê³µ
    "success.user.update.completed"   // ì‚¬ìš©ì ìˆ˜ì • ì„±ê³µ
    "success.user.delete.completed"   // ì‚¬ìš©ì ì‚­ì œ ì„±ê³µ
    
    "success.project.create.completed" // í”„ë¡œì íŠ¸ ìƒì„± ì„±ê³µ
    "success.project.update.completed" // í”„ë¡œì íŠ¸ ìˆ˜ì • ì„±ê³µ
    "success.project.complete.finished" // í”„ë¡œì íŠ¸ ì™„ë£Œ ì„±ê³µ
    
    // ê²€ì¦ ë©”ì‹œì§€ í‚¤ íŒ¨í„´
    "validation.user.email.format"    // ì´ë©”ì¼ í˜•ì‹ ì˜¤ë¥˜
    "validation.user.password.strength" // ë¹„ë°€ë²ˆí˜¸ ê°•ë„ ë¶€ì¡±
    "validation.user.name.required"   // ì´ë¦„ í•„ìˆ˜ ì…ë ¥
    "validation.user.age.range"       // ë‚˜ì´ ë²”ìœ„ ì˜¤ë¥˜
    
    "validation.project.name.length"  // í”„ë¡œì íŠ¸ëª… ê¸¸ì´ ì˜¤ë¥˜
    "validation.project.date.invalid" // í”„ë¡œì íŠ¸ ì¼ì • ì˜¤ë¥˜
    
    // ì•¡ì…˜ ê°€ì´ë“œ ë©”ì‹œì§€ í‚¤ íŒ¨í„´
    "action.confirm.continue"         // í™•ì¸ í›„ ê³„ì†
    "action.retry.recommended"        // ì¬ì‹œë„ ê¶Œì¥
    "action.contact.admin"            // ê´€ë¦¬ì ë¬¸ì˜
    "action.fix.input"                // ì…ë ¥ê°’ ìˆ˜ì •
}
```

##### 2. ErrorCodeì™€ ë©”ì‹œì§€ í‚¤ ì—°ê²°
```java
/**
 * êµ­ì œí™” ì§€ì›ì„ ìœ„í•œ ErrorCode í™•ì¥
 * 
 * @author ByounggwanLee
 * @since 2025-10-09
 */
@Getter
@RequiredArgsConstructor
public enum ErrorCode {
    
    // ì‚¬ìš©ì ê´€ë ¨ ì—ëŸ¬ (ë©”ì‹œì§€ í‚¤ í¬í•¨)
    USER_NOT_FOUND(
        HttpStatus.NOT_FOUND, 
        "U001", 
        "error.user.find.notFound",           // ë©”ì‹œì§€ í‚¤
        "ì‚¬ìš©ìë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤",              // ê¸°ë³¸ ë©”ì‹œì§€ (í•œêµ­ì–´)
        ErrorCategory.BUSINESS, 
        ActionType.CONFIRM
    ),
    
    USER_ALREADY_EXISTS(
        HttpStatus.CONFLICT, 
        "U002", 
        "error.user.create.alreadyExists",
        "ì´ë¯¸ ì¡´ì¬í•˜ëŠ” ì‚¬ìš©ìì…ë‹ˆë‹¤",
        ErrorCategory.BUSINESS, 
        ActionType.CONFIRM
    ),
    
    INVALID_USER_EMAIL(
        HttpStatus.BAD_REQUEST, 
        "U041", 
        "validation.user.email.format",
        "ì˜¬ë°”ë¥´ì§€ ì•Šì€ ì´ë©”ì¼ í˜•ì‹ì…ë‹ˆë‹¤",
        ErrorCategory.VALIDATION, 
        ActionType.PREVIOUS
    ),
    
    // í”„ë¡œì íŠ¸ ê´€ë ¨ ì—ëŸ¬
    PROJECT_NOT_FOUND(
        HttpStatus.NOT_FOUND, 
        "P001", 
        "error.project.find.notFound",
        "í”„ë¡œì íŠ¸ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤",
        ErrorCategory.BUSINESS, 
        ActionType.CONFIRM
    ),
    
    PROJECT_ACCESS_DENIED(
        HttpStatus.FORBIDDEN, 
        "P041", 
        "error.project.access.denied",
        "í”„ë¡œì íŠ¸ì— ì ‘ê·¼í•  ê¶Œí•œì´ ì—†ìŠµë‹ˆë‹¤",
        ErrorCategory.SECURITY, 
        ActionType.CONTACT_ADMIN
    );
    
    private final HttpStatus status;
    private final String code;
    private final String messageKey;      // êµ­ì œí™” ë©”ì‹œì§€ í‚¤
    private final String defaultMessage;  // ê¸°ë³¸ ë©”ì‹œì§€ (fallback)
    private final ErrorCategory category;
    private final ActionType actionType;
    
    /**
     * í˜„ì¬ ë¡œì¼€ì¼ì— ë§ëŠ” ë©”ì‹œì§€ ë°˜í™˜
     * 
     * @param messageSource ë©”ì‹œì§€ ì†ŒìŠ¤
     * @param locale ë¡œì¼€ì¼
     * @param args ë©”ì‹œì§€ íŒŒë¼ë¯¸í„°
     * @return êµ­ì œí™”ëœ ë©”ì‹œì§€
     */
    public String getLocalizedMessage(MessageSource messageSource, Locale locale, Object... args) {
        try {
            return messageSource.getMessage(messageKey, args, locale);
        } catch (NoSuchMessageException e) {
            // ë©”ì‹œì§€ í‚¤ê°€ ì—†ìœ¼ë©´ ê¸°ë³¸ ë©”ì‹œì§€ ë°˜í™˜
            return defaultMessage;
        }
    }
    
    /**
     * íŒŒë¼ë¯¸í„°ë¥¼ í¬í•¨í•œ ë©”ì‹œì§€ ìƒì„±
     * 
     * @param messageSource ë©”ì‹œì§€ ì†ŒìŠ¤
     * @param locale ë¡œì¼€ì¼
     * @param params ë©”ì‹œì§€ íŒŒë¼ë¯¸í„° Map
     * @return íŒŒë¼ë¯¸í„°ê°€ ì ìš©ëœ êµ­ì œí™” ë©”ì‹œì§€
     */
    public String getLocalizedMessage(MessageSource messageSource, Locale locale, Map<String, Object> params) {
        try {
            String template = messageSource.getMessage(messageKey, null, locale);
            return MessageFormatter.format(template, params);
        } catch (NoSuchMessageException e) {
            return MessageFormatter.format(defaultMessage, params);
        }
    }
}
```

#### ğŸ“ ë©”ì‹œì§€ íŒŒì¼ êµ¬ì¡°

##### 1. í•œêµ­ì–´ ë©”ì‹œì§€ (messages_ko.properties)
```properties
# =================================
# ì—ëŸ¬ ë©”ì‹œì§€ - ì‚¬ìš©ì ê´€ë¦¬
# =================================

# ì‚¬ìš©ì ì¡°íšŒ ê´€ë ¨
error.user.find.notFound=ì‚¬ìš©ìë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤
error.user.find.inactive=ë¹„í™œì„±í™”ëœ ì‚¬ìš©ìì…ë‹ˆë‹¤
error.user.find.suspended=ì •ì§€ëœ ì‚¬ìš©ìì…ë‹ˆë‹¤
error.user.find.dormant=íœ´ë©´ ê³„ì •ì…ë‹ˆë‹¤

# ì‚¬ìš©ì ìƒì„± ê´€ë ¨
error.user.create.alreadyExists=ì´ë¯¸ ì¡´ì¬í•˜ëŠ” ì‚¬ìš©ìì…ë‹ˆë‹¤
error.user.create.failed=ì‚¬ìš©ì ìƒì„±ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤
error.user.create.emailDuplicate=ì¤‘ë³µëœ ì´ë©”ì¼ ì£¼ì†Œì…ë‹ˆë‹¤

# ì‚¬ìš©ì ìˆ˜ì • ê´€ë ¨
error.user.update.failed=ì‚¬ìš©ì ì •ë³´ ìˆ˜ì •ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤
error.user.update.permissionDenied=ìˆ˜ì • ê¶Œí•œì´ ì—†ìŠµë‹ˆë‹¤
error.user.update.profileFailed=í”„ë¡œí•„ ì—…ë°ì´íŠ¸ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤

# ì‚¬ìš©ì ì‚­ì œ ê´€ë ¨
error.user.delete.failed=ì‚¬ìš©ì ì‚­ì œì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤
error.user.delete.inUse=ì‚¬ìš© ì¤‘ì¸ ì‚¬ìš©ìëŠ” ì‚­ì œí•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤
error.user.delete.lastAdmin=ë§ˆì§€ë§‰ ê´€ë¦¬ìëŠ” ì‚­ì œí•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤

# =================================
# ì—ëŸ¬ ë©”ì‹œì§€ - í”„ë¡œì íŠ¸ ê´€ë¦¬
# =================================

# í”„ë¡œì íŠ¸ ì¡°íšŒ ê´€ë ¨
error.project.find.notFound=í”„ë¡œì íŠ¸ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤
error.project.find.suspended=ì¼ì‹œ ì¤‘ë‹¨ëœ í”„ë¡œì íŠ¸ì…ë‹ˆë‹¤

# í”„ë¡œì íŠ¸ ìƒì„± ê´€ë ¨
error.project.create.alreadyExists=ì´ë¯¸ ì¡´ì¬í•˜ëŠ” í”„ë¡œì íŠ¸ì…ë‹ˆë‹¤
error.project.create.failed=í”„ë¡œì íŠ¸ ìƒì„±ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤
error.project.create.nameDuplicate=ì¤‘ë³µëœ í”„ë¡œì íŠ¸ëª…ì…ë‹ˆë‹¤

# í”„ë¡œì íŠ¸ ìˆ˜ì • ê´€ë ¨
error.project.update.failed=í”„ë¡œì íŠ¸ ìˆ˜ì •ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤
error.project.update.completed=ì´ë¯¸ ì™„ë£Œëœ í”„ë¡œì íŠ¸ì…ë‹ˆë‹¤

# í”„ë¡œì íŠ¸ ì™„ë£Œ ê´€ë ¨
error.project.complete.failed=í”„ë¡œì íŠ¸ ì™„ë£Œì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤
error.project.complete.inProgress=ì§„í–‰ ì¤‘ì¸ ì‘ì—…ì´ ìˆì–´ ì™„ë£Œí•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤
error.project.complete.alreadyCompleted=ì´ë¯¸ ì™„ë£Œëœ í”„ë¡œì íŠ¸ì…ë‹ˆë‹¤

# í”„ë¡œì íŠ¸ ì ‘ê·¼ ê¶Œí•œ
error.project.access.denied=í”„ë¡œì íŠ¸ì— ì ‘ê·¼í•  ê¶Œí•œì´ ì—†ìŠµë‹ˆë‹¤
error.project.access.adminRequired=í”„ë¡œì íŠ¸ ê´€ë¦¬ì ê¶Œí•œì´ í•„ìš”í•©ë‹ˆë‹¤
error.project.access.portalAdminRequired=í¬í„¸ ê´€ë¦¬ì ê¶Œí•œì´ í•„ìš”í•©ë‹ˆë‹¤

# =================================
# ì—ëŸ¬ ë©”ì‹œì§€ - ì—­í•  ê´€ë¦¬
# =================================

# ì—­í•  ì¡°íšŒ ê´€ë ¨
error.role.find.notFound=ì—­í• ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤
error.role.find.inactive=ë¹„í™œì„±í™”ëœ ì—­í• ì…ë‹ˆë‹¤

# ì—­í•  ìƒì„±/ìˆ˜ì •/ì‚­ì œ
error.role.create.alreadyExists=ì´ë¯¸ ì¡´ì¬í•˜ëŠ” ì—­í• ì…ë‹ˆë‹¤
error.role.update.failed=ì—­í•  ìˆ˜ì •ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤
error.role.delete.defaultRole=ê¸°ë³¸ ì—­í• ì€ ì‚­ì œí•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤
error.role.delete.inUse=ì‚¬ìš© ì¤‘ì¸ ì—­í• ì€ ì‚­ì œí•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤

# ì—­í•  í• ë‹¹
error.role.assign.failed=ì—­í•  í• ë‹¹ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤
error.role.assign.alreadyAssigned=ì´ë¯¸ í• ë‹¹ëœ ì—­í• ì…ë‹ˆë‹¤
error.role.unassign.failed=ì—­í•  í•´ì œì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤
error.role.unassign.lastAdmin=ë§ˆì§€ë§‰ ê´€ë¦¬ì ì—­í• ì€ í•´ì œí•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤

# ê¶Œí•œ ê´€ë ¨
error.role.permission.notFound=ê¶Œí•œì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤
error.role.permission.insufficient=ê¶Œí•œì´ ë¶€ì¡±í•©ë‹ˆë‹¤
error.role.permission.alreadyAssigned=ì´ë¯¸ í• ë‹¹ëœ ê¶Œí•œì…ë‹ˆë‹¤

# =================================
# ì…ë ¥ê°’ ê²€ì¦ ë©”ì‹œì§€
# =================================

# ì‚¬ìš©ì ì…ë ¥ ê²€ì¦
validation.user.email.format=ì˜¬ë°”ë¥¸ ì´ë©”ì¼ í˜•ì‹ì„ ì…ë ¥í•˜ì„¸ìš”
validation.user.email.required=ì´ë©”ì¼ì€ í•„ìˆ˜ ì…ë ¥ í•­ëª©ì…ë‹ˆë‹¤
validation.user.password.format=ë¹„ë°€ë²ˆí˜¸ëŠ” 8ì ì´ìƒ, ì˜ë¬¸/ìˆ«ì/íŠ¹ìˆ˜ë¬¸ìë¥¼ í¬í•¨í•´ì•¼ í•©ë‹ˆë‹¤
validation.user.password.strength=ë¹„ë°€ë²ˆí˜¸ê°€ ë„ˆë¬´ ì•½í•©ë‹ˆë‹¤
validation.user.password.mismatch=ë¹„ë°€ë²ˆí˜¸ê°€ ì¼ì¹˜í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤
validation.user.name.required=ì´ë¦„ì€ í•„ìˆ˜ ì…ë ¥ í•­ëª©ì…ë‹ˆë‹¤
validation.user.name.length=ì´ë¦„ì€ 2ì ì´ìƒ 50ì ì´í•˜ë¡œ ì…ë ¥í•˜ì„¸ìš”
validation.user.age.range=ë‚˜ì´ëŠ” 1ì„¸ ì´ìƒ 150ì„¸ ì´í•˜ë¡œ ì…ë ¥í•˜ì„¸ìš”

# í”„ë¡œì íŠ¸ ì…ë ¥ ê²€ì¦
validation.project.name.required=í”„ë¡œì íŠ¸ëª…ì€ í•„ìˆ˜ ì…ë ¥ í•­ëª©ì…ë‹ˆë‹¤
validation.project.name.length=í”„ë¡œì íŠ¸ëª…ì€ 3ì ì´ìƒ 100ì ì´í•˜ë¡œ ì…ë ¥í•˜ì„¸ìš”
validation.project.name.format=í”„ë¡œì íŠ¸ëª…ì— íŠ¹ìˆ˜ë¬¸ìëŠ” ì‚¬ìš©í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤
validation.project.description.length=í”„ë¡œì íŠ¸ ì„¤ëª…ì€ 500ì ì´í•˜ë¡œ ì…ë ¥í•˜ì„¸ìš”
validation.project.date.invalid=ì˜¬ë°”ë¥¸ ë‚ ì§œë¥¼ ì…ë ¥í•˜ì„¸ìš”
validation.project.date.range=ì¢…ë£Œì¼ì€ ì‹œì‘ì¼ë³´ë‹¤ ëŠ¦ì–´ì•¼ í•©ë‹ˆë‹¤

# íŒŒì¼ ì…ë ¥ ê²€ì¦
validation.file.required=íŒŒì¼ì„ ì„ íƒí•˜ì„¸ìš”
validation.file.size.exceeded=íŒŒì¼ í¬ê¸°ê°€ {0}MBë¥¼ ì´ˆê³¼í–ˆìŠµë‹ˆë‹¤
validation.file.type.unsupported=ì§€ì›í•˜ì§€ ì•ŠëŠ” íŒŒì¼ í˜•ì‹ì…ë‹ˆë‹¤ (í—ˆìš©: {0})
validation.file.name.invalid=ì˜¬ë°”ë¥´ì§€ ì•Šì€ íŒŒì¼ëª…ì…ë‹ˆë‹¤

# =================================
# ì„±ê³µ ë©”ì‹œì§€
# =================================

# ì‚¬ìš©ì ê´€ë¦¬ ì„±ê³µ
success.user.create.completed=ì‚¬ìš©ìê°€ ì„±ê³µì ìœ¼ë¡œ ìƒì„±ë˜ì—ˆìŠµë‹ˆë‹¤
success.user.update.completed=ì‚¬ìš©ì ì •ë³´ê°€ ì„±ê³µì ìœ¼ë¡œ ìˆ˜ì •ë˜ì—ˆìŠµë‹ˆë‹¤
success.user.delete.completed=ì‚¬ìš©ìê°€ ì„±ê³µì ìœ¼ë¡œ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤
success.user.find.completed=ì‚¬ìš©ì ì •ë³´ë¥¼ ì„±ê³µì ìœ¼ë¡œ ì¡°íšŒí–ˆìŠµë‹ˆë‹¤

# í”„ë¡œì íŠ¸ ê´€ë¦¬ ì„±ê³µ
success.project.create.completed=í”„ë¡œì íŠ¸ê°€ ì„±ê³µì ìœ¼ë¡œ ìƒì„±ë˜ì—ˆìŠµë‹ˆë‹¤
success.project.update.completed=í”„ë¡œì íŠ¸ê°€ ì„±ê³µì ìœ¼ë¡œ ìˆ˜ì •ë˜ì—ˆìŠµë‹ˆë‹¤
success.project.complete.finished=í”„ë¡œì íŠ¸ê°€ ì„±ê³µì ìœ¼ë¡œ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤
success.project.find.completed=í”„ë¡œì íŠ¸ ì •ë³´ë¥¼ ì„±ê³µì ìœ¼ë¡œ ì¡°íšŒí–ˆìŠµë‹ˆë‹¤

# ì—­í•  ê´€ë¦¬ ì„±ê³µ
success.role.create.completed=ì—­í• ì´ ì„±ê³µì ìœ¼ë¡œ ìƒì„±ë˜ì—ˆìŠµë‹ˆë‹¤
success.role.update.completed=ì—­í• ì´ ì„±ê³µì ìœ¼ë¡œ ìˆ˜ì •ë˜ì—ˆìŠµë‹ˆë‹¤
success.role.delete.completed=ì—­í• ì´ ì„±ê³µì ìœ¼ë¡œ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤
success.role.assign.completed=ì—­í• ì´ ì„±ê³µì ìœ¼ë¡œ í• ë‹¹ë˜ì—ˆìŠµë‹ˆë‹¤

# =================================
# ì•¡ì…˜ ê°€ì´ë“œ ë©”ì‹œì§€
# =================================

action.confirm.continue=í™•ì¸ ë²„íŠ¼ì„ í´ë¦­í•˜ì—¬ ê³„ì† ì§„í–‰í•˜ì„¸ìš”
action.retry.recommended=ì ì‹œ í›„ ë‹¤ì‹œ ì‹œë„í•´ ì£¼ì„¸ìš”
action.contact.admin=ê´€ë¦¬ìì—ê²Œ ë¬¸ì˜í•˜ì‹œê¸° ë°”ëë‹ˆë‹¤
action.fix.input=ì…ë ¥ ë‚´ìš©ì„ í™•ì¸í•˜ê³  ë‹¤ì‹œ ì…ë ¥í•´ ì£¼ì„¸ìš”
action.previous.step=ì´ì „ ë‹¨ê³„ë¡œ ëŒì•„ê°€ì„œ ë‹¤ì‹œ ì‹œë„í•´ ì£¼ì„¸ìš”
action.refresh.page=í˜ì´ì§€ë¥¼ ìƒˆë¡œê³ ì¹¨í•œ í›„ ë‹¤ì‹œ ì‹œë„í•´ ì£¼ì„¸ìš”

# =================================
# íŒŒë¼ë¯¸í„°ê°€ ìˆëŠ” ë©”ì‹œì§€
# =================================

# ì‚¬ìš©ì ê´€ë ¨ íŒŒë¼ë¯¸í„° ë©”ì‹œì§€
error.user.find.notFoundWithId=ì‚¬ìš©ì ID {0}ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤
error.user.create.emailDuplicateWithEmail={0}ì€ ì´ë¯¸ ì‚¬ìš© ì¤‘ì¸ ì´ë©”ì¼ì…ë‹ˆë‹¤
error.user.update.permissionDeniedWithAction={0} ê¶Œí•œì´ ì—†ìŠµë‹ˆë‹¤

# í”„ë¡œì íŠ¸ ê´€ë ¨ íŒŒë¼ë¯¸í„° ë©”ì‹œì§€
error.project.find.notFoundWithId=í”„ë¡œì íŠ¸ ID {0}ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤
error.project.member.limitExceeded=í”„ë¡œì íŠ¸ êµ¬ì„±ì› ìˆ˜ê°€ ìµœëŒ€ {0}ëª…ì„ ì´ˆê³¼í–ˆìŠµë‹ˆë‹¤
error.project.complete.hasActiveTasks=ì§„í–‰ ì¤‘ì¸ ì‘ì—…ì´ {0}ê°œ ìˆì–´ ì™„ë£Œí•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤

# íŒŒì¼ ê´€ë ¨ íŒŒë¼ë¯¸í„° ë©”ì‹œì§€
error.file.size.exceededWithLimit=íŒŒì¼ í¬ê¸°ê°€ ìµœëŒ€ {0}MBë¥¼ ì´ˆê³¼í–ˆìŠµë‹ˆë‹¤
error.file.type.unsupportedWithTypes=ì§€ì›í•˜ì§€ ì•ŠëŠ” íŒŒì¼ í˜•ì‹ì…ë‹ˆë‹¤. í—ˆìš© í˜•ì‹: {0}
```

##### 2. ì˜ì–´ ë©”ì‹œì§€ (messages_en.properties)
```properties
# =================================
# Error Messages - User Management
# =================================

# User Find Related
error.user.find.notFound=User not found
error.user.find.inactive=User account is inactive
error.user.find.suspended=User account is suspended
error.user.find.dormant=User account is dormant

# User Create Related
error.user.create.alreadyExists=User already exists
error.user.create.failed=Failed to create user
error.user.create.emailDuplicate=Email address already exists

# User Update Related
error.user.update.failed=Failed to update user information
error.user.update.permissionDenied=Permission denied to update user
error.user.update.profileFailed=Failed to update user profile

# User Delete Related
error.user.delete.failed=Failed to delete user
error.user.delete.inUse=Cannot delete user that is currently in use
error.user.delete.lastAdmin=Cannot delete the last administrator

# =================================
# Error Messages - Project Management
# =================================

# Project Find Related
error.project.find.notFound=Project not found
error.project.find.suspended=Project is temporarily suspended

# Project Create Related
error.project.create.alreadyExists=Project already exists
error.project.create.failed=Failed to create project
error.project.create.nameDuplicate=Project name already exists

# Project Update Related
error.project.update.failed=Failed to update project
error.project.update.completed=Project is already completed

# Project Complete Related
error.project.complete.failed=Failed to complete project
error.project.complete.inProgress=Cannot complete project with active tasks
error.project.complete.alreadyCompleted=Project is already completed

# Project Access Permission
error.project.access.denied=Access denied to project
error.project.access.adminRequired=Project administrator permission required
error.project.access.portalAdminRequired=Portal administrator permission required

# =================================
# Error Messages - Role Management
# =================================

# Role Find Related
error.role.find.notFound=Role not found
error.role.find.inactive=Role is inactive

# Role CRUD Operations
error.role.create.alreadyExists=Role already exists
error.role.update.failed=Failed to update role
error.role.delete.defaultRole=Cannot delete default role
error.role.delete.inUse=Cannot delete role that is currently in use

# Role Assignment
error.role.assign.failed=Failed to assign role
error.role.assign.alreadyAssigned=Role is already assigned
error.role.unassign.failed=Failed to unassign role
error.role.unassign.lastAdmin=Cannot unassign the last administrator role

# Permission Related
error.role.permission.notFound=Permission not found
error.role.permission.insufficient=Insufficient permissions
error.role.permission.alreadyAssigned=Permission is already assigned

# =================================
# Validation Messages
# =================================

# User Input Validation
validation.user.email.format=Please enter a valid email format
validation.user.email.required=Email is a required field
validation.user.password.format=Password must be at least 8 characters with letters, numbers, and special characters
validation.user.password.strength=Password is too weak
validation.user.password.mismatch=Passwords do not match
validation.user.name.required=Name is a required field
validation.user.name.length=Name must be between 2 and 50 characters
validation.user.age.range=Age must be between 1 and 150

# Project Input Validation
validation.project.name.required=Project name is a required field
validation.project.name.length=Project name must be between 3 and 100 characters
validation.project.name.format=Special characters are not allowed in project name
validation.project.description.length=Project description must be 500 characters or less
validation.project.date.invalid=Please enter a valid date
validation.project.date.range=End date must be later than start date

# File Input Validation
validation.file.required=Please select a file
validation.file.size.exceeded=File size exceeds {0}MB limit
validation.file.type.unsupported=Unsupported file type (Allowed: {0})
validation.file.name.invalid=Invalid file name

# =================================
# Success Messages
# =================================

# User Management Success
success.user.create.completed=User created successfully
success.user.update.completed=User information updated successfully
success.user.delete.completed=User deleted successfully
success.user.find.completed=User information retrieved successfully

# Project Management Success
success.project.create.completed=Project created successfully
success.project.update.completed=Project updated successfully
success.project.complete.finished=Project completed successfully
success.project.find.completed=Project information retrieved successfully

# Role Management Success
success.role.create.completed=Role created successfully
success.role.update.completed=Role updated successfully
success.role.delete.completed=Role deleted successfully
success.role.assign.completed=Role assigned successfully

# =================================
# Action Guide Messages
# =================================

action.confirm.continue=Click confirm to continue
action.retry.recommended=Please try again later
action.contact.admin=Please contact administrator
action.fix.input=Please check your input and try again
action.previous.step=Please go back to previous step and try again
action.refresh.page=Please refresh the page and try again

# =================================
# Parameterized Messages
# =================================

# User Related Parameter Messages
error.user.find.notFoundWithId=User ID {0} not found
error.user.create.emailDuplicateWithEmail={0} is already in use
error.user.update.permissionDeniedWithAction=No permission for {0}

# Project Related Parameter Messages
error.project.find.notFoundWithId=Project ID {0} not found
error.project.member.limitExceeded=Project member count exceeds maximum limit of {0}
error.project.complete.hasActiveTasks=Cannot complete project with {0} active tasks

# File Related Parameter Messages
error.file.size.exceededWithLimit=File size exceeds maximum limit of {0}MB
error.file.type.unsupportedWithTypes=Unsupported file type. Allowed types: {0}
```

#### ğŸ”§ ë‹¤êµ­ì–´ ì§€ì› êµ¬í˜„

##### 1. ë©”ì‹œì§€ ì†ŒìŠ¤ ì„¤ì •
```java
/**
 * ë‹¤êµ­ì–´ ì§€ì›ì„ ìœ„í•œ ë©”ì‹œì§€ ì†ŒìŠ¤ ì„¤ì •
 * 
 * @author ByounggwanLee
 * @since 2025-10-09
 */
@Configuration
public class InternationalizationConfig {
    
    /**
     * ë©”ì‹œì§€ ì†ŒìŠ¤ Bean ì„¤ì •
     */
    @Bean
    public MessageSource messageSource() {
        ResourceBundleMessageSource messageSource = new ResourceBundleMessageSource();
        messageSource.setBasenames("messages", "validation", "success", "action");
        messageSource.setDefaultEncoding("UTF-8");
        messageSource.setCacheSeconds(3600);  // 1ì‹œê°„ ìºì‹œ
        messageSource.setFallbackToSystemLocale(false);
        messageSource.setUseCodeAsDefaultMessage(false);
        return messageSource;
    }
    
    /**
     * ë¡œì¼€ì¼ ë¦¬ì¡¸ë²„ ì„¤ì •
     */
    @Bean
    public LocaleResolver localeResolver() {
        SessionLocaleResolver resolver = new SessionLocaleResolver();
        resolver.setDefaultLocale(Locale.KOREAN);  // ê¸°ë³¸ ë¡œì¼€ì¼: í•œêµ­ì–´
        return resolver;
    }
    
    /**
     * ë¡œì¼€ì¼ ë³€ê²½ ì¸í„°ì…‰í„°
     */
    @Bean
    public LocaleChangeInterceptor localeChangeInterceptor() {
        LocaleChangeInterceptor interceptor = new LocaleChangeInterceptor();
        interceptor.setParamName("lang");  // ?lang=en
        return interceptor;
    }
    
    /**
     * ì¸í„°ì…‰í„° ë“±ë¡
     */
    @Override
    public void addInterceptors(InterceptorRegistry registry) {
        registry.addInterceptor(localeChangeInterceptor());
    }
}
```

##### 2. ë‹¤êµ­ì–´ ë©”ì‹œì§€ ì„œë¹„ìŠ¤
```java
/**
 * ë‹¤êµ­ì–´ ë©”ì‹œì§€ ì²˜ë¦¬ ì„œë¹„ìŠ¤
 * 
 * @author ByounggwanLee
 * @since 2025-10-09
 */
@Service
@RequiredArgsConstructor
@Slf4j
public class LocalizedMessageService {
    
    private final MessageSource messageSource;
    
    /**
     * ErrorCodeë¥¼ ê¸°ë°˜ìœ¼ë¡œ í˜„ì¬ ë¡œì¼€ì¼ì˜ ë©”ì‹œì§€ ë°˜í™˜
     * 
     * @param errorCode ì—ëŸ¬ ì½”ë“œ
     * @param args ë©”ì‹œì§€ íŒŒë¼ë¯¸í„°
     * @return í˜„ì¬ ë¡œì¼€ì¼ì— ë§ëŠ” ì—ëŸ¬ ë©”ì‹œì§€
     */
    public String getErrorMessage(ErrorCode errorCode, Object... args) {
        Locale currentLocale = LocaleContextHolder.getLocale();
        return getErrorMessage(errorCode, currentLocale, args);
    }
    
    /**
     * ErrorCodeë¥¼ ê¸°ë°˜ìœ¼ë¡œ ì§€ì •ëœ ë¡œì¼€ì¼ì˜ ë©”ì‹œì§€ ë°˜í™˜
     * 
     * @param errorCode ì—ëŸ¬ ì½”ë“œ
     * @param locale ë¡œì¼€ì¼
     * @param args ë©”ì‹œì§€ íŒŒë¼ë¯¸í„°
     * @return ì§€ì •ëœ ë¡œì¼€ì¼ì— ë§ëŠ” ì—ëŸ¬ ë©”ì‹œì§€
     */
    public String getErrorMessage(ErrorCode errorCode, Locale locale, Object... args) {
        try {
            return messageSource.getMessage(errorCode.getMessageKey(), args, locale);
        } catch (NoSuchMessageException e) {
            log.warn("ë©”ì‹œì§€ í‚¤ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŒ: {} (ë¡œì¼€ì¼: {})", errorCode.getMessageKey(), locale);
            return errorCode.getDefaultMessage();
        }
    }
    
    /**
     * ì„±ê³µ ë©”ì‹œì§€ ë°˜í™˜
     * 
     * @param messageKey ë©”ì‹œì§€ í‚¤
     * @param args ë©”ì‹œì§€ íŒŒë¼ë¯¸í„°
     * @return ì„±ê³µ ë©”ì‹œì§€
     */
    public String getSuccessMessage(String messageKey, Object... args) {
        Locale currentLocale = LocaleContextHolder.getLocale();
        try {
            return messageSource.getMessage(messageKey, args, currentLocale);
        } catch (NoSuchMessageException e) {
            log.warn("ì„±ê³µ ë©”ì‹œì§€ í‚¤ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŒ: {} (ë¡œì¼€ì¼: {})", messageKey, currentLocale);
            return "ì‘ì—…ì´ ì„±ê³µì ìœ¼ë¡œ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤";  // ê¸°ë³¸ ë©”ì‹œì§€
        }
    }
    
    /**
     * ê²€ì¦ ë©”ì‹œì§€ ë°˜í™˜
     * 
     * @param messageKey ë©”ì‹œì§€ í‚¤
     * @param args ë©”ì‹œì§€ íŒŒë¼ë¯¸í„°
     * @return ê²€ì¦ ë©”ì‹œì§€
     */
    public String getValidationMessage(String messageKey, Object... args) {
        Locale currentLocale = LocaleContextHolder.getLocale();
        try {
            return messageSource.getMessage(messageKey, args, currentLocale);
        } catch (NoSuchMessageException e) {
            log.warn("ê²€ì¦ ë©”ì‹œì§€ í‚¤ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŒ: {} (ë¡œì¼€ì¼: {})", messageKey, currentLocale);
            return "ì…ë ¥ê°’ì„ í™•ì¸í•´ ì£¼ì„¸ìš”";  // ê¸°ë³¸ ë©”ì‹œì§€
        }
    }
    
    /**
     * ë³µì¡í•œ íŒŒë¼ë¯¸í„°ë¥¼ í¬í•¨í•œ ë©”ì‹œì§€ ìƒì„±
     * 
     * @param messageKey ë©”ì‹œì§€ í‚¤
     * @param params íŒŒë¼ë¯¸í„° Map
     * @return íŒŒë¼ë¯¸í„°ê°€ ì ìš©ëœ ë©”ì‹œì§€
     */
    public String getFormattedMessage(String messageKey, Map<String, Object> params) {
        Locale currentLocale = LocaleContextHolder.getLocale();
        try {
            String template = messageSource.getMessage(messageKey, null, currentLocale);
            return formatMessageWithNamedParameters(template, params);
        } catch (NoSuchMessageException e) {
            log.warn("ë©”ì‹œì§€ í‚¤ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŒ: {} (ë¡œì¼€ì¼: {})", messageKey, currentLocale);
            return "ë©”ì‹œì§€ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤";
        }
    }
    
    /**
     * ëª…ëª…ëœ íŒŒë¼ë¯¸í„°ë¥¼ ì‚¬ìš©í•œ ë©”ì‹œì§€ í¬ë§·íŒ…
     * 
     * @param template ë©”ì‹œì§€ í…œí”Œë¦¿ (ì˜ˆ: "ì‚¬ìš©ì {userName}ì´ {action}ì„ ìˆ˜í–‰í–ˆìŠµë‹ˆë‹¤")
     * @param params íŒŒë¼ë¯¸í„° Map
     * @return í¬ë§·íŒ…ëœ ë©”ì‹œì§€
     */
    private String formatMessageWithNamedParameters(String template, Map<String, Object> params) {
        String result = template;
        for (Map.Entry<String, Object> entry : params.entrySet()) {
            String placeholder = "{" + entry.getKey() + "}";
            String value = entry.getValue() != null ? entry.getValue().toString() : "";
            result = result.replace(placeholder, value);
        }
        return result;
    }
    
    /**
     * ì§€ì›ë˜ëŠ” ë¡œì¼€ì¼ ëª©ë¡ ë°˜í™˜
     * 
     * @return ì§€ì›ë˜ëŠ” ë¡œì¼€ì¼ ëª©ë¡
     */
    public List<Locale> getSupportedLocales() {
        return Arrays.asList(
            Locale.KOREAN,
            Locale.ENGLISH,
            Locale.JAPANESE,
            Locale.CHINESE
        );
    }
    
    /**
     * í˜„ì¬ ë¡œì¼€ì¼ ì •ë³´ ë°˜í™˜
     * 
     * @return í˜„ì¬ ë¡œì¼€ì¼ ì •ë³´
     */
    public LocaleInfo getCurrentLocaleInfo() {
        Locale currentLocale = LocaleContextHolder.getLocale();
        return LocaleInfo.builder()
                .locale(currentLocale)
                .languageCode(currentLocale.getLanguage())
                .countryCode(currentLocale.getCountry())
                .displayName(currentLocale.getDisplayName(currentLocale))
                .isSupported(getSupportedLocales().contains(currentLocale))
                .build();
    }
    
    /**
     * ë¡œì¼€ì¼ ì •ë³´ DTO
     */
    @Getter
    @Builder
    public static class LocaleInfo {
        private Locale locale;
        private String languageCode;
        private String countryCode;
        private String displayName;
        private boolean isSupported;
    }
}
```

##### 3. ë‹¤êµ­ì–´ ì§€ì› AxResponseEntity
```java
/**
 * ë‹¤êµ­ì–´ ì§€ì›ì„ ìœ„í•œ AxResponseEntity í™•ì¥
 * 
 * @author ByounggwanLee
 * @since 2025-10-09
 */
@Component
@RequiredArgsConstructor
public class LocalizedAxResponseEntity {
    
    private final LocalizedMessageService messageService;
    
    /**
     * ë‹¤êµ­ì–´ ì§€ì› ì„±ê³µ ì‘ë‹µ
     * 
     * @param data ì‘ë‹µ ë°ì´í„°
     * @param messageKey ì„±ê³µ ë©”ì‹œì§€ í‚¤
     * @param args ë©”ì‹œì§€ íŒŒë¼ë¯¸í„°
     * @return ë‹¤êµ­ì–´ ì„±ê³µ ì‘ë‹µ
     */
    public <T> AxResponseEntity<T> ok(T data, String messageKey, Object... args) {
        String localizedMessage = messageService.getSuccessMessage(messageKey, args);
        return AxResponseEntity.ok(data, localizedMessage);
    }
    
    /**
     * ë‹¤êµ­ì–´ ì§€ì› ì—ëŸ¬ ì‘ë‹µ
     * 
     * @param errorCode ì—ëŸ¬ ì½”ë“œ
     * @param args ë©”ì‹œì§€ íŒŒë¼ë¯¸í„°
     * @return ë‹¤êµ­ì–´ ì—ëŸ¬ ì‘ë‹µ
     */
    public <T> AxResponseEntity<T> error(ErrorCode errorCode, Object... args) {
        String localizedMessage = messageService.getErrorMessage(errorCode, args);
        return AxResponseEntity.error(errorCode, localizedMessage);
    }
    
    /**
     * ë‹¤êµ­ì–´ ì§€ì› í˜ì´ì§• ì‘ë‹µ
     * 
     * @param pageData í˜ì´ì§• ë°ì´í„°
     * @param messageKey ì„±ê³µ ë©”ì‹œì§€ í‚¤
     * @param args ë©”ì‹œì§€ íŒŒë¼ë¯¸í„°
     * @return ë‹¤êµ­ì–´ í˜ì´ì§• ì‘ë‹µ
     */
    public <T> AxResponseEntity<PageResponse<T>> okPage(Page<T> pageData, String messageKey, Object... args) {
        String localizedMessage = messageService.getSuccessMessage(messageKey, args);
        return AxResponseEntity.okPage(pageData, localizedMessage);
    }
    
    /**
     * ë‹¤êµ­ì–´ ì§€ì› ê²€ì¦ ì—ëŸ¬ ì‘ë‹µ
     * 
     * @param validationErrors ê²€ì¦ ì—ëŸ¬ ëª©ë¡
     * @param messageKey ì—ëŸ¬ ë©”ì‹œì§€ í‚¤
     * @return ë‹¤êµ­ì–´ ê²€ì¦ ì—ëŸ¬ ì‘ë‹µ
     */
    public <T> AxResponseEntity<T> validationError(List<ValidationError> validationErrors, String messageKey) {
        // ê° ê²€ì¦ ì—ëŸ¬ì˜ ë©”ì‹œì§€ë„ ë‹¤êµ­ì–´ë¡œ ë³€í™˜
        List<ValidationError> localizedErrors = validationErrors.stream()
                .map(error -> ValidationError.builder()
                        .field(error.getField())
                        .rejectedValue(error.getRejectedValue())
                        .message(messageService.getValidationMessage(error.getMessageKey()))
                        .build())
                .collect(Collectors.toList());
        
        String localizedMessage = messageService.getValidationMessage(messageKey);
        
        ValidationException exception = new ValidationException(
            ErrorCode.VALIDATION_FAILED, localizedMessage, localizedErrors);
        
        return AxResponseEntity.error(exception.getErrorCode(), localizedMessage);
    }
}
```

---

## 5. GlobalExceptionHandler êµ¬í˜„

### 5.1 @ControllerAdvice ê¸°ë³¸ êµ¬ì¡°

GlobalExceptionHandlerëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ ì „ì²´ì˜ ì˜ˆì™¸ë¥¼ ì¤‘ì•™ì—ì„œ ì²˜ë¦¬í•˜ëŠ” í•µì‹¬ ì»´í¬ë„ŒíŠ¸ì…ë‹ˆë‹¤. @ControllerAdviceë¥¼ ì‚¬ìš©í•˜ì—¬ ëª¨ë“  ì»¨íŠ¸ë¡¤ëŸ¬ì—ì„œ ë°œìƒí•˜ëŠ” ì˜ˆì™¸ë¥¼ ì¼ê´€ë˜ê²Œ ì²˜ë¦¬í•©ë‹ˆë‹¤.

#### ğŸ—ï¸ ê¸°ë³¸ êµ¬ì¡° ì„¤ê³„

##### 1. GlobalExceptionHandler í´ë˜ìŠ¤ êµ¬ì¡°
```java
/**
 * ì „ì—­ ì˜ˆì™¸ ì²˜ë¦¬ í•¸ë“¤ëŸ¬
 * 
 * <p>ì• í”Œë¦¬ì¼€ì´ì…˜ ì „ì²´ì—ì„œ ë°œìƒí•˜ëŠ” ëª¨ë“  ì˜ˆì™¸ë¥¼ ì¤‘ì•™ì—ì„œ ì²˜ë¦¬í•©ë‹ˆë‹¤.
 * ì¼ê´€ëœ ì—ëŸ¬ ì‘ë‹µ í˜•ì‹ì„ ì œê³µí•˜ê³ , ì ì ˆí•œ ë¡œê¹…ì„ ìˆ˜í–‰í•©ë‹ˆë‹¤.</p>
 * 
 * <h3>ì²˜ë¦¬ ì˜ˆì™¸ ë²”ìœ„:</h3>
 * <ul>
 *   <li>ì»¤ìŠ¤í…€ ë¹„ì¦ˆë‹ˆìŠ¤ ì˜ˆì™¸ (BusinessException, ValidationException ë“±)</li>
 *   <li>Spring í‘œì¤€ ì˜ˆì™¸ (MethodArgumentNotValidException, AccessDeniedException ë“±)</li>
 *   <li>JPA/ë°ì´í„°ë² ì´ìŠ¤ ì˜ˆì™¸ (DataIntegrityViolationException ë“±)</li>
 *   <li>ì™¸ë¶€ API ì˜ˆì™¸ (FeignException, RestClientException ë“±)</li>
 *   <li>ì‹œìŠ¤í…œ ì˜ˆì™¸ (RuntimeException, Exception ë“±)</li>
 * </ul>
 * 
 * <h3>ì‘ë‹µ í˜•ì‹:</h3>
 * <ul>
 *   <li>ì„±ê³µ: AxResponseEntity&lt;T&gt;ë¥¼ í†µí•œ í†µì¼ëœ ì„±ê³µ ì‘ë‹µ</li>
 *   <li>ì‹¤íŒ¨: AxResponseEntity&lt;Void&gt;ë¥¼ í†µí•œ í†µì¼ëœ ì—ëŸ¬ ì‘ë‹µ</li>
 *   <li>ë‹¤êµ­ì–´: í˜„ì¬ ë¡œì¼€ì¼ì— ë§ëŠ” ë©”ì‹œì§€ ì œê³µ</li>
 * </ul>
 * 
 * @author ByounggwanLee
 * @since 2025-10-09
 * @version 1.0
 */
@ControllerAdvice
@Slf4j
@RequiredArgsConstructor
@Order(Ordered.HIGHEST_PRECEDENCE)  // ìµœìš°ì„  ì²˜ë¦¬
public class GlobalExceptionHandler {
    
    private final LocalizedMessageService messageService;
    private final ErrorMetricsService metricsService;
    
    /**
     * ìš”ì²­ ì»¨í…ìŠ¤íŠ¸ ì •ë³´ ì¶”ì¶œ
     * 
     * @return í˜„ì¬ ìš”ì²­ì˜ ì»¨í…ìŠ¤íŠ¸ ì •ë³´
     */
    private RequestContext getCurrentRequestContext() {
        HttpServletRequest request = getCurrentRequest();
        return RequestContext.builder()
                .method(request.getMethod())
                .uri(request.getRequestURI())
                .userAgent(request.getHeader("User-Agent"))
                .clientIp(getClientIpAddress(request))
                .sessionId(request.getSession(false) != null ? 
                          request.getSession().getId() : null)
                .timestamp(LocalDateTime.now())
                .build();
    }
    
    /**
     * í˜„ì¬ HTTP ìš”ì²­ ê°ì²´ íšë“
     */
    private HttpServletRequest getCurrentRequest() {
        RequestAttributes requestAttributes = RequestContextHolder.currentRequestAttributes();
        return ((ServletRequestAttributes) requestAttributes).getRequest();
    }
    
    /**
     * í´ë¼ì´ì–¸íŠ¸ IP ì£¼ì†Œ ì¶”ì¶œ
     */
    private String getClientIpAddress(HttpServletRequest request) {
        String[] headerNames = {
            "X-Forwarded-For", "X-Real-IP", "Proxy-Client-IP", 
            "WL-Proxy-Client-IP", "HTTP_X_FORWARDED_FOR", "HTTP_X_FORWARDED", 
            "HTTP_X_CLUSTER_CLIENT_IP", "HTTP_CLIENT_IP", "HTTP_FORWARDED_FOR", 
            "HTTP_FORWARDED", "HTTP_VIA", "REMOTE_ADDR"
        };
        
        for (String headerName : headerNames) {
            String ip = request.getHeader(headerName);
            if (ip != null && !ip.isEmpty() && !"unknown".equalsIgnoreCase(ip)) {
                return ip.split(",")[0].trim();
            }
        }
        
        return request.getRemoteAddr();
    }
    
    /**
     * ê³µí†µ ì—ëŸ¬ ì‘ë‹µ ìƒì„±
     * 
     * @param errorCode ì—ëŸ¬ ì½”ë“œ
     * @param customMessage ì»¤ìŠ¤í…€ ë©”ì‹œì§€ (ì„ íƒì )
     * @param exception ì›ë³¸ ì˜ˆì™¸
     * @param args ë©”ì‹œì§€ íŒŒë¼ë¯¸í„°
     * @return í‘œì¤€í™”ëœ ì—ëŸ¬ ì‘ë‹µ
     */
    private AxResponseEntity<Void> createErrorResponse(ErrorCode errorCode, 
                                                      String customMessage, 
                                                      Throwable exception, 
                                                      Object... args) {
        // ë©”íŠ¸ë¦­ìŠ¤ ìˆ˜ì§‘
        metricsService.recordException(errorCode, exception);
        
        // ìš”ì²­ ì»¨í…ìŠ¤íŠ¸ ì¶”ê°€
        RequestContext context = getCurrentRequestContext();
        
        // ë‹¤êµ­ì–´ ë©”ì‹œì§€ ì²˜ë¦¬
        String localizedMessage = customMessage != null ? 
            customMessage : messageService.getErrorMessage(errorCode, args);
        
        // ì—ëŸ¬ ì‘ë‹µ ìƒì„±
        if (customMessage != null && !customMessage.equals(errorCode.getDefaultMessage())) {
            return AxResponseEntity.error(errorCode, localizedMessage, customMessage);
        } else {
            return AxResponseEntity.error(errorCode, localizedMessage);
        }
    }
    
    /**
     * ì—ëŸ¬ ë¡œê¹… ìˆ˜í–‰
     * 
     * @param level ë¡œê·¸ ë ˆë²¨
     * @param message ë¡œê·¸ ë©”ì‹œì§€
     * @param exception ì˜ˆì™¸ ê°ì²´
     * @param context ìš”ì²­ ì»¨í…ìŠ¤íŠ¸
     */
    private void logException(LogLevel level, String message, Throwable exception, RequestContext context) {
        String logMessage = String.format("[%s] %s - Method: %s, URI: %s, IP: %s", 
            level.getName(), message, context.getMethod(), context.getUri(), context.getClientIp());
        
        switch (level) {
            case ERROR -> log.error(logMessage, exception);
            case WARN -> log.warn(logMessage, exception);
            case INFO -> log.info(logMessage);
            case DEBUG -> log.debug(logMessage);
        }
    }
}
```

##### 2. ìš”ì²­ ì»¨í…ìŠ¤íŠ¸ DTO
```java
/**
 * ìš”ì²­ ì»¨í…ìŠ¤íŠ¸ ì •ë³´
 * 
 * @author ByounggwanLee
 * @since 2025-10-09
 */
@Getter
@Builder
public class RequestContext {
    private String method;        // HTTP ë©”ì„œë“œ
    private String uri;           // ìš”ì²­ URI
    private String userAgent;     // User-Agent í—¤ë”
    private String clientIp;      // í´ë¼ì´ì–¸íŠ¸ IP
    private String sessionId;     // ì„¸ì…˜ ID
    private LocalDateTime timestamp; // ìš”ì²­ ì‹œê°„
    
    /**
     * ë¡œê¹…ìš© ìš”ì•½ ì •ë³´ ë°˜í™˜
     */
    public String toLogString() {
        return String.format("%s %s (IP: %s, Session: %s)", 
            method, uri, clientIp, sessionId);
    }
}
```

##### 3. ì—ëŸ¬ ë©”íŠ¸ë¦­ìŠ¤ ì„œë¹„ìŠ¤
```java
/**
 * ì—ëŸ¬ ë°œìƒ ë©”íŠ¸ë¦­ìŠ¤ ìˆ˜ì§‘ ì„œë¹„ìŠ¤
 * 
 * @author ByounggwanLee
 * @since 2025-10-09
 */
@Service
@RequiredArgsConstructor
@Slf4j
public class ErrorMetricsService {
    
    private final MeterRegistry meterRegistry;
    
    /**
     * ì˜ˆì™¸ ë°œìƒ ë©”íŠ¸ë¦­ìŠ¤ ê¸°ë¡
     * 
     * @param errorCode ì—ëŸ¬ ì½”ë“œ
     * @param exception ì˜ˆì™¸ ê°ì²´
     */
    public void recordException(ErrorCode errorCode, Throwable exception) {
        // ì—ëŸ¬ ì¹´ìš´í„° ì¦ê°€
        Counter.builder("application.errors")
                .tag("error.code", errorCode.getCode())
                .tag("error.category", errorCode.getCategory().getCode())
                .tag("http.status", String.valueOf(errorCode.getStatus().value()))
                .tag("exception.type", exception.getClass().getSimpleName())
                .register(meterRegistry)
                .increment();
        
        // ì—ëŸ¬ ë ˆë²¨ë³„ ì¹´ìš´í„°
        Counter.builder("application.errors.by.level")
                .tag("log.level", errorCode.getLogLevel().getName())
                .tag("error.code", errorCode.getCode())
                .register(meterRegistry)
                .increment();
    }
    
    /**
     * ì—ëŸ¬ ì²˜ë¦¬ ì‹œê°„ ê¸°ë¡
     * 
     * @param errorCode ì—ëŸ¬ ì½”ë“œ
     * @param duration ì²˜ë¦¬ ì‹œê°„
     */
    public void recordErrorProcessingTime(ErrorCode errorCode, Duration duration) {
        Timer.builder("application.error.processing.time")
                .tag("error.code", errorCode.getCode())
                .tag("error.category", errorCode.getCategory().getCode())
                .register(meterRegistry)
                .record(duration);
    }
}
```

#### ğŸ”§ @ControllerAdvice ê³ ê¸‰ ì„¤ì •

##### 1. ì¡°ê±´ë¶€ ì˜ˆì™¸ ì²˜ë¦¬
```java
/**
 * íŠ¹ì • íŒ¨í‚¤ì§€ë‚˜ ì»¨íŠ¸ë¡¤ëŸ¬ì— ëŒ€í•œ ì¡°ê±´ë¶€ ì˜ˆì™¸ ì²˜ë¦¬
 */
@ControllerAdvice(basePackages = "com.skax.aiplatform.controller")
public class ApiExceptionHandler {
    // API ì»¨íŠ¸ë¡¤ëŸ¬ ì „ìš© ì˜ˆì™¸ ì²˜ë¦¬
}

@ControllerAdvice(assignableTypes = {AdminController.class, UserController.class})
public class WebExceptionHandler {
    // íŠ¹ì • ì»¨íŠ¸ë¡¤ëŸ¬ ì „ìš© ì˜ˆì™¸ ì²˜ë¦¬
}

@ControllerAdvice(annotations = RestController.class)
public class RestApiExceptionHandler {
    // @RestController ì–´ë…¸í…Œì´ì…˜ì´ ìˆëŠ” ì»¨íŠ¸ë¡¤ëŸ¬ ì „ìš©
}
```

##### 2. ìš°ì„ ìˆœìœ„ ê¸°ë°˜ ì˜ˆì™¸ ì²˜ë¦¬
```java
/**
 * ì˜ˆì™¸ ì²˜ë¦¬ ìš°ì„ ìˆœìœ„ ì„¤ì •
 */
@ControllerAdvice
@Order(1)  // ë†’ì€ ìš°ì„ ìˆœìœ„
public class SecurityExceptionHandler {
    // ë³´ì•ˆ ê´€ë ¨ ì˜ˆì™¸ ìš°ì„  ì²˜ë¦¬
}

@ControllerAdvice
@Order(2)  // ì¤‘ê°„ ìš°ì„ ìˆœìœ„
public class BusinessExceptionHandler {
    // ë¹„ì¦ˆë‹ˆìŠ¤ ì˜ˆì™¸ ì²˜ë¦¬
}

@ControllerAdvice
@Order(Ordered.LOWEST_PRECEDENCE)  // ìµœì € ìš°ì„ ìˆœìœ„
public class GenericExceptionHandler {
    // ì¼ë°˜ì ì¸ ì˜ˆì™¸ ì²˜ë¦¬
}
```

### 5.2 ì˜ˆì™¸ íƒ€ì…ë³„ í•¸ë“¤ë§ ë©”ì„œë“œ

ê° ì˜ˆì™¸ íƒ€ì…ì— ë§ëŠ” ì „ë¬¸ì ì¸ ì²˜ë¦¬ ë©”ì„œë“œë¥¼ êµ¬í˜„í•˜ì—¬ ì •í™•í•˜ê³  ìœ ìš©í•œ ì—ëŸ¬ ì‘ë‹µì„ ì œê³µí•©ë‹ˆë‹¤.

#### ğŸ¯ ì»¤ìŠ¤í…€ ì˜ˆì™¸ ì²˜ë¦¬

##### 1. BusinessException ì²˜ë¦¬
```java
/**
 * ë¹„ì¦ˆë‹ˆìŠ¤ ì˜ˆì™¸ ì²˜ë¦¬
 * 
 * <p>ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì—ì„œ ë°œìƒí•˜ëŠ” ì˜ˆì™¸ë¥¼ ì²˜ë¦¬í•©ë‹ˆë‹¤.
 * ì‚¬ìš©ìì—ê²Œ ëª…í™•í•œ ì˜¤ë¥˜ ì›ì¸ê³¼ í•´ê²° ë°©ì•ˆì„ ì œì‹œí•©ë‹ˆë‹¤.</p>
 * 
 * @param ex BusinessException
 * @return ë¹„ì¦ˆë‹ˆìŠ¤ ì—ëŸ¬ ì‘ë‹µ
 */
@ExceptionHandler(BusinessException.class)
public AxResponseEntity<Void> handleBusinessException(BusinessException ex) {
    RequestContext context = getCurrentRequestContext();
    ErrorCode errorCode = ex.getErrorCode();
    String customMessage = ex.getMessage();
    
    // ì»¤ìŠ¤í…€ ë©”ì‹œì§€ê°€ ìˆëŠ” ê²½ìš° ìƒì„¸ ì •ë³´ë¡œ ì œê³µ
    String localizedMessage = messageService.getErrorMessage(errorCode);
    String details = customMessage != null && !customMessage.equals(errorCode.getDefaultMessage()) 
        ? customMessage : null;
    
    // ë¡œê¹…
    logException(errorCode.getLogLevel(), 
        String.format("Business exception [%s]: %s", errorCode.getCode(), localizedMessage), 
        ex, context);
    
    // ì‘ë‹µ ìƒì„±
    if (details != null) {
        return AxResponseEntity.error(errorCode, localizedMessage, details);
    } else {
        return AxResponseEntity.error(errorCode, localizedMessage);
    }
}
```

##### 2. ValidationException ì²˜ë¦¬
```java
/**
 * ì…ë ¥ê°’ ê²€ì¦ ì˜ˆì™¸ ì²˜ë¦¬
 * 
 * <p>í´ë¼ì´ì–¸íŠ¸ë¡œë¶€í„° ë°›ì€ ì…ë ¥ê°’ì˜ ê²€ì¦ ì‹¤íŒ¨ë¥¼ ì²˜ë¦¬í•©ë‹ˆë‹¤.
 * í•„ë“œë³„ ìƒì„¸í•œ ì˜¤ë¥˜ ì •ë³´ë¥¼ ì œê³µí•˜ì—¬ í´ë¼ì´ì–¸íŠ¸ê°€ ì •í™•íˆ ìˆ˜ì •í•  ìˆ˜ ìˆë„ë¡ ë„ì›€ì„ ì¤ë‹ˆë‹¤.</p>
 * 
 * @param ex ValidationException
 * @return ê²€ì¦ ì—ëŸ¬ ì‘ë‹µ
 */
@ExceptionHandler(ValidationException.class)
public AxResponseEntity<Void> handleValidationException(ValidationException ex) {
    RequestContext context = getCurrentRequestContext();
    ErrorCode errorCode = ex.getErrorCode();
    List<ValidationException.FieldValidationError> fieldErrors = ex.getFieldErrors();
    
    // í•„ë“œ ì—ëŸ¬ë¥¼ AxResponseì˜ FieldError í˜•ì‹ìœ¼ë¡œ ë³€í™˜
    List<AxResponse.FieldError> responseFieldErrors = fieldErrors.stream()
            .map(error -> AxResponse.FieldError.builder()
                    .field(error.getField())
                    .rejectedValue(error.getRejectedValue())
                    .message(messageService.getValidationMessage(
                        "validation." + error.getField() + ".invalid", 
                        error.getRejectedValue()))
                    .build())
            .collect(Collectors.toList());
    
    String localizedMessage = messageService.getErrorMessage(errorCode);
    
    // ë¡œê¹… (INFO ë ˆë²¨ - í´ë¼ì´ì–¸íŠ¸ ì…ë ¥ ì˜¤ë¥˜)
    log.info("Validation exception [{}]: {} - Fields: {} - Context: {}", 
        errorCode.getCode(), localizedMessage, 
        fieldErrors.stream().map(ValidationException.FieldValidationError::getField)
                   .collect(Collectors.joining(", ")), 
        context.toLogString());
    
    return AxResponseEntity.error(errorCode, localizedMessage, responseFieldErrors);
}
```

##### 3. ExternalApiException ì²˜ë¦¬
```java
/**
 * ì™¸ë¶€ API ì˜ˆì™¸ ì²˜ë¦¬
 * 
 * <p>ì™¸ë¶€ ì‹œìŠ¤í…œê³¼ì˜ í†µì‹ ì—ì„œ ë°œìƒí•˜ëŠ” ì˜ˆì™¸ë¥¼ ì²˜ë¦¬í•©ë‹ˆë‹¤.
 * ì™¸ë¶€ ì„œë¹„ìŠ¤ì˜ ìƒíƒœì™€ ì¬ì‹œë„ ê°€ëŠ¥ ì—¬ë¶€ë¥¼ í¬í•¨í•œ ì •ë³´ë¥¼ ì œê³µí•©ë‹ˆë‹¤.</p>
 * 
 * @param ex ExternalApiException
 * @return ì™¸ë¶€ API ì—ëŸ¬ ì‘ë‹µ
 */
@ExceptionHandler(ExternalApiException.class)
public AxResponseEntity<Void> handleExternalApiException(ExternalApiException ex) {
    RequestContext context = getCurrentRequestContext();
    ErrorCode errorCode = ex.getErrorCode();
    
    String localizedMessage = messageService.getErrorMessage(errorCode);
    String details = String.format("ì™¸ë¶€ API í˜¸ì¶œ ì‹¤íŒ¨ - API: %s, Endpoint: %s, Status: %s", 
        ex.getApiName(), ex.getEndpoint(), 
        ex.getResponseStatus() != null ? ex.getResponseStatus() : "Unknown");
    
    // ì—ëŸ¬ ë ˆë²¨ì— ë”°ë¥¸ ë¡œê¹…
    if (errorCode.getStatus().is5xxServerError()) {
        log.error("External API exception [{}]: {} - Details: {} - Context: {}", 
            errorCode.getCode(), localizedMessage, details, context.toLogString(), ex);
    } else {
        log.warn("External API exception [{}]: {} - Details: {} - Context: {}", 
            errorCode.getCode(), localizedMessage, details, context.toLogString());
    }
    
    return AxResponseEntity.error(errorCode, localizedMessage, details);
}
```

#### ğŸ”„ Spring í‘œì¤€ ì˜ˆì™¸ ì²˜ë¦¬

##### 1. MethodArgumentNotValidException ì²˜ë¦¬
```java
/**
 * Spring Validation ì˜ˆì™¸ ì²˜ë¦¬
 * 
 * <p>@Valid ì–´ë…¸í…Œì´ì…˜ì„ í†µí•œ Bean Validation ì‹¤íŒ¨ë¥¼ ì²˜ë¦¬í•©ë‹ˆë‹¤.
 * Jakarta Validation APIì˜ ì–´ë…¸í…Œì´ì…˜ë“¤(@NotNull, @NotBlank, @Email ë“±)ì˜ 
 * ê²€ì¦ ì‹¤íŒ¨ë¥¼ ìƒì„¸í•˜ê²Œ ì²˜ë¦¬í•©ë‹ˆë‹¤.</p>
 * 
 * @param ex MethodArgumentNotValidException
 * @return ê²€ì¦ ì—ëŸ¬ ì‘ë‹µ
 */
@ExceptionHandler(MethodArgumentNotValidException.class)
public AxResponseEntity<Void> handleMethodArgumentNotValid(MethodArgumentNotValidException ex) {
    RequestContext context = getCurrentRequestContext();
    BindingResult bindingResult = ex.getBindingResult();
    
    // í•„ë“œ ì—ëŸ¬ ì¶”ì¶œ ë° ë³€í™˜
    List<AxResponse.FieldError> fieldErrors = bindingResult.getFieldErrors().stream()
            .map(error -> {
                String messageKey = String.format("validation.%s.%s", 
                    error.getField(), error.getCode().toLowerCase());
                String localizedMessage = messageService.getValidationMessage(
                    messageKey, error.getRejectedValue());
                
                return AxResponse.FieldError.builder()
                        .field(error.getField())
                        .rejectedValue(error.getRejectedValue())
                        .message(localizedMessage)
                        .build();
            })
            .collect(Collectors.toList());
    
    // ê¸€ë¡œë²Œ ì—ëŸ¬ ì¶”ì¶œ
    List<String> globalErrors = bindingResult.getGlobalErrors().stream()
            .map(error -> messageService.getValidationMessage(
                "validation.global." + error.getCode(), error.getDefaultMessage()))
            .collect(Collectors.toList());
    
    String localizedMessage = messageService.getErrorMessage(ErrorCode.VALIDATION_FAILED);
    
    log.info("Method argument validation failed - Fields: {} - Global: {} - Context: {}", 
        fieldErrors.stream().map(AxResponse.FieldError::getField)
                   .collect(Collectors.joining(", ")),
        String.join(", ", globalErrors),
        context.toLogString());
    
    return AxResponseEntity.error(ErrorCode.VALIDATION_FAILED, localizedMessage, fieldErrors);
}
```

##### 2. ConstraintViolationException ì²˜ë¦¬
```java
/**
 * Bean Validation ì œì•½ ì¡°ê±´ ìœ„ë°˜ ì˜ˆì™¸ ì²˜ë¦¬
 * 
 * <p>ë©”ì„œë“œ ë ˆë²¨ validationì´ë‚˜ ì—”í‹°í‹° validation ì‹¤íŒ¨ë¥¼ ì²˜ë¦¬í•©ë‹ˆë‹¤.</p>
 * 
 * @param ex ConstraintViolationException
 * @return ì œì•½ ì¡°ê±´ ìœ„ë°˜ ì—ëŸ¬ ì‘ë‹µ
 */
@ExceptionHandler(ConstraintViolationException.class)
public AxResponseEntity<Void> handleConstraintViolation(ConstraintViolationException ex) {
    RequestContext context = getCurrentRequestContext();
    
    List<AxResponse.FieldError> fieldErrors = ex.getConstraintViolations().stream()
            .map(violation -> {
                String fieldName = getFieldNameFromPath(violation.getPropertyPath());
                String messageKey = String.format("validation.%s.constraint", fieldName);
                String localizedMessage = messageService.getValidationMessage(
                    messageKey, violation.getInvalidValue());
                
                return AxResponse.FieldError.builder()
                        .field(fieldName)
                        .rejectedValue(violation.getInvalidValue())
                        .message(localizedMessage)
                        .build();
            })
            .collect(Collectors.toList());
    
    String localizedMessage = messageService.getErrorMessage(ErrorCode.VALIDATION_FAILED);
    
    log.info("Constraint violation - Violations: {} - Context: {}", 
        fieldErrors.size(), context.toLogString());
    
    return AxResponseEntity.error(ErrorCode.VALIDATION_FAILED, localizedMessage, fieldErrors);
}

/**
 * PropertyPathì—ì„œ í•„ë“œëª… ì¶”ì¶œ
 */
private String getFieldNameFromPath(Path propertyPath) {
    String pathString = propertyPath.toString();
    return pathString.substring(pathString.lastIndexOf('.') + 1);
}
```

##### 3. MissingServletRequestParameterException ì²˜ë¦¬
```java
/**
 * í•„ìˆ˜ ìš”ì²­ íŒŒë¼ë¯¸í„° ëˆ„ë½ ì˜ˆì™¸ ì²˜ë¦¬
 * 
 * @param ex MissingServletRequestParameterException
 * @return íŒŒë¼ë¯¸í„° ëˆ„ë½ ì—ëŸ¬ ì‘ë‹µ
 */
@ExceptionHandler(MissingServletRequestParameterException.class)
public AxResponseEntity<Void> handleMissingServletRequestParameter(
        MissingServletRequestParameterException ex) {
    RequestContext context = getCurrentRequestContext();
    
    String localizedMessage = messageService.getErrorMessage(
        ErrorCode.INVALID_INPUT_VALUE, ex.getParameterName());
    
    String details = String.format("í•„ìˆ˜ íŒŒë¼ë¯¸í„°ê°€ ëˆ„ë½ë˜ì—ˆìŠµë‹ˆë‹¤: %s (íƒ€ì…: %s)", 
        ex.getParameterName(), ex.getParameterType());
    
    log.info("Missing request parameter - Parameter: {} - Type: {} - Context: {}", 
        ex.getParameterName(), ex.getParameterType(), context.toLogString());
    
    return AxResponseEntity.error(ErrorCode.INVALID_INPUT_VALUE, localizedMessage, details);
}
```

##### 4. HttpRequestMethodNotSupportedException ì²˜ë¦¬
```java
/**
 * HTTP ë©”ì„œë“œ ì§€ì›í•˜ì§€ ì•ŠìŒ ì˜ˆì™¸ ì²˜ë¦¬
 * 
 * @param ex HttpRequestMethodNotSupportedException
 * @return ë©”ì„œë“œ ì§€ì›í•˜ì§€ ì•ŠìŒ ì—ëŸ¬ ì‘ë‹µ
 */
@ExceptionHandler(HttpRequestMethodNotSupportedException.class)
public AxResponseEntity<Void> handleHttpRequestMethodNotSupported(
        HttpRequestMethodNotSupportedException ex) {
    RequestContext context = getCurrentRequestContext();
    
    String supportedMethods = ex.getSupportedHttpMethods() != null ?
        ex.getSupportedHttpMethods().stream()
            .map(HttpMethod::name)
            .collect(Collectors.joining(", ")) : "Unknown";
    
    String localizedMessage = messageService.getErrorMessage(ErrorCode.INVALID_INPUT_VALUE);
    String details = String.format("ì§€ì›í•˜ì§€ ì•ŠëŠ” HTTP ë©”ì„œë“œì…ë‹ˆë‹¤. ìš”ì²­: %s, ì§€ì›: %s", 
        ex.getMethod(), supportedMethods);
    
    log.info("HTTP method not supported - Method: {} - Supported: {} - Context: {}", 
        ex.getMethod(), supportedMethods, context.toLogString());
    
    return AxResponseEntity.error(ErrorCode.INVALID_INPUT_VALUE, localizedMessage, details);
}
```

#### ğŸ’¾ ë°ì´í„°ë² ì´ìŠ¤ ì˜ˆì™¸ ì²˜ë¦¬

##### 1. DataIntegrityViolationException ì²˜ë¦¬
```java
/**
 * ë°ì´í„° ë¬´ê²°ì„± ìœ„ë°˜ ì˜ˆì™¸ ì²˜ë¦¬
 * 
 * <p>ë°ì´í„°ë² ì´ìŠ¤ ì œì•½ ì¡°ê±´ ìœ„ë°˜(ì¤‘ë³µ í‚¤, ì™¸ë˜ í‚¤, NOT NULL ë“±)ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤.</p>
 * 
 * @param ex DataIntegrityViolationException
 * @return ë°ì´í„° ë¬´ê²°ì„± ìœ„ë°˜ ì—ëŸ¬ ì‘ë‹µ
 */
@ExceptionHandler(DataIntegrityViolationException.class)
public AxResponseEntity<Void> handleDataIntegrityViolation(DataIntegrityViolationException ex) {
    RequestContext context = getCurrentRequestContext();
    
    // êµ¬ì²´ì ì¸ ì—ëŸ¬ ì½”ë“œ ê²°ì •
    ErrorCode errorCode = determineDataIntegrityErrorCode(ex);
    String localizedMessage = messageService.getErrorMessage(errorCode);
    
    // ë¯¼ê°í•œ DB ì •ë³´ëŠ” ë¡œê·¸ì—ë§Œ ê¸°ë¡, ì‚¬ìš©ìì—ê²ŒëŠ” ì¼ë°˜ì  ë©”ì‹œì§€ ì œê³µ
    log.warn("Data integrity violation [{}]: {} - Context: {} - Root cause: {}", 
        errorCode.getCode(), localizedMessage, context.toLogString(), 
        ex.getRootCause() != null ? ex.getRootCause().getMessage() : ex.getMessage());
    
    return AxResponseEntity.error(errorCode, localizedMessage);
}

/**
 * ë°ì´í„° ë¬´ê²°ì„± ìœ„ë°˜ ìœ í˜•ì— ë”°ë¥¸ ErrorCode ê²°ì •
 */
private ErrorCode determineDataIntegrityErrorCode(DataIntegrityViolationException ex) {
    String message = ex.getMessage().toLowerCase();
    Throwable rootCause = ex.getRootCause();
    
    if (rootCause instanceof SQLException sqlEx) {
        // SQL State ì½”ë“œë¥¼ ê¸°ë°˜ìœ¼ë¡œ íŒë‹¨
        String sqlState = sqlEx.getSQLState();
        if ("23000".equals(sqlState) || "23505".equals(sqlState)) {
            return ErrorCode.DUPLICATE_RESOURCE;  // ì¤‘ë³µ í‚¤
        } else if ("23503".equals(sqlState)) {
            return ErrorCode.DATA_INTEGRITY_VIOLATION;  // ì™¸ë˜ í‚¤ ìœ„ë°˜
        }
    }
    
    // ë©”ì‹œì§€ ê¸°ë°˜ íŒë‹¨
    if (message.contains("duplicate") || message.contains("unique")) {
        return ErrorCode.DUPLICATE_RESOURCE;
    } else if (message.contains("foreign key") || message.contains("cannot delete")) {
        return ErrorCode.DATA_INTEGRITY_VIOLATION;
    }
    
    return ErrorCode.DATA_INTEGRITY_VIOLATION;  // ê¸°ë³¸ê°’
}
```

##### 2. JPA ê´€ë ¨ ì˜ˆì™¸ ì²˜ë¦¬
```java
/**
 * JPA ì˜ˆì™¸ ì²˜ë¦¬
 * 
 * @param ex JpaSystemException
 * @return JPA ì—ëŸ¬ ì‘ë‹µ
 */
@ExceptionHandler(JpaSystemException.class)
public AxResponseEntity<Void> handleJpaSystemException(JpaSystemException ex) {
    RequestContext context = getCurrentRequestContext();
    String localizedMessage = messageService.getErrorMessage(ErrorCode.DATABASE_CONNECTION_ERROR);
    
    log.error("JPA system exception - Context: {} - Root cause: {}", 
        context.toLogString(), ex.getRootCause() != null ? 
        ex.getRootCause().getMessage() : ex.getMessage(), ex);
    
    return AxResponseEntity.error(ErrorCode.DATABASE_CONNECTION_ERROR, localizedMessage);
}

/**
 * EntityNotFoundException ì²˜ë¦¬
 * 
 * @param ex EntityNotFoundException
 * @return ì—”í‹°í‹° ì—†ìŒ ì—ëŸ¬ ì‘ë‹µ
 */
@ExceptionHandler(EntityNotFoundException.class)
public AxResponseEntity<Void> handleEntityNotFound(EntityNotFoundException ex) {
    RequestContext context = getCurrentRequestContext();
    String localizedMessage = messageService.getErrorMessage(ErrorCode.RESOURCE_NOT_FOUND);
    
    log.info("Entity not found - Context: {} - Message: {}", 
        context.toLogString(), ex.getMessage());
    
    return AxResponseEntity.error(ErrorCode.RESOURCE_NOT_FOUND, localizedMessage);
}
```

#### ğŸŒ ì¼ë°˜ ì‹œìŠ¤í…œ ì˜ˆì™¸ ì²˜ë¦¬

##### 1. RuntimeException ì²˜ë¦¬
```java
/**
 * RuntimeException ì²˜ë¦¬ (ì˜ˆìƒì¹˜ ëª»í•œ ëŸ°íƒ€ì„ ì˜¤ë¥˜)
 * 
 * @param ex RuntimeException
 * @return ëŸ°íƒ€ì„ ì—ëŸ¬ ì‘ë‹µ
 */
@ExceptionHandler(RuntimeException.class)
public AxResponseEntity<Void> handleRuntimeException(RuntimeException ex) {
    RequestContext context = getCurrentRequestContext();
    
    // NPEë‚˜ IllegalArgument ë“± ì¼ë°˜ì ì¸ í”„ë¡œê·¸ë˜ë° ì˜¤ë¥˜ëŠ” ë” êµ¬ì²´ì ìœ¼ë¡œ ì²˜ë¦¬
    ErrorCode errorCode = determineRuntimeErrorCode(ex);
    String localizedMessage = messageService.getErrorMessage(errorCode);
    
    log.error("Runtime exception [{}] - Context: {} - Exception: {}", 
        errorCode.getCode(), context.toLogString(), ex.getClass().getSimpleName(), ex);
    
    return AxResponseEntity.error(errorCode, localizedMessage);
}

/**
 * RuntimeException ìœ í˜•ì— ë”°ë¥¸ ErrorCode ê²°ì •
 */
private ErrorCode determineRuntimeErrorCode(RuntimeException ex) {
    if (ex instanceof NullPointerException) {
        return ErrorCode.INTERNAL_SERVER_ERROR;
    } else if (ex instanceof IllegalArgumentException) {
        return ErrorCode.INVALID_INPUT_VALUE;
    } else if (ex instanceof IllegalStateException) {
        return ErrorCode.INTERNAL_SERVER_ERROR;
    } else if (ex instanceof UnsupportedOperationException) {
        return ErrorCode.INTERNAL_SERVER_ERROR;
    }
    
    return ErrorCode.INTERNAL_SERVER_ERROR;  // ê¸°ë³¸ê°’
}
```

##### 2. Exception ì²˜ë¦¬ (ìµœì¢… ì•ˆì „ë§)
```java
/**
 * Exception ì²˜ë¦¬ (ëª¨ë“  ì˜ˆì™¸ì˜ ìµœì¢… ì•ˆì „ë§)
 * 
 * <p>ìœ„ì˜ ëª¨ë“  í•¸ë“¤ëŸ¬ì—ì„œ ì²˜ë¦¬ë˜ì§€ ì•Šì€ ì˜ˆì™¸ë¥¼ ì²˜ë¦¬í•©ë‹ˆë‹¤.
 * ì˜ˆìƒì¹˜ ëª»í•œ ì˜¤ë¥˜ ìƒí™©ì—ì„œë„ ì•ˆì •ì ì¸ ì‘ë‹µì„ ì œê³µí•©ë‹ˆë‹¤.</p>
 * 
 * @param ex Exception
 * @return ì¼ë°˜ ì—ëŸ¬ ì‘ë‹µ
 */
@ExceptionHandler(Exception.class)
public AxResponseEntity<Void> handleGenericException(Exception ex) {
    RequestContext context = getCurrentRequestContext();
    String localizedMessage = messageService.getErrorMessage(ErrorCode.INTERNAL_SERVER_ERROR);
    
    // ì˜ˆì™¸ ID ìƒì„± (ë¬¸ì˜ ì‹œ ì°¸ì¡°ìš©)
    String exceptionId = UUID.randomUUID().toString();
    
    log.error("Unexpected exception [ID: {}] - Context: {} - Exception: {}", 
        exceptionId, context.toLogString(), ex.getClass().getSimpleName(), ex);
    
    // ìš´ì˜ í™˜ê²½ì—ì„œëŠ” ìƒì„¸í•œ ì˜¤ë¥˜ ì •ë³´ ìˆ¨ê¹€
    String details = isProductionEnvironment() ? 
        String.format("ì˜¤ë¥˜ ID: %s (ê´€ë¦¬ì ë¬¸ì˜ ì‹œ ì°¸ì¡°)", exceptionId) :
        String.format("Exception: %s - Message: %s", ex.getClass().getSimpleName(), ex.getMessage());
    
    return AxResponseEntity.error(ErrorCode.INTERNAL_SERVER_ERROR, localizedMessage, details);
}

/**
 * ìš´ì˜ í™˜ê²½ ì—¬ë¶€ í™•ì¸
 */
private boolean isProductionEnvironment() {
    return Arrays.stream(environment.getActiveProfiles())
            .anyMatch(profile -> "prod".equals(profile) || "production".equals(profile));
}
```

---

## 6. AxResponseEntity ì‚¬ìš©ë²•

### 6.1 í†µí•© ì‘ë‹µ í˜•ì‹ì˜ ì´í•´

AxResponseEntityëŠ” ê¸°ì¡´ Springì˜ ResponseEntityì™€ ì»¤ìŠ¤í…€ AxResponseë¥¼ í†µí•©í•œ í‘œì¤€í™”ëœ ì‘ë‹µ ë˜í¼ì…ë‹ˆë‹¤. ëª¨ë“  API ì‘ë‹µì„ ì¼ê´€ëœ í˜•ì‹ìœ¼ë¡œ ì œê³µí•˜ì—¬ í´ë¼ì´ì–¸íŠ¸ ê°œë°œ íš¨ìœ¨ì„±ì„ ë†’ì´ê³  ì—ëŸ¬ ì²˜ë¦¬ë¥¼ í‘œì¤€í™”í•©ë‹ˆë‹¤.

#### ğŸ—ï¸ AxResponseEntity êµ¬ì¡° ë¶„ì„

##### 1. ê¸°ë³¸ í´ë˜ìŠ¤ êµ¬ì¡°
```java
/**
 * í†µí•© API ì‘ë‹µ ì—”í‹°í‹°
 * 
 * <p>Springì˜ ResponseEntityì™€ ì»¤ìŠ¤í…€ AxResponseë¥¼ ê²°í•©í•˜ì—¬
 * ì¼ê´€ëœ API ì‘ë‹µ í˜•ì‹ì„ ì œê³µí•©ë‹ˆë‹¤.</p>
 * 
 * <h3>ì£¼ìš” ê¸°ëŠ¥:</h3>
 * <ul>
 *   <li>HTTP ìƒíƒœ ì½”ë“œì™€ ì‘ë‹µ ë³¸ë¬¸ì˜ í†µí•© ê´€ë¦¬</li>
 *   <li>ì„±ê³µ/ì‹¤íŒ¨ ì‘ë‹µì˜ í‘œì¤€í™”ëœ í˜•ì‹</li>
 *   <li>ë‹¤êµ­ì–´ ë©”ì‹œì§€ ì§€ì›</li>
 *   <li>í˜ì´ì§€ë„¤ì´ì…˜ ì‘ë‹µ ìµœì í™”</li>
 *   <li>ì—ëŸ¬ ì„¸ë¶€ ì •ë³´ í¬í•¨</li>
 * </ul>
 * 
 * @param <T> ì‘ë‹µ ë°ì´í„° íƒ€ì…
 * @author ByounggwanLee
 * @since 2025-10-09
 * @version 1.0
 */
public class AxResponseEntity<T> extends ResponseEntity<AxResponse<T>> {
    
    /**
     * AxResponseEntity ìƒì„±ì
     * 
     * @param body AxResponse ë³¸ë¬¸
     * @param status HTTP ìƒíƒœ ì½”ë“œ
     */
    public AxResponseEntity(AxResponse<T> body, HttpStatus status) {
        super(body, status);
    }
    
    /**
     * AxResponseEntity ìƒì„±ì (í—¤ë” í¬í•¨)
     * 
     * @param body AxResponse ë³¸ë¬¸
     * @param headers HTTP í—¤ë”
     * @param status HTTP ìƒíƒœ ì½”ë“œ
     */
    public AxResponseEntity(AxResponse<T> body, HttpHeaders headers, HttpStatus status) {
        super(body, headers, status);
    }
    
    // ì •ì  íŒ©í† ë¦¬ ë©”ì„œë“œë“¤ì€ ì•„ë˜ì—ì„œ ìƒì„¸íˆ ì„¤ëª…
}
```

##### 2. AxResponse í•µì‹¬ êµ¬ì¡°
```java
/**
 * API ì‘ë‹µ ë³¸ë¬¸ í‘œì¤€ êµ¬ì¡°
 * 
 * @param <T> ì‘ë‹µ ë°ì´í„° íƒ€ì…
 * @author ByounggwanLee
 * @since 2025-10-09
 */
@Getter
@Builder
@NoArgsConstructor
@AllArgsConstructor
@JsonInclude(JsonInclude.Include.NON_NULL)
public class AxResponse<T> {
    
    /**
     * ìš”ì²­ ì„±ê³µ ì—¬ë¶€
     */
    @Schema(description = "ìš”ì²­ ì„±ê³µ ì—¬ë¶€", example = "true")
    private Boolean success;
    
    /**
     * ì‘ë‹µ ë©”ì‹œì§€
     */
    @Schema(description = "ì‘ë‹µ ë©”ì‹œì§€", example = "ìš”ì²­ì´ ì„±ê³µì ìœ¼ë¡œ ì²˜ë¦¬ë˜ì—ˆìŠµë‹ˆë‹¤")
    private String message;
    
    /**
     * ì‘ë‹µ ë°ì´í„° (ì„±ê³µ ì‹œ)
     */
    @Schema(description = "ì‘ë‹µ ë°ì´í„°")
    private T data;
    
    /**
     * ì—ëŸ¬ ì •ë³´ (ì‹¤íŒ¨ ì‹œ)
     */
    @Schema(description = "ì—ëŸ¬ ì •ë³´")
    private AxError error;
    
    /**
     * ì‘ë‹µ ìƒì„± ì‹œê°„
     */
    @Schema(description = "ì‘ë‹µ ìƒì„± ì‹œê°„", example = "2025-10-09T14:30:00")
    @JsonFormat(pattern = "yyyy-MM-dd'T'HH:mm:ss")
    private LocalDateTime timestamp;
    
    /**
     * ìš”ì²­ ê²½ë¡œ
     */
    @Schema(description = "ìš”ì²­ ê²½ë¡œ", example = "/api/v1/users")
    private String path;
    
    /**
     * ì„±ê³µ ì‘ë‹µ ìƒì„±
     */
    public static <T> AxResponse<T> success(T data, String message) {
        return AxResponse.<T>builder()
                .success(true)
                .message(message)
                .data(data)
                .timestamp(LocalDateTime.now())
                .path(getCurrentRequestPath())
                .build();
    }
    
    /**
     * ì‹¤íŒ¨ ì‘ë‹µ ìƒì„±
     */
    public static <T> AxResponse<T> failure(String message, AxError error) {
        return AxResponse.<T>builder()
                .success(false)
                .message(message)
                .error(error)
                .timestamp(LocalDateTime.now())
                .path(getCurrentRequestPath())
                .build();
    }
    
    /**
     * í˜„ì¬ ìš”ì²­ ê²½ë¡œ ì¶”ì¶œ
     */
    private static String getCurrentRequestPath() {
        try {
            RequestAttributes requestAttributes = RequestContextHolder.currentRequestAttributes();
            HttpServletRequest request = ((ServletRequestAttributes) requestAttributes).getRequest();
            return request.getRequestURI();
        } catch (IllegalStateException e) {
            return "Unknown";
        }
    }
}
```

##### 3. AxError ìƒì„¸ êµ¬ì¡°
```java
/**
 * API ì—ëŸ¬ ì •ë³´ ìƒì„¸ êµ¬ì¡°
 * 
 * @author ByounggwanLee
 * @since 2025-10-09
 */
@Getter
@Builder
@NoArgsConstructor
@AllArgsConstructor
@JsonInclude(JsonInclude.Include.NON_NULL)
public class AxError {
    
    /**
     * HTTP ìƒíƒœ ê¸°ë°˜ ì½”ë“œ (ì˜ˆ: "NOT_FOUND", "BAD_REQUEST")
     */
    @Schema(description = "HTTP ìƒíƒœ ê¸°ë°˜ ì½”ë“œ", example = "NOT_FOUND")
    private String hscode;
    
    /**
     * êµ¬ì²´ì ì¸ ì—ëŸ¬ ì½”ë“œ (ì˜ˆ: "U001", "V002")
     */
    @Schema(description = "êµ¬ì²´ì ì¸ ì—ëŸ¬ ì½”ë“œ", example = "U001")
    private String code;
    
    /**
     * ì—ëŸ¬ ë©”ì‹œì§€
     */
    @Schema(description = "ì—ëŸ¬ ë©”ì‹œì§€", example = "ì‚¬ìš©ìë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤")
    private String message;
    
    /**
     * ì—ëŸ¬ ìƒì„¸ ì •ë³´
     */
    @Schema(description = "ì—ëŸ¬ ìƒì„¸ ì •ë³´", example = "ID 123ì— í•´ë‹¹í•˜ëŠ” ì‚¬ìš©ìê°€ ì¡´ì¬í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤")
    private String details;
    
    /**
     * ì—ëŸ¬ ë°œìƒ ì‹œê°„
     */
    @Schema(description = "ì—ëŸ¬ ë°œìƒ ì‹œê°„", example = "2025-10-09T14:30:00")
    @JsonFormat(pattern = "yyyy-MM-dd'T'HH:mm:ss")
    private LocalDateTime timestamp;
    
    /**
     * ìš”ì²­ ê²½ë¡œ
     */
    @Schema(description = "ìš”ì²­ ê²½ë¡œ", example = "/api/v1/users/123")
    private String path;
    
    /**
     * ì—ëŸ¬ ì²˜ë¦¬ ì•¡ì…˜ íƒ€ì…
     */
    @Schema(description = "ì—ëŸ¬ ì²˜ë¦¬ ì•¡ì…˜ íƒ€ì…", example = "CONFIRM")
    private ActionType actionType;
    
    /**
     * í•„ë“œ ê²€ì¦ ì—ëŸ¬ ëª©ë¡
     */
    @Schema(description = "í•„ë“œ ê²€ì¦ ì—ëŸ¬ ëª©ë¡")
    private List<FieldError> fieldErrors;
    
    /**
     * ì—ëŸ¬ ì²˜ë¦¬ ì•¡ì…˜ íƒ€ì…
     */
    public enum ActionType {
        CONFIRM("í™•ì¸"),     // í™•ì¸ ë²„íŠ¼ í‘œì‹œ(ê¸°ë³¸)
        PREVIOUS("ì´ì „"),    // ì´ì „ ë²„íŠ¼ í‘œì‹œ
        NEXT("ë‹¤ìŒ"),        // ë‹¤ìŒ ë²„íŠ¼ í‘œì‹œ
        RETRY("ì¬ì‹œë„"),     // ì¬ì‹œë„ ë²„íŠ¼ í‘œì‹œ
        CANCEL("ì·¨ì†Œ");      // ì·¨ì†Œ ë²„íŠ¼ í‘œì‹œ
        
        private final String description;
        
        ActionType(String description) {
            this.description = description;
        }
        
        public String getDescription() {
            return description;
        }
    }
    
    /**
     * í•„ë“œ ê²€ì¦ ì—ëŸ¬ ì •ë³´
     */
    @Getter
    @Builder
    @NoArgsConstructor
    @AllArgsConstructor
    public static class FieldError {
        
        /**
         * í•„ë“œëª…
         */
        @Schema(description = "í•„ë“œëª…", example = "email")
        private String field;
        
        /**
         * ê±°ë¶€ëœ ê°’
         */
        @Schema(description = "ê±°ë¶€ëœ ê°’", example = "invalid-email")
        private Object rejectedValue;
        
        /**
         * ì—ëŸ¬ ë©”ì‹œì§€
         */
        @Schema(description = "ì—ëŸ¬ ë©”ì‹œì§€", example = "ì˜¬ë°”ë¥¸ ì´ë©”ì¼ í˜•ì‹ì´ ì•„ë‹™ë‹ˆë‹¤")
        private String message;
    }
}
```

#### ğŸ¯ ì‘ë‹µ í˜•ì‹ í‘œì¤€í™”ì˜ ì¥ì 

##### 1. í´ë¼ì´ì–¸íŠ¸ ê°œë°œ íš¨ìœ¨ì„±
```typescript
// TypeScript í´ë¼ì´ì–¸íŠ¸ ì˜ˆì‹œ
interface ApiResponse<T> {
  success: boolean;
  message: string;
  data?: T;
  error?: {
    hscode: string;
    code: string;
    message: string;
    details?: string;
    timestamp: string;
    path: string;
    actionType?: string;
    fieldErrors?: Array<{
      field: string;
      rejectedValue: any;
      message: string;
    }>;
  };
  timestamp: string;
  path: string;
}

// í†µì¼ëœ ì‘ë‹µ ì²˜ë¦¬
function handleApiResponse<T>(response: ApiResponse<T>): T | never {
  if (response.success) {
    showSuccessMessage(response.message);
    return response.data!;
  } else {
    handleApiError(response.error!);
    throw new Error(response.error!.message);
  }
}
```

##### 2. ì—ëŸ¬ ì²˜ë¦¬ í‘œì¤€í™”
```javascript
// JavaScript í´ë¼ì´ì–¸íŠ¸ ì—ëŸ¬ ì²˜ë¦¬ ì˜ˆì‹œ
function handleApiError(error) {
  // í•„ë“œ ì—ëŸ¬ ì²˜ë¦¬
  if (error.fieldErrors && error.fieldErrors.length > 0) {
    error.fieldErrors.forEach(fieldError => {
      showFieldError(fieldError.field, fieldError.message);
    });
  }
  
  // ì•¡ì…˜ íƒ€ì…ë³„ UI ì²˜ë¦¬
  switch (error.actionType) {
    case 'RETRY':
      showRetryButton();
      break;
    case 'PREVIOUS':
      showPreviousButton();
      break;
    case 'CONFIRM':
    default:
      showConfirmButton();
      break;
  }
  
  // ë©”ì‹œì§€ í‘œì‹œ
  showErrorMessage(error.message, error.details);
}
```

### 6.2 ì„±ê³µ ì‘ë‹µ íŒ¨í„´

ì„±ê³µ ì‘ë‹µì€ í´ë¼ì´ì–¸íŠ¸ê°€ ìš”ì²­ì„ ì„±ê³µì ìœ¼ë¡œ ì²˜ë¦¬í–ˆìŒì„ ëª…í™•í•˜ê²Œ ì „ë‹¬í•˜ê³ , í•„ìš”í•œ ë°ì´í„°ì™€ ë©”ì‹œì§€ë¥¼ ì œê³µí•©ë‹ˆë‹¤.

#### ğŸ¯ ê¸°ë³¸ ì„±ê³µ ì‘ë‹µ ë©”ì„œë“œ

##### 1. ë‹¨ì¼ ë°ì´í„° ì¡°íšŒ (200 OK)
```java
/**
 * ë‹¨ì¼ ë°ì´í„° ì„±ê³µ ì‘ë‹µ ìƒì„±
 * 
 * <p>ì¡°íšŒ, ìˆ˜ì • ë“±ì˜ ì„±ê³µì ì¸ ì²˜ë¦¬ ê²°ê³¼ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.</p>
 * 
 * @param data ì‘ë‹µ ë°ì´í„°
 * @param message ì„±ê³µ ë©”ì‹œì§€
 * @param <T> ë°ì´í„° íƒ€ì…
 * @return 200 OK ì‘ë‹µ
 */
public static <T> AxResponseEntity<T> ok(T data, String message) {
    AxResponse<T> response = AxResponse.success(data, message);
    return new AxResponseEntity<>(response, HttpStatus.OK);
}

// ì‚¬ìš© ì˜ˆì‹œ
@GetMapping("/{id}")
public AxResponseEntity<UserResponse> getUser(@PathVariable Long id) {
    UserResponse user = userService.getUserById(id);
    return AxResponseEntity.ok(user, "ì‚¬ìš©ì ì •ë³´ë¥¼ ì„±ê³µì ìœ¼ë¡œ ì¡°íšŒí–ˆìŠµë‹ˆë‹¤.");
}
```

##### 2. í˜ì´ì§€ë„¤ì´ì…˜ ì‘ë‹µ (200 OK)
```java
/**
 * í˜ì´ì§€ë„¤ì´ì…˜ ì„±ê³µ ì‘ë‹µ ìƒì„±
 * 
 * <p>Spring Dataì˜ Page ê°ì²´ë¥¼ PageResponseë¡œ ë³€í™˜í•˜ì—¬ 
 * í´ë¼ì´ì–¸íŠ¸ ì¹œí™”ì ì¸ í˜ì´ì§• ì •ë³´ë¥¼ ì œê³µí•©ë‹ˆë‹¤.</p>
 * 
 * @param pageResponse í˜ì´ì§€ ì‘ë‹µ ë°ì´í„°
 * @param message ì„±ê³µ ë©”ì‹œì§€
 * @param <T> ë°ì´í„° íƒ€ì…
 * @return 200 OK í˜ì´ì§€ ì‘ë‹µ
 */
public static <T> AxResponseEntity<PageResponse<T>> okPage(PageResponse<T> pageResponse, String message) {
    AxResponse<PageResponse<T>> response = AxResponse.success(pageResponse, message);
    return new AxResponseEntity<>(response, HttpStatus.OK);
}

// ì‚¬ìš© ì˜ˆì‹œ
@GetMapping
public AxResponseEntity<PageResponse<UserResponse>> getUsers(
        @PageableDefault(size = 20) Pageable pageable,
        @RequestParam(required = false) String search) {
    PageResponse<UserResponse> users = userService.getUsers(pageable, search);
    return AxResponseEntity.okPage(users, "ì‚¬ìš©ì ëª©ë¡ì„ ì„±ê³µì ìœ¼ë¡œ ì¡°íšŒí–ˆìŠµë‹ˆë‹¤.");
}
```

##### 3. ë¦¬ì†ŒìŠ¤ ìƒì„± (201 CREATED)
```java
/**
 * ë¦¬ì†ŒìŠ¤ ìƒì„± ì„±ê³µ ì‘ë‹µ ìƒì„±
 * 
 * <p>ìƒˆë¡œìš´ ë¦¬ì†ŒìŠ¤ê°€ ì„±ê³µì ìœ¼ë¡œ ìƒì„±ë˜ì—ˆìŒì„ ë‚˜íƒ€ëƒ…ë‹ˆë‹¤.</p>
 * 
 * @param data ìƒì„±ëœ ë¦¬ì†ŒìŠ¤ ë°ì´í„°
 * @param message ìƒì„± ì„±ê³µ ë©”ì‹œì§€
 * @param <T> ë°ì´í„° íƒ€ì…
 * @return 201 CREATED ì‘ë‹µ
 */
public static <T> AxResponseEntity<T> created(T data, String message) {
    AxResponse<T> response = AxResponse.success(data, message);
    return new AxResponseEntity<>(response, HttpStatus.CREATED);
}

// ì‚¬ìš© ì˜ˆì‹œ
@PostMapping
public AxResponseEntity<UserResponse> createUser(@Valid @RequestBody UserCreateRequest request) {
    UserResponse user = userService.createUser(request);
    return AxResponseEntity.created(user, "ì‚¬ìš©ìê°€ ì„±ê³µì ìœ¼ë¡œ ìƒì„±ë˜ì—ˆìŠµë‹ˆë‹¤.");
}
```

##### 4. ë¦¬ì†ŒìŠ¤ ìˆ˜ì • (200 OK)
```java
/**
 * ë¦¬ì†ŒìŠ¤ ìˆ˜ì • ì„±ê³µ ì‘ë‹µ ìƒì„±
 * 
 * <p>ê¸°ì¡´ ë¦¬ì†ŒìŠ¤ê°€ ì„±ê³µì ìœ¼ë¡œ ìˆ˜ì •ë˜ì—ˆìŒì„ ë‚˜íƒ€ëƒ…ë‹ˆë‹¤.</p>
 * 
 * @param data ìˆ˜ì •ëœ ë¦¬ì†ŒìŠ¤ ë°ì´í„°
 * @param message ìˆ˜ì • ì„±ê³µ ë©”ì‹œì§€
 * @param <T> ë°ì´í„° íƒ€ì…
 * @return 200 OK ì‘ë‹µ
 */
public static <T> AxResponseEntity<T> updated(T data, String message) {
    AxResponse<T> response = AxResponse.success(data, message);
    return new AxResponseEntity<>(response, HttpStatus.OK);
}

// ì‚¬ìš© ì˜ˆì‹œ
@PutMapping("/{id}")
public AxResponseEntity<UserResponse> updateUser(
        @PathVariable Long id, 
        @Valid @RequestBody UserUpdateRequest request) {
    UserResponse user = userService.updateUser(id, request);
    return AxResponseEntity.updated(user, "ì‚¬ìš©ì ì •ë³´ê°€ ì„±ê³µì ìœ¼ë¡œ ìˆ˜ì •ë˜ì—ˆìŠµë‹ˆë‹¤.");
}
```

##### 5. ë¦¬ì†ŒìŠ¤ ì‚­ì œ (200 OK)
```java
/**
 * ë¦¬ì†ŒìŠ¤ ì‚­ì œ ì„±ê³µ ì‘ë‹µ ìƒì„±
 * 
 * <p>ë¦¬ì†ŒìŠ¤ê°€ ì„±ê³µì ìœ¼ë¡œ ì‚­ì œë˜ì—ˆìŒì„ ë‚˜íƒ€ëƒ…ë‹ˆë‹¤.
 * ì¼ë°˜ì ìœ¼ë¡œ ë°ì´í„°ëŠ” í¬í•¨í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.</p>
 * 
 * @param message ì‚­ì œ ì„±ê³µ ë©”ì‹œì§€
 * @return 200 OK ì‘ë‹µ
 */
public static AxResponseEntity<Void> deleted(String message) {
    AxResponse<Void> response = AxResponse.success(null, message);
    return new AxResponseEntity<>(response, HttpStatus.OK);
}

// ì‚¬ìš© ì˜ˆì‹œ
@DeleteMapping("/{id}")
public AxResponseEntity<Void> deleteUser(@PathVariable Long id) {
    userService.deleteUser(id);
    return AxResponseEntity.deleted("ì‚¬ìš©ìê°€ ì„±ê³µì ìœ¼ë¡œ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.");
}
```

#### ğŸ¨ ê³ ê¸‰ ì„±ê³µ ì‘ë‹µ íŒ¨í„´

##### 1. ì¡°ê±´ë¶€ ì‘ë‹µ ë°ì´í„°
```java
/**
 * ì¡°ê±´ë¶€ ë°ì´í„°ë¥¼ í¬í•¨í•œ ì„±ê³µ ì‘ë‹µ
 * 
 * @param data ì‘ë‹µ ë°ì´í„° (null ê°€ëŠ¥)
 * @param message ì„±ê³µ ë©”ì‹œì§€
 * @param <T> ë°ì´í„° íƒ€ì…
 * @return ì¡°ê±´ë¶€ ì„±ê³µ ì‘ë‹µ
 */
public static <T> AxResponseEntity<T> okOptional(Optional<T> data, String message) {
    AxResponse<T> response = AxResponse.success(data.orElse(null), message);
    return new AxResponseEntity<>(response, HttpStatus.OK);
}

// ì‚¬ìš© ì˜ˆì‹œ
@GetMapping("/{id}/profile")
public AxResponseEntity<UserProfileResponse> getUserProfile(@PathVariable Long id) {
    Optional<UserProfileResponse> profile = userService.getUserProfile(id);
    return AxResponseEntity.okOptional(profile, 
        profile.isPresent() ? 
        "ì‚¬ìš©ì í”„ë¡œí•„ì„ ì„±ê³µì ìœ¼ë¡œ ì¡°íšŒí–ˆìŠµë‹ˆë‹¤." : 
        "ì‚¬ìš©ì í”„ë¡œí•„ì´ ì—†ìŠµë‹ˆë‹¤.");
}
```

##### 2. ë°°ì¹˜ ì²˜ë¦¬ ê²°ê³¼
```java
/**
 * ë°°ì¹˜ ì²˜ë¦¬ ê²°ê³¼ ì‘ë‹µ
 * 
 * @param results ë°°ì¹˜ ì²˜ë¦¬ ê²°ê³¼ ëª©ë¡
 * @param message ì„±ê³µ ë©”ì‹œì§€
 * @param <T> ê²°ê³¼ íƒ€ì…
 * @return ë°°ì¹˜ ì²˜ë¦¬ ì‘ë‹µ
 */
public static <T> AxResponseEntity<BatchResult<T>> batch(BatchResult<T> results, String message) {
    AxResponse<BatchResult<T>> response = AxResponse.success(results, message);
    return new AxResponseEntity<>(response, HttpStatus.OK);
}

// BatchResult DTO
@Getter
@Builder
public class BatchResult<T> {
    private List<T> successful;     // ì„±ê³µí•œ í•­ëª©ë“¤
    private List<BatchError> failed; // ì‹¤íŒ¨í•œ í•­ëª©ë“¤
    private int totalCount;         // ì „ì²´ ì²˜ë¦¬ ìˆ˜
    private int successCount;       // ì„±ê³µ ìˆ˜
    private int failureCount;       // ì‹¤íŒ¨ ìˆ˜
    
    @Getter
    @Builder
    public static class BatchError {
        private Object item;        // ì‹¤íŒ¨í•œ í•­ëª©
        private String errorCode;   // ì—ëŸ¬ ì½”ë“œ
        private String errorMessage; // ì—ëŸ¬ ë©”ì‹œì§€
    }
}

// ì‚¬ìš© ì˜ˆì‹œ
@PostMapping("/batch")
public AxResponseEntity<BatchResult<UserResponse>> createUsersBatch(
        @Valid @RequestBody List<UserCreateRequest> requests) {
    BatchResult<UserResponse> result = userService.createUsersBatch(requests);
    return AxResponseEntity.batch(result, 
        String.format("ë°°ì¹˜ ì²˜ë¦¬ ì™„ë£Œ: ì„±ê³µ %dê±´, ì‹¤íŒ¨ %dê±´", 
                     result.getSuccessCount(), result.getFailureCount()));
}
```

##### 3. íŒŒì¼ ë‹¤ìš´ë¡œë“œ ì‘ë‹µ
```java
/**
 * íŒŒì¼ ë‹¤ìš´ë¡œë“œ ì„±ê³µ ì‘ë‹µ
 * 
 * @param fileData íŒŒì¼ ë°ì´í„°
 * @param filename íŒŒì¼ëª…
 * @param contentType ì»¨í…ì¸  íƒ€ì…
 * @return íŒŒì¼ ë‹¤ìš´ë¡œë“œ ì‘ë‹µ
 */
public static AxResponseEntity<byte[]> file(byte[] fileData, String filename, String contentType) {
    HttpHeaders headers = new HttpHeaders();
    headers.setContentType(MediaType.parseMediaType(contentType));
    headers.setContentDisposition(ContentDisposition.builder("attachment")
            .filename(filename, StandardCharsets.UTF_8)
            .build());
    headers.setContentLength(fileData.length);
    
    AxResponse<byte[]> response = AxResponse.success(fileData, "íŒŒì¼ ë‹¤ìš´ë¡œë“œê°€ ì¤€ë¹„ë˜ì—ˆìŠµë‹ˆë‹¤.");
    return new AxResponseEntity<>(response, headers, HttpStatus.OK);
}

// ì‚¬ìš© ì˜ˆì‹œ
@GetMapping("/{id}/download")
public AxResponseEntity<byte[]> downloadUserReport(@PathVariable Long id) {
    FileDownloadResult result = userService.generateUserReport(id);
    return AxResponseEntity.file(result.getData(), result.getFilename(), result.getContentType());
}
```

#### ğŸ“Š ì„±ê³µ ì‘ë‹µ ë©”ì‹œì§€ ê°€ì´ë“œë¼ì¸

##### 1. ëª…í™•í•˜ê³  êµ¬ì²´ì ì¸ ë©”ì‹œì§€
```java
// âŒ ë‚˜ìœ ì˜ˆì‹œ
return AxResponseEntity.ok(user, "ì„±ê³µ");
return AxResponseEntity.ok(users, "ì¡°íšŒ ì™„ë£Œ");

// âœ… ì¢‹ì€ ì˜ˆì‹œ
return AxResponseEntity.ok(user, "ì‚¬ìš©ì ì •ë³´ë¥¼ ì„±ê³µì ìœ¼ë¡œ ì¡°íšŒí–ˆìŠµë‹ˆë‹¤.");
return AxResponseEntity.okPage(users, "ì´ " + users.getTotalElements() + "ê±´ì˜ ì‚¬ìš©ìë¥¼ ì¡°íšŒí–ˆìŠµë‹ˆë‹¤.");
```

##### 2. ì•¡ì…˜ê³¼ ê²°ê³¼ë¥¼ ëª…ì‹œ
```java
// âœ… ì•¡ì…˜ + ê²°ê³¼ ëª…ì‹œ
return AxResponseEntity.created(user, "ìƒˆë¡œìš´ ì‚¬ìš©ì ê³„ì •ì´ ìƒì„±ë˜ì—ˆìŠµë‹ˆë‹¤.");
return AxResponseEntity.updated(user, "ì‚¬ìš©ì ì •ë³´ê°€ ì„±ê³µì ìœ¼ë¡œ ìˆ˜ì •ë˜ì—ˆìŠµë‹ˆë‹¤.");
return AxResponseEntity.deleted("ì‚¬ìš©ì ê³„ì •ì´ ì™„ì „íˆ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.");
```

##### 3. ë‹¤êµ­ì–´ ë©”ì‹œì§€ ì ìš©
```java
// MessageSourceë¥¼ í™œìš©í•œ ë‹¤êµ­ì–´ ë©”ì‹œì§€
@RestController
@RequiredArgsConstructor
public class UserController {
    
    private final MessageSource messageSource;
    
    @GetMapping("/{id}")
    public AxResponseEntity<UserResponse> getUser(@PathVariable Long id, Locale locale) {
        UserResponse user = userService.getUserById(id);
        String message = messageSource.getMessage("user.get.success", null, locale);
        return AxResponseEntity.ok(user, message);
    }
}
```

### 6.3 ì‹¤íŒ¨ ì‘ë‹µ íŒ¨í„´

ì‹¤íŒ¨ ì‘ë‹µì€ í´ë¼ì´ì–¸íŠ¸ê°€ ì˜¤ë¥˜ë¥¼ ì •í™•íˆ ì´í•´í•˜ê³  ì ì ˆí•œ ì¡°ì¹˜ë¥¼ ì·¨í•  ìˆ˜ ìˆë„ë¡ ìƒì„¸í•˜ê³  ìœ ìš©í•œ ì •ë³´ë¥¼ ì œê³µí•´ì•¼ í•©ë‹ˆë‹¤.

#### ğŸš¨ ê¸°ë³¸ ì‹¤íŒ¨ ì‘ë‹µ ë©”ì„œë“œ

##### 1. ErrorCode ê¸°ë°˜ ì‘ë‹µ (ê¶Œì¥)
```java
/**
 * ErrorCodeë¥¼ ì‚¬ìš©í•œ ì‹¤íŒ¨ ì‘ë‹µ ìƒì„±
 * 
 * <p>ErrorCode ê°ì²´ì˜ ì •ë³´ë¥¼ í™œìš©í•˜ì—¬ í‘œì¤€í™”ëœ ì—ëŸ¬ ì‘ë‹µì„ ìƒì„±í•©ë‹ˆë‹¤.
 * HTTP ìƒíƒœ ì½”ë“œ, ì—ëŸ¬ ì½”ë“œ, ë©”ì‹œì§€ê°€ ìë™ìœ¼ë¡œ ì„¤ì •ë©ë‹ˆë‹¤.</p>
 * 
 * @param errorCode ErrorCode ê°ì²´
 * @param <T> ë°ì´í„° íƒ€ì…
 * @return ì—ëŸ¬ ì‘ë‹µ
 */
public static <T> AxResponseEntity<T> error(ErrorCode errorCode) {
    AxError axError = AxError.builder()
            .hscode(errorCode.getStatus().name())
            .code(errorCode.getCode())
            .message(errorCode.getDefaultMessage())
            .timestamp(LocalDateTime.now())
            .path(getCurrentRequestPath())
            .actionType(errorCode.getActionType())
            .build();
    
    AxResponse<T> response = AxResponse.failure(errorCode.getDefaultMessage(), axError);
    return new AxResponseEntity<>(response, errorCode.getStatus());
}

// ì‚¬ìš© ì˜ˆì‹œ
@GetMapping("/{id}")
public AxResponseEntity<UserResponse> getUser(@PathVariable Long id) {
    Optional<User> user = userRepository.findById(id);
    if (user.isEmpty()) {
        return AxResponseEntity.error(ErrorCode.USER_NOT_FOUND);
    }
    UserResponse userResponse = userMapper.toResponse(user.get());
    return AxResponseEntity.ok(userResponse, "ì‚¬ìš©ì ì •ë³´ë¥¼ ì„±ê³µì ìœ¼ë¡œ ì¡°íšŒí–ˆìŠµë‹ˆë‹¤.");
}
```

##### 2. ì»¤ìŠ¤í…€ ë©”ì‹œì§€ì™€ ìƒì„¸ ì •ë³´ í¬í•¨
```java
/**
 * ErrorCodeì™€ ì»¤ìŠ¤í…€ ë©”ì‹œì§€, ìƒì„¸ ì •ë³´ë¥¼ í¬í•¨í•œ ì‹¤íŒ¨ ì‘ë‹µ ìƒì„±
 * 
 * @param errorCode ErrorCode ê°ì²´
 * @param customMessage ì»¤ìŠ¤í…€ ë©”ì‹œì§€ (ìƒí™©ë³„ êµ¬ì²´ì  ë©”ì‹œì§€)
 * @param details ìƒì„¸ ì •ë³´ (ë””ë²„ê¹…ì´ë‚˜ ë¬¸ì œ í•´ê²°ì— ë„ì›€ì´ ë˜ëŠ” ì •ë³´)
 * @param <T> ë°ì´í„° íƒ€ì…
 * @return ìƒì„¸ ì—ëŸ¬ ì‘ë‹µ
 */
public static <T> AxResponseEntity<T> error(ErrorCode errorCode, String customMessage, String details) {
    AxError axError = AxError.builder()
            .hscode(errorCode.getStatus().name())
            .code(errorCode.getCode())
            .message(customMessage)
            .details(details)
            .timestamp(LocalDateTime.now())
            .path(getCurrentRequestPath())
            .actionType(errorCode.getActionType())
            .build();
    
    AxResponse<T> response = AxResponse.failure(customMessage, axError);
    return new AxResponseEntity<>(response, errorCode.getStatus());
}

// ì‚¬ìš© ì˜ˆì‹œ - ë¹„ì¦ˆë‹ˆìŠ¤ ì˜ˆì™¸ ì²˜ë¦¬
@PostMapping
public AxResponseEntity<UserResponse> createUser(@Valid @RequestBody UserCreateRequest request) {
    if (userService.existsByEmail(request.getEmail())) {
        return AxResponseEntity.error(
            ErrorCode.USER_ALREADY_EXISTS,
            "ì´ë¯¸ ì¡´ì¬í•˜ëŠ” ì´ë©”ì¼ì…ë‹ˆë‹¤",
            String.format("ì´ë©”ì¼ '%s'ëŠ” ì´ë¯¸ ë‹¤ë¥¸ ì‚¬ìš©ìê°€ ì‚¬ìš© ì¤‘ì…ë‹ˆë‹¤. ë‹¤ë¥¸ ì´ë©”ì¼ì„ ì‚¬ìš©í•´ì£¼ì„¸ìš”.", 
                         request.getEmail())
        );
    }
    UserResponse user = userService.createUser(request);
    return AxResponseEntity.created(user, "ì‚¬ìš©ìê°€ ì„±ê³µì ìœ¼ë¡œ ìƒì„±ë˜ì—ˆìŠµë‹ˆë‹¤.");
}
```

##### 3. í•„ë“œ ê²€ì¦ ì—ëŸ¬ í¬í•¨
```java
/**
 * í•„ë“œ ê²€ì¦ ì—ëŸ¬ë¥¼ í¬í•¨í•œ ì‹¤íŒ¨ ì‘ë‹µ ìƒì„±
 * 
 * @param errorCode ErrorCode ê°ì²´
 * @param message ë©”ì‹œì§€
 * @param fieldErrors í•„ë“œ ê²€ì¦ ì—ëŸ¬ ëª©ë¡
 * @param <T> ë°ì´í„° íƒ€ì…
 * @return í•„ë“œ ì—ëŸ¬ í¬í•¨ ì‘ë‹µ
 */
public static <T> AxResponseEntity<T> error(ErrorCode errorCode, String message, 
                                           List<AxError.FieldError> fieldErrors) {
    AxError axError = AxError.builder()
            .hscode(errorCode.getStatus().name())
            .code(errorCode.getCode())
            .message(message)
            .timestamp(LocalDateTime.now())
            .path(getCurrentRequestPath())
            .actionType(errorCode.getActionType())
            .fieldErrors(fieldErrors)
            .build();
    
    AxResponse<T> response = AxResponse.failure(message, axError);
    return new AxResponseEntity<>(response, errorCode.getStatus());
}

// ì‚¬ìš© ì˜ˆì‹œ - ì»¤ìŠ¤í…€ ê²€ì¦ ë¡œì§
@PostMapping
public AxResponseEntity<UserResponse> createUser(@RequestBody UserCreateRequest request) {
    List<AxError.FieldError> validationErrors = validateUserRequest(request);
    if (!validationErrors.isEmpty()) {
        return AxResponseEntity.error(
            ErrorCode.VALIDATION_FAILED,
            "ì…ë ¥ê°’ ê²€ì¦ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤",
            validationErrors
        );
    }
    
    UserResponse user = userService.createUser(request);
    return AxResponseEntity.created(user, "ì‚¬ìš©ìê°€ ì„±ê³µì ìœ¼ë¡œ ìƒì„±ë˜ì—ˆìŠµë‹ˆë‹¤.");
}

/**
 * ì»¤ìŠ¤í…€ ê²€ì¦ ë¡œì§
 */
private List<AxError.FieldError> validateUserRequest(UserCreateRequest request) {
    List<AxError.FieldError> errors = new ArrayList<>();
    
    // ì´ë©”ì¼ ì¤‘ë³µ ê²€ì‚¬
    if (userService.existsByEmail(request.getEmail())) {
        errors.add(AxError.FieldError.builder()
                .field("email")
                .rejectedValue(request.getEmail())
                .message("ì´ë¯¸ ì‚¬ìš© ì¤‘ì¸ ì´ë©”ì¼ì…ë‹ˆë‹¤")
                .build());
    }
    
    // ë¹„ë°€ë²ˆí˜¸ ë³µì¡ì„± ê²€ì‚¬
    if (!isValidPassword(request.getPassword())) {
        errors.add(AxError.FieldError.builder()
                .field("password")
                .rejectedValue("****")  // ë¯¼ê° ì •ë³´ ë§ˆìŠ¤í‚¹
                .message("ë¹„ë°€ë²ˆí˜¸ëŠ” ì˜ë¬¸ì, ìˆ«ì, íŠ¹ìˆ˜ë¬¸ìë¥¼ í¬í•¨í•˜ì—¬ 8ì ì´ìƒì´ì–´ì•¼ í•©ë‹ˆë‹¤")
                .build());
    }
    
    return errors;
}
```

#### ğŸ¯ HTTP ìƒíƒœ ì½”ë“œë³„ ì‘ë‹µ ë©”ì„œë“œ

##### 1. 400 Bad Request
```java
/**
 * 400 Bad Request ì‘ë‹µ ìƒì„±
 * 
 * @param message ì—ëŸ¬ ë©”ì‹œì§€
 * @param code êµ¬ì²´ì ì¸ ì—ëŸ¬ ì½”ë“œ
 * @param <T> ë°ì´í„° íƒ€ì…
 * @return 400 ì‘ë‹µ
 */
public static <T> AxResponseEntity<T> badRequest(String message, String code) {
    AxError axError = AxError.builder()
            .hscode("BAD_REQUEST")
            .code(code)
            .message(message)
            .timestamp(LocalDateTime.now())
            .path(getCurrentRequestPath())
            .actionType(AxError.ActionType.CONFIRM)
            .build();
    
    AxResponse<T> response = AxResponse.failure(message, axError);
    return new AxResponseEntity<>(response, HttpStatus.BAD_REQUEST);
}
```

##### 2. 401 Unauthorized
```java
/**
 * 401 Unauthorized ì‘ë‹µ ìƒì„±
 * 
 * @param message ì¸ì¦ ì‹¤íŒ¨ ë©”ì‹œì§€
 * @param <T> ë°ì´í„° íƒ€ì…
 * @return 401 ì‘ë‹µ
 */
public static <T> AxResponseEntity<T> unauthorized(String message) {
    AxError axError = AxError.builder()
            .hscode("UNAUTHORIZED")
            .code("A001")
            .message(message)
            .timestamp(LocalDateTime.now())
            .path(getCurrentRequestPath())
            .actionType(AxError.ActionType.RETRY)
            .build();
    
    AxResponse<T> response = AxResponse.failure(message, axError);
    return new AxResponseEntity<>(response, HttpStatus.UNAUTHORIZED);
}
```

##### 3. 403 Forbidden
```java
/**
 * 403 Forbidden ì‘ë‹µ ìƒì„±
 * 
 * @param message ê¶Œí•œ ë¶€ì¡± ë©”ì‹œì§€
 * @param <T> ë°ì´í„° íƒ€ì…
 * @return 403 ì‘ë‹µ
 */
public static <T> AxResponseEntity<T> forbidden(String message) {
    AxError axError = AxError.builder()
            .hscode("FORBIDDEN")
            .code("A002")
            .message(message)
            .timestamp(LocalDateTime.now())
            .path(getCurrentRequestPath())
            .actionType(AxError.ActionType.PREVIOUS)
            .build();
    
    AxResponse<T> response = AxResponse.failure(message, axError);
    return new AxResponseEntity<>(response, HttpStatus.FORBIDDEN);
}
```

##### 4. 404 Not Found
```java
/**
 * 404 Not Found ì‘ë‹µ ìƒì„±
 * 
 * @param message ë¦¬ì†ŒìŠ¤ ì—†ìŒ ë©”ì‹œì§€
 * @param <T> ë°ì´í„° íƒ€ì…
 * @return 404 ì‘ë‹µ
 */
public static <T> AxResponseEntity<T> notFound(String message) {
    AxError axError = AxError.builder()
            .hscode("NOT_FOUND")
            .code("C003")
            .message(message)
            .timestamp(LocalDateTime.now())
            .path(getCurrentRequestPath())
            .actionType(AxError.ActionType.PREVIOUS)
            .build();
    
    AxResponse<T> response = AxResponse.failure(message, axError);
    return new AxResponseEntity<>(response, HttpStatus.NOT_FOUND);
}
```

#### ğŸ”§ ì‹¤íŒ¨ ì‘ë‹µ ëª¨ë²” ì‚¬ë¡€

##### 1. ë³´ì•ˆì„ ê³ ë ¤í•œ ì—ëŸ¬ ë©”ì‹œì§€
```java
// âŒ ë³´ì•ˆì— ì·¨ì•½í•œ ë©”ì‹œì§€
return AxResponseEntity.unauthorized("user123ì˜ ë¹„ë°€ë²ˆí˜¸ê°€ í‹€ë ¸ìŠµë‹ˆë‹¤");
return AxResponseEntity.notFound("users í…Œì´ë¸”ì—ì„œ ID 123ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤");

// âœ… ë³´ì•ˆì„ ê³ ë ¤í•œ ë©”ì‹œì§€
return AxResponseEntity.unauthorized("ì‚¬ìš©ì ì¸ì¦ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤");
return AxResponseEntity.notFound("ìš”ì²­í•œ ì‚¬ìš©ìë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤");
```

##### 2. ì‚¬ìš©ì ì¹œí™”ì ì¸ ì—ëŸ¬ ë©”ì‹œì§€
```java
// âŒ ê¸°ìˆ ì ì¸ ë©”ì‹œì§€
return AxResponseEntity.error(ErrorCode.VALIDATION_FAILED, "javax.validation.ConstraintViolationException");

// âœ… ì‚¬ìš©ì ì¹œí™”ì ì¸ ë©”ì‹œì§€
return AxResponseEntity.error(ErrorCode.VALIDATION_FAILED, "ì…ë ¥í•˜ì‹  ì •ë³´ë¥¼ ë‹¤ì‹œ í™•ì¸í•´ ì£¼ì„¸ìš”");
```

##### 3. ë¬¸ì œ í•´ê²° ê°€ì´ë“œ í¬í•¨
```java
// âœ… í•´ê²° ë°©ì•ˆ ì œì‹œ
return AxResponseEntity.error(
    ErrorCode.FILE_SIZE_EXCEEDED,
    "íŒŒì¼ í¬ê¸°ê°€ ì œí•œì„ ì´ˆê³¼í–ˆìŠµë‹ˆë‹¤",
    "íŒŒì¼ í¬ê¸°ëŠ” 10MB ì´í•˜ì—¬ì•¼ í•©ë‹ˆë‹¤. íŒŒì¼ì„ ì••ì¶•í•˜ê±°ë‚˜ ë‹¤ë¥¸ íŒŒì¼ì„ ì„ íƒí•´ ì£¼ì„¸ìš”."
);

return AxResponseEntity.error(
    ErrorCode.INVALID_EMAIL_FORMAT,
    "ì˜¬ë°”ë¥´ì§€ ì•Šì€ ì´ë©”ì¼ í˜•ì‹ì…ë‹ˆë‹¤",
    "ì´ë©”ì¼ì€ 'example@domain.com' í˜•ì‹ìœ¼ë¡œ ì…ë ¥í•´ ì£¼ì„¸ìš”."
);
```

---

## 7. ê³„ì¸µë³„ ì—ëŸ¬ ì²˜ë¦¬ ì „ëµ

### 7.1 Controller ê³„ì¸µ ì—ëŸ¬ ì²˜ë¦¬

Controller ê³„ì¸µì€ í´ë¼ì´ì–¸íŠ¸ì™€ ì§ì ‘ ì†Œí†µí•˜ëŠ” ì¸í„°í˜ì´ìŠ¤ë¡œì„œ, ì‚¬ìš©ì ì¹œí™”ì ì¸ ì—ëŸ¬ ì‘ë‹µì„ ì œê³µí•˜ê³  ì ì ˆí•œ HTTP ìƒíƒœ ì½”ë“œë¥¼ ì„¤ì •í•˜ëŠ” ì—­í• ì„ ë‹´í•©ë‹ˆë‹¤.

#### ğŸ¯ Controller ê³„ì¸µì˜ ì±…ì„

##### 1. ì…ë ¥ ê²€ì¦ ë° ë³€í™˜
```java
/**
 * ì‚¬ìš©ì ì»¨íŠ¸ë¡¤ëŸ¬
 * 
 * <p>ì‚¬ìš©ì ê´€ë ¨ REST APIë¥¼ ì œê³µí•˜ë©°, ì…ë ¥ ê²€ì¦ê³¼ ì‘ë‹µ ë³€í™˜ì„ ë‹´ë‹¹í•©ë‹ˆë‹¤.</p>
 * 
 * @author ByounggwanLee
 * @since 2025-10-09
 */
@RestController
@RequestMapping("/api/v1/users")
@RequiredArgsConstructor
@Validated  // ë©”ì„œë“œ ë ˆë²¨ ê²€ì¦ í™œì„±í™”
@Slf4j
public class UserController {
    
    private final UserService userService;
    private final MessageSource messageSource;
    
    /**
     * ì‚¬ìš©ì ìƒì„±
     * 
     * @param request ì‚¬ìš©ì ìƒì„± ìš”ì²­
     * @return ìƒì„±ëœ ì‚¬ìš©ì ì •ë³´
     */
    @PostMapping
    @Operation(summary = "ì‚¬ìš©ì ìƒì„±", description = "ìƒˆë¡œìš´ ì‚¬ìš©ìë¥¼ ìƒì„±í•©ë‹ˆë‹¤")
    @ApiResponses({
        @ApiResponse(responseCode = "201", description = "ì‚¬ìš©ì ìƒì„± ì„±ê³µ"),
        @ApiResponse(responseCode = "400", description = "ì˜ëª»ëœ ìš”ì²­ ë°ì´í„°"),
        @ApiResponse(responseCode = "409", description = "ì´ë©”ì¼ ì¤‘ë³µ")
    })
    public AxResponseEntity<UserResponse> createUser(
            @Valid @RequestBody UserCreateRequest request,
            Locale locale) {
        
        try {
            // ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ ìœ„ì„
            UserResponse user = userService.createUser(request);
            
            // ì„±ê³µ ë©”ì‹œì§€ ë‹¤êµ­ì–´ ì²˜ë¦¬
            String message = messageSource.getMessage("user.create.success", null, locale);
            
            return AxResponseEntity.created(user, message);
            
        } catch (BusinessException ex) {
            // ë¹„ì¦ˆë‹ˆìŠ¤ ì˜ˆì™¸ëŠ” GlobalExceptionHandlerì—ì„œ ì²˜ë¦¬
            throw ex;
        } catch (Exception ex) {
            // ì˜ˆìƒì¹˜ ëª»í•œ ì˜¤ë¥˜ ë¡œê¹… ë° ì¬ë˜ì§€ê¸°
            log.error("Unexpected error while creating user", ex);
            throw new BusinessException(ErrorCode.INTERNAL_SERVER_ERROR, 
                "ì‚¬ìš©ì ìƒì„± ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤");
        }
    }
    
    /**
     * ì‚¬ìš©ì ì¡°íšŒ (ID ê¸°ë°˜)
     * 
     * @param id ì‚¬ìš©ì ID
     * @return ì‚¬ìš©ì ì •ë³´
     */
    @GetMapping("/{id}")
    @Operation(summary = "ì‚¬ìš©ì ì¡°íšŒ", description = "IDë¡œ ì‚¬ìš©ìë¥¼ ì¡°íšŒí•©ë‹ˆë‹¤")
    public AxResponseEntity<UserResponse> getUser(
            @PathVariable @Positive(message = "ì‚¬ìš©ì IDëŠ” ì–‘ìˆ˜ì—¬ì•¼ í•©ë‹ˆë‹¤") Long id,
            Locale locale) {
        
        UserResponse user = userService.getUserById(id);
        String message = messageSource.getMessage("user.get.success", null, locale);
        
        return AxResponseEntity.ok(user, message);
    }
    
    /**
     * ì‚¬ìš©ì ëª©ë¡ ì¡°íšŒ (í˜ì´ì§•)
     * 
     * @param pageable í˜ì´ì§• ì •ë³´
     * @param search ê²€ìƒ‰ í‚¤ì›Œë“œ
     * @return ì‚¬ìš©ì ëª©ë¡
     */
    @GetMapping
    @Operation(summary = "ì‚¬ìš©ì ëª©ë¡ ì¡°íšŒ", description = "í˜ì´ì§•ëœ ì‚¬ìš©ì ëª©ë¡ì„ ì¡°íšŒí•©ë‹ˆë‹¤")
    public AxResponseEntity<PageResponse<UserResponse>> getUsers(
            @PageableDefault(size = 20, sort = "createdAt", direction = Sort.Direction.DESC) Pageable pageable,
            @RequestParam(required = false) @Size(min = 2, max = 50, message = "ê²€ìƒ‰ì–´ëŠ” 2~50ì ì‚¬ì´ì—¬ì•¼ í•©ë‹ˆë‹¤") String search,
            Locale locale) {
        
        PageResponse<UserResponse> users = userService.getUsers(pageable, search);
        String message = messageSource.getMessage("user.list.success", 
            new Object[]{users.getTotalElements()}, locale);
        
        return AxResponseEntity.okPage(users, message);
    }
    
    /**
     * ì‚¬ìš©ì ì •ë³´ ìˆ˜ì •
     * 
     * @param id ì‚¬ìš©ì ID
     * @param request ìˆ˜ì • ìš”ì²­
     * @return ìˆ˜ì •ëœ ì‚¬ìš©ì ì •ë³´
     */
    @PutMapping("/{id}")
    @Operation(summary = "ì‚¬ìš©ì ìˆ˜ì •", description = "ì‚¬ìš©ì ì •ë³´ë¥¼ ìˆ˜ì •í•©ë‹ˆë‹¤")
    public AxResponseEntity<UserResponse> updateUser(
            @PathVariable @Positive Long id,
            @Valid @RequestBody UserUpdateRequest request,
            Locale locale) {
        
        // ID ì¼ì¹˜ì„± ê²€ì¦ (ì„ íƒì )
        if (request.getId() != null && !request.getId().equals(id)) {
            return AxResponseEntity.badRequest(
                "ê²½ë¡œì˜ IDì™€ ìš”ì²­ ë³¸ë¬¸ì˜ IDê°€ ì¼ì¹˜í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤", "C001");
        }
        
        UserResponse user = userService.updateUser(id, request);
        String message = messageSource.getMessage("user.update.success", null, locale);
        
        return AxResponseEntity.updated(user, message);
    }
    
    /**
     * ì‚¬ìš©ì ì‚­ì œ
     * 
     * @param id ì‚¬ìš©ì ID
     * @return ì‚­ì œ ì™„ë£Œ ì‘ë‹µ
     */
    @DeleteMapping("/{id}")
    @Operation(summary = "ì‚¬ìš©ì ì‚­ì œ", description = "ì‚¬ìš©ìë¥¼ ì‚­ì œí•©ë‹ˆë‹¤")
    public AxResponseEntity<Void> deleteUser(
            @PathVariable @Positive Long id,
            Authentication authentication,
            Locale locale) {
        
        // ê¶Œí•œ í™•ì¸ (ì„ íƒì  - ì¼ë°˜ì ìœ¼ë¡œ Securityì—ì„œ ì²˜ë¦¬)
        if (!userService.canDeleteUser(authentication.getName(), id)) {
            String message = messageSource.getMessage("error.access.denied", null, locale);
            return AxResponseEntity.forbidden(message);
        }
        
        userService.deleteUser(id);
        String message = messageSource.getMessage("user.delete.success", null, locale);
        
        return AxResponseEntity.deleted(message);
    }
}
```

##### 2. ì…ë ¥ ê²€ì¦ ì „ëµ

###### Bean Validation í™œìš©
```java
/**
 * ì‚¬ìš©ì ìƒì„± ìš”ì²­ DTO
 */
@Getter
@Setter
@NoArgsConstructor
@AllArgsConstructor
@Builder
public class UserCreateRequest {
    
    @NotBlank(message = "ì´ë¦„ì€ í•„ìˆ˜ì…ë‹ˆë‹¤")
    @Size(min = 2, max = 50, message = "ì´ë¦„ì€ 2~50ì ì‚¬ì´ì—¬ì•¼ í•©ë‹ˆë‹¤")
    private String name;
    
    @NotBlank(message = "ì´ë©”ì¼ì€ í•„ìˆ˜ì…ë‹ˆë‹¤")
    @Email(message = "ì˜¬ë°”ë¥¸ ì´ë©”ì¼ í˜•ì‹ì´ ì•„ë‹™ë‹ˆë‹¤")
    private String email;
    
    @NotBlank(message = "ë¹„ë°€ë²ˆí˜¸ëŠ” í•„ìˆ˜ì…ë‹ˆë‹¤")
    @Pattern(regexp = "^(?=.*[A-Za-z])(?=.*\\d)(?=.*[@$!%*#?&])[A-Za-z\\d@$!%*#?&]{8,}$",
             message = "ë¹„ë°€ë²ˆí˜¸ëŠ” ì˜ë¬¸ì, ìˆ«ì, íŠ¹ìˆ˜ë¬¸ìë¥¼ í¬í•¨í•˜ì—¬ 8ì ì´ìƒì´ì–´ì•¼ í•©ë‹ˆë‹¤")
    private String password;
    
    @Min(value = 18, message = "ë‚˜ì´ëŠ” 18ì„¸ ì´ìƒì´ì–´ì•¼ í•©ë‹ˆë‹¤")
    @Max(value = 120, message = "ë‚˜ì´ëŠ” 120ì„¸ ì´í•˜ì—¬ì•¼ í•©ë‹ˆë‹¤")
    private Integer age;
    
    @Pattern(regexp = "^01[0-9]-\\d{3,4}-\\d{4}$", message = "ì˜¬ë°”ë¥¸ íœ´ëŒ€í° ë²ˆí˜¸ í˜•ì‹ì´ ì•„ë‹™ë‹ˆë‹¤")
    private String phoneNumber;
}
```

###### ì»¤ìŠ¤í…€ ê²€ì¦ ë¡œì§
```java
/**
 * ì»¤ìŠ¤í…€ ê²€ì¦ ë©”ì„œë“œ
 */
@PostMapping
public AxResponseEntity<UserResponse> createUser(@Valid @RequestBody UserCreateRequest request) {
    
    // ì¶”ê°€ ë¹„ì¦ˆë‹ˆìŠ¤ ê²€ì¦
    List<AxError.FieldError> customValidationErrors = performCustomValidation(request);
    
    if (!customValidationErrors.isEmpty()) {
        return AxResponseEntity.error(
            ErrorCode.VALIDATION_FAILED,
            "ì…ë ¥ê°’ ê²€ì¦ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤",
            customValidationErrors
        );
    }
    
    UserResponse user = userService.createUser(request);
    return AxResponseEntity.created(user, "ì‚¬ìš©ìê°€ ì„±ê³µì ìœ¼ë¡œ ìƒì„±ë˜ì—ˆìŠµë‹ˆë‹¤.");
}

/**
 * ì»¤ìŠ¤í…€ ê²€ì¦ ìˆ˜í–‰
 */
private List<AxError.FieldError> performCustomValidation(UserCreateRequest request) {
    List<AxError.FieldError> errors = new ArrayList<>();
    
    // ì´ë©”ì¼ ì¤‘ë³µ ê²€ì‚¬
    if (userService.existsByEmail(request.getEmail())) {
        errors.add(createFieldError("email", request.getEmail(), "ì´ë¯¸ ì‚¬ìš© ì¤‘ì¸ ì´ë©”ì¼ì…ë‹ˆë‹¤"));
    }
    
    // ì „í™”ë²ˆí˜¸ ì¤‘ë³µ ê²€ì‚¬
    if (request.getPhoneNumber() != null && userService.existsByPhoneNumber(request.getPhoneNumber())) {
        errors.add(createFieldError("phoneNumber", request.getPhoneNumber(), "ì´ë¯¸ ì‚¬ìš© ì¤‘ì¸ ì „í™”ë²ˆí˜¸ì…ë‹ˆë‹¤"));
    }
    
    // ë¹„ë°€ë²ˆí˜¸ ë³µì¡ì„± ì¶”ê°€ ê²€ì‚¬ (ì˜ˆ: ì—°ì† ë¬¸ì ê¸ˆì§€)
    if (hasConsecutiveCharacters(request.getPassword())) {
        errors.add(createFieldError("password", "****", "ì—°ì†ëœ ë¬¸ìë¥¼ ì‚¬ìš©í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤"));
    }
    
    return errors;
}

/**
 * FieldError ìƒì„± í—¬í¼ ë©”ì„œë“œ
 */
private AxError.FieldError createFieldError(String field, Object rejectedValue, String message) {
    return AxError.FieldError.builder()
            .field(field)
            .rejectedValue(rejectedValue)
            .message(message)
            .build();
}
```

##### 3. ì¡°ê±´ë¶€ ì‘ë‹µ ì²˜ë¦¬

###### Optional ë°ì´í„° ì²˜ë¦¬
```java
/**
 * ì‚¬ìš©ì í”„ë¡œí•„ ì¡°íšŒ (ìˆì„ ìˆ˜ë„, ì—†ì„ ìˆ˜ë„ ìˆìŒ)
 */
@GetMapping("/{id}/profile")
public AxResponseEntity<UserProfileResponse> getUserProfile(@PathVariable Long id) {
    Optional<UserProfileResponse> profile = userService.getUserProfile(id);
    
    if (profile.isPresent()) {
        return AxResponseEntity.ok(profile.get(), "ì‚¬ìš©ì í”„ë¡œí•„ì„ ì„±ê³µì ìœ¼ë¡œ ì¡°íšŒí–ˆìŠµë‹ˆë‹¤.");
    } else {
        return AxResponseEntity.ok(null, "ì‚¬ìš©ì í”„ë¡œí•„ì´ ì„¤ì •ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.");
    }
}
```

###### ì¡°ê±´ë¶€ ê¶Œí•œ ê²€ì‚¬
```java
/**
 * ì‚¬ìš©ìë³„ ì ‘ê·¼ ê¶Œí•œì´ ìˆëŠ” ë¦¬ì†ŒìŠ¤ ì¡°íšŒ
 */
@GetMapping("/{id}/sensitive-data")
public AxResponseEntity<UserSensitiveDataResponse> getSensitiveData(
        @PathVariable Long id,
        Authentication authentication) {
    
    // ë³¸ì¸ ë˜ëŠ” ê´€ë¦¬ìë§Œ ì ‘ê·¼ ê°€ëŠ¥
    if (!userService.canAccessSensitiveData(authentication.getName(), id)) {
        return AxResponseEntity.forbidden("í•´ë‹¹ ì •ë³´ì— ì ‘ê·¼í•  ê¶Œí•œì´ ì—†ìŠµë‹ˆë‹¤");
    }
    
    UserSensitiveDataResponse data = userService.getSensitiveData(id);
    return AxResponseEntity.ok(data, "ë¯¼ê° ì •ë³´ë¥¼ ì„±ê³µì ìœ¼ë¡œ ì¡°íšŒí–ˆìŠµë‹ˆë‹¤.");
}
```

#### ğŸ”„ Controller ì—ëŸ¬ ì²˜ë¦¬ ëª¨ë²” ì‚¬ë¡€

##### 1. ì˜ˆì™¸ ì „íŒŒ ì „ëµ
```java
@PostMapping
public AxResponseEntity<UserResponse> createUser(@Valid @RequestBody UserCreateRequest request) {
    try {
        // ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ ìˆ˜í–‰
        UserResponse user = userService.createUser(request);
        return AxResponseEntity.created(user, "ì‚¬ìš©ìê°€ ì„±ê³µì ìœ¼ë¡œ ìƒì„±ë˜ì—ˆìŠµë‹ˆë‹¤.");
        
    } catch (ValidationException ex) {
        // ê²€ì¦ ì˜ˆì™¸ëŠ” GlobalExceptionHandlerì—ì„œ ì²˜ë¦¬í•˜ë„ë¡ ì¬ë˜ì§€ê¸°
        throw ex;
        
    } catch (BusinessException ex) {
        // ë¹„ì¦ˆë‹ˆìŠ¤ ì˜ˆì™¸ë„ GlobalExceptionHandlerì—ì„œ ì²˜ë¦¬
        throw ex;
        
    } catch (Exception ex) {
        // ì˜ˆìƒì¹˜ ëª»í•œ ì˜ˆì™¸ëŠ” ë¡œê¹… í›„ ì ì ˆí•œ ë¹„ì¦ˆë‹ˆìŠ¤ ì˜ˆì™¸ë¡œ ë³€í™˜
        log.error("Unexpected error while creating user: {}", request.getEmail(), ex);
        throw new BusinessException(ErrorCode.INTERNAL_SERVER_ERROR, 
            "ì‚¬ìš©ì ìƒì„± ì¤‘ ì˜ˆìƒì¹˜ ëª»í•œ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤");
    }
}
```

##### 2. ë¡œê¹… ì „ëµ
```java
@GetMapping("/{id}")
public AxResponseEntity<UserResponse> getUser(@PathVariable Long id) {
    // ìš”ì²­ ë¡œê¹… (ë””ë²„ê·¸ ë ˆë²¨)
    log.debug("Getting user with ID: {}", id);
    
    try {
        UserResponse user = userService.getUserById(id);
        
        // ì„±ê³µ ë¡œê¹… (ë””ë²„ê·¸ ë ˆë²¨)
        log.debug("Successfully retrieved user: {}", user.getEmail());
        
        return AxResponseEntity.ok(user, "ì‚¬ìš©ì ì •ë³´ë¥¼ ì„±ê³µì ìœ¼ë¡œ ì¡°íšŒí–ˆìŠµë‹ˆë‹¤.");
        
    } catch (BusinessException ex) {
        // ë¹„ì¦ˆë‹ˆìŠ¤ ì˜ˆì™¸ ë¡œê¹… (ì •ë³´ ë ˆë²¨)
        log.info("Business exception while getting user {}: {}", id, ex.getMessage());
        throw ex;
        
    } catch (Exception ex) {
        // ì‹œìŠ¤í…œ ì˜ˆì™¸ ë¡œê¹… (ì—ëŸ¬ ë ˆë²¨)
        log.error("System exception while getting user {}", id, ex);
        throw new BusinessException(ErrorCode.INTERNAL_SERVER_ERROR);
    }
}
```

### 7.2 Service ê³„ì¸µ ì—ëŸ¬ ì²˜ë¦¬

Service ê³„ì¸µì€ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì˜ í•µì‹¬ìœ¼ë¡œì„œ, ë„ë©”ì¸ ê·œì¹™ ê²€ì¦, íŠ¸ëœì­ì…˜ ê´€ë¦¬, ê·¸ë¦¬ê³  ì˜ë¯¸ ìˆëŠ” ë¹„ì¦ˆë‹ˆìŠ¤ ì˜ˆì™¸ ì²˜ë¦¬ë¥¼ ë‹´ë‹¹í•©ë‹ˆë‹¤.

#### ğŸ¯ Service ê³„ì¸µì˜ ì±…ì„

##### 1. ë¹„ì¦ˆë‹ˆìŠ¤ ê·œì¹™ ê²€ì¦ ë° ì˜ˆì™¸ ì²˜ë¦¬
```java
/**
 * ì‚¬ìš©ì ì„œë¹„ìŠ¤
 * 
 * <p>ì‚¬ìš©ì ê´€ë ¨ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì„ ì²˜ë¦¬í•˜ë©°, ë„ë©”ì¸ ê·œì¹™ì„ ê²€ì¦í•˜ê³ 
 * ì ì ˆí•œ ë¹„ì¦ˆë‹ˆìŠ¤ ì˜ˆì™¸ë¥¼ ë°œìƒì‹œí‚µë‹ˆë‹¤.</p>
 * 
 * @author ByounggwanLee
 * @since 2025-10-09
 */
@Service
@RequiredArgsConstructor
@Transactional
@Slf4j
public class UserService {
    
    private final UserRepository userRepository;
    private final UserMapper userMapper;
    private final PasswordEncoder passwordEncoder;
    private final EmailService emailService;
    
    /**
     * ì‚¬ìš©ì ìƒì„±
     * 
     * @param request ì‚¬ìš©ì ìƒì„± ìš”ì²­
     * @return ìƒì„±ëœ ì‚¬ìš©ì ì •ë³´
     * @throws BusinessException ë¹„ì¦ˆë‹ˆìŠ¤ ê·œì¹™ ìœ„ë°˜ ì‹œ
     */
    public UserResponse createUser(UserCreateRequest request) {
        log.debug("Creating user with email: {}", request.getEmail());
        
        // 1. ë¹„ì¦ˆë‹ˆìŠ¤ ê·œì¹™ ê²€ì¦
        validateUserCreationRules(request);
        
        try {
            // 2. ì—”í‹°í‹° ë³€í™˜ ë° ì„¤ì •
            User user = userMapper.toEntity(request);
            user.setPassword(passwordEncoder.encode(request.getPassword()));
            user.setStatus(UserStatus.ACTIVE);
            user.setEmailVerified(false);
            
            // 3. ë°ì´í„° ì €ì¥
            User savedUser = userRepository.save(user);
            
            // 4. í›„ì† ì²˜ë¦¬ (ì´ë©”ì¼ ë°œì†¡ ë“±)
            sendWelcomeEmail(savedUser);
            
            log.info("Successfully created user: {}", savedUser.getEmail());
            return userMapper.toResponse(savedUser);
            
        } catch (DataIntegrityViolationException ex) {
            // ë°ì´í„°ë² ì´ìŠ¤ ì œì•½ ì¡°ê±´ ìœ„ë°˜ (ì¤‘ë³µ í‚¤ ë“±)
            log.warn("Data integrity violation while creating user: {}", request.getEmail(), ex);
            throw new BusinessException(ErrorCode.USER_ALREADY_EXISTS, 
                String.format("ì´ë©”ì¼ '%s'ëŠ” ì´ë¯¸ ì‚¬ìš© ì¤‘ì…ë‹ˆë‹¤", request.getEmail()));
                
        } catch (Exception ex) {
            // ì˜ˆìƒì¹˜ ëª»í•œ ì˜¤ë¥˜
            log.error("Unexpected error while creating user: {}", request.getEmail(), ex);
            throw new BusinessException(ErrorCode.INTERNAL_SERVER_ERROR, 
                "ì‚¬ìš©ì ìƒì„± ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤");
        }
    }
    
    /**
     * ì‚¬ìš©ì ì¡°íšŒ (ID ê¸°ë°˜)
     * 
     * @param id ì‚¬ìš©ì ID
     * @return ì‚¬ìš©ì ì •ë³´
     * @throws BusinessException ì‚¬ìš©ì ì—†ìŒ ë˜ëŠ” ì ‘ê·¼ ë¶ˆê°€ ì‹œ
     */
    @Transactional(readOnly = true)
    public UserResponse getUserById(Long id) {
        log.debug("Getting user by ID: {}", id);
        
        User user = findUserById(id);
        
        // ë¹„ì¦ˆë‹ˆìŠ¤ ê·œì¹™: ë¹„í™œì„±í™”ëœ ì‚¬ìš©ìëŠ” ì¡°íšŒ ë¶ˆê°€
        if (user.getStatus() == UserStatus.INACTIVE) {
            log.warn("Attempted to access inactive user: {}", id);
            throw new BusinessException(ErrorCode.USER_INACTIVE, 
                "ë¹„í™œì„±í™”ëœ ì‚¬ìš©ìì…ë‹ˆë‹¤");
        }
        
        return userMapper.toResponse(user);
    }
    
    /**
     * ì‚¬ìš©ì ëª©ë¡ ì¡°íšŒ (í˜ì´ì§•)
     * 
     * @param pageable í˜ì´ì§• ì •ë³´
     * @param search ê²€ìƒ‰ í‚¤ì›Œë“œ
     * @return ì‚¬ìš©ì ëª©ë¡
     */
    @Transactional(readOnly = true)
    public PageResponse<UserResponse> getUsers(Pageable pageable, String search) {
        log.debug("Getting users - page: {}, size: {}, search: {}", 
            pageable.getPageNumber(), pageable.getPageSize(), search);
        
        try {
            Page<User> userPage = StringUtils.hasText(search) ?
                userRepository.findByNameContainingOrEmailContaining(search, search, pageable) :
                userRepository.findAllByStatus(UserStatus.ACTIVE, pageable);
            
            Page<UserResponse> responsePage = userPage.map(userMapper::toResponse);
            
            log.debug("Found {} users", userPage.getTotalElements());
            return PageResponse.from(responsePage);
            
        } catch (Exception ex) {
            log.error("Error while getting users", ex);
            throw new BusinessException(ErrorCode.INTERNAL_SERVER_ERROR, 
                "ì‚¬ìš©ì ëª©ë¡ ì¡°íšŒ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤");
        }
    }
    
    /**
     * ì‚¬ìš©ì ì •ë³´ ìˆ˜ì •
     * 
     * @param id ì‚¬ìš©ì ID
     * @param request ìˆ˜ì • ìš”ì²­
     * @return ìˆ˜ì •ëœ ì‚¬ìš©ì ì •ë³´
     */
    public UserResponse updateUser(Long id, UserUpdateRequest request) {
        log.debug("Updating user: {} with data: {}", id, request);
        
        User existingUser = findUserById(id);
        
        // ë¹„ì¦ˆë‹ˆìŠ¤ ê·œì¹™ ê²€ì¦
        validateUserUpdateRules(existingUser, request);
        
        try {
            // ë³€ê²½ ì‚¬í•­ ì ìš©
            updateUserFields(existingUser, request);
            
            User updatedUser = userRepository.save(existingUser);
            
            log.info("Successfully updated user: {}", updatedUser.getEmail());
            return userMapper.toResponse(updatedUser);
            
        } catch (DataIntegrityViolationException ex) {
            log.warn("Data integrity violation while updating user: {}", id, ex);
            throw new BusinessException(ErrorCode.DATA_INTEGRITY_VIOLATION, 
                "ìˆ˜ì •í•˜ë ¤ëŠ” ì •ë³´ê°€ ì´ë¯¸ ë‹¤ë¥¸ ì‚¬ìš©ìì— ì˜í•´ ì‚¬ìš© ì¤‘ì…ë‹ˆë‹¤");
                
        } catch (Exception ex) {
            log.error("Unexpected error while updating user: {}", id, ex);
            throw new BusinessException(ErrorCode.INTERNAL_SERVER_ERROR, 
                "ì‚¬ìš©ì ì •ë³´ ìˆ˜ì • ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤");
        }
    }
    
    /**
     * ì‚¬ìš©ì ì‚­ì œ
     * 
     * @param id ì‚¬ìš©ì ID
     */
    public void deleteUser(Long id) {
        log.debug("Deleting user: {}", id);
        
        User user = findUserById(id);
        
        // ë¹„ì¦ˆë‹ˆìŠ¤ ê·œì¹™: ê´€ë¦¬ìëŠ” ì‚­ì œí•  ìˆ˜ ì—†ìŒ
        if (user.hasRole("ADMIN")) {
            throw new BusinessException(ErrorCode.OPERATION_NOT_ALLOWED, 
                "ê´€ë¦¬ì ê³„ì •ì€ ì‚­ì œí•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤");
        }
        
        try {
            // ì†Œí”„íŠ¸ ì‚­ì œ (ìƒíƒœ ë³€ê²½)
            user.setStatus(UserStatus.DELETED);
            user.setDeletedAt(LocalDateTime.now());
            userRepository.save(user);
            
            // ê´€ë ¨ ë°ì´í„° ì •ë¦¬
            cleanupUserRelatedData(user);
            
            log.info("Successfully deleted user: {}", user.getEmail());
            
        } catch (Exception ex) {
            log.error("Error while deleting user: {}", id, ex);
            throw new BusinessException(ErrorCode.INTERNAL_SERVER_ERROR, 
                "ì‚¬ìš©ì ì‚­ì œ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤");
        }
    }
    
    /**
     * ì‚¬ìš©ì ì¡´ì¬ ì—¬ë¶€ í™•ì¸ (ì´ë©”ì¼ ê¸°ë°˜)
     * 
     * @param email ì´ë©”ì¼
     * @return ì¡´ì¬ ì—¬ë¶€
     */
    @Transactional(readOnly = true)
    public boolean existsByEmail(String email) {
        return userRepository.existsByEmailAndStatusNot(email, UserStatus.DELETED);
    }
    
    // ========== Private í—¬í¼ ë©”ì„œë“œ ==========
    
    /**
     * ì‚¬ìš©ì IDë¡œ ì¡°íšŒ (ì˜ˆì™¸ ì²˜ë¦¬ í¬í•¨)
     */
    private User findUserById(Long id) {
        return userRepository.findByIdAndStatusNot(id, UserStatus.DELETED)
                .orElseThrow(() -> new BusinessException(ErrorCode.USER_NOT_FOUND, 
                    String.format("ID %dì— í•´ë‹¹í•˜ëŠ” ì‚¬ìš©ìë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤", id)));
    }
    
    /**
     * ì‚¬ìš©ì ìƒì„± ê·œì¹™ ê²€ì¦
     */
    private void validateUserCreationRules(UserCreateRequest request) {
        // ì´ë©”ì¼ ì¤‘ë³µ ê²€ì‚¬
        if (existsByEmail(request.getEmail())) {
            throw new BusinessException(ErrorCode.USER_ALREADY_EXISTS, 
                String.format("ì´ë©”ì¼ '%s'ëŠ” ì´ë¯¸ ì‚¬ìš© ì¤‘ì…ë‹ˆë‹¤", request.getEmail()));
        }
        
        // ë¹„ë°€ë²ˆí˜¸ ë³µì¡ì„± ê²€ì¦ (ì¶”ê°€ ê·œì¹™)
        if (!isPasswordSecure(request.getPassword())) {
            throw new ValidationException(ErrorCode.WEAK_PASSWORD, 
                "ë¹„ë°€ë²ˆí˜¸ê°€ ë³´ì•ˆ ìš”êµ¬ì‚¬í•­ì„ ì¶©ì¡±í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤");
        }
        
        // ë‚˜ì´ ì œí•œ ê²€ì¦
        if (request.getAge() != null && request.getAge() < 14) {
            throw new BusinessException(ErrorCode.AGE_RESTRICTION, 
                "ë§Œ 14ì„¸ ë¯¸ë§Œì€ íšŒì›ê°€ì…ì´ ì œí•œë©ë‹ˆë‹¤");
        }
    }
    
    /**
     * ì‚¬ìš©ì ìˆ˜ì • ê·œì¹™ ê²€ì¦
     */
    private void validateUserUpdateRules(User existingUser, UserUpdateRequest request) {
        // ì´ë©”ì¼ ë³€ê²½ ì‹œ ì¤‘ë³µ ê²€ì‚¬
        if (!existingUser.getEmail().equals(request.getEmail()) && 
            existsByEmail(request.getEmail())) {
            throw new BusinessException(ErrorCode.USER_ALREADY_EXISTS, 
                String.format("ì´ë©”ì¼ '%s'ëŠ” ì´ë¯¸ ì‚¬ìš© ì¤‘ì…ë‹ˆë‹¤", request.getEmail()));
        }
        
        // ì¤‘ìš” ì •ë³´ ë³€ê²½ ì œí•œ (ì˜ˆ: ì´ë©”ì¼ì€ ì¸ì¦ í›„ì—ë§Œ ë³€ê²½ ê°€ëŠ¥)
        if (!existingUser.getEmail().equals(request.getEmail()) && 
            !existingUser.isEmailVerified()) {
            throw new BusinessException(ErrorCode.OPERATION_NOT_ALLOWED, 
                "ì´ë©”ì¼ ì¸ì¦ í›„ì— ì´ë©”ì¼ì„ ë³€ê²½í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤");
        }
    }
    
    /**
     * ì‚¬ìš©ì í•„ë“œ ì—…ë°ì´íŠ¸
     */
    private void updateUserFields(User user, UserUpdateRequest request) {
        if (StringUtils.hasText(request.getName())) {
            user.setName(request.getName());
        }
        
        if (StringUtils.hasText(request.getEmail())) {
            user.setEmail(request.getEmail());
            user.setEmailVerified(false);  // ì´ë©”ì¼ ë³€ê²½ ì‹œ ì¬ì¸ì¦ í•„ìš”
        }
        
        if (request.getAge() != null) {
            user.setAge(request.getAge());
        }
        
        // ìˆ˜ì • ì‹œê°„ ì—…ë°ì´íŠ¸ëŠ” JPA Auditingì—ì„œ ìë™ ì²˜ë¦¬
    }
    
    /**
     * í™˜ì˜ ì´ë©”ì¼ ë°œì†¡
     */
    private void sendWelcomeEmail(User user) {
        try {
            emailService.sendWelcomeEmail(user.getEmail(), user.getName());
        } catch (Exception ex) {
            // ì´ë©”ì¼ ë°œì†¡ ì‹¤íŒ¨ëŠ” ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì— ì˜í–¥ì„ ì£¼ì§€ ì•ŠìŒ
            log.warn("Failed to send welcome email to: {}", user.getEmail(), ex);
        }
    }
    
    /**
     * ì‚¬ìš©ì ê´€ë ¨ ë°ì´í„° ì •ë¦¬
     */
    private void cleanupUserRelatedData(User user) {
        try {
            // ê´€ë ¨ ë°ì´í„° ë¹„í™œì„±í™” ë˜ëŠ” ì‚­ì œ
            // ì˜ˆ: ì‚¬ìš©ìì˜ ê²Œì‹œê¸€, ëŒ“ê¸€ ë“±ì„ ë¹„í™œì„±í™”
            log.debug("Cleaning up related data for user: {}", user.getId());
        } catch (Exception ex) {
            log.warn("Failed to cleanup user related data: {}", user.getId(), ex);
        }
    }
    
    /**
     * ë¹„ë°€ë²ˆí˜¸ ë³´ì•ˆì„± ê²€ì¦
     */
    private boolean isPasswordSecure(String password) {
        // ì¶”ê°€ ë³´ì•ˆ ê·œì¹™ (ì˜ˆ: ì‚¬ì „ ë‹¨ì–´ ê¸ˆì§€, ì—°ì† ë¬¸ì ê¸ˆì§€ ë“±)
        return !containsDictionaryWords(password) && 
               !hasRepeatingCharacters(password) &&
               !hasSequentialCharacters(password);
    }
}
```

##### 2. íŠ¸ëœì­ì…˜ ê²½ê³„ ê´€ë¦¬
```java
/**
 * íŠ¸ëœì­ì…˜ ì„¸ë°€í•œ ì œì–´
 */
@Service
@RequiredArgsConstructor
@Transactional
public class UserService {
    
    /**
     * ì½ê¸° ì „ìš© íŠ¸ëœì­ì…˜
     */
    @Transactional(readOnly = true)
    public UserResponse getUserById(Long id) {
        // ì½ê¸° ì „ìš© ìµœì í™”
    }
    
    /**
     * ê²©ë¦¬ ìˆ˜ì¤€ ì œì–´
     */
    @Transactional(isolation = Isolation.READ_COMMITTED)
    public UserResponse updateUserConcurrently(Long id, UserUpdateRequest request) {
        // ë™ì‹œì„± ì œì–´ê°€ í•„ìš”í•œ ê²½ìš°
    }
    
    /**
     * íŠ¸ëœì­ì…˜ ì „íŒŒ ì œì–´
     */
    @Transactional(propagation = Propagation.REQUIRES_NEW)
    public void logUserActivity(Long userId, String activity) {
        // ë³„ë„ íŠ¸ëœì­ì…˜ì—ì„œ ë¡œê·¸ ê¸°ë¡
    }
    
    /**
     * ì¡°ê±´ë¶€ ë¡¤ë°±
     */
    @Transactional(rollbackFor = {BusinessException.class, ValidationException.class})
    public UserResponse createUserWithRollback(UserCreateRequest request) {
        // íŠ¹ì • ì˜ˆì™¸ ë°œìƒ ì‹œ ë¡¤ë°±
    }
    
    /**
     * íŠ¸ëœì­ì…˜ ì—†ì´ ì‹¤í–‰
     */
    @Transactional(propagation = Propagation.NOT_SUPPORTED)
    public void sendEmailNotification(String email, String message) {
        // íŠ¸ëœì­ì…˜ê³¼ ë¬´ê´€í•œ ì‘ì—…
    }
}
```

### 7.3 Repository ê³„ì¸µ ì—ëŸ¬ ì²˜ë¦¬

Repository ê³„ì¸µì€ ë°ì´í„° ì•¡ì„¸ìŠ¤ì˜ ìµœí•˜ë‹¨ìœ¼ë¡œì„œ, ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²° ì˜¤ë¥˜, ì œì•½ ì¡°ê±´ ìœ„ë°˜, ì„±ëŠ¥ ì´ìŠˆ ë“± ë°ì´í„° ê³„ì¸µ íŠ¹í™”ëœ ì˜ˆì™¸ë¥¼ ì²˜ë¦¬í•©ë‹ˆë‹¤.

#### ğŸ¯ Repository ê³„ì¸µì˜ ì±…ì„

##### 1. ë°ì´í„° ì•¡ì„¸ìŠ¤ ì˜ˆì™¸ ë³€í™˜
```java
/**
 * ì‚¬ìš©ì ë ˆí¬ì§€í† ë¦¬
 * 
 * <p>ì‚¬ìš©ì ë°ì´í„° ì•¡ì„¸ìŠ¤ë¥¼ ë‹´ë‹¹í•˜ë©°, ë°ì´í„°ë² ì´ìŠ¤ ì˜ˆì™¸ë¥¼ ì˜ë¯¸ìˆëŠ” 
 * ë¹„ì¦ˆë‹ˆìŠ¤ ì˜ˆì™¸ë¡œ ë³€í™˜í•©ë‹ˆë‹¤.</p>
 * 
 * @author ByounggwanLee
 * @since 2025-10-09
 */
@Repository
public interface UserRepository extends JpaRepository<User, Long> {
    
    /**
     * ì´ë©”ì¼ê³¼ ìƒíƒœë¡œ ì‚¬ìš©ì ì¡°íšŒ
     * 
     * @param email ì´ë©”ì¼
     * @param status ì œì™¸í•  ìƒíƒœ
     * @return ì‚¬ìš©ì (Optional)
     */
    Optional<User> findByEmailAndStatusNot(String email, UserStatus status);
    
    /**
     * IDì™€ ìƒíƒœë¡œ ì‚¬ìš©ì ì¡°íšŒ
     * 
     * @param id ì‚¬ìš©ì ID
     * @param status ì œì™¸í•  ìƒíƒœ
     * @return ì‚¬ìš©ì (Optional)
     */
    Optional<User> findByIdAndStatusNot(Long id, UserStatus status);
    
    /**
     * ì´ë©”ì¼ ì¡´ì¬ ì—¬ë¶€ í™•ì¸ (ì‚­ì œëœ ì‚¬ìš©ì ì œì™¸)
     * 
     * @param email ì´ë©”ì¼
     * @param status ì œì™¸í•  ìƒíƒœ
     * @return ì¡´ì¬ ì—¬ë¶€
     */
    boolean existsByEmailAndStatusNot(String email, UserStatus status);
    
    /**
     * ìƒíƒœë³„ ì‚¬ìš©ì ëª©ë¡ ì¡°íšŒ (í˜ì´ì§•)
     * 
     * @param status ì‚¬ìš©ì ìƒíƒœ
     * @param pageable í˜ì´ì§• ì •ë³´
     * @return ì‚¬ìš©ì ëª©ë¡
     */
    Page<User> findAllByStatus(UserStatus status, Pageable pageable);
    
    /**
     * ì´ë¦„ ë˜ëŠ” ì´ë©”ì¼ë¡œ ê²€ìƒ‰ (í˜ì´ì§•)
     * 
     * @param name ì´ë¦„ ê²€ìƒ‰ì–´
     * @param email ì´ë©”ì¼ ê²€ìƒ‰ì–´
     * @param pageable í˜ì´ì§• ì •ë³´
     * @return ê²€ìƒ‰ ê²°ê³¼
     */
    @Query("SELECT u FROM User u WHERE " +
           "(LOWER(u.name) LIKE LOWER(CONCAT('%', :name, '%')) OR " +
           "LOWER(u.email) LIKE LOWER(CONCAT('%', :email, '%'))) AND " +
           "u.status != 'DELETED'")
    Page<User> findByNameContainingOrEmailContaining(
        @Param("name") String name, 
        @Param("email") String email, 
        Pageable pageable);
    
    /**
     * ìƒì„±ì¼ ë²”ìœ„ë¡œ ì‚¬ìš©ì ì¡°íšŒ
     * 
     * @param startDate ì‹œì‘ì¼
     * @param endDate ì¢…ë£Œì¼
     * @return ì‚¬ìš©ì ëª©ë¡
     */
    @Query("SELECT u FROM User u WHERE " +
           "u.createdAt BETWEEN :startDate AND :endDate AND " +
           "u.status = 'ACTIVE' " +
           "ORDER BY u.createdAt DESC")
    List<User> findActiveUsersByCreatedAtBetween(
        @Param("startDate") LocalDateTime startDate,
        @Param("endDate") LocalDateTime endDate);
    
    /**
     * ì‚¬ìš©ì í†µê³„ ì¡°íšŒ
     * 
     * @return ìƒíƒœë³„ ì‚¬ìš©ì ìˆ˜
     */
    @Query("SELECT u.status, COUNT(u) FROM User u GROUP BY u.status")
    List<Object[]> getUserStatsByStatus();
}
```

##### 2. ì»¤ìŠ¤í…€ Repository êµ¬í˜„
```java
/**
 * ì‚¬ìš©ì ì»¤ìŠ¤í…€ ë ˆí¬ì§€í† ë¦¬ ì¸í„°í˜ì´ìŠ¤
 */
public interface UserRepositoryCustom {
    
    /**
     * ë³µì¡í•œ ê²€ìƒ‰ ì¡°ê±´ìœ¼ë¡œ ì‚¬ìš©ì ì¡°íšŒ
     * 
     * @param searchCriteria ê²€ìƒ‰ ì¡°ê±´
     * @param pageable í˜ì´ì§• ì •ë³´
     * @return ê²€ìƒ‰ ê²°ê³¼
     */
    Page<User> findUsersWithComplexCriteria(UserSearchCriteria searchCriteria, Pageable pageable);
    
    /**
     * ë²Œí¬ ì—…ë°ì´íŠ¸ (ë°°ì¹˜ ì²˜ë¦¬)
     * 
     * @param userIds ì‚¬ìš©ì ID ëª©ë¡
     * @param status ë³€ê²½í•  ìƒíƒœ
     * @return ì—…ë°ì´íŠ¸ëœ ë ˆì½”ë“œ ìˆ˜
     */
    int bulkUpdateUserStatus(List<Long> userIds, UserStatus status);
}

/**
 * ì‚¬ìš©ì ì»¤ìŠ¤í…€ ë ˆí¬ì§€í† ë¦¬ êµ¬í˜„
 */
@Repository
@RequiredArgsConstructor
@Slf4j
public class UserRepositoryCustomImpl implements UserRepositoryCustom {
    
    private final EntityManager entityManager;
    
    @Override
    public Page<User> findUsersWithComplexCriteria(UserSearchCriteria searchCriteria, Pageable pageable) {
        try {
            CriteriaBuilder cb = entityManager.getCriteriaBuilder();
            CriteriaQuery<User> query = cb.createQuery(User.class);
            Root<User> root = query.from(User.class);
            
            List<Predicate> predicates = buildPredicates(cb, root, searchCriteria);
            query.where(predicates.toArray(new Predicate[0]));
            
            // ì •ë ¬ ì ìš©
            if (pageable.getSort().isSorted()) {
                List<Order> orders = pageable.getSort().stream()
                    .map(order -> order.isAscending() ? 
                        cb.asc(root.get(order.getProperty())) : 
                        cb.desc(root.get(order.getProperty())))
                    .collect(Collectors.toList());
                query.orderBy(orders);
            }
            
            TypedQuery<User> typedQuery = entityManager.createQuery(query);
            typedQuery.setFirstResult((int) pageable.getOffset());
            typedQuery.setMaxResults(pageable.getPageSize());
            
            List<User> users = typedQuery.getResultList();
            long total = countUsersWithCriteria(searchCriteria);
            
            return new PageImpl<>(users, pageable, total);
            
        } catch (Exception ex) {
            log.error("Error executing complex user search", ex);
            throw new RepositoryException(ErrorCode.DATABASE_QUERY_ERROR, 
                "ì‚¬ìš©ì ê²€ìƒ‰ ì¤‘ ë°ì´í„°ë² ì´ìŠ¤ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤", ex);
        }
    }
    
    @Override
    @Modifying
    @Transactional
    public int bulkUpdateUserStatus(List<Long> userIds, UserStatus status) {
        if (userIds.isEmpty()) {
            return 0;
        }
        
        try {
            String jpql = "UPDATE User u SET u.status = :status, u.updatedAt = :updatedAt " +
                         "WHERE u.id IN :userIds";
            
            Query query = entityManager.createQuery(jpql);
            query.setParameter("status", status);
            query.setParameter("updatedAt", LocalDateTime.now());
            query.setParameter("userIds", userIds);
            
            int updatedCount = query.executeUpdate();
            
            log.info("Bulk updated {} users to status: {}", updatedCount, status);
            return updatedCount;
            
        } catch (Exception ex) {
            log.error("Error executing bulk update for user status", ex);
            throw new RepositoryException(ErrorCode.DATABASE_UPDATE_ERROR, 
                "ì‚¬ìš©ì ìƒíƒœ ì¼ê´„ ì—…ë°ì´íŠ¸ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤", ex);
        }
    }
    
    /**
     * ê²€ìƒ‰ ì¡°ê±´ì„ Predicateë¡œ ë³€í™˜
     */
    private List<Predicate> buildPredicates(CriteriaBuilder cb, Root<User> root, 
                                          UserSearchCriteria criteria) {
        List<Predicate> predicates = new ArrayList<>();
        
        // ê¸°ë³¸ ì¡°ê±´: ì‚­ì œë˜ì§€ ì•Šì€ ì‚¬ìš©ì
        predicates.add(cb.notEqual(root.get("status"), UserStatus.DELETED));
        
        // ì´ë¦„ ê²€ìƒ‰
        if (StringUtils.hasText(criteria.getName())) {
            predicates.add(cb.like(cb.lower(root.get("name")), 
                "%" + criteria.getName().toLowerCase() + "%"));
        }
        
        // ì´ë©”ì¼ ê²€ìƒ‰
        if (StringUtils.hasText(criteria.getEmail())) {
            predicates.add(cb.like(cb.lower(root.get("email")), 
                "%" + criteria.getEmail().toLowerCase() + "%"));
        }
        
        // ìƒíƒœ í•„í„°
        if (criteria.getStatus() != null) {
            predicates.add(cb.equal(root.get("status"), criteria.getStatus()));
        }
        
        // ë‚˜ì´ ë²”ìœ„
        if (criteria.getMinAge() != null) {
            predicates.add(cb.greaterThanOrEqualTo(root.get("age"), criteria.getMinAge()));
        }
        if (criteria.getMaxAge() != null) {
            predicates.add(cb.lessThanOrEqualTo(root.get("age"), criteria.getMaxAge()));
        }
        
        // ìƒì„±ì¼ ë²”ìœ„
        if (criteria.getCreatedAfter() != null) {
            predicates.add(cb.greaterThanOrEqualTo(root.get("createdAt"), criteria.getCreatedAfter()));
        }
        if (criteria.getCreatedBefore() != null) {
            predicates.add(cb.lessThanOrEqualTo(root.get("createdAt"), criteria.getCreatedBefore()));
        }
        
        return predicates;
    }
    
    /**
     * ê²€ìƒ‰ ì¡°ê±´ì— ë§ëŠ” ì´ ê°œìˆ˜ ì¡°íšŒ
     */
    private long countUsersWithCriteria(UserSearchCriteria searchCriteria) {
        CriteriaBuilder cb = entityManager.getCriteriaBuilder();
        CriteriaQuery<Long> countQuery = cb.createQuery(Long.class);
        Root<User> root = countQuery.from(User.class);
        
        List<Predicate> predicates = buildPredicates(cb, root, searchCriteria);
        countQuery.select(cb.count(root));
        countQuery.where(predicates.toArray(new Predicate[0]));
        
        return entityManager.createQuery(countQuery).getSingleResult();
    }
}
```

##### 3. Repository ì˜ˆì™¸ ì²˜ë¦¬
```java
/**
 * Repository ì „ìš© ì˜ˆì™¸
 */
@Getter
public class RepositoryException extends CustomException {
    
    private final Throwable cause;
    
    public RepositoryException(ErrorCode errorCode) {
        super(errorCode);
        this.cause = null;
    }
    
    public RepositoryException(ErrorCode errorCode, String customMessage) {
        super(errorCode, customMessage);
        this.cause = null;
    }
    
    public RepositoryException(ErrorCode errorCode, String customMessage, Throwable cause) {
        super(errorCode, customMessage);
        this.cause = cause;
    }
}

/**
 * Repository ì˜ˆì™¸ ì²˜ë¦¬ ìœ í‹¸ë¦¬í‹°
 */
@Component
@Slf4j
public class RepositoryExceptionHandler {
    
    /**
     * JPA ì˜ˆì™¸ë¥¼ ë¹„ì¦ˆë‹ˆìŠ¤ ì˜ˆì™¸ë¡œ ë³€í™˜
     * 
     * @param ex JPA ì˜ˆì™¸
     * @param operation ìˆ˜í–‰ ì¤‘ì¸ ì‘ì—…
     * @return ë³€í™˜ëœ ë¹„ì¦ˆë‹ˆìŠ¤ ì˜ˆì™¸
     */
    public RepositoryException convertJpaException(Exception ex, String operation) {
        log.error("JPA exception during {}", operation, ex);
        
        if (ex instanceof DataIntegrityViolationException) {
            return handleDataIntegrityViolation((DataIntegrityViolationException) ex);
        } else if (ex instanceof PessimisticLockingFailureException) {
            return new RepositoryException(ErrorCode.DATABASE_LOCK_ERROR, 
                "ë°ì´í„°ë² ì´ìŠ¤ ì ê¸ˆ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤", ex);
        } else if (ex instanceof QueryTimeoutException) {
            return new RepositoryException(ErrorCode.DATABASE_TIMEOUT_ERROR, 
                "ë°ì´í„°ë² ì´ìŠ¤ ì¿¼ë¦¬ íƒ€ì„ì•„ì›ƒì´ ë°œìƒí–ˆìŠµë‹ˆë‹¤", ex);
        } else if (ex instanceof TransactionSystemException) {
            return new RepositoryException(ErrorCode.DATABASE_TRANSACTION_ERROR, 
                "ë°ì´í„°ë² ì´ìŠ¤ íŠ¸ëœì­ì…˜ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤", ex);
        } else {
            return new RepositoryException(ErrorCode.DATABASE_CONNECTION_ERROR, 
                "ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²° ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤", ex);
        }
    }
    
    /**
     * ë°ì´í„° ë¬´ê²°ì„± ìœ„ë°˜ ì˜ˆì™¸ ì²˜ë¦¬
     */
    private RepositoryException handleDataIntegrityViolation(DataIntegrityViolationException ex) {
        String message = ex.getMessage().toLowerCase();
        Throwable rootCause = ex.getRootCause();
        
        if (rootCause instanceof SQLException sqlEx) {
            String sqlState = sqlEx.getSQLState();
            
            // ì¤‘ë³µ í‚¤ ìœ„ë°˜
            if ("23000".equals(sqlState) || "23505".equals(sqlState)) {
                if (message.contains("email")) {
                    return new RepositoryException(ErrorCode.USER_ALREADY_EXISTS, 
                        "ì´ë¯¸ ì‚¬ìš© ì¤‘ì¸ ì´ë©”ì¼ì…ë‹ˆë‹¤", ex);
                } else {
                    return new RepositoryException(ErrorCode.DUPLICATE_RESOURCE, 
                        "ì¤‘ë³µëœ ë°ì´í„°ì…ë‹ˆë‹¤", ex);
                }
            }
            // ì™¸ë˜ í‚¤ ìœ„ë°˜
            else if ("23503".equals(sqlState)) {
                return new RepositoryException(ErrorCode.DATA_INTEGRITY_VIOLATION, 
                    "ì°¸ì¡°í•˜ëŠ” ë°ì´í„°ê°€ ì¡´ì¬í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤", ex);
            }
            // NOT NULL ìœ„ë°˜
            else if ("23502".equals(sqlState)) {
                return new RepositoryException(ErrorCode.INVALID_INPUT_VALUE, 
                    "í•„ìˆ˜ ë°ì´í„°ê°€ ëˆ„ë½ë˜ì—ˆìŠµë‹ˆë‹¤", ex);
            }
        }
        
        return new RepositoryException(ErrorCode.DATA_INTEGRITY_VIOLATION, 
            "ë°ì´í„° ë¬´ê²°ì„± ìœ„ë°˜ì´ ë°œìƒí–ˆìŠµë‹ˆë‹¤", ex);
    }
}
```

##### 4. ì„±ëŠ¥ ëª¨ë‹ˆí„°ë§ ë° ì˜ˆì™¸ ì²˜ë¦¬
```java
/**
 * Repository ì„±ëŠ¥ ëª¨ë‹ˆí„°ë§
 */
@Aspect
@Component
@Slf4j
@RequiredArgsConstructor
public class RepositoryPerformanceAspect {
    
    private final MeterRegistry meterRegistry;
    
    @Around("execution(* com.skax.aiplatform.repository.*.*(..))")
    public Object monitorRepositoryPerformance(ProceedingJoinPoint joinPoint) throws Throwable {
        String methodName = joinPoint.getSignature().getName();
        String className = joinPoint.getTarget().getClass().getSimpleName();
        
        Timer.Sample sample = Timer.start(meterRegistry);
        
        try {
            Object result = joinPoint.proceed();
            
            // ì„±ê³µ ë©”íŠ¸ë¦­ ê¸°ë¡
            sample.stop(Timer.builder("repository.execution.time")
                    .tag("class", className)
                    .tag("method", methodName)
                    .tag("status", "success")
                    .register(meterRegistry));
            
            return result;
            
        } catch (Exception ex) {
            // ì‹¤íŒ¨ ë©”íŠ¸ë¦­ ê¸°ë¡
            sample.stop(Timer.builder("repository.execution.time")
                    .tag("class", className)
                    .tag("method", methodName)
                    .tag("status", "error")
                    .register(meterRegistry));
            
            // ì—ëŸ¬ ì¹´ìš´í„° ì¦ê°€
            Counter.builder("repository.errors")
                    .tag("class", className)
                    .tag("method", methodName)
                    .tag("exception", ex.getClass().getSimpleName())
                    .register(meterRegistry)
                    .increment();
            
            // ìŠ¬ë¡œìš° ì¿¼ë¦¬ ê°ì§€
            if (sample.stop(Timer.builder("temp").register(meterRegistry)).toSeconds() > 5.0) {
                log.warn("Slow query detected: {}.{} took more than 5 seconds", 
                    className, methodName);
            }
            
            throw ex;
        }
    }
}
```

---

## 8. ì™¸ë¶€ API ì—°ë™ ì—ëŸ¬ ì²˜ë¦¬

### 8.1 Feign Client ì—ëŸ¬ ì²˜ë¦¬

ì™¸ë¶€ API ì—°ë™ì—ì„œëŠ” ë„¤íŠ¸ì›Œí¬ ë¶ˆì•ˆì •, íƒ€ì„ì•„ì›ƒ, ì¸ì¦ ì‹¤íŒ¨, ì™¸ë¶€ ì„œë¹„ìŠ¤ ì¥ì•  ë“± ë‹¤ì–‘í•œ ì˜ˆì™¸ ìƒí™©ì´ ë°œìƒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ë¥¼ ì²´ê³„ì ìœ¼ë¡œ ì²˜ë¦¬í•˜ì—¬ ì‹œìŠ¤í…œì˜ ì•ˆì •ì„±ì„ í™•ë³´í•´ì•¼ í•©ë‹ˆë‹¤.

#### ğŸŒ Feign Client ê¸°ë³¸ êµ¬ì¡°

##### 1. SKTAI Feign Client ì˜ˆì‹œ
```java
/**
 * SKTAI ì¸ì¦ API í´ë¼ì´ì–¸íŠ¸
 * 
 * <p>SKTAI ì™¸ë¶€ APIì™€ì˜ ì¸ì¦ ê´€ë ¨ í†µì‹ ì„ ë‹´ë‹¹í•©ë‹ˆë‹¤.
 * OAuth2 ê¸°ë°˜ ì¸ì¦ê³¼ ì‚¬ìš©ì ê´€ë¦¬ APIë¥¼ ì œê³µí•©ë‹ˆë‹¤.</p>
 * 
 * @author ByounggwanLee
 * @since 2025-10-09
 */
@FeignClient(
    name = "sktai-auth-client",
    url = "${sktai.api.base-url}",
    configuration = SktaiClientConfig.class
)
public interface SktaiAuthClient {
    
    /**
     * OAuth2 ë¡œê·¸ì¸
     * 
     * @param request ë¡œê·¸ì¸ ìš”ì²­
     * @return ì•¡ì„¸ìŠ¤ í† í° ì‘ë‹µ
     */
    @PostMapping("/api/v1/auth/login")
    @Operation(summary = "OAuth2 ë¡œê·¸ì¸", description = "ì‚¬ìš©ìëª…/ë¹„ë°€ë²ˆí˜¸ ê¸°ë°˜ OAuth2 ì¸ì¦")
    @ApiResponses({
        @ApiResponse(responseCode = "200", description = "ë¡œê·¸ì¸ ì„±ê³µ"),
        @ApiResponse(responseCode = "401", description = "ì¸ì¦ ì‹¤íŒ¨"),
        @ApiResponse(responseCode = "422", description = "ì…ë ¥ê°’ ê²€ì¦ ì‹¤íŒ¨"),
        @ApiResponse(responseCode = "500", description = "ì„œë²„ ì˜¤ë¥˜")
    })
    AccessTokenResponseDto login(@RequestBody LoginRequestDto request);
    
    /**
     * ì‚¬ìš©ì ì •ë³´ ì¡°íšŒ
     * 
     * @param authorization Bearer í† í°
     * @return ì‚¬ìš©ì ì •ë³´
     */
    @GetMapping("/api/v1/auth/me")
    @Operation(summary = "í˜„ì¬ ì‚¬ìš©ì ì •ë³´ ì¡°íšŒ", description = "ì¸ì¦ëœ ì‚¬ìš©ìì˜ ì •ë³´ë¥¼ ì¡°íšŒí•©ë‹ˆë‹¤")
    MeResponseDto getCurrentUser(@RequestHeader("Authorization") String authorization);
    
    /**
     * ì‚¬ìš©ì ëª©ë¡ ì¡°íšŒ
     * 
     * @param authorization Bearer í† í°
     * @param page í˜ì´ì§€ ë²ˆí˜¸
     * @param size í˜ì´ì§€ í¬ê¸°
     * @param sort ì •ë ¬ ì¡°ê±´
     * @param filter í•„í„° ì¡°ê±´
     * @param search ê²€ìƒ‰ì–´
     * @return ì‚¬ìš©ì ëª©ë¡
     */
    @GetMapping("/api/v1/users")
    @Operation(summary = "ì‚¬ìš©ì ëª©ë¡ ì¡°íšŒ", description = "í˜ì´ì§•ëœ ì‚¬ìš©ì ëª©ë¡ì„ ì¡°íšŒí•©ë‹ˆë‹¤")
    UsersResponseDto getUsers(
        @RequestHeader("Authorization") String authorization,
        @RequestParam(value = "page", defaultValue = "1") Integer page,
        @RequestParam(value = "size", defaultValue = "10") Integer size,
        @RequestParam(value = "sort", required = false) String sort,
        @RequestParam(value = "filter", required = false) String filter,
        @RequestParam(value = "search", required = false) String search
    );
}
```

##### 2. Feign Client ì„¤ì •
```java
/**
 * SKTAI Feign Client ì„¤ì •
 * 
 * @author ByounggwanLee
 * @since 2025-10-09
 */
@Configuration
@EnableFeignClients(basePackages = "com.skax.aiplatform.client")
@Slf4j
public class SktaiClientConfig {
    
    @Value("${sktai.api.timeout.connect:10000}")
    private int connectTimeout;
    
    @Value("${sktai.api.timeout.read:60000}")
    private int readTimeout;
    
    /**
     * ìš”ì²­ ì¸í„°ì…‰í„° (ê³µí†µ í—¤ë” ì„¤ì •)
     */
    @Bean
    public RequestInterceptor sktaiRequestInterceptor() {
        return new SktaiRequestInterceptor();
    }
    
    /**
     * ì—ëŸ¬ ë””ì½”ë” (ì™¸ë¶€ API ì—ëŸ¬ë¥¼ ë‚´ë¶€ ì˜ˆì™¸ë¡œ ë³€í™˜)
     */
    @Bean
    public ErrorDecoder sktaiErrorDecoder() {
        return new SktaiErrorDecoder();
    }
    
    /**
     * ì¬ì‹œë„ ì •ì±…
     */
    @Bean
    public Retryer sktaiRetryer() {
        return new Retryer.Default(1000, 3000, 3);  // 1ì´ˆ ì‹œì‘, 3ì´ˆ ìµœëŒ€, 3íšŒ ì¬ì‹œë„
    }
    
    /**
     * íƒ€ì„ì•„ì›ƒ ì„¤ì •
     */
    @Bean
    public Request.Options sktaiRequestOptions() {
        return new Request.Options(
            Duration.ofMillis(connectTimeout),
            Duration.ofMillis(readTimeout)
        );
    }
    
    /**
     * ë¡œê·¸ ë ˆë²¨ ì„¤ì •
     */
    @Bean
    public Logger.Level feignLoggerLevel() {
        return Logger.Level.BASIC;  // ìš´ì˜í™˜ê²½ì—ì„œëŠ” BASIC, ê°œë°œí™˜ê²½ì—ì„œëŠ” FULL
    }
    
    /**
     * ì»¤ìŠ¤í…€ ì¸ì½”ë”/ë””ì½”ë” (í•„ìš”ì‹œ)
     */
    @Bean
    public Encoder feignEncoder() {
        return new JacksonEncoder();
    }
    
    @Bean
    public Decoder feignDecoder() {
        return new JacksonDecoder();
    }
}
```

##### 3. ìš”ì²­ ì¸í„°ì…‰í„° êµ¬í˜„
```java
/**
 * SKTAI ìš”ì²­ ì¸í„°ì…‰í„°
 * 
 * <p>ëª¨ë“  SKTAI API ìš”ì²­ì— ê³µí†µ í—¤ë”ë¥¼ ìë™ìœ¼ë¡œ ì¶”ê°€í•©ë‹ˆë‹¤.</p>
 * 
 * @author ByounggwanLee
 * @since 2025-10-09
 */
@Component
@RequiredArgsConstructor
@Slf4j
public class SktaiRequestInterceptor implements RequestInterceptor {
    
    private final SktaiTokenManager tokenManager;
    
    @Override
    public void apply(RequestTemplate template) {
        // ê³µí†µ í—¤ë” ì„¤ì •
        template.header("Content-Type", "application/json");
        template.header("Accept", "application/json");
        template.header("User-Agent", "AXPORTAL-Backend/1.0");
        
        // ì¸ì¦ì´ í•„ìš”í•œ ìš”ì²­ì¸ì§€ í™•ì¸
        if (requiresAuthentication(template)) {
            try {
                String accessToken = tokenManager.getValidAccessToken();
                template.header("Authorization", "Bearer " + accessToken);
                
                log.debug("Added authorization header for request: {} {}", 
                    template.method(), template.url());
                    
            } catch (Exception ex) {
                log.error("Failed to add authorization header", ex);
                // ì¸ì¦ í† í° ì¶”ê°€ ì‹¤íŒ¨ ì‹œì—ë„ ìš”ì²­ì€ ê³„ì† ì§„í–‰
                // ì„œë²„ì—ì„œ 401 ì‘ë‹µì„ ë°›ì•„ ì ì ˆíˆ ì²˜ë¦¬
            }
        }
        
        // ìš”ì²­ ID ì¶”ê°€ (ì¶”ì ìš©)
        String requestId = UUID.randomUUID().toString();
        template.header("X-Request-ID", requestId);
        
        // ìš”ì²­ ë¡œê¹…
        logRequest(template, requestId);
    }
    
    /**
     * ì¸ì¦ì´ í•„ìš”í•œ ìš”ì²­ì¸ì§€ í™•ì¸
     */
    private boolean requiresAuthentication(RequestTemplate template) {
        String url = template.url();
        
        // ë¡œê·¸ì¸ APIëŠ” ì¸ì¦ ë¶ˆí•„ìš”
        if (url.contains("/auth/login")) {
            return false;
        }
        
        // ë‚˜ë¨¸ì§€ APIëŠ” ì¸ì¦ í•„ìš”
        return true;
    }
    
    /**
     * ìš”ì²­ ë¡œê¹…
     */
    private void logRequest(RequestTemplate template, String requestId) {
        if (log.isDebugEnabled()) {
            log.debug("SKTAI API Request [{}]: {} {} - Headers: {}", 
                requestId, template.method(), template.url(), 
                template.headers().keySet());
        }
    }
}
```

##### 4. ì—ëŸ¬ ë””ì½”ë” êµ¬í˜„
```java
/**
 * SKTAI ì—ëŸ¬ ë””ì½”ë”
 * 
 * <p>SKTAI APIì˜ HTTP ì—ëŸ¬ ì‘ë‹µì„ ì ì ˆí•œ ë¹„ì¦ˆë‹ˆìŠ¤ ì˜ˆì™¸ë¡œ ë³€í™˜í•©ë‹ˆë‹¤.</p>
 * 
 * @author ByounggwanLee
 * @since 2025-10-09
 */
@Component
@Slf4j
public class SktaiErrorDecoder implements ErrorDecoder {
    
    private final ObjectMapper objectMapper;
    
    public SktaiErrorDecoder() {
        this.objectMapper = new ObjectMapper();
        this.objectMapper.configure(DeserializationFeature.FAIL_ON_UNKNOWN_PROPERTIES, false);
    }
    
    @Override
    public Exception decode(String methodKey, Response response) {
        String requestId = extractRequestId(response);
        
        log.warn("SKTAI API error [{}]: {} {} - Status: {}", 
            requestId, response.request().httpMethod(), 
            response.request().url(), response.status());
        
        try {
            String responseBody = getResponseBody(response);
            SktaiErrorResponse errorResponse = parseErrorResponse(responseBody);
            
            return createBusinessException(response.status(), errorResponse, methodKey, requestId);
            
        } catch (Exception ex) {
            log.error("Failed to decode SKTAI error response [{}]", requestId, ex);
            return createDefaultException(response.status(), methodKey, requestId);
        }
    }
    
    /**
     * ìš”ì²­ ID ì¶”ì¶œ
     */
    private String extractRequestId(Response response) {
        Collection<String> requestIds = response.request().headers().get("X-Request-ID");
        return requestIds != null && !requestIds.isEmpty() ? 
            requestIds.iterator().next() : "unknown";
    }
    
    /**
     * ì‘ë‹µ ë³¸ë¬¸ ì¶”ì¶œ
     */
    private String getResponseBody(Response response) throws IOException {
        if (response.body() == null) {
            return "{}";
        }
        
        try (InputStream inputStream = response.body().asInputStream()) {
            return IOUtils.toString(inputStream, StandardCharsets.UTF_8);
        }
    }
    
    /**
     * ì—ëŸ¬ ì‘ë‹µ íŒŒì‹±
     */
    private SktaiErrorResponse parseErrorResponse(String responseBody) {
        try {
            return objectMapper.readValue(responseBody, SktaiErrorResponse.class);
        } catch (Exception ex) {
            log.warn("Failed to parse SKTAI error response: {}", responseBody);
            return SktaiErrorResponse.builder()
                    .error("UNKNOWN_ERROR")
                    .message("Unknown error occurred")
                    .build();
        }
    }
    
    /**
     * HTTP ìƒíƒœ ì½”ë“œì— ë”°ë¥¸ ë¹„ì¦ˆë‹ˆìŠ¤ ì˜ˆì™¸ ìƒì„±
     */
    private Exception createBusinessException(int status, SktaiErrorResponse errorResponse, 
                                            String methodKey, String requestId) {
        String message = String.format("SKTAI API ì˜¤ë¥˜ [%s]: %s", requestId, errorResponse.getMessage());
        String details = String.format("Method: %s, Error: %s", methodKey, errorResponse.getError());
        
        switch (status) {
            case 400:
                return new ExternalApiException(ErrorCode.EXTERNAL_API_BAD_REQUEST, message, details)
                        .withApiName("SKTAI")
                        .withEndpoint(methodKey)
                        .withResponseStatus(status);
                        
            case 401:
                return new ExternalApiException(ErrorCode.EXTERNAL_AUTH_FAILED, message, details)
                        .withApiName("SKTAI")
                        .withEndpoint(methodKey)
                        .withResponseStatus(status);
                        
            case 403:
                return new ExternalApiException(ErrorCode.EXTERNAL_ACCESS_DENIED, message, details)
                        .withApiName("SKTAI")
                        .withEndpoint(methodKey)
                        .withResponseStatus(status);
                        
            case 404:
                return new ExternalApiException(ErrorCode.EXTERNAL_RESOURCE_NOT_FOUND, message, details)
                        .withApiName("SKTAI")
                        .withEndpoint(methodKey)
                        .withResponseStatus(status);
                        
            case 422:
                return new ExternalApiException(ErrorCode.EXTERNAL_VALIDATION_FAILED, message, details)
                        .withApiName("SKTAI")
                        .withEndpoint(methodKey)
                        .withResponseStatus(status);
                        
            case 429:
                return new ExternalApiException(ErrorCode.EXTERNAL_RATE_LIMIT_EXCEEDED, message, details)
                        .withApiName("SKTAI")
                        .withEndpoint(methodKey)
                        .withResponseStatus(status);
                        
            case 500:
            case 502:
            case 503:
            case 504:
                return new ExternalApiException(ErrorCode.EXTERNAL_SERVER_ERROR, message, details)
                        .withApiName("SKTAI")
                        .withEndpoint(methodKey)
                        .withResponseStatus(status);
                        
            default:
                return new ExternalApiException(ErrorCode.EXTERNAL_API_ERROR, message, details)
                        .withApiName("SKTAI")
                        .withEndpoint(methodKey)
                        .withResponseStatus(status);
        }
    }
    
    /**
     * ê¸°ë³¸ ì˜ˆì™¸ ìƒì„± (íŒŒì‹± ì‹¤íŒ¨ ì‹œ)
     */
    private Exception createDefaultException(int status, String methodKey, String requestId) {
        String message = String.format("SKTAI API í†µì‹  ì˜¤ë¥˜ [%s]", requestId);
        String details = String.format("Method: %s, Status: %d", methodKey, status);
        
        return new ExternalApiException(ErrorCode.EXTERNAL_API_ERROR, message, details)
                .withApiName("SKTAI")
                .withEndpoint(methodKey)
                .withResponseStatus(status);
    }
}

/**
 * SKTAI API ì—ëŸ¬ ì‘ë‹µ DTO
 */
@Getter
@Builder
@NoArgsConstructor
@AllArgsConstructor
public class SktaiErrorResponse {
    
    @JsonProperty("error")
    private String error;
    
    @JsonProperty("message")
    private String message;
    
    @JsonProperty("details")
    private String details;
    
    @JsonProperty("timestamp")
    private String timestamp;
}
```

### 8.2 ì™¸ë¶€ API ì˜ˆì™¸ í´ë˜ìŠ¤

ì™¸ë¶€ API ì—°ë™ì—ì„œ ë°œìƒí•˜ëŠ” ë‹¤ì–‘í•œ ì˜ˆì™¸ ìƒí™©ì„ ì²´ê³„ì ìœ¼ë¡œ ê´€ë¦¬í•˜ê¸° ìœ„í•œ ì „ìš© ì˜ˆì™¸ í´ë˜ìŠ¤ë¥¼ ì •ì˜í•©ë‹ˆë‹¤.

#### ğŸš¨ ExternalApiException êµ¬í˜„

##### 1. ê¸°ë³¸ ì™¸ë¶€ API ì˜ˆì™¸ í´ë˜ìŠ¤
```java
/**
 * ì™¸ë¶€ API ì—°ë™ ì˜ˆì™¸
 * 
 * <p>ì™¸ë¶€ ì‹œìŠ¤í…œê³¼ì˜ í†µì‹ ì—ì„œ ë°œìƒí•˜ëŠ” ëª¨ë“  ì˜ˆì™¸ë¥¼ ë‹´ë‹¹í•©ë‹ˆë‹¤.
 * API ì´ë¦„, ì—”ë“œí¬ì¸íŠ¸, ì‘ë‹µ ìƒíƒœ ë“± ë””ë²„ê¹…ì— í•„ìš”í•œ ì •ë³´ë¥¼ í¬í•¨í•©ë‹ˆë‹¤.</p>
 * 
 * @author ByounggwanLee
 * @since 2025-10-09
 */
@Getter
public class ExternalApiException extends CustomException {
    
    /**
     * ì™¸ë¶€ API ì´ë¦„ (ì˜ˆ: "SKTAI", "OpenAI", "Google")
     */
    private String apiName;
    
    /**
     * í˜¸ì¶œí•œ ì—”ë“œí¬ì¸íŠ¸ (ì˜ˆ: "/api/v1/auth/login")
     */
    private String endpoint;
    
    /**
     * HTTP ì‘ë‹µ ìƒíƒœ ì½”ë“œ
     */
    private Integer responseStatus;
    
    /**
     * ì‘ë‹µ ë³¸ë¬¸ (ë¯¼ê°í•˜ì§€ ì•Šì€ ì •ë³´ë§Œ)
     */
    private String responseBody;
    
    /**
     * ì¬ì‹œë„ ê°€ëŠ¥ ì—¬ë¶€
     */
    private boolean retryable;
    
    /**
     * ì›ë³¸ ìš”ì²­ ì •ë³´
     */
    private String requestInfo;
    
    public ExternalApiException(ErrorCode errorCode) {
        super(errorCode);
    }
    
    public ExternalApiException(ErrorCode errorCode, String customMessage) {
        super(errorCode, customMessage);
    }
    
    public ExternalApiException(ErrorCode errorCode, String customMessage, String details) {
        super(errorCode, customMessage);
        // detailsëŠ” ë³„ë„ í•„ë“œë¡œ ê´€ë¦¬í•˜ê±°ë‚˜ causeì— í¬í•¨
    }
    
    public ExternalApiException(ErrorCode errorCode, String customMessage, Throwable cause) {
        super(errorCode, customMessage);
        initCause(cause);
    }
    
    /**
     * API ì´ë¦„ ì„¤ì • (ë¹Œë” íŒ¨í„´)
     */
    public ExternalApiException withApiName(String apiName) {
        this.apiName = apiName;
        return this;
    }
    
    /**
     * ì—”ë“œí¬ì¸íŠ¸ ì„¤ì • (ë¹Œë” íŒ¨í„´)
     */
    public ExternalApiException withEndpoint(String endpoint) {
        this.endpoint = endpoint;
        return this;
    }
    
    /**
     * ì‘ë‹µ ìƒíƒœ ì„¤ì • (ë¹Œë” íŒ¨í„´)
     */
    public ExternalApiException withResponseStatus(Integer responseStatus) {
        this.responseStatus = responseStatus;
        this.retryable = isRetryableStatus(responseStatus);
        return this;
    }
    
    /**
     * ì‘ë‹µ ë³¸ë¬¸ ì„¤ì • (ë¹Œë” íŒ¨í„´)
     */
    public ExternalApiException withResponseBody(String responseBody) {
        this.responseBody = sanitizeResponseBody(responseBody);
        return this;
    }
    
    /**
     * ìš”ì²­ ì •ë³´ ì„¤ì • (ë¹Œë” íŒ¨í„´)
     */
    public ExternalApiException withRequestInfo(String requestInfo) {
        this.requestInfo = requestInfo;
        return this;
    }
    
    /**
     * ì¬ì‹œë„ ê°€ëŠ¥í•œ ìƒíƒœ ì½”ë“œì¸ì§€ í™•ì¸
     */
    private boolean isRetryableStatus(Integer status) {
        if (status == null) {
            return false;
        }
        
        // 5xx ì„œë²„ ì˜¤ë¥˜ëŠ” ì¬ì‹œë„ ê°€ëŠ¥
        if (status >= 500 && status < 600) {
            return true;
        }
        
        // 429 Rate Limitë„ ì¬ì‹œë„ ê°€ëŠ¥
        if (status == 429) {
            return true;
        }
        
        // 408 Request Timeoutë„ ì¬ì‹œë„ ê°€ëŠ¥
        if (status == 408) {
            return true;
        }
        
        return false;
    }
    
    /**
     * ì‘ë‹µ ë³¸ë¬¸ì—ì„œ ë¯¼ê°í•œ ì •ë³´ ì œê±°
     */
    private String sanitizeResponseBody(String responseBody) {
        if (responseBody == null || responseBody.trim().isEmpty()) {
            return null;
        }
        
        // ì‘ë‹µ ë³¸ë¬¸ì´ ë„ˆë¬´ ê¸¸ë©´ ìë¥´ê¸°
        if (responseBody.length() > 1000) {
            responseBody = responseBody.substring(0, 1000) + "... (truncated)";
        }
        
        // ë¯¼ê°í•œ ì •ë³´ íŒ¨í„´ ì œê±° (í† í°, ë¹„ë°€ë²ˆí˜¸ ë“±)
        responseBody = responseBody.replaceAll("\"token\"\\s*:\\s*\"[^\"]+\"", "\"token\":\"***\"");
        responseBody = responseBody.replaceAll("\"password\"\\s*:\\s*\"[^\"]+\"", "\"password\":\"***\"");
        responseBody = responseBody.replaceAll("\"secret\"\\s*:\\s*\"[^\"]+\"", "\"secret\":\"***\"");
        
        return responseBody;
    }
    
    /**
     * ë””ë²„ê¹…ì„ ìœ„í•œ ìƒì„¸ ì •ë³´ ìƒì„±
     */
    public String getDetailedInfo() {
        StringBuilder sb = new StringBuilder();
        
        if (apiName != null) {
            sb.append("API: ").append(apiName).append(", ");
        }
        
        if (endpoint != null) {
            sb.append("Endpoint: ").append(endpoint).append(", ");
        }
        
        if (responseStatus != null) {
            sb.append("Status: ").append(responseStatus).append(", ");
        }
        
        sb.append("Retryable: ").append(retryable);
        
        if (requestInfo != null) {
            sb.append(", Request: ").append(requestInfo);
        }
        
        return sb.toString();
    }
}
```

##### 2. íŠ¹í™”ëœ ì™¸ë¶€ API ì˜ˆì™¸ë“¤
```java
/**
 * ì™¸ë¶€ API ì¸ì¦ ì‹¤íŒ¨ ì˜ˆì™¸
 */
public class ExternalAuthException extends ExternalApiException {
    
    private String tokenType;
    private LocalDateTime tokenExpiry;
    
    public ExternalAuthException(ErrorCode errorCode, String customMessage) {
        super(errorCode, customMessage);
    }
    
    public ExternalAuthException withTokenInfo(String tokenType, LocalDateTime tokenExpiry) {
        this.tokenType = tokenType;
        this.tokenExpiry = tokenExpiry;
        return this;
    }
    
    public boolean isTokenExpired() {
        return tokenExpiry != null && LocalDateTime.now().isAfter(tokenExpiry);
    }
}

/**
 * ì™¸ë¶€ API ìš”ì²­ ì œí•œ ì˜ˆì™¸
 */
public class ExternalRateLimitException extends ExternalApiException {
    
    private Integer retryAfterSeconds;
    private Integer remainingRequests;
    private LocalDateTime resetTime;
    
    public ExternalRateLimitException(ErrorCode errorCode, String customMessage) {
        super(errorCode, customMessage);
    }
    
    public ExternalRateLimitException withRateLimitInfo(Integer retryAfterSeconds, 
                                                       Integer remainingRequests, 
                                                       LocalDateTime resetTime) {
        this.retryAfterSeconds = retryAfterSeconds;
        this.remainingRequests = remainingRequests;
        this.resetTime = resetTime;
        return this;
    }
    
    public Duration getRetryAfterDuration() {
        return retryAfterSeconds != null ? 
            Duration.ofSeconds(retryAfterSeconds) : Duration.ofMinutes(1);
    }
}

/**
 * ì™¸ë¶€ API íƒ€ì„ì•„ì›ƒ ì˜ˆì™¸
 */
public class ExternalTimeoutException extends ExternalApiException {
    
    private Duration timeout;
    private String timeoutType; // "connect", "read", "total"
    
    public ExternalTimeoutException(ErrorCode errorCode, String customMessage) {
        super(errorCode, customMessage);
    }
    
    public ExternalTimeoutException withTimeoutInfo(Duration timeout, String timeoutType) {
        this.timeout = timeout;
        this.timeoutType = timeoutType;
        return this;
    }
}
```

### 8.3 ì„œë¹„ìŠ¤ ë˜í¼ íŒ¨í„´

ì™¸ë¶€ API í´ë¼ì´ì–¸íŠ¸ë¥¼ ì§ì ‘ ì‚¬ìš©í•˜ì§€ ì•Šê³  Service ê³„ì¸µì—ì„œ ë˜í•‘í•˜ì—¬ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ê³¼ ì˜ˆì™¸ ì²˜ë¦¬ë¥¼ í†µí•© ê´€ë¦¬í•©ë‹ˆë‹¤.

#### ğŸ”„ SKTAI ì„œë¹„ìŠ¤ ë˜í¼ êµ¬í˜„

##### 1. SKTAI ì¸ì¦ ì„œë¹„ìŠ¤
```java
/**
 * SKTAI ì¸ì¦ ì„œë¹„ìŠ¤
 * 
 * <p>SKTAI APIì˜ ì¸ì¦ ê´€ë ¨ ê¸°ëŠ¥ì„ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ê³¼ í•¨ê»˜ ì œê³µí•©ë‹ˆë‹¤.
 * í† í° ê´€ë¦¬, ìë™ ê°±ì‹ , ì—ëŸ¬ ì²˜ë¦¬ë¥¼ ë‹´ë‹¹í•©ë‹ˆë‹¤.</p>
 * 
 * @author ByounggwanLee
 * @since 2025-10-09
 */
@Service
@Slf4j
@RequiredArgsConstructor
public class SktaiAuthService {
    
    private final SktaiAuthClient sktaiAuthClient;
    private final SktaiTokenManager tokenManager;
    private final ExternalApiMetrics apiMetrics;
    
    /**
     * SKTAI ë¡œê·¸ì¸
     * 
     * @param username ì‚¬ìš©ìëª…
     * @param password ë¹„ë°€ë²ˆí˜¸
     * @return ì•¡ì„¸ìŠ¤ í† í° ì •ë³´
     */
    public AccessTokenResponseDto login(String username, String password) {
        String requestId = UUID.randomUUID().toString();
        
        // ì…ë ¥ê°’ ê²€ì¦
        validateLoginInput(username, password);
        
        // ìš”ì²­ ê°ì²´ ìƒì„±
        LoginRequestDto request = LoginRequestDto.builder()
                .grantType("password")
                .username(username)
                .password(password)
                .build();
        
        Timer.Sample sample = Timer.start();
        
        try {
            log.info("SKTAI ë¡œê·¸ì¸ ìš”ì²­ ì‹œì‘ [{}]: username={}", requestId, username);
            
            // API í˜¸ì¶œ
            AccessTokenResponseDto response = sktaiAuthClient.login(request);
            
            // í† í° ì €ì¥
            tokenManager.storeToken(response.getAccessToken(), response.getExpiresIn());
            
            // ì„±ê³µ ë©”íŠ¸ë¦­ ê¸°ë¡
            sample.stop(apiMetrics.getLoginTimer("success"));
            apiMetrics.incrementLoginCounter("success");
            
            log.info("SKTAI ë¡œê·¸ì¸ ì„±ê³µ [{}]: username={}, expiresIn={}", 
                requestId, username, response.getExpiresIn());
            
            // ë¹„ë°€ë²ˆí˜¸ ì œê±°ëœ ì‘ë‹µ ë°˜í™˜
            return sanitizeTokenResponse(response);
            
        } catch (FeignException.Unauthorized ex) {
            sample.stop(apiMetrics.getLoginTimer("unauthorized"));
            apiMetrics.incrementLoginCounter("unauthorized");
            
            log.warn("SKTAI ë¡œê·¸ì¸ ì¸ì¦ ì‹¤íŒ¨ [{}]: username={}", requestId, username);
            throw new ExternalAuthException(ErrorCode.EXTERNAL_AUTH_FAILED, 
                "SKTAI ì¸ì¦ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤. ì‚¬ìš©ìëª…ê³¼ ë¹„ë°€ë²ˆí˜¸ë¥¼ í™•ì¸í•´ì£¼ì„¸ìš”.")
                .withApiName("SKTAI")
                .withEndpoint("/api/v1/auth/login")
                .withResponseStatus(401);
                
        } catch (FeignException.UnprocessableEntity ex) {
            sample.stop(apiMetrics.getLoginTimer("validation_error"));
            apiMetrics.incrementLoginCounter("validation_error");
            
            log.warn("SKTAI ë¡œê·¸ì¸ ì…ë ¥ê°’ ì˜¤ë¥˜ [{}]: username={}", requestId, username);
            throw new ExternalApiException(ErrorCode.EXTERNAL_VALIDATION_FAILED, 
                "ì…ë ¥ê°’ì´ ì˜¬ë°”ë¥´ì§€ ì•ŠìŠµë‹ˆë‹¤.")
                .withApiName("SKTAI")
                .withEndpoint("/api/v1/auth/login")
                .withResponseStatus(422);
                
        } catch (FeignException ex) {
            sample.stop(apiMetrics.getLoginTimer("error"));
            apiMetrics.incrementLoginCounter("error");
            
            log.error("SKTAI ë¡œê·¸ì¸ API ì˜¤ë¥˜ [{}]: username={}, status={}", 
                requestId, username, ex.status(), ex);
            throw new ExternalApiException(ErrorCode.EXTERNAL_API_ERROR, 
                "SKTAI ë¡œê·¸ì¸ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.")
                .withApiName("SKTAI")
                .withEndpoint("/api/v1/auth/login")
                .withResponseStatus(ex.status());
                
        } catch (Exception ex) {
            sample.stop(apiMetrics.getLoginTimer("error"));
            apiMetrics.incrementLoginCounter("error");
            
            log.error("SKTAI ë¡œê·¸ì¸ ì˜ˆìƒì¹˜ ëª»í•œ ì˜¤ë¥˜ [{}]: username={}", requestId, username, ex);
            throw new ExternalApiException(ErrorCode.EXTERNAL_API_ERROR, 
                "SKTAI ë¡œê·¸ì¸ ì¤‘ ì˜ˆìƒì¹˜ ëª»í•œ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.", ex)
                .withApiName("SKTAI")
                .withEndpoint("/api/v1/auth/login");
        }
    }
    
    /**
     * í˜„ì¬ ì‚¬ìš©ì ì •ë³´ ì¡°íšŒ
     * 
     * @return ì‚¬ìš©ì ì •ë³´
     */
    public MeResponseDto getCurrentUser() {
        String requestId = UUID.randomUUID().toString();
        
        try {
            String accessToken = tokenManager.getValidAccessToken();
            String authorization = "Bearer " + accessToken;
            
            log.debug("SKTAI í˜„ì¬ ì‚¬ìš©ì ì •ë³´ ì¡°íšŒ ì‹œì‘ [{}]", requestId);
            
            MeResponseDto response = sktaiAuthClient.getCurrentUser(authorization);
            
            log.debug("SKTAI í˜„ì¬ ì‚¬ìš©ì ì •ë³´ ì¡°íšŒ ì„±ê³µ [{}]: userId={}", 
                requestId, response.getId());
            
            return response;
            
        } catch (FeignException.Unauthorized ex) {
            log.warn("SKTAI í† í° ë§Œë£Œ ë˜ëŠ” ì¸ì¦ ì‹¤íŒ¨ [{}]", requestId);
            
            // í† í° ê°±ì‹  ì‹œë„
            try {
                tokenManager.refreshToken();
                String newAccessToken = tokenManager.getValidAccessToken();
                String authorization = "Bearer " + newAccessToken;
                
                MeResponseDto response = sktaiAuthClient.getCurrentUser(authorization);
                log.info("SKTAI í† í° ê°±ì‹  í›„ ì‚¬ìš©ì ì •ë³´ ì¡°íšŒ ì„±ê³µ [{}]", requestId);
                
                return response;
                
            } catch (Exception refreshEx) {
                log.error("SKTAI í† í° ê°±ì‹  ì‹¤íŒ¨ [{}]", requestId, refreshEx);
                throw new ExternalAuthException(ErrorCode.TOKEN_EXPIRED, 
                    "ì¸ì¦ í† í°ì´ ë§Œë£Œë˜ì—ˆìŠµë‹ˆë‹¤. ë‹¤ì‹œ ë¡œê·¸ì¸í•´ì£¼ì„¸ìš”.")
                    .withApiName("SKTAI")
                    .withEndpoint("/api/v1/auth/me")
                    .withResponseStatus(401);
            }
            
        } catch (Exception ex) {
            log.error("SKTAI í˜„ì¬ ì‚¬ìš©ì ì •ë³´ ì¡°íšŒ ì˜¤ë¥˜ [{}]", requestId, ex);
            throw new ExternalApiException(ErrorCode.EXTERNAL_API_ERROR, 
                "ì‚¬ìš©ì ì •ë³´ ì¡°íšŒ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.", ex)
                .withApiName("SKTAI")
                .withEndpoint("/api/v1/auth/me");
        }
    }
    
    /**
     * ì…ë ¥ê°’ ê²€ì¦
     */
    private void validateLoginInput(String username, String password) {
        if (!StringUtils.hasText(username)) {
            throw new ValidationException(ErrorCode.INVALID_INPUT_VALUE, 
                "ì‚¬ìš©ìëª…ì€ í•„ìˆ˜ì…ë‹ˆë‹¤.");
        }
        
        if (!StringUtils.hasText(password)) {
            throw new ValidationException(ErrorCode.INVALID_INPUT_VALUE, 
                "ë¹„ë°€ë²ˆí˜¸ëŠ” í•„ìˆ˜ì…ë‹ˆë‹¤.");
        }
        
        if (username.length() < 3 || username.length() > 50) {
            throw new ValidationException(ErrorCode.INVALID_INPUT_VALUE, 
                "ì‚¬ìš©ìëª…ì€ 3-50ì ì‚¬ì´ì—¬ì•¼ í•©ë‹ˆë‹¤.");
        }
        
        if (password.length() < 8) {
            throw new ValidationException(ErrorCode.INVALID_INPUT_VALUE, 
                "ë¹„ë°€ë²ˆí˜¸ëŠ” 8ì ì´ìƒì´ì–´ì•¼ í•©ë‹ˆë‹¤.");
        }
    }
    
    /**
     * í† í° ì‘ë‹µì—ì„œ ë¯¼ê°í•œ ì •ë³´ ì œê±°
     */
    private AccessTokenResponseDto sanitizeTokenResponse(AccessTokenResponseDto response) {
        return AccessTokenResponseDto.builder()
                .accessToken(response.getAccessToken())
                .tokenType(response.getTokenType())
                .expiresIn(response.getExpiresIn())
                .scope(response.getScope())
                // refreshToken ë“± ë¯¼ê°í•œ ì •ë³´ëŠ” ì œì™¸í•˜ê³  ë°˜í™˜
                .build();
    }
}
```

##### 2. SKTAI ì‚¬ìš©ì ê´€ë¦¬ ì„œë¹„ìŠ¤
```java
/**
 * SKTAI ì‚¬ìš©ì ê´€ë¦¬ ì„œë¹„ìŠ¤
 * 
 * @author ByounggwanLee
 * @since 2025-10-09
 */
@Service
@Slf4j
@RequiredArgsConstructor
public class SktaiUserService {
    
    private final SktaiUserClient sktaiUserClient;
    private final SktaiTokenManager tokenManager;
    private final ExternalApiMetrics apiMetrics;
    
    /**
     * ì‚¬ìš©ì ëª©ë¡ ì¡°íšŒ
     * 
     * @param page í˜ì´ì§€ ë²ˆí˜¸
     * @param size í˜ì´ì§€ í¬ê¸°
     * @param sort ì •ë ¬ ì¡°ê±´
     * @param filter í•„í„° ì¡°ê±´
     * @param search ê²€ìƒ‰ì–´
     * @return ì‚¬ìš©ì ëª©ë¡
     */
    public UsersResponseDto getUsers(Integer page, Integer size, String sort, 
                                   String filter, String search) {
        String requestId = UUID.randomUUID().toString();
        
        // ê¸°ë³¸ê°’ ì„¤ì •
        page = page != null ? page : 1;
        size = size != null ? size : 10;
        
        // í˜ì´ì§• ê²€ì¦
        validatePagingParameters(page, size);
        
        Timer.Sample sample = Timer.start();
        
        try {
            String authorization = "Bearer " + tokenManager.getValidAccessToken();
            
            log.debug("SKTAI ì‚¬ìš©ì ëª©ë¡ ì¡°íšŒ ì‹œì‘ [{}]: page={}, size={}, search={}", 
                requestId, page, size, search);
            
            UsersResponseDto response = sktaiUserClient.getUsers(
                authorization, page, size, sort, filter, search);
            
            sample.stop(apiMetrics.getUsersTimer("success"));
            apiMetrics.incrementUsersCounter("success");
            
            log.debug("SKTAI ì‚¬ìš©ì ëª©ë¡ ì¡°íšŒ ì„±ê³µ [{}]: totalCount={}", 
                requestId, response.getTotalCount());
            
            return response;
            
        } catch (FeignException.Unauthorized ex) {
            sample.stop(apiMetrics.getUsersTimer("unauthorized"));
            apiMetrics.incrementUsersCounter("unauthorized");
            
            // í† í° ê°±ì‹  í›„ ì¬ì‹œë„
            return retryWithTokenRefresh(() -> {
                String authorization = "Bearer " + tokenManager.getValidAccessToken();
                return sktaiUserClient.getUsers(authorization, page, size, sort, filter, search);
            }, requestId, "getUsers");
            
        } catch (FeignException ex) {
            sample.stop(apiMetrics.getUsersTimer("error"));
            apiMetrics.incrementUsersCounter("error");
            
            log.error("SKTAI ì‚¬ìš©ì ëª©ë¡ ì¡°íšŒ ì˜¤ë¥˜ [{}]: status={}", requestId, ex.status(), ex);
            throw new ExternalApiException(ErrorCode.EXTERNAL_API_ERROR, 
                "ì‚¬ìš©ì ëª©ë¡ ì¡°íšŒ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.")
                .withApiName("SKTAI")
                .withEndpoint("/api/v1/users")
                .withResponseStatus(ex.status());
                
        } catch (Exception ex) {
            sample.stop(apiMetrics.getUsersTimer("error"));
            apiMetrics.incrementUsersCounter("error");
            
            log.error("SKTAI ì‚¬ìš©ì ëª©ë¡ ì¡°íšŒ ì˜ˆìƒì¹˜ ëª»í•œ ì˜¤ë¥˜ [{}]", requestId, ex);
            throw new ExternalApiException(ErrorCode.EXTERNAL_API_ERROR, 
                "ì‚¬ìš©ì ëª©ë¡ ì¡°íšŒ ì¤‘ ì˜ˆìƒì¹˜ ëª»í•œ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.", ex)
                .withApiName("SKTAI")
                .withEndpoint("/api/v1/users");
        }
    }
    
    /**
     * í˜ì´ì§• íŒŒë¼ë¯¸í„° ê²€ì¦
     */
    private void validatePagingParameters(Integer page, Integer size) {
        if (page < 1) {
            throw new ValidationException(ErrorCode.INVALID_INPUT_VALUE, 
                "í˜ì´ì§€ ë²ˆí˜¸ëŠ” 1 ì´ìƒì´ì–´ì•¼ í•©ë‹ˆë‹¤.");
        }
        
        if (size < 1 || size > 100) {
            throw new ValidationException(ErrorCode.INVALID_INPUT_VALUE, 
                "í˜ì´ì§€ í¬ê¸°ëŠ” 1-100 ì‚¬ì´ì—¬ì•¼ í•©ë‹ˆë‹¤.");
        }
    }
    
    /**
     * í† í° ê°±ì‹  í›„ ì¬ì‹œë„
     */
    private <T> T retryWithTokenRefresh(Supplier<T> operation, String requestId, String operationName) {
        try {
            log.info("SKTAI í† í° ê°±ì‹  í›„ {} ì¬ì‹œë„ [{}]", operationName, requestId);
            tokenManager.refreshToken();
            
            T result = operation.get();
            log.info("SKTAI í† í° ê°±ì‹  í›„ {} ì„±ê³µ [{}]", operationName, requestId);
            
            return result;
            
        } catch (Exception refreshEx) {
            log.error("SKTAI í† í° ê°±ì‹  í›„ {} ì¬ì‹œë„ ì‹¤íŒ¨ [{}]", operationName, requestId, refreshEx);
            throw new ExternalAuthException(ErrorCode.TOKEN_EXPIRED, 
                "ì¸ì¦ í† í°ì´ ë§Œë£Œë˜ì—ˆìŠµë‹ˆë‹¤. ë‹¤ì‹œ ë¡œê·¸ì¸í•´ì£¼ì„¸ìš”.")
                .withApiName("SKTAI")
                .withEndpoint("/api/v1/users");
        }
    }
}
```

##### 3. í† í° ê´€ë¦¬ì
```java
/**
 * SKTAI í† í° ê´€ë¦¬ì
 * 
 * <p>ì•¡ì„¸ìŠ¤ í† í°ì˜ ì €ì¥, ê°±ì‹ , ìœ íš¨ì„± ê²€ì‚¬ë¥¼ ë‹´ë‹¹í•©ë‹ˆë‹¤.</p>
 * 
 * @author ByounggwanLee
 * @since 2025-10-09
 */
@Component
@Slf4j
public class SktaiTokenManager {
    
    private volatile String accessToken;
    private volatile LocalDateTime tokenExpiry;
    private volatile String refreshToken;
    
    private final Object tokenLock = new Object();
    
    /**
     * í† í° ì €ì¥
     * 
     * @param accessToken ì•¡ì„¸ìŠ¤ í† í°
     * @param expiresInSeconds ë§Œë£Œ ì‹œê°„ (ì´ˆ)
     */
    public void storeToken(String accessToken, Integer expiresInSeconds) {
        synchronized (tokenLock) {
            this.accessToken = accessToken;
            this.tokenExpiry = LocalDateTime.now().plusSeconds(expiresInSeconds - 60); // 1ë¶„ ì—¬ìœ 
            
            log.debug("SKTAI í† í° ì €ì¥ ì™„ë£Œ: expiry={}", tokenExpiry);
        }
    }
    
    /**
     * ìœ íš¨í•œ ì•¡ì„¸ìŠ¤ í† í° ë°˜í™˜
     * 
     * @return ì•¡ì„¸ìŠ¤ í† í°
     * @throws ExternalAuthException í† í°ì´ ì—†ê±°ë‚˜ ë§Œë£Œëœ ê²½ìš°
     */
    public String getValidAccessToken() {
        synchronized (tokenLock) {
            if (!isTokenValid()) {
                throw new ExternalAuthException(ErrorCode.TOKEN_EXPIRED, 
                    "ìœ íš¨í•œ ì•¡ì„¸ìŠ¤ í† í°ì´ ì—†ìŠµë‹ˆë‹¤. ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤.");
            }
            
            return accessToken;
        }
    }
    
    /**
     * í† í° ìœ íš¨ì„± ê²€ì‚¬
     * 
     * @return ìœ íš¨ ì—¬ë¶€
     */
    public boolean isTokenValid() {
        return accessToken != null && 
               tokenExpiry != null && 
               LocalDateTime.now().isBefore(tokenExpiry);
    }
    
    /**
     * í† í° ê°±ì‹ 
     * 
     * @throws ExternalAuthException ê°±ì‹  ì‹¤íŒ¨ ì‹œ
     */
    public void refreshToken() {
        synchronized (tokenLock) {
            if (refreshToken == null) {
                throw new ExternalAuthException(ErrorCode.TOKEN_EXPIRED, 
                    "ë¦¬í”„ë ˆì‹œ í† í°ì´ ì—†ìŠµë‹ˆë‹¤. ë‹¤ì‹œ ë¡œê·¸ì¸í•´ì£¼ì„¸ìš”.");
            }
            
            // ì‹¤ì œ í† í° ê°±ì‹  ë¡œì§ì€ í”„ë¡œì íŠ¸ì— ë”°ë¼ êµ¬í˜„
            // ì—¬ê¸°ì„œëŠ” ì˜ˆì‹œë¡œ ì²˜ë¦¬
            log.warn("í† í° ê°±ì‹  ê¸°ëŠ¥ì´ êµ¬í˜„ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤. ë‹¤ì‹œ ë¡œê·¸ì¸í•´ì£¼ì„¸ìš”.");
            throw new ExternalAuthException(ErrorCode.TOKEN_EXPIRED, 
                "í† í°ì´ ë§Œë£Œë˜ì—ˆìŠµë‹ˆë‹¤. ë‹¤ì‹œ ë¡œê·¸ì¸í•´ì£¼ì„¸ìš”.");
        }
    }
    
    /**
     * í† í° ì‚­ì œ
     */
    public void clearToken() {
        synchronized (tokenLock) {
            this.accessToken = null;
            this.tokenExpiry = null;
            this.refreshToken = null;
            
            log.debug("SKTAI í† í° ì‚­ì œ ì™„ë£Œ");
        }
    }
}
```

---

## 9. ìœ íš¨ì„± ê²€ì¦ ì—ëŸ¬ ì²˜ë¦¬

### 9.1 Bean Validation í†µí•©

Spring Bootì˜ Bean Validationì„ í™œìš©í•˜ì—¬ ì…ë ¥ê°’ ê²€ì¦ê³¼ ì—ëŸ¬ ì²˜ë¦¬ë¥¼ ì²´ê³„í™”í•©ë‹ˆë‹¤.

#### ğŸ” Bean Validation ê¸°ë³¸ êµ¬ì¡°

##### 1. ìš”ì²­ DTO ê²€ì¦ ì–´ë…¸í…Œì´ì…˜
```java
/**
 * ì‚¬ìš©ì ìƒì„± ìš”ì²­ DTO
 * 
 * @author ByounggwanLee
 * @since 2025-10-09
 */
@Data
@NoArgsConstructor
@AllArgsConstructor
@Builder
@Schema(description = "ì‚¬ìš©ì ìƒì„± ìš”ì²­ ì •ë³´")
public class UserCreateReq {
    
    /**
     * ì‚¬ìš©ì ì´ë¦„
     */
    @NotBlank(message = "{user.validation.name.notBlank}")
    @Size(min = 2, max = 50, message = "{user.validation.name.size}")
    @Pattern(regexp = "^[ê°€-í£a-zA-Z\\s]+$", message = "{user.validation.name.pattern}")
    @Schema(description = "ì‚¬ìš©ì ì´ë¦„", example = "í™ê¸¸ë™", required = true)
    private String name;
    
    /**
     * ì´ë©”ì¼ ì£¼ì†Œ
     */
    @NotBlank(message = "{user.validation.email.notBlank}")
    @Email(message = "{user.validation.email.format}")
    @Size(max = 100, message = "{user.validation.email.size}")
    @Schema(description = "ì´ë©”ì¼ ì£¼ì†Œ", example = "hong@example.com", required = true)
    private String email;
    
    /**
     * ë¹„ë°€ë²ˆí˜¸
     */
    @NotBlank(message = "{user.validation.password.notBlank}")
    @Size(min = 8, max = 20, message = "{user.validation.password.size}")
    @Pattern(regexp = "^(?=.*[a-z])(?=.*[A-Z])(?=.*\\d)(?=.*[@$!%*?&])[A-Za-z\\d@$!%*?&]+$", 
             message = "{user.validation.password.pattern}")
    @Schema(description = "ë¹„ë°€ë²ˆí˜¸ (ì˜ë¬¸ ëŒ€ì†Œë¬¸ì, ìˆ«ì, íŠ¹ìˆ˜ë¬¸ì í¬í•¨)", example = "Password123!", required = true)
    private String password;
    
    /**
     * ë‚˜ì´
     */
    @NotNull(message = "{user.validation.age.notNull}")
    @Min(value = 14, message = "{user.validation.age.min}")
    @Max(value = 120, message = "{user.validation.age.max}")
    @Schema(description = "ë‚˜ì´", example = "25", required = true)
    private Integer age;
    
    /**
     * ì „í™”ë²ˆí˜¸
     */
    @Pattern(regexp = "^01[0-9]-\\d{4}-\\d{4}$", message = "{user.validation.phone.pattern}")
    @Schema(description = "ì „í™”ë²ˆí˜¸ (010-1234-5678 í˜•ì‹)", example = "010-1234-5678")
    private String phone;
    
    /**
     * ì£¼ì†Œ
     */
    @ValidAddress
    @Schema(description = "ì£¼ì†Œ ì •ë³´")
    private AddressDto address;
    
    /**
     * ì·¨ë¯¸ ëª©ë¡
     */
    @Size(max = 5, message = "{user.validation.hobbies.size}")
    @Schema(description = "ì·¨ë¯¸ ëª©ë¡ (ìµœëŒ€ 5ê°œ)")
    private List<@NotBlank(message = "{user.validation.hobby.notBlank}") 
                  @Size(max = 20, message = "{user.validation.hobby.size}") String> hobbies;
    
    /**
     * ë™ì˜ í•­ëª©
     */
    @Valid
    @NotNull(message = "{user.validation.agreement.notNull}")
    @Schema(description = "ë™ì˜ í•­ëª©", required = true)
    private UserAgreementDto agreement;
}

/**
 * ì£¼ì†Œ DTO
 */
@Data
@NoArgsConstructor
@AllArgsConstructor
@Builder
public class AddressDto {
    
    @Size(max = 10, message = "{address.validation.zipCode.size}")
    @Pattern(regexp = "^\\d{5}$", message = "{address.validation.zipCode.pattern}")
    @Schema(description = "ìš°í¸ë²ˆí˜¸", example = "12345")
    private String zipCode;
    
    @Size(max = 100, message = "{address.validation.street.size}")
    @Schema(description = "ë„ë¡œëª… ì£¼ì†Œ", example = "ì„œìš¸íŠ¹ë³„ì‹œ ê°•ë‚¨êµ¬ í…Œí—¤ë€ë¡œ 123")
    private String street;
    
    @Size(max = 50, message = "{address.validation.detail.size}")
    @Schema(description = "ìƒì„¸ ì£¼ì†Œ", example = "456í˜¸")
    private String detail;
}

/**
 * ì‚¬ìš©ì ë™ì˜ DTO
 */
@Data
@NoArgsConstructor
@AllArgsConstructor
@Builder
public class UserAgreementDto {
    
    @AssertTrue(message = "{user.validation.agreement.terms}")
    @Schema(description = "ì´ìš©ì•½ê´€ ë™ì˜", example = "true", required = true)
    private Boolean termsAgreed;
    
    @AssertTrue(message = "{user.validation.agreement.privacy}")
    @Schema(description = "ê°œì¸ì •ë³´ ìˆ˜ì§‘/ì´ìš© ë™ì˜", example = "true", required = true)
    private Boolean privacyAgreed;
    
    @Schema(description = "ë§ˆì¼€íŒ… ì •ë³´ ìˆ˜ì‹  ë™ì˜", example = "false")
    private Boolean marketingAgreed = false;
}
```

##### 2. ì»¤ìŠ¤í…€ ê²€ì¦ ì–´ë…¸í…Œì´ì…˜
```java
/**
 * ì£¼ì†Œ ìœ íš¨ì„± ê²€ì¦ ì–´ë…¸í…Œì´ì…˜
 * 
 * @author ByounggwanLee
 * @since 2025-10-09
 */
@Target({ElementType.TYPE, ElementType.FIELD})
@Retention(RetentionPolicy.RUNTIME)
@Constraint(validatedBy = AddressValidator.class)
@Documented
public @interface ValidAddress {
    
    String message() default "{validation.address.invalid}";
    
    Class<?>[] groups() default {};
    
    Class<? extends Payload>[] payload() default {};
}

/**
 * ì£¼ì†Œ ê²€ì¦ êµ¬í˜„ì²´
 */
@Component
public class AddressValidator implements ConstraintValidator<ValidAddress, AddressDto> {
    
    @Override
    public void initialize(ValidAddress constraintAnnotation) {
        // ì´ˆê¸°í™” ë¡œì§
    }
    
    @Override
    public boolean isValid(AddressDto address, ConstraintValidatorContext context) {
        if (address == null) {
            return true; // nullì€ @NotNullë¡œ ë³„ë„ ê²€ì¦
        }
        
        boolean isValid = true;
        
        // ìš°í¸ë²ˆí˜¸ê°€ ìˆìœ¼ë©´ ë„ë¡œëª… ì£¼ì†Œë„ í•„ìˆ˜
        if (StringUtils.hasText(address.getZipCode()) && !StringUtils.hasText(address.getStreet())) {
            context.disableDefaultConstraintViolation();
            context.buildConstraintViolationWithTemplate("{address.validation.street.required}")
                   .addPropertyNode("street")
                   .addConstraintViolation();
            isValid = false;
        }
        
        // ë„ë¡œëª… ì£¼ì†Œê°€ ìˆìœ¼ë©´ ìš°í¸ë²ˆí˜¸ë„ í•„ìˆ˜
        if (StringUtils.hasText(address.getStreet()) && !StringUtils.hasText(address.getZipCode())) {
            context.disableDefaultConstraintViolation();
            context.buildConstraintViolationWithTemplate("{address.validation.zipCode.required}")
                   .addPropertyNode("zipCode")
                   .addConstraintViolation();
            isValid = false;
        }
        
        return isValid;
    }
}

/**
 * ì´ë©”ì¼ ì¤‘ë³µ ê²€ì¦ ì–´ë…¸í…Œì´ì…˜
 */
@Target({ElementType.FIELD})
@Retention(RetentionPolicy.RUNTIME)
@Constraint(validatedBy = UniqueEmailValidator.class)
@Documented
public @interface UniqueEmail {
    
    String message() default "{validation.email.duplicate}";
    
    Class<?>[] groups() default {};
    
    Class<? extends Payload>[] payload() default {};
    
    /**
     * ì—…ë°ì´íŠ¸ ì‹œ ì œì™¸í•  ì‚¬ìš©ì ID í•„ë“œëª…
     */
    String excludeField() default "";
}

/**
 * ì´ë©”ì¼ ì¤‘ë³µ ê²€ì¦ êµ¬í˜„ì²´
 */
@Component
@RequiredArgsConstructor
public class UniqueEmailValidator implements ConstraintValidator<UniqueEmail, String> {
    
    private final UserRepository userRepository;
    
    private String excludeField;
    
    @Override
    public void initialize(UniqueEmail constraintAnnotation) {
        this.excludeField = constraintAnnotation.excludeField();
    }
    
    @Override
    public boolean isValid(String email, ConstraintValidatorContext context) {
        if (!StringUtils.hasText(email)) {
            return true; // null/emptyëŠ” @NotBlankë¡œ ë³„ë„ ê²€ì¦
        }
        
        try {
            // ì œì™¸í•  IDê°€ ìˆëŠ” ê²½ìš° (ì—…ë°ì´íŠ¸)
            if (StringUtils.hasText(excludeField)) {
                Object root = context.unwrap(HibernateConstraintValidatorContext.class)
                                    .getConstraintValidatorPayload(Object.class);
                
                if (root != null) {
                    Long excludeId = getExcludeId(root);
                    if (excludeId != null) {
                        return !userRepository.existsByEmailAndIdNot(email, excludeId);
                    }
                }
            }
            
            // ì¼ë°˜ì ì¸ ì¤‘ë³µ ê²€ì‚¬
            return !userRepository.existsByEmailAndStatusNot(email, UserStatus.DELETED);
            
        } catch (Exception ex) {
            // DB ì¡°íšŒ ì‹¤íŒ¨ ì‹œ ê²€ì¦ í†µê³¼ (ë³„ë„ ì—ëŸ¬ ì²˜ë¦¬ì—ì„œ ì²˜ë¦¬)
            log.warn("Email uniqueness validation failed", ex);
            return true;
        }
    }
    
    private Long getExcludeId(Object root) {
        try {
            Field field = root.getClass().getDeclaredField(excludeField);
            field.setAccessible(true);
            return (Long) field.get(root);
        } catch (Exception ex) {
            log.warn("Failed to get exclude ID from field: {}", excludeField, ex);
            return null;
        }
    }
}
```

### 9.2 ê²€ì¦ ê·¸ë£¹ê³¼ ì‹œë‚˜ë¦¬ì˜¤ë³„ ê²€ì¦

ë³µì¡í•œ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì—ì„œëŠ” ìƒí™©ì— ë”°ë¼ ë‹¤ë¥¸ ê²€ì¦ ê·œì¹™ì„ ì ìš©í•´ì•¼ í•©ë‹ˆë‹¤.

#### ğŸ¯ ê²€ì¦ ê·¸ë£¹ ì •ì˜

##### 1. ê²€ì¦ ê·¸ë£¹ ì¸í„°í˜ì´ìŠ¤
```java
/**
 * ê²€ì¦ ê·¸ë£¹ ì •ì˜
 * 
 * @author ByounggwanLee
 * @since 2025-10-09
 */
public class ValidationGroups {
    
    /**
     * ìƒì„± ì‹œ ê²€ì¦
     */
    public interface Create {}
    
    /**
     * ì—…ë°ì´íŠ¸ ì‹œ ê²€ì¦
     */
    public interface Update {}
    
    /**
     * ë¶€ë¶„ ì—…ë°ì´íŠ¸ ì‹œ ê²€ì¦
     */
    public interface PartialUpdate {}
    
    /**
     * ê´€ë¦¬ì ì „ìš© ê²€ì¦
     */
    public interface Admin {}
    
    /**
     * ì™¸ë¶€ API ì—°ë™ ì‹œ ê²€ì¦
     */
    public interface External {}
    
    /**
     * ë°°ì¹˜ ì²˜ë¦¬ ì‹œ ê²€ì¦
     */
    public interface Batch {}
}
```

##### 2. ê·¸ë£¹ë³„ ê²€ì¦ ì ìš©
```java
/**
 * ì‚¬ìš©ì ì—…ë°ì´íŠ¸ ìš”ì²­ DTO (ê·¸ë£¹ ê²€ì¦ ì ìš©)
 * 
 * @author ByounggwanLee
 * @since 2025-10-09
 */
@Data
@NoArgsConstructor
@AllArgsConstructor
@Builder
public class UserUpdateReq {
    
    /**
     * ì‚¬ìš©ì ID (ì—…ë°ì´íŠ¸ ì‹œ í•„ìˆ˜)
     */
    @NotNull(groups = {ValidationGroups.Update.class, ValidationGroups.Admin.class}, 
             message = "{user.validation.id.notNull}")
    @Min(value = 1, groups = {ValidationGroups.Update.class, ValidationGroups.Admin.class}, 
         message = "{user.validation.id.min}")
    private Long id;
    
    /**
     * ì´ë¦„ (ë¶€ë¶„ ì—…ë°ì´íŠ¸ì—ì„œëŠ” ì„ íƒì )
     */
    @NotBlank(groups = {ValidationGroups.Update.class}, 
              message = "{user.validation.name.notBlank}")
    @Size(min = 2, max = 50, groups = {ValidationGroups.Update.class, ValidationGroups.PartialUpdate.class}, 
          message = "{user.validation.name.size}")
    private String name;
    
    /**
     * ì´ë©”ì¼ (ì—…ë°ì´íŠ¸ ì‹œ ì¤‘ë³µ ê²€ì‚¬ì—ì„œ ìì‹  ì œì™¸)
     */
    @Email(groups = {ValidationGroups.Update.class, ValidationGroups.PartialUpdate.class}, 
           message = "{user.validation.email.format}")
    @UniqueEmail(excludeField = "id", 
                groups = {ValidationGroups.Update.class, ValidationGroups.PartialUpdate.class})
    private String email;
    
    /**
     * ë‚˜ì´ (ê´€ë¦¬ìë§Œ ìˆ˜ì • ê°€ëŠ¥)
     */
    @Min(value = 14, groups = {ValidationGroups.Admin.class}, 
         message = "{user.validation.age.min}")
    @Max(value = 120, groups = {ValidationGroups.Admin.class}, 
         message = "{user.validation.age.max}")
    private Integer age;
    
    /**
     * ìƒíƒœ (ê´€ë¦¬ìë§Œ ë³€ê²½ ê°€ëŠ¥)
     */
    @NotNull(groups = {ValidationGroups.Admin.class}, 
             message = "{user.validation.status.notNull}")
    private UserStatus status;
    
    /**
     * ì—­í•  ëª©ë¡ (ê´€ë¦¬ìë§Œ ë³€ê²½ ê°€ëŠ¥)
     */
    @Size(max = 10, groups = {ValidationGroups.Admin.class}, 
          message = "{user.validation.roles.size}")
    private List<UserRole> roles;
}
```

##### 3. Controllerì—ì„œ ê·¸ë£¹ ê²€ì¦ ì‚¬ìš©
```java
/**
 * ì‚¬ìš©ì ì»¨íŠ¸ë¡¤ëŸ¬ (ê·¸ë£¹ ê²€ì¦ ì ìš©)
 * 
 * @author ByounggwanLee
 * @since 2025-10-09
 */
@RestController
@RequestMapping("/api/v1/users")
@RequiredArgsConstructor
@Slf4j
@Validated // í´ë˜ìŠ¤ ë ˆë²¨ ê²€ì¦ í™œì„±í™”
public class UserController {
    
    private final UserService userService;
    
    /**
     * ì‚¬ìš©ì ì „ì²´ ì—…ë°ì´íŠ¸ (ì¼ë°˜ ì‚¬ìš©ì)
     */
    @PutMapping("/{id}")
    @Operation(summary = "ì‚¬ìš©ì ì •ë³´ ìˆ˜ì •", description = "ì‚¬ìš©ì ì •ë³´ë¥¼ ì „ì²´ì ìœ¼ë¡œ ìˆ˜ì •í•©ë‹ˆë‹¤")
    public AxResponseEntity<UserRes> updateUser(
            @PathVariable @Min(value = 1, message = "ì‚¬ìš©ì IDëŠ” 1 ì´ìƒì´ì–´ì•¼ í•©ë‹ˆë‹¤") Long id,
            @Validated(ValidationGroups.Update.class) @RequestBody UserUpdateReq request) {
        
        // ID ì¼ì¹˜ì„± ê²€ì¦
        if (!Objects.equals(id, request.getId())) {
            throw new ValidationException(ErrorCode.INVALID_INPUT_VALUE, 
                "ê²½ë¡œì˜ IDì™€ ìš”ì²­ ë°ì´í„°ì˜ IDê°€ ì¼ì¹˜í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.");
        }
        
        UserRes user = userService.updateUser(request);
        return AxResponseEntity.updated(user, "ì‚¬ìš©ì ì •ë³´ê°€ ì„±ê³µì ìœ¼ë¡œ ìˆ˜ì •ë˜ì—ˆìŠµë‹ˆë‹¤.");
    }
    
    /**
     * ì‚¬ìš©ì ë¶€ë¶„ ì—…ë°ì´íŠ¸
     */
    @PatchMapping("/{id}")
    @Operation(summary = "ì‚¬ìš©ì ì •ë³´ ë¶€ë¶„ ìˆ˜ì •", description = "ì‚¬ìš©ì ì •ë³´ë¥¼ ë¶€ë¶„ì ìœ¼ë¡œ ìˆ˜ì •í•©ë‹ˆë‹¤")
    public AxResponseEntity<UserRes> partialUpdateUser(
            @PathVariable @Min(value = 1, message = "ì‚¬ìš©ì IDëŠ” 1 ì´ìƒì´ì–´ì•¼ í•©ë‹ˆë‹¤") Long id,
            @Validated(ValidationGroups.PartialUpdate.class) @RequestBody UserUpdateReq request) {
        
        request.setId(id); // ê²½ë¡œì˜ IDë¡œ ì„¤ì •
        
        UserRes user = userService.partialUpdateUser(request);
        return AxResponseEntity.updated(user, "ì‚¬ìš©ì ì •ë³´ê°€ ì„±ê³µì ìœ¼ë¡œ ìˆ˜ì •ë˜ì—ˆìŠµë‹ˆë‹¤.");
    }
    
    /**
     * ê´€ë¦¬ì ì „ìš© ì‚¬ìš©ì ì—…ë°ì´íŠ¸
     */
    @PutMapping("/{id}/admin")
    @Operation(summary = "ê´€ë¦¬ììš© ì‚¬ìš©ì ìˆ˜ì •", description = "ê´€ë¦¬ìê°€ ì‚¬ìš©ì ì •ë³´ë¥¼ ìˆ˜ì •í•©ë‹ˆë‹¤")
    @PreAuthorize("hasRole('ADMIN')")
    public AxResponseEntity<UserRes> adminUpdateUser(
            @PathVariable @Min(value = 1, message = "ì‚¬ìš©ì IDëŠ” 1 ì´ìƒì´ì–´ì•¼ í•©ë‹ˆë‹¤") Long id,
            @Validated(ValidationGroups.Admin.class) @RequestBody UserUpdateReq request) {
        
        request.setId(id);
        
        UserRes user = userService.adminUpdateUser(request);
        return AxResponseEntity.updated(user, "ì‚¬ìš©ì ì •ë³´ê°€ ê´€ë¦¬ìì— ì˜í•´ ìˆ˜ì •ë˜ì—ˆìŠµë‹ˆë‹¤.");
    }
    
    /**
     * ì‚¬ìš©ì ëª©ë¡ ì¡°íšŒ (í˜ì´ì§• íŒŒë¼ë¯¸í„° ê²€ì¦)
     */
    @GetMapping
    @Operation(summary = "ì‚¬ìš©ì ëª©ë¡ ì¡°íšŒ", description = "í˜ì´ì§•ëœ ì‚¬ìš©ì ëª©ë¡ì„ ì¡°íšŒí•©ë‹ˆë‹¤")
    public AxResponseEntity<PageResponse<UserRes>> getUsers(
            @RequestParam(defaultValue = "0") 
            @Min(value = 0, message = "í˜ì´ì§€ ë²ˆí˜¸ëŠ” 0 ì´ìƒì´ì–´ì•¼ í•©ë‹ˆë‹¤") Integer page,
            @RequestParam(defaultValue = "20") 
            @Min(value = 1, message = "í˜ì´ì§€ í¬ê¸°ëŠ” 1 ì´ìƒì´ì–´ì•¼ í•©ë‹ˆë‹¤")
            @Max(value = 100, message = "í˜ì´ì§€ í¬ê¸°ëŠ” 100 ì´í•˜ì—¬ì•¼ í•©ë‹ˆë‹¤") Integer size,
            @RequestParam(required = false) 
            @Pattern(regexp = "^[a-zA-Z]+,(asc|desc)$", 
                     message = "ì •ë ¬ í˜•ì‹ì´ ì˜¬ë°”ë¥´ì§€ ì•ŠìŠµë‹ˆë‹¤ (ì˜ˆ: name,asc)") String sort,
            @RequestParam(required = false) 
            @Size(max = 100, message = "ê²€ìƒ‰ì–´ëŠ” 100ì ì´í•˜ì—¬ì•¼ í•©ë‹ˆë‹¤") String search) {
        
        Pageable pageable = createPageable(page, size, sort);
        PageResponse<UserRes> users = userService.getUsers(pageable, search);
        
        return AxResponseEntity.okPage(users, "ì‚¬ìš©ì ëª©ë¡ì„ ì„±ê³µì ìœ¼ë¡œ ì¡°íšŒí–ˆìŠµë‹ˆë‹¤.");
    }
    
    /**
     * Pageable ê°ì²´ ìƒì„±
     */
    private Pageable createPageable(Integer page, Integer size, String sort) {
        if (StringUtils.hasText(sort)) {
            String[] sortParts = sort.split(",");
            String property = sortParts[0];
            Sort.Direction direction = "desc".equalsIgnoreCase(sortParts[1]) ? 
                Sort.Direction.DESC : Sort.Direction.ASC;
            
            return PageRequest.of(page, size, Sort.by(direction, property));
        } else {
            return PageRequest.of(page, size, Sort.by(Sort.Direction.DESC, "createdAt"));
        }
    }
}
```

### 9.3 ì»¤ìŠ¤í…€ ê²€ì¦ ë¡œì§

ë³µì¡í•œ ë¹„ì¦ˆë‹ˆìŠ¤ ê·œì¹™ì´ë‚˜ ì—¬ëŸ¬ í•„ë“œ ê°„ì˜ ìƒí˜¸ ê²€ì¦ì´ í•„ìš”í•œ ê²½ìš° ì»¤ìŠ¤í…€ ê²€ì¦ ë¡œì§ì„ êµ¬í˜„í•©ë‹ˆë‹¤.

#### ğŸ§© ë³µí•© ê²€ì¦ ì–´ë…¸í…Œì´ì…˜

##### 1. ë¹„ì¦ˆë‹ˆìŠ¤ ê·œì¹™ ê²€ì¦
```java
/**
 * ì‚¬ìš©ì ë¹„ì¦ˆë‹ˆìŠ¤ ê·œì¹™ ê²€ì¦ ì–´ë…¸í…Œì´ì…˜
 * 
 * @author ByounggwanLee
 * @since 2025-10-09
 */
@Target({ElementType.TYPE})
@Retention(RetentionPolicy.RUNTIME)
@Constraint(validatedBy = UserBusinessRuleValidator.class)
@Documented
public @interface ValidUserBusinessRule {
    
    String message() default "{validation.user.businessRule.invalid}";
    
    Class<?>[] groups() default {};
    
    Class<? extends Payload>[] payload() default {};
}

/**
 * ì‚¬ìš©ì ë¹„ì¦ˆë‹ˆìŠ¤ ê·œì¹™ ê²€ì¦ êµ¬í˜„ì²´
 */
@Component
@RequiredArgsConstructor
@Slf4j
public class UserBusinessRuleValidator implements ConstraintValidator<ValidUserBusinessRule, UserCreateReq> {
    
    private final UserRepository userRepository;
    private final ConfigurationProperties configProperties;
    
    @Override
    public boolean isValid(UserCreateReq request, ConstraintValidatorContext context) {
        if (request == null) {
            return true;
        }
        
        boolean isValid = true;
        
        // 1. ë‚˜ì´ì™€ ì´ë©”ì¼ ë„ë©”ì¸ ê²€ì¦
        if (!validateAgeEmailDomainRule(request, context)) {
            isValid = false;
        }
        
        // 2. ë¹„ë°€ë²ˆí˜¸ì™€ ê°œì¸ì •ë³´ í¬í•¨ ê²€ì¦
        if (!validatePasswordPersonalInfoRule(request, context)) {
            isValid = false;
        }
        
        // 3. ë™ì˜ í•­ëª©ê³¼ ë‚˜ì´ ê²€ì¦
        if (!validateAgreementAgeRule(request, context)) {
            isValid = false;
        }
        
        // 4. ì·¨ë¯¸ì™€ ë‚˜ì´ ì í•©ì„± ê²€ì¦
        if (!validateHobbyAgeRule(request, context)) {
            isValid = false;
        }
        
        return isValid;
    }
    
    /**
     * ë‚˜ì´ì™€ ì´ë©”ì¼ ë„ë©”ì¸ ê·œì¹™ ê²€ì¦
     * 18ì„¸ ë¯¸ë§Œì€ êµìœ¡ ê¸°ê´€ ì´ë©”ì¼ë§Œ í—ˆìš©
     */
    private boolean validateAgeEmailDomainRule(UserCreateReq request, ConstraintValidatorContext context) {
        if (request.getAge() != null && request.getAge() < 18) {
            String email = request.getEmail();
            if (StringUtils.hasText(email)) {
                String domain = email.substring(email.indexOf("@") + 1).toLowerCase();
                List<String> allowedDomains = Arrays.asList("edu", "ac.kr", "school.kr");
                
                boolean isEducationalDomain = allowedDomains.stream()
                    .anyMatch(domain::endsWith);
                
                if (!isEducationalDomain) {
                    context.disableDefaultConstraintViolation();
                    context.buildConstraintViolationWithTemplate(
                        "{validation.user.ageEmailDomain.mismatch}")
                        .addPropertyNode("email")
                        .addConstraintViolation();
                    return false;
                }
            }
        }
        return true;
    }
    
    /**
     * ë¹„ë°€ë²ˆí˜¸ì— ê°œì¸ì •ë³´ í¬í•¨ ê²€ì¦
     */
    private boolean validatePasswordPersonalInfoRule(UserCreateReq request, ConstraintValidatorContext context) {
        String password = request.getPassword();
        String name = request.getName();
        String email = request.getEmail();
        
        if (!StringUtils.hasText(password)) {
            return true; // ë‹¤ë¥¸ ê²€ì¦ì—ì„œ ì²˜ë¦¬
        }
        
        String lowerPassword = password.toLowerCase();
        
        // ì´ë¦„ì´ ë¹„ë°€ë²ˆí˜¸ì— í¬í•¨ë˜ë©´ ì•ˆë¨
        if (StringUtils.hasText(name) && lowerPassword.contains(name.toLowerCase())) {
            context.disableDefaultConstraintViolation();
            context.buildConstraintViolationWithTemplate(
                "{validation.user.password.containsName}")
                .addPropertyNode("password")
                .addConstraintViolation();
            return false;
        }
        
        // ì´ë©”ì¼ ì•ë¶€ë¶„ì´ ë¹„ë°€ë²ˆí˜¸ì— í¬í•¨ë˜ë©´ ì•ˆë¨
        if (StringUtils.hasText(email)) {
            String emailPrefix = email.substring(0, email.indexOf("@")).toLowerCase();
            if (emailPrefix.length() >= 3 && lowerPassword.contains(emailPrefix)) {
                context.disableDefaultConstraintViolation();
                context.buildConstraintViolationWithTemplate(
                    "{validation.user.password.containsEmail}")
                    .addPropertyNode("password")
                    .addConstraintViolation();
                return false;
            }
        }
        
        return true;
    }
    
    /**
     * ë™ì˜ í•­ëª©ê³¼ ë‚˜ì´ ê·œì¹™ ê²€ì¦
     */
    private boolean validateAgreementAgeRule(UserCreateReq request, ConstraintValidatorContext context) {
        UserAgreementDto agreement = request.getAgreement();
        Integer age = request.getAge();
        
        if (agreement == null || age == null) {
            return true;
        }
        
        // 14ì„¸ ë¯¸ë§Œì€ ë§ˆì¼€íŒ… ë™ì˜ ë¶ˆê°€
        if (age < 14 && Boolean.TRUE.equals(agreement.getMarketingAgreed())) {
            context.disableDefaultConstraintViolation();
            context.buildConstraintViolationWithTemplate(
                "{validation.user.agreement.marketingAge}")
                .addPropertyNode("agreement.marketingAgreed")
                .addConstraintViolation();
            return false;
        }
        
        return true;
    }
    
    /**
     * ì·¨ë¯¸ì™€ ë‚˜ì´ ì í•©ì„± ê²€ì¦
     */
    private boolean validateHobbyAgeRule(UserCreateReq request, ConstraintValidatorContext context) {
        List<String> hobbies = request.getHobbies();
        Integer age = request.getAge();
        
        if (hobbies == null || hobbies.isEmpty() || age == null) {
            return true;
        }
        
        // ìœ„í—˜í•œ ì·¨ë¯¸ëŠ” 18ì„¸ ì´ìƒë§Œ í—ˆìš©
        List<String> dangerousHobbies = Arrays.asList("ìŠ¤ì¹´ì´ë‹¤ì´ë¹™", "ë²ˆì§€ì í”„", "íŒ¨ëŸ¬ê¸€ë¼ì´ë”©", "ì•”ë²½ë“±ë°˜");
        
        if (age < 18) {
            for (String hobby : hobbies) {
                if (dangerousHobbies.contains(hobby)) {
                    context.disableDefaultConstraintViolation();
                    context.buildConstraintViolationWithTemplate(
                        "{validation.user.hobby.ageRestriction}")
                        .addPropertyNode("hobbies")
                        .addConstraintViolation();
                    return false;
                }
            }
        }
        
        return true;
    }
}
```

##### 2. ë‚ ì§œ ë²”ìœ„ ê²€ì¦
```java
/**
 * ë‚ ì§œ ë²”ìœ„ ê²€ì¦ ì–´ë…¸í…Œì´ì…˜
 * 
 * @author ByounggwanLee
 * @since 2025-10-09
 */
@Target({ElementType.TYPE})
@Retention(RetentionPolicy.RUNTIME)
@Constraint(validatedBy = DateRangeValidator.class)
@Documented
public @interface ValidDateRange {
    
    String message() default "{validation.dateRange.invalid}";
    
    /**
     * ì‹œì‘ ë‚ ì§œ í•„ë“œëª…
     */
    String startField();
    
    /**
     * ì¢…ë£Œ ë‚ ì§œ í•„ë“œëª…
     */
    String endField();
    
    /**
     * ìµœëŒ€ ê¸°ê°„ (ì¼)
     */
    int maxDays() default Integer.MAX_VALUE;
    
    /**
     * ë¯¸ë˜ ë‚ ì§œ í—ˆìš© ì—¬ë¶€
     */
    boolean allowFuture() default true;
    
    Class<?>[] groups() default {};
    
    Class<? extends Payload>[] payload() default {};
}

/**
 * ë‚ ì§œ ë²”ìœ„ ê²€ì¦ êµ¬í˜„ì²´
 */
@Component
public class DateRangeValidator implements ConstraintValidator<ValidDateRange, Object> {
    
    private String startField;
    private String endField;
    private int maxDays;
    private boolean allowFuture;
    
    @Override
    public void initialize(ValidDateRange constraintAnnotation) {
        this.startField = constraintAnnotation.startField();
        this.endField = constraintAnnotation.endField();
        this.maxDays = constraintAnnotation.maxDays();
        this.allowFuture = constraintAnnotation.allowFuture();
    }
    
    @Override
    public boolean isValid(Object obj, ConstraintValidatorContext context) {
        if (obj == null) {
            return true;
        }
        
        try {
            LocalDate startDate = getFieldValue(obj, startField, LocalDate.class);
            LocalDate endDate = getFieldValue(obj, endField, LocalDate.class);
            
            if (startDate == null || endDate == null) {
                return true; // null ê²€ì¦ì€ @NotNullë¡œ ë³„ë„ ì²˜ë¦¬
            }
            
            boolean isValid = true;
            
            // ì‹œì‘ì¼ì´ ì¢…ë£Œì¼ë³´ë‹¤ ëŠ¦ìœ¼ë©´ ì•ˆë¨
            if (startDate.isAfter(endDate)) {
                addViolation(context, endField, "{validation.dateRange.startAfterEnd}");
                isValid = false;
            }
            
            // ìµœëŒ€ ê¸°ê°„ ê²€ì¦
            if (ChronoUnit.DAYS.between(startDate, endDate) > maxDays) {
                addViolation(context, endField, "{validation.dateRange.tooLong}");
                isValid = false;
            }
            
            // ë¯¸ë˜ ë‚ ì§œ ê²€ì¦
            if (!allowFuture) {
                LocalDate today = LocalDate.now();
                if (startDate.isAfter(today)) {
                    addViolation(context, startField, "{validation.dateRange.futureNotAllowed}");
                    isValid = false;
                }
                if (endDate.isAfter(today)) {
                    addViolation(context, endField, "{validation.dateRange.futureNotAllowed}");
                    isValid = false;
                }
            }
            
            return isValid;
            
        } catch (Exception ex) {
            log.warn("Date range validation failed", ex);
            return false;
        }
    }
    
    @SuppressWarnings("unchecked")
    private <T> T getFieldValue(Object obj, String fieldName, Class<T> type) throws Exception {
        Field field = obj.getClass().getDeclaredField(fieldName);
        field.setAccessible(true);
        return (T) field.get(obj);
    }
    
    private void addViolation(ConstraintValidatorContext context, String field, String message) {
        context.disableDefaultConstraintViolation();
        context.buildConstraintViolationWithTemplate(message)
               .addPropertyNode(field)
               .addConstraintViolation();
    }
}
```

##### 3. Service ê³„ì¸µ ê²€ì¦
```java
/**
 * ì‚¬ìš©ì ì„œë¹„ìŠ¤ ê²€ì¦ ìœ í‹¸ë¦¬í‹°
 * 
 * @author ByounggwanLee
 * @since 2025-10-09
 */
@Component
@RequiredArgsConstructor
@Slf4j
public class UserValidationService {
    
    private final UserRepository userRepository;
    private final RoleRepository roleRepository;
    private final BlacklistService blacklistService;
    
    /**
     * ì‚¬ìš©ì ìƒì„± ì „ ë¹„ì¦ˆë‹ˆìŠ¤ ê²€ì¦
     * 
     * @param request ì‚¬ìš©ì ìƒì„± ìš”ì²­
     */
    public void validateUserCreation(UserCreateReq request) {
        log.debug("ì‚¬ìš©ì ìƒì„± ë¹„ì¦ˆë‹ˆìŠ¤ ê²€ì¦ ì‹œì‘: email={}", request.getEmail());
        
        // 1. ë¸”ë™ë¦¬ìŠ¤íŠ¸ ê²€ì¦
        validateNotInBlacklist(request.getEmail(), request.getName());
        
        // 2. ì´ë©”ì¼ ë„ë©”ì¸ í—ˆìš© ì—¬ë¶€ ê²€ì¦
        validateEmailDomain(request.getEmail());
        
        // 3. ì¼ì¼ ê°€ì… ì œí•œ ê²€ì¦
        validateDailyRegistrationLimit();
        
        // 4. IP ê¸°ë°˜ ì œí•œ ê²€ì¦
        validateIpBasedRestriction();
        
        log.debug("ì‚¬ìš©ì ìƒì„± ë¹„ì¦ˆë‹ˆìŠ¤ ê²€ì¦ ì™„ë£Œ: email={}", request.getEmail());
    }
    
    /**
     * ì‚¬ìš©ì ì—…ë°ì´íŠ¸ ì „ ë¹„ì¦ˆë‹ˆìŠ¤ ê²€ì¦
     * 
     * @param userId ì‚¬ìš©ì ID
     * @param request ì—…ë°ì´íŠ¸ ìš”ì²­
     */
    public void validateUserUpdate(Long userId, UserUpdateReq request) {
        log.debug("ì‚¬ìš©ì ì—…ë°ì´íŠ¸ ë¹„ì¦ˆë‹ˆìŠ¤ ê²€ì¦ ì‹œì‘: userId={}", userId);
        
        // 1. ì‚¬ìš©ì ì¡´ì¬ ë° ìƒíƒœ ê²€ì¦
        User existingUser = validateUserExists(userId);
        
        // 2. ìˆ˜ì • ê¶Œí•œ ê²€ì¦
        validateUpdatePermission(existingUser, request);
        
        // 3. ìƒíƒœ ë³€ê²½ ê²€ì¦
        if (request.getStatus() != null) {
            validateStatusChange(existingUser, request.getStatus());
        }
        
        // 4. ì—­í•  ë³€ê²½ ê²€ì¦
        if (request.getRoles() != null) {
            validateRoleChange(existingUser, request.getRoles());
        }
        
        log.debug("ì‚¬ìš©ì ì—…ë°ì´íŠ¸ ë¹„ì¦ˆë‹ˆìŠ¤ ê²€ì¦ ì™„ë£Œ: userId={}", userId);
    }
    
    /**
     * ë¸”ë™ë¦¬ìŠ¤íŠ¸ ê²€ì¦
     */
    private void validateNotInBlacklist(String email, String name) {
        if (blacklistService.isEmailBlacklisted(email)) {
            throw new BusinessException(ErrorCode.USER_EMAIL_BLACKLISTED, 
                "ì‚¬ìš©í•  ìˆ˜ ì—†ëŠ” ì´ë©”ì¼ ì£¼ì†Œì…ë‹ˆë‹¤.");
        }
        
        if (blacklistService.isNameBlacklisted(name)) {
            throw new BusinessException(ErrorCode.USER_NAME_BLACKLISTED, 
                "ì‚¬ìš©í•  ìˆ˜ ì—†ëŠ” ì´ë¦„ì…ë‹ˆë‹¤.");
        }
    }
    
    /**
     * ì´ë©”ì¼ ë„ë©”ì¸ ê²€ì¦
     */
    private void validateEmailDomain(String email) {
        String domain = email.substring(email.indexOf("@") + 1).toLowerCase();
        
        // ì¼íšŒìš© ì´ë©”ì¼ ë„ë©”ì¸ ì°¨ë‹¨
        List<String> disposableDomains = Arrays.asList(
            "10minutemail.com", "guerrillamail.com", "tempmail.org");
        
        if (disposableDomains.contains(domain)) {
            throw new BusinessException(ErrorCode.USER_DISPOSABLE_EMAIL, 
                "ì¼íšŒìš© ì´ë©”ì¼ ì£¼ì†ŒëŠ” ì‚¬ìš©í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.");
        }
        
        // í—ˆìš©ëœ ë„ë©”ì¸ë§Œ ì‚¬ìš© (ì„ íƒì )
        List<String> allowedDomains = configProperties.getAllowedEmailDomains();
        if (!allowedDomains.isEmpty() && 
            allowedDomains.stream().noneMatch(domain::endsWith)) {
            throw new BusinessException(ErrorCode.USER_EMAIL_DOMAIN_NOT_ALLOWED, 
                "í—ˆìš©ë˜ì§€ ì•Šì€ ì´ë©”ì¼ ë„ë©”ì¸ì…ë‹ˆë‹¤.");
        }
    }
    
    /**
     * ì¼ì¼ ê°€ì… ì œí•œ ê²€ì¦
     */
    private void validateDailyRegistrationLimit() {
        LocalDate today = LocalDate.now();
        long todayRegistrations = userRepository.countByCreatedAtBetween(
            today.atStartOfDay(), today.plusDays(1).atStartOfDay());
        
        int dailyLimit = configProperties.getDailyRegistrationLimit();
        if (todayRegistrations >= dailyLimit) {
            throw new BusinessException(ErrorCode.DAILY_REGISTRATION_LIMIT_EXCEEDED, 
                "ì¼ì¼ ê°€ì… í•œë„ë¥¼ ì´ˆê³¼í–ˆìŠµë‹ˆë‹¤. ë‚´ì¼ ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.");
        }
    }
    
    /**
     * IP ê¸°ë°˜ ì œí•œ ê²€ì¦
     */
    private void validateIpBasedRestriction() {
        String clientIp = getCurrentClientIp();
        
        // ê°™ì€ IPì—ì„œ 1ì‹œê°„ ë‚´ 5íšŒ ì´ìƒ ê°€ì… ì‹œë„ ì°¨ë‹¨
        LocalDateTime oneHourAgo = LocalDateTime.now().minusHours(1);
        long recentRegistrations = userRepository.countByCreatedAtAfterAndCreatedBy(
            oneHourAgo, clientIp);
        
        if (recentRegistrations >= 5) {
            throw new BusinessException(ErrorCode.IP_REGISTRATION_LIMIT_EXCEEDED, 
                "ë™ì¼ IPì—ì„œ ë„ˆë¬´ ë§ì€ ê°€ì… ì‹œë„ê°€ ìˆì—ˆìŠµë‹ˆë‹¤. ì ì‹œ í›„ ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.");
        }
    }
    
    /**
     * ì‚¬ìš©ì ì¡´ì¬ ê²€ì¦
     */
    private User validateUserExists(Long userId) {
        return userRepository.findByIdAndStatusNot(userId, UserStatus.DELETED)
            .orElseThrow(() -> new BusinessException(ErrorCode.USER_NOT_FOUND, 
                "ì‚¬ìš©ìë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤: " + userId));
    }
    
    /**
     * ì—…ë°ì´íŠ¸ ê¶Œí•œ ê²€ì¦
     */
    private void validateUpdatePermission(User existingUser, UserUpdateReq request) {
        // ë¹„í™œì„±í™”ëœ ì‚¬ìš©ìëŠ” ìˆ˜ì • ë¶ˆê°€
        if (existingUser.getStatus() == UserStatus.INACTIVE) {
            throw new BusinessException(ErrorCode.USER_UPDATE_NOT_ALLOWED, 
                "ë¹„í™œì„±í™”ëœ ì‚¬ìš©ìëŠ” ìˆ˜ì •í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.");
        }
        
        // ë³¸ì¸ ë˜ëŠ” ê´€ë¦¬ìë§Œ ìˆ˜ì • ê°€ëŠ¥
        Long currentUserId = getCurrentUserId();
        boolean isAdmin = hasRole("ADMIN");
        
        if (!Objects.equals(currentUserId, existingUser.getId()) && !isAdmin) {
            throw new BusinessException(ErrorCode.ACCESS_DENIED, 
                "ë‹¤ë¥¸ ì‚¬ìš©ìì˜ ì •ë³´ë¥¼ ìˆ˜ì •í•  ê¶Œí•œì´ ì—†ìŠµë‹ˆë‹¤.");
        }
    }
    
    /**
     * ìƒíƒœ ë³€ê²½ ê²€ì¦
     */
    private void validateStatusChange(User existingUser, UserStatus newStatus) {
        UserStatus currentStatus = existingUser.getStatus();
        
        // ì‚­ì œëœ ì‚¬ìš©ìëŠ” ë³µêµ¬ ë¶ˆê°€
        if (currentStatus == UserStatus.DELETED) {
            throw new BusinessException(ErrorCode.USER_STATUS_CHANGE_NOT_ALLOWED, 
                "ì‚­ì œëœ ì‚¬ìš©ìì˜ ìƒíƒœëŠ” ë³€ê²½í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.");
        }
        
        // ì¼ë°˜ ì‚¬ìš©ìëŠ” ìì‹ ì˜ ìƒíƒœë¥¼ ADMINìœ¼ë¡œ ë³€ê²½ ë¶ˆê°€
        if (newStatus == UserStatus.ADMIN && !hasRole("SUPER_ADMIN")) {
            throw new BusinessException(ErrorCode.USER_STATUS_CHANGE_NOT_ALLOWED, 
                "ê´€ë¦¬ì ìƒíƒœë¡œ ë³€ê²½í•  ê¶Œí•œì´ ì—†ìŠµë‹ˆë‹¤.");
        }
    }
    
    /**
     * ì—­í•  ë³€ê²½ ê²€ì¦
     */
    private void validateRoleChange(User existingUser, List<UserRole> newRoles) {
        // ìì‹ ì˜ ADMIN ì—­í•  ì œê±° ê¸ˆì§€
        Long currentUserId = getCurrentUserId();
        if (Objects.equals(currentUserId, existingUser.getId())) {
            boolean hasAdminRole = existingUser.getRoles().contains(UserRole.ADMIN);
            boolean keepAdminRole = newRoles.contains(UserRole.ADMIN);
            
            if (hasAdminRole && !keepAdminRole) {
                throw new BusinessException(ErrorCode.USER_ROLE_CHANGE_NOT_ALLOWED, 
                    "ìì‹ ì˜ ê´€ë¦¬ì ê¶Œí•œì„ ì œê±°í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.");
            }
        }
        
        // SUPER_ADMIN ì—­í• ì€ SUPER_ADMINë§Œ ë¶€ì—¬/ì œê±° ê°€ëŠ¥
        if (newRoles.contains(UserRole.SUPER_ADMIN) && !hasRole("SUPER_ADMIN")) {
            throw new BusinessException(ErrorCode.USER_ROLE_CHANGE_NOT_ALLOWED, 
                "ìµœê³  ê´€ë¦¬ì ê¶Œí•œì„ ë¶€ì—¬í•  ê¶Œí•œì´ ì—†ìŠµë‹ˆë‹¤.");
        }
    }
    
    /**
     * í˜„ì¬ ì‚¬ìš©ì ID ì¡°íšŒ
     */
    private Long getCurrentUserId() {
        // SecurityContextì—ì„œ í˜„ì¬ ì‚¬ìš©ì ID ì¡°íšŒ
        Authentication authentication = SecurityContextHolder.getContext().getAuthentication();
        if (authentication != null && authentication.getPrincipal() instanceof UserPrincipal) {
            return ((UserPrincipal) authentication.getPrincipal()).getId();
        }
        return null;
    }
    
    /**
     * í˜„ì¬ ì‚¬ìš©ìì˜ ì—­í•  í™•ì¸
     */
    private boolean hasRole(String role) {
        Authentication authentication = SecurityContextHolder.getContext().getAuthentication();
        return authentication != null && 
               authentication.getAuthorities().stream()
                   .anyMatch(authority -> authority.getAuthority().equals("ROLE_" + role));
    }
    
    /**
     * í˜„ì¬ í´ë¼ì´ì–¸íŠ¸ IP ì¡°íšŒ
     */
    private String getCurrentClientIp() {
        RequestAttributes requestAttributes = RequestContextHolder.getRequestAttributes();
        if (requestAttributes instanceof ServletRequestAttributes) {
            HttpServletRequest request = ((ServletRequestAttributes) requestAttributes).getRequest();
            return IpUtils.getClientIpAddress(request);
        }
        return "unknown";
    }
}
```

---

## 10. ë³´ì•ˆ ê´€ë ¨ ì—ëŸ¬ ì²˜ë¦¬

### 10.1 ì¸ì¦/ì¸ê°€ ì˜ˆì™¸ ì²˜ë¦¬

Spring Securityì™€ ì—°ë™ëœ í¬ê´„ì ì¸ ë³´ì•ˆ ì˜ˆì™¸ ì²˜ë¦¬ ì‹œìŠ¤í…œì„ êµ¬ì¶•í•©ë‹ˆë‹¤.

#### ğŸ”’ Spring Security ì˜ˆì™¸ ì²˜ë¦¬

##### 1. ì¸ì¦ ì§„ì…ì  (AuthenticationEntryPoint)
```java
/**
 * JWT ì¸ì¦ ì§„ì…ì 
 * 
 * <p>ì¸ì¦ë˜ì§€ ì•Šì€ ìš”ì²­ì— ëŒ€í•œ ì‘ë‹µì„ ë‹´ë‹¹í•©ë‹ˆë‹¤.</p>
 * 
 * @author ByounggwanLee
 * @since 2025-10-09
 */
@Component
@Slf4j
public class JwtAuthenticationEntryPoint implements AuthenticationEntryPoint {
    
    private final ObjectMapper objectMapper;
    
    public JwtAuthenticationEntryPoint() {
        this.objectMapper = new ObjectMapper();
        this.objectMapper.configure(SerializationFeature.WRITE_DATES_AS_TIMESTAMPS, false);
        this.objectMapper.registerModule(new JavaTimeModule());
    }
    
    @Override
    public void commence(HttpServletRequest request, HttpServletResponse response,
                        AuthenticationException authException) throws IOException {
        
        String requestId = UUID.randomUUID().toString();
        String requestUri = request.getRequestURI();
        String method = request.getMethod();
        
        log.warn("ì¸ì¦ë˜ì§€ ì•Šì€ ìš”ì²­ [{}]: {} {} - {}", 
            requestId, method, requestUri, authException.getMessage());
        
        // ì‘ë‹µ í—¤ë” ì„¤ì •
        response.setContentType(MediaType.APPLICATION_JSON_VALUE);
        response.setCharacterEncoding(StandardCharsets.UTF_8.name());
        response.setStatus(HttpStatus.UNAUTHORIZED.value());
        
        // ì—ëŸ¬ ë¶„ë¥˜
        ErrorCode errorCode = determineErrorCode(authException, request);
        String errorMessage = determineErrorMessage(authException, errorCode);
        
        // ì‘ë‹µ ìƒì„±
        AxResponse<Void> errorResponse = AxResponse.failure(
            errorMessage,
            "UNAUTHORIZED", 
            errorCode.getCode(),
            HttpStatus.UNAUTHORIZED.value(),
            "Unauthorized",
            getErrorDetails(authException, requestUri),
            AxError.ActionType.CONFIRM
        );
        
        // JSON ì‘ë‹µ ì „ì†¡
        String responseBody = objectMapper.writeValueAsString(errorResponse);
        response.getWriter().write(responseBody);
        
        // ë³´ì•ˆ ì´ë²¤íŠ¸ ë¡œê¹…
        logSecurityEvent(request, authException, errorCode, requestId);
    }
    
    /**
     * ì¸ì¦ ì˜ˆì™¸ íƒ€ì…ì— ë”°ë¥¸ ì—ëŸ¬ ì½”ë“œ ê²°ì •
     */
    private ErrorCode determineErrorCode(AuthenticationException authException, HttpServletRequest request) {
        if (authException instanceof BadCredentialsException) {
            return ErrorCode.AUTHENTICATION_FAILED;
        } else if (authException instanceof AccountExpiredException) {
            return ErrorCode.ACCOUNT_EXPIRED;
        } else if (authException instanceof AccountLockedException) {
            return ErrorCode.ACCOUNT_LOCKED;
        } else if (authException instanceof DisabledException) {
            return ErrorCode.ACCOUNT_DISABLED;
        } else if (authException instanceof CredentialsExpiredException) {
            return ErrorCode.CREDENTIALS_EXPIRED;
        } else if (authException instanceof InsufficientAuthenticationException) {
            // JWT í† í° ê´€ë ¨ ìƒì„¸ ë¶„ì„
            String authHeader = request.getHeader("Authorization");
            if (!StringUtils.hasText(authHeader)) {
                return ErrorCode.TOKEN_MISSING;
            } else if (!authHeader.startsWith("Bearer ")) {
                return ErrorCode.TOKEN_INVALID_FORMAT;
            } else {
                return ErrorCode.TOKEN_INVALID;
            }
        } else {
            return ErrorCode.AUTHENTICATION_FAILED;
        }
    }
    
    /**
     * ì—ëŸ¬ ì½”ë“œì— ë”°ë¥¸ ë©”ì‹œì§€ ê²°ì •
     */
    private String determineErrorMessage(AuthenticationException authException, ErrorCode errorCode) {
        switch (errorCode) {
            case TOKEN_MISSING:
                return "ì¸ì¦ í† í°ì´ í•„ìš”í•©ë‹ˆë‹¤.";
            case TOKEN_INVALID_FORMAT:
                return "ì¸ì¦ í† í° í˜•ì‹ì´ ì˜¬ë°”ë¥´ì§€ ì•ŠìŠµë‹ˆë‹¤.";
            case TOKEN_INVALID:
                return "ìœ íš¨í•˜ì§€ ì•Šì€ ì¸ì¦ í† í°ì…ë‹ˆë‹¤.";
            case TOKEN_EXPIRED:
                return "ì¸ì¦ í† í°ì´ ë§Œë£Œë˜ì—ˆìŠµë‹ˆë‹¤.";
            case ACCOUNT_EXPIRED:
                return "ê³„ì •ì´ ë§Œë£Œë˜ì—ˆìŠµë‹ˆë‹¤.";
            case ACCOUNT_LOCKED:
                return "ê³„ì •ì´ ì ê¸ˆë˜ì—ˆìŠµë‹ˆë‹¤.";
            case ACCOUNT_DISABLED:
                return "ê³„ì •ì´ ë¹„í™œì„±í™”ë˜ì—ˆìŠµë‹ˆë‹¤.";
            case CREDENTIALS_EXPIRED:
                return "ì¸ì¦ ì •ë³´ê°€ ë§Œë£Œë˜ì—ˆìŠµë‹ˆë‹¤.";
            default:
                return "ì¸ì¦ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.";
        }
    }
    
    /**
     * ì—ëŸ¬ ìƒì„¸ ì •ë³´ ìƒì„±
     */
    private String getErrorDetails(AuthenticationException authException, String requestUri) {
        StringBuilder details = new StringBuilder();
        details.append("ìš”ì²­ URI: ").append(requestUri);
        
        if (authException.getCause() != null) {
            details.append(", ì›ì¸: ").append(authException.getCause().getMessage());
        }
        
        return details.toString();
    }
    
    /**
     * ë³´ì•ˆ ì´ë²¤íŠ¸ ë¡œê¹…
     */
    private void logSecurityEvent(HttpServletRequest request, AuthenticationException authException, 
                                 ErrorCode errorCode, String requestId) {
        String clientIp = IpUtils.getClientIpAddress(request);
        String userAgent = request.getHeader("User-Agent");
        
        log.warn("ë³´ì•ˆ ì´ë²¤íŠ¸ [{}]: ì¸ì¦ ì‹¤íŒ¨ - IP: {}, URI: {}, Error: {}, UserAgent: {}", 
            requestId, clientIp, request.getRequestURI(), errorCode.getCode(), userAgent);
        
        // ì‹¤íŒ¨ íšŸìˆ˜ ì¹´ìš´íŒ… (Redis ë“±ì„ í™œìš©í•œ ë¸Œë£¨íŠ¸ í¬ìŠ¤ ë°©ì§€)
        // securityEventService.recordAuthenticationFailure(clientIp, request.getRequestURI());
    }
}
```

##### 2. ì ‘ê·¼ ê±°ë¶€ í•¸ë“¤ëŸ¬ (AccessDeniedHandler)
```java
/**
 * ì ‘ê·¼ ê±°ë¶€ í•¸ë“¤ëŸ¬
 * 
 * <p>ê¶Œí•œì´ ì—†ëŠ” ìš”ì²­ì— ëŒ€í•œ ì‘ë‹µì„ ë‹´ë‹¹í•©ë‹ˆë‹¤.</p>
 * 
 * @author ByounggwanLee
 * @since 2025-10-09
 */
@Component
@Slf4j
public class JwtAccessDeniedHandler implements AccessDeniedHandler {
    
    private final ObjectMapper objectMapper;
    
    public JwtAccessDeniedHandler() {
        this.objectMapper = new ObjectMapper();
        this.objectMapper.configure(SerializationFeature.WRITE_DATES_AS_TIMESTAMPS, false);
        this.objectMapper.registerModule(new JavaTimeModule());
    }
    
    @Override
    public void handle(HttpServletRequest request, HttpServletResponse response,
                      AccessDeniedException accessDeniedException) throws IOException {
        
        String requestId = UUID.randomUUID().toString();
        String requestUri = request.getRequestURI();
        String method = request.getMethod();
        
        log.warn("ì ‘ê·¼ ê±°ë¶€ [{}]: {} {} - {}", 
            requestId, method, requestUri, accessDeniedException.getMessage());
        
        // ì‘ë‹µ í—¤ë” ì„¤ì •
        response.setContentType(MediaType.APPLICATION_JSON_VALUE);
        response.setCharacterEncoding(StandardCharsets.UTF_8.name());
        response.setStatus(HttpStatus.FORBIDDEN.value());
        
        // í˜„ì¬ ì‚¬ìš©ì ì •ë³´
        Authentication authentication = SecurityContextHolder.getContext().getAuthentication();
        String username = authentication != null ? authentication.getName() : "anonymous";
        Set<String> authorities = authentication != null ? 
            authentication.getAuthorities().stream()
                .map(GrantedAuthority::getAuthority)
                .collect(Collectors.toSet()) : Collections.emptySet();
        
        // ì—ëŸ¬ ë¶„ë¥˜
        ErrorCode errorCode = determineAccessDeniedErrorCode(request, authentication);
        String errorMessage = determineAccessDeniedMessage(errorCode, requestUri);
        
        // ì‘ë‹µ ìƒì„±
        AxResponse<Void> errorResponse = AxResponse.failure(
            errorMessage,
            "FORBIDDEN", 
            errorCode.getCode(),
            HttpStatus.FORBIDDEN.value(),
            "Forbidden",
            getAccessDeniedDetails(request, username, authorities),
            AxError.ActionType.CONFIRM
        );
        
        // JSON ì‘ë‹µ ì „ì†¡
        String responseBody = objectMapper.writeValueAsString(errorResponse);
        response.getWriter().write(responseBody);
        
        // ë³´ì•ˆ ì´ë²¤íŠ¸ ë¡œê¹…
        logAccessDeniedEvent(request, username, authorities, errorCode, requestId);
    }
    
    /**
     * ì ‘ê·¼ ê±°ë¶€ ìƒí™©ì— ë”°ë¥¸ ì—ëŸ¬ ì½”ë“œ ê²°ì •
     */
    private ErrorCode determineAccessDeniedErrorCode(HttpServletRequest request, Authentication authentication) {
        String requestUri = request.getRequestURI();
        
        // ê´€ë¦¬ì ì „ìš© ì—”ë“œí¬ì¸íŠ¸
        if (requestUri.startsWith("/api/v1/admin/")) {
            return ErrorCode.ADMIN_ACCESS_REQUIRED;
        }
        
        // ë¦¬ì†ŒìŠ¤ ì†Œìœ ì í™•ì¸ì´ í•„ìš”í•œ ì—”ë“œí¬ì¸íŠ¸
        if (requestUri.matches("/api/v1/users/\\d+(/.*)?")) {
            return ErrorCode.RESOURCE_OWNER_ACCESS_REQUIRED;
        }
        
        // íŠ¹ì • ê¶Œí•œì´ í•„ìš”í•œ ì—”ë“œí¬ì¸íŠ¸
        if (requestUri.startsWith("/api/v1/projects/") && 
            request.getMethod().equals("DELETE")) {
            return ErrorCode.PROJECT_DELETE_PERMISSION_REQUIRED;
        }
        
        return ErrorCode.ACCESS_DENIED;
    }
    
    /**
     * ì ‘ê·¼ ê±°ë¶€ ë©”ì‹œì§€ ê²°ì •
     */
    private String determineAccessDeniedMessage(ErrorCode errorCode, String requestUri) {
        switch (errorCode) {
            case ADMIN_ACCESS_REQUIRED:
                return "ê´€ë¦¬ì ê¶Œí•œì´ í•„ìš”í•©ë‹ˆë‹¤.";
            case RESOURCE_OWNER_ACCESS_REQUIRED:
                return "í•´ë‹¹ ë¦¬ì†ŒìŠ¤ì˜ ì†Œìœ ìë§Œ ì ‘ê·¼í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.";
            case PROJECT_DELETE_PERMISSION_REQUIRED:
                return "í”„ë¡œì íŠ¸ ì‚­ì œ ê¶Œí•œì´ í•„ìš”í•©ë‹ˆë‹¤.";
            default:
                return "í•´ë‹¹ ë¦¬ì†ŒìŠ¤ì— ì ‘ê·¼í•  ê¶Œí•œì´ ì—†ìŠµë‹ˆë‹¤.";
        }
    }
    
    /**
     * ì ‘ê·¼ ê±°ë¶€ ìƒì„¸ ì •ë³´ ìƒì„±
     */
    private String getAccessDeniedDetails(HttpServletRequest request, String username, Set<String> authorities) {
        StringBuilder details = new StringBuilder();
        details.append("ì‚¬ìš©ì: ").append(username);
        details.append(", ìš”ì²­ URI: ").append(request.getRequestURI());
        details.append(", ë©”ì†Œë“œ: ").append(request.getMethod());
        details.append(", í˜„ì¬ ê¶Œí•œ: ").append(authorities);
        
        return details.toString();
    }
    
    /**
     * ì ‘ê·¼ ê±°ë¶€ ì´ë²¤íŠ¸ ë¡œê¹…
     */
    private void logAccessDeniedEvent(HttpServletRequest request, String username, 
                                    Set<String> authorities, ErrorCode errorCode, String requestId) {
        String clientIp = IpUtils.getClientIpAddress(request);
        String userAgent = request.getHeader("User-Agent");
        
        log.warn("ë³´ì•ˆ ì´ë²¤íŠ¸ [{}]: ì ‘ê·¼ ê±°ë¶€ - ì‚¬ìš©ì: {}, IP: {}, URI: {}, ê¶Œí•œ: {}, Error: {}", 
            requestId, username, clientIp, request.getRequestURI(), authorities, errorCode.getCode());
        
        // ì˜ì‹¬ìŠ¤ëŸ¬ìš´ ì ‘ê·¼ ì‹œë„ ê¸°ë¡
        // securityEventService.recordAccessDenied(username, clientIp, request.getRequestURI(), authorities);
    }
}
```

### 10.2 JWT í† í° ê´€ë ¨ ì˜ˆì™¸ ì²˜ë¦¬

JWT í† í°ì˜ ìƒì„±, ê²€ì¦, ê°±ì‹  ê³¼ì •ì—ì„œ ë°œìƒí•˜ëŠ” ë‹¤ì–‘í•œ ì˜ˆì™¸ë¥¼ ì²´ê³„ì ìœ¼ë¡œ ì²˜ë¦¬í•©ë‹ˆë‹¤.

#### ğŸ”‘ JWT í† í° ì˜ˆì™¸ í´ë˜ìŠ¤

##### 1. JWT ì „ìš© ì˜ˆì™¸ í´ë˜ìŠ¤
```java
/**
 * JWT í† í° ê´€ë ¨ ì˜ˆì™¸
 * 
 * @author ByounggwanLee
 * @since 2025-10-09
 */
@Getter
public class JwtTokenException extends SecurityException {
    
    private final String token;
    private final TokenErrorType errorType;
    private final LocalDateTime occurredAt;
    
    public JwtTokenException(ErrorCode errorCode, TokenErrorType errorType) {
        super(errorCode);
        this.token = null;
        this.errorType = errorType;
        this.occurredAt = LocalDateTime.now();
    }
    
    public JwtTokenException(ErrorCode errorCode, TokenErrorType errorType, String token) {
        super(errorCode);
        this.token = sanitizeToken(token);
        this.errorType = errorType;
        this.occurredAt = LocalDateTime.now();
    }
    
    public JwtTokenException(ErrorCode errorCode, TokenErrorType errorType, String token, Throwable cause) {
        super(errorCode, cause);
        this.token = sanitizeToken(token);
        this.errorType = errorType;
        this.occurredAt = LocalDateTime.now();
    }
    
    /**
     * í† í° ì •ë³´ì—ì„œ ë¯¼ê°í•œ ë¶€ë¶„ ë§ˆìŠ¤í‚¹
     */
    private String sanitizeToken(String token) {
        if (token == null || token.length() < 20) {
            return null;
        }
        
        // ì• 10ì, ë’¤ 10ìë§Œ ë‚¨ê¸°ê³  ë§ˆìŠ¤í‚¹
        return token.substring(0, 10) + "***" + token.substring(token.length() - 10);
    }
    
    /**
     * í† í° ì—ëŸ¬ íƒ€ì…
     */
    public enum TokenErrorType {
        MALFORMED,      // í˜•ì‹ ì˜¤ë¥˜
        EXPIRED,        // ë§Œë£Œ
        UNSUPPORTED,    // ì§€ì›í•˜ì§€ ì•ŠëŠ” í† í°
        SIGNATURE,      // ì„œëª… ì˜¤ë¥˜
        CLAIMS_EMPTY,   // í´ë ˆì„ ì •ë³´ ì—†ìŒ
        INVALID_ISSUER, // ë°œí–‰ì ë¶ˆì¼ì¹˜
        INVALID_AUDIENCE, // ëŒ€ìƒ ë¶ˆì¼ì¹˜
        NOT_YET_VALID,  // ì•„ì§ ìœ íš¨í•˜ì§€ ì•ŠìŒ
        BLACKLISTED     // ë¸”ë™ë¦¬ìŠ¤íŠ¸ í† í°
    }
}

/**
 * ë³´ì•ˆ ê´€ë ¨ ê¸°ë³¸ ì˜ˆì™¸
 */
@Getter
public class SecurityException extends CustomException {
    
    private final String securityContext;
    private final LocalDateTime securityEventTime;
    
    public SecurityException(ErrorCode errorCode) {
        super(errorCode);
        this.securityContext = getCurrentSecurityContext();
        this.securityEventTime = LocalDateTime.now();
    }
    
    public SecurityException(ErrorCode errorCode, String customMessage) {
        super(errorCode, customMessage);
        this.securityContext = getCurrentSecurityContext();
        this.securityEventTime = LocalDateTime.now();
    }
    
    public SecurityException(ErrorCode errorCode, Throwable cause) {
        super(errorCode, cause);
        this.securityContext = getCurrentSecurityContext();
        this.securityEventTime = LocalDateTime.now();
    }
    
    /**
     * í˜„ì¬ ë³´ì•ˆ ì»¨í…ìŠ¤íŠ¸ ì •ë³´ ìˆ˜ì§‘
     */
    private String getCurrentSecurityContext() {
        Authentication authentication = SecurityContextHolder.getContext().getAuthentication();
        if (authentication != null) {
            return String.format("User: %s, Authorities: %s", 
                authentication.getName(),
                authentication.getAuthorities().stream()
                    .map(GrantedAuthority::getAuthority)
                    .collect(Collectors.joining(", ")));
        }
        return "Anonymous";
    }
}
```

##### 2. JWT í† í° í•„í„° ì˜ˆì™¸ ì²˜ë¦¬
```java
/**
 * JWT í† í° ì¸ì¦ í•„í„°
 * 
 * @author ByounggwanLee
 * @since 2025-10-09
 */
@Component
@RequiredArgsConstructor
@Slf4j
public class JwtAuthenticationFilter extends OncePerRequestFilter {
    
    private final JwtTokenProvider jwtTokenProvider;
    private final UserDetailsService userDetailsService;
    private final SecurityEventService securityEventService;
    
    @Override
    protected void doFilterInternal(HttpServletRequest request, HttpServletResponse response, 
                                  FilterChain filterChain) throws ServletException, IOException {
        
        String requestId = UUID.randomUUID().toString();
        
        try {
            String token = extractToken(request);
            
            if (token != null) {
                processTokenAuthentication(token, request, requestId);
            }
            
            filterChain.doFilter(request, response);
            
        } catch (JwtTokenException ex) {
            handleJwtTokenException(ex, request, response, requestId);
        } catch (Exception ex) {
            handleUnexpectedException(ex, request, response, requestId);
        }
    }
    
    /**
     * ìš”ì²­ì—ì„œ JWT í† í° ì¶”ì¶œ
     */
    private String extractToken(HttpServletRequest request) {
        String authHeader = request.getHeader("Authorization");
        
        if (!StringUtils.hasText(authHeader)) {
            return null;
        }
        
        if (!authHeader.startsWith("Bearer ")) {
            throw new JwtTokenException(ErrorCode.TOKEN_INVALID_FORMAT, 
                JwtTokenException.TokenErrorType.MALFORMED);
        }
        
        return authHeader.substring(7);
    }
    
    /**
     * JWT í† í°ì„ ì´ìš©í•œ ì¸ì¦ ì²˜ë¦¬
     */
    private void processTokenAuthentication(String token, HttpServletRequest request, String requestId) {
        try {
            // í† í° ìœ íš¨ì„± ê²€ì¦
            if (!jwtTokenProvider.validateToken(token)) {
                throw new JwtTokenException(ErrorCode.TOKEN_INVALID, 
                    JwtTokenException.TokenErrorType.SIGNATURE, token);
            }
            
            // ë¸”ë™ë¦¬ìŠ¤íŠ¸ ê²€ì¦
            if (jwtTokenProvider.isTokenBlacklisted(token)) {
                throw new JwtTokenException(ErrorCode.TOKEN_BLACKLISTED, 
                    JwtTokenException.TokenErrorType.BLACKLISTED, token);
            }
            
            // ì‚¬ìš©ì ì •ë³´ ë¡œë“œ
            String username = jwtTokenProvider.getUsernameFromToken(token);
            UserDetails userDetails = userDetailsService.loadUserByUsername(username);
            
            // SecurityContextì— ì¸ì¦ ì •ë³´ ì„¤ì •
            UsernamePasswordAuthenticationToken authentication = 
                new UsernamePasswordAuthenticationToken(userDetails, null, userDetails.getAuthorities());
            authentication.setDetails(new WebAuthenticationDetailsSource().buildDetails(request));
            
            SecurityContextHolder.getContext().setAuthentication(authentication);
            
            log.debug("JWT í† í° ì¸ì¦ ì„±ê³µ [{}]: ì‚¬ìš©ì={}", requestId, username);
            
        } catch (ExpiredJwtException ex) {
            throw new JwtTokenException(ErrorCode.TOKEN_EXPIRED, 
                JwtTokenException.TokenErrorType.EXPIRED, token, ex);
        } catch (MalformedJwtException ex) {
            throw new JwtTokenException(ErrorCode.TOKEN_INVALID, 
                JwtTokenException.TokenErrorType.MALFORMED, token, ex);
        } catch (UnsupportedJwtException ex) {
            throw new JwtTokenException(ErrorCode.TOKEN_INVALID, 
                JwtTokenException.TokenErrorType.UNSUPPORTED, token, ex);
        } catch (SignatureException ex) {
            throw new JwtTokenException(ErrorCode.TOKEN_INVALID, 
                JwtTokenException.TokenErrorType.SIGNATURE, token, ex);
        } catch (IllegalArgumentException ex) {
            throw new JwtTokenException(ErrorCode.TOKEN_INVALID, 
                JwtTokenException.TokenErrorType.CLAIMS_EMPTY, token, ex);
        }
    }
    
    /**
     * JWT í† í° ì˜ˆì™¸ ì²˜ë¦¬
     */
    private void handleJwtTokenException(JwtTokenException ex, HttpServletRequest request, 
                                       HttpServletResponse response, String requestId) throws IOException {
        
        log.warn("JWT í† í° ì˜¤ë¥˜ [{}]: {} - {}", requestId, ex.getErrorType(), ex.getMessage());
        
        // ë³´ì•ˆ ì´ë²¤íŠ¸ ê¸°ë¡
        securityEventService.recordTokenError(
            IpUtils.getClientIpAddress(request),
            request.getRequestURI(),
            ex.getErrorType(),
            ex.getToken()
        );
        
        // ì‘ë‹µ ì„¤ì •
        response.setContentType(MediaType.APPLICATION_JSON_VALUE);
        response.setCharacterEncoding(StandardCharsets.UTF_8.name());
        response.setStatus(HttpStatus.UNAUTHORIZED.value());
        
        // ì—ëŸ¬ ì‘ë‹µ ìƒì„±
        AxResponse<Void> errorResponse = AxResponse.failure(
            ex.getMessage(),
            "UNAUTHORIZED",
            ex.getErrorCode().getCode(),
            HttpStatus.UNAUTHORIZED.value(),
            "Unauthorized",
            String.format("í† í° ì˜¤ë¥˜ ìœ í˜•: %s, ìš”ì²­ URI: %s", ex.getErrorType(), request.getRequestURI()),
            AxError.ActionType.CONFIRM
        );
        
        // JSON ì‘ë‹µ ì „ì†¡
        ObjectMapper objectMapper = new ObjectMapper();
        String responseBody = objectMapper.writeValueAsString(errorResponse);
        response.getWriter().write(responseBody);
    }
    
    /**
     * ì˜ˆìƒì¹˜ ëª»í•œ ì˜ˆì™¸ ì²˜ë¦¬
     */
    private void handleUnexpectedException(Exception ex, HttpServletRequest request, 
                                         HttpServletResponse response, String requestId) throws IOException {
        
        log.error("JWT í•„í„°ì—ì„œ ì˜ˆìƒì¹˜ ëª»í•œ ì˜¤ë¥˜ ë°œìƒ [{}]", requestId, ex);
        
        // ì‘ë‹µ ì„¤ì •
        response.setContentType(MediaType.APPLICATION_JSON_VALUE);
        response.setCharacterEncoding(StandardCharsets.UTF_8.name());
        response.setStatus(HttpStatus.INTERNAL_SERVER_ERROR.value());
        
        // ì—ëŸ¬ ì‘ë‹µ ìƒì„±
        AxResponse<Void> errorResponse = AxResponse.failure(
            "ì¸ì¦ ì²˜ë¦¬ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.",
            "INTERNAL_SERVER_ERROR",
            "E001",
            HttpStatus.INTERNAL_SERVER_ERROR.value(),
            "Internal Server Error",
            "JWT í•„í„° ì²˜ë¦¬ ì¤‘ ì˜ˆìƒì¹˜ ëª»í•œ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.",
            AxError.ActionType.RETRY
        );
        
        // JSON ì‘ë‹µ ì „ì†¡
        ObjectMapper objectMapper = new ObjectMapper();
        String responseBody = objectMapper.writeValueAsString(errorResponse);
        response.getWriter().write(responseBody);
    }
    
    /**
     * í•„í„° ì œì™¸ ê²½ë¡œ í™•ì¸
     */
    @Override
    protected boolean shouldNotFilter(HttpServletRequest request) {
        String path = request.getRequestURI();
        
        // ì¸ì¦ì´ í•„ìš”í•˜ì§€ ì•Šì€ ê²½ë¡œë“¤
        List<String> excludePaths = Arrays.asList(
            "/api/v1/auth/login",
            "/api/v1/auth/register", 
            "/api/v1/health",
            "/actuator/health",
            "/swagger-ui/",
            "/v3/api-docs"
        );
        
        return excludePaths.stream().anyMatch(path::startsWith);
    }
}
```

##### 3. JWT í† í° í”„ë¡œë°”ì´ë”
```java
/**
 * JWT í† í° í”„ë¡œë°”ì´ë”
 * 
 * @author ByounggwanLee
 * @since 2025-10-09
 */
@Component
@Slf4j
public class JwtTokenProvider {
    
    @Value("${jwt.secret}")
    private String jwtSecret;
    
    @Value("${jwt.access-token-expiration:3600000}") // 1ì‹œê°„
    private long accessTokenExpiration;
    
    @Value("${jwt.refresh-token-expiration:2592000000}") // 30ì¼
    private long refreshTokenExpiration;
    
    private final RedisTemplate<String, String> redisTemplate;
    private final SecurityEventService securityEventService;
    
    private static final String BLACKLIST_KEY_PREFIX = "jwt:blacklist:";
    private static final String REFRESH_TOKEN_KEY_PREFIX = "jwt:refresh:";
    
    /**
     * ì•¡ì„¸ìŠ¤ í† í° ìƒì„±
     * 
     * @param authentication ì¸ì¦ ì •ë³´
     * @return JWT í† í°
     */
    public String generateAccessToken(Authentication authentication) {
        UserPrincipal userPrincipal = (UserPrincipal) authentication.getPrincipal();
        Date expiryDate = new Date(System.currentTimeMillis() + accessTokenExpiration);
        
        return Jwts.builder()
                .setSubject(userPrincipal.getUsername())
                .setIssuedAt(new Date())
                .setExpiration(expiryDate)
                .claim("userId", userPrincipal.getId())
                .claim("authorities", getAuthoritiesString(authentication))
                .claim("tokenType", "ACCESS")
                .signWith(SignatureAlgorithm.HS512, jwtSecret)
                .compact();
    }
    
    /**
     * ë¦¬í”„ë ˆì‹œ í† í° ìƒì„±
     * 
     * @param authentication ì¸ì¦ ì •ë³´
     * @return ë¦¬í”„ë ˆì‹œ í† í°
     */
    public String generateRefreshToken(Authentication authentication) {
        UserPrincipal userPrincipal = (UserPrincipal) authentication.getPrincipal();
        Date expiryDate = new Date(System.currentTimeMillis() + refreshTokenExpiration);
        
        String refreshToken = Jwts.builder()
                .setSubject(userPrincipal.getUsername())
                .setIssuedAt(new Date())
                .setExpiration(expiryDate)
                .claim("userId", userPrincipal.getId())
                .claim("tokenType", "REFRESH")
                .signWith(SignatureAlgorithm.HS512, jwtSecret)
                .compact();
        
        // Redisì— ë¦¬í”„ë ˆì‹œ í† í° ì €ì¥
        String key = REFRESH_TOKEN_KEY_PREFIX + userPrincipal.getUsername();
        redisTemplate.opsForValue().set(key, refreshToken, Duration.ofMillis(refreshTokenExpiration));
        
        return refreshToken;
    }
    
    /**
     * í† í°ì—ì„œ ì‚¬ìš©ìëª… ì¶”ì¶œ
     * 
     * @param token JWT í† í°
     * @return ì‚¬ìš©ìëª…
     */
    public String getUsernameFromToken(String token) {
        try {
            Claims claims = Jwts.parser()
                    .setSigningKey(jwtSecret)
                    .parseClaimsJws(token)
                    .getBody();
            
            return claims.getSubject();
            
        } catch (ExpiredJwtException ex) {
            // ë§Œë£Œëœ í† í°ì—ì„œë„ ì‚¬ìš©ìëª…ì€ ì¶”ì¶œ ê°€ëŠ¥
            return ex.getClaims().getSubject();
        } catch (Exception ex) {
            log.warn("í† í°ì—ì„œ ì‚¬ìš©ìëª… ì¶”ì¶œ ì‹¤íŒ¨: {}", ex.getMessage());
            throw new JwtTokenException(ErrorCode.TOKEN_INVALID, 
                JwtTokenException.TokenErrorType.MALFORMED, token, ex);
        }
    }
    
    /**
     * í† í°ì—ì„œ ì‚¬ìš©ì ID ì¶”ì¶œ
     * 
     * @param token JWT í† í°
     * @return ì‚¬ìš©ì ID
     */
    public Long getUserIdFromToken(String token) {
        try {
            Claims claims = Jwts.parser()
                    .setSigningKey(jwtSecret)
                    .parseClaimsJws(token)
                    .getBody();
            
            return claims.get("userId", Long.class);
            
        } catch (Exception ex) {
            log.warn("í† í°ì—ì„œ ì‚¬ìš©ì ID ì¶”ì¶œ ì‹¤íŒ¨: {}", ex.getMessage());
            throw new JwtTokenException(ErrorCode.TOKEN_INVALID, 
                JwtTokenException.TokenErrorType.CLAIMS_EMPTY, token, ex);
        }
    }
    
    /**
     * í† í° ìœ íš¨ì„± ê²€ì¦
     * 
     * @param token JWT í† í°
     * @return ìœ íš¨ ì—¬ë¶€
     */
    public boolean validateToken(String token) {
        try {
            Jwts.parser().setSigningKey(jwtSecret).parseClaimsJws(token);
            return true;
            
        } catch (ExpiredJwtException ex) {
            log.debug("ë§Œë£Œëœ í† í°: {}", ex.getMessage());
            throw new JwtTokenException(ErrorCode.TOKEN_EXPIRED, 
                JwtTokenException.TokenErrorType.EXPIRED, token, ex);
        } catch (MalformedJwtException ex) {
            log.warn("ì˜ëª»ëœ í˜•ì‹ì˜ í† í°: {}", ex.getMessage());
            throw new JwtTokenException(ErrorCode.TOKEN_INVALID, 
                JwtTokenException.TokenErrorType.MALFORMED, token, ex);
        } catch (UnsupportedJwtException ex) {
            log.warn("ì§€ì›í•˜ì§€ ì•ŠëŠ” í† í°: {}", ex.getMessage());
            throw new JwtTokenException(ErrorCode.TOKEN_INVALID, 
                JwtTokenException.TokenErrorType.UNSUPPORTED, token, ex);
        } catch (SignatureException ex) {
            log.warn("í† í° ì„œëª… ê²€ì¦ ì‹¤íŒ¨: {}", ex.getMessage());
            throw new JwtTokenException(ErrorCode.TOKEN_INVALID, 
                JwtTokenException.TokenErrorType.SIGNATURE, token, ex);
        } catch (IllegalArgumentException ex) {
            log.warn("í† í° í´ë ˆì„ì´ ë¹„ì–´ìˆìŒ: {}", ex.getMessage());
            throw new JwtTokenException(ErrorCode.TOKEN_INVALID, 
                JwtTokenException.TokenErrorType.CLAIMS_EMPTY, token, ex);
        }
    }
    
    /**
     * í† í° ë¸”ë™ë¦¬ìŠ¤íŠ¸ í™•ì¸
     * 
     * @param token JWT í† í°
     * @return ë¸”ë™ë¦¬ìŠ¤íŠ¸ ì—¬ë¶€
     */
    public boolean isTokenBlacklisted(String token) {
        String key = BLACKLIST_KEY_PREFIX + generateTokenHash(token);
        return Boolean.TRUE.equals(redisTemplate.hasKey(key));
    }
    
    /**
     * í† í°ì„ ë¸”ë™ë¦¬ìŠ¤íŠ¸ì— ì¶”ê°€
     * 
     * @param token JWT í† í°
     * @param reason ë¸”ë™ë¦¬ìŠ¤íŠ¸ ì¶”ê°€ ì‚¬ìœ 
     */
    public void addTokenToBlacklist(String token, String reason) {
        try {
            Claims claims = Jwts.parser()
                    .setSigningKey(jwtSecret)
                    .parseClaimsJws(token)
                    .getBody();
            
            Date expiration = claims.getExpiration();
            long ttl = expiration.getTime() - System.currentTimeMillis();
            
            if (ttl > 0) {
                String key = BLACKLIST_KEY_PREFIX + generateTokenHash(token);
                redisTemplate.opsForValue().set(key, reason, Duration.ofMillis(ttl));
                
                log.info("í† í°ì´ ë¸”ë™ë¦¬ìŠ¤íŠ¸ì— ì¶”ê°€ë¨: ì‚¬ìš©ì={}, ì‚¬ìœ ={}", 
                    claims.getSubject(), reason);
                
                // ë³´ì•ˆ ì´ë²¤íŠ¸ ê¸°ë¡
                securityEventService.recordTokenBlacklisted(
                    claims.getSubject(), reason, expiration);
            }
            
        } catch (Exception ex) {
            log.error("í† í° ë¸”ë™ë¦¬ìŠ¤íŠ¸ ì¶”ê°€ ì‹¤íŒ¨", ex);
        }
    }
    
    /**
     * ë¦¬í”„ë ˆì‹œ í† í° ê²€ì¦ ë° ìƒˆ ì•¡ì„¸ìŠ¤ í† í° ìƒì„±
     * 
     * @param refreshToken ë¦¬í”„ë ˆì‹œ í† í°
     * @return ìƒˆ ì•¡ì„¸ìŠ¤ í† í°
     */
    public String refreshAccessToken(String refreshToken) {
        try {
            // ë¦¬í”„ë ˆì‹œ í† í° ìœ íš¨ì„± ê²€ì¦
            Claims claims = Jwts.parser()
                    .setSigningKey(jwtSecret)
                    .parseClaimsJws(refreshToken)
                    .getBody();
            
            String username = claims.getSubject();
            String tokenType = claims.get("tokenType", String.class);
            
            if (!"REFRESH".equals(tokenType)) {
                throw new JwtTokenException(ErrorCode.TOKEN_INVALID, 
                    JwtTokenException.TokenErrorType.UNSUPPORTED, refreshToken);
            }
            
            // Redisì—ì„œ ì €ì¥ëœ ë¦¬í”„ë ˆì‹œ í† í°ê³¼ ë¹„êµ
            String key = REFRESH_TOKEN_KEY_PREFIX + username;
            String storedToken = redisTemplate.opsForValue().get(key);
            
            if (!refreshToken.equals(storedToken)) {
                throw new JwtTokenException(ErrorCode.TOKEN_INVALID, 
                    JwtTokenException.TokenErrorType.SIGNATURE, refreshToken);
            }
            
            // ìƒˆ ì•¡ì„¸ìŠ¤ í† í° ìƒì„±ì„ ìœ„í•œ ì¸ì¦ ê°ì²´ ìƒì„±
            UserDetails userDetails = loadUserDetailsForRefresh(username);
            Authentication authentication = new UsernamePasswordAuthenticationToken(
                userDetails, null, userDetails.getAuthorities());
            
            return generateAccessToken(authentication);
            
        } catch (JwtTokenException ex) {
            throw ex;
        } catch (Exception ex) {
            log.error("ì•¡ì„¸ìŠ¤ í† í° ê°±ì‹  ì‹¤íŒ¨", ex);
            throw new JwtTokenException(ErrorCode.TOKEN_REFRESH_FAILED, 
                JwtTokenException.TokenErrorType.SIGNATURE, refreshToken, ex);
        }
    }
    
    /**
     * ê¶Œí•œ ë¬¸ìì—´ ìƒì„±
     */
    private String getAuthoritiesString(Authentication authentication) {
        return authentication.getAuthorities().stream()
                .map(GrantedAuthority::getAuthority)
                .collect(Collectors.joining(","));
    }
    
    /**
     * í† í° í•´ì‹œ ìƒì„± (ë¸”ë™ë¦¬ìŠ¤íŠ¸ í‚¤ìš©)
     */
    private String generateTokenHash(String token) {
        try {
            MessageDigest digest = MessageDigest.getInstance("SHA-256");
            byte[] hash = digest.digest(token.getBytes(StandardCharsets.UTF_8));
            return Base64.getUrlEncoder().withoutPadding().encodeToString(hash);
        } catch (NoSuchAlgorithmException ex) {
            // fallback to simple hash
            return String.valueOf(token.hashCode());
        }
    }
    
    /**
     * ë¦¬í”„ë ˆì‹œë¥¼ ìœ„í•œ ì‚¬ìš©ì ìƒì„¸ ì •ë³´ ë¡œë“œ
     */
    private UserDetails loadUserDetailsForRefresh(String username) {
        // UserDetailsServiceë¥¼ í†µí•´ ìµœì‹  ì‚¬ìš©ì ì •ë³´ ë¡œë“œ
        // ì´ ë¶€ë¶„ì€ ì‹¤ì œ UserDetailsService êµ¬í˜„ì— ë”°ë¼ ì¡°ì •
        return null; // ì‹¤ì œ êµ¬í˜„ í•„ìš”
    }
}
```

---

## 11. í…ŒìŠ¤íŠ¸ ì½”ë“œ ì—ëŸ¬ ì²˜ë¦¬

### 11.1 ì˜ˆì™¸ í…ŒìŠ¤íŠ¸ íŒ¨í„´

íš¨ê³¼ì ì¸ ì˜ˆì™¸ ì²˜ë¦¬ í…ŒìŠ¤íŠ¸ë¥¼ ìœ„í•œ ë‹¤ì–‘í•œ íŒ¨í„´ê³¼ ëª¨ë²” ì‚¬ë¡€ë¥¼ ì œì‹œí•©ë‹ˆë‹¤.

#### ğŸ§ª ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ ì˜ˆì™¸ íŒ¨í„´

##### 1. Service ê³„ì¸µ ì˜ˆì™¸ í…ŒìŠ¤íŠ¸
```java
/**
 * ì‚¬ìš©ì ì„œë¹„ìŠ¤ ì˜ˆì™¸ í…ŒìŠ¤íŠ¸
 * 
 * @author ByounggwanLee
 * @since 2025-10-09
 */
@ExtendWith(MockitoExtension.class)
@DisplayName("ì‚¬ìš©ì ì„œë¹„ìŠ¤ ì˜ˆì™¸ ì²˜ë¦¬ í…ŒìŠ¤íŠ¸")
class UserServiceExceptionTest {
    
    @Mock
    private UserRepository userRepository;
    
    @Mock
    private UserValidationService userValidationService;
    
    @Mock
    private PasswordEncoder passwordEncoder;
    
    @InjectMocks
    private UserServiceImpl userService;
    
    @Nested
    @DisplayName("ì‚¬ìš©ì ìƒì„± ì˜ˆì™¸ í…ŒìŠ¤íŠ¸")
    class CreateUserExceptionTest {
        
        @Test
        @DisplayName("ì´ë©”ì¼ ì¤‘ë³µ ì‹œ BusinessException ë°œìƒ")
        void createUser_DuplicateEmail_ThrowsBusinessException() {
            // given
            UserCreateReq request = createValidUserCreateRequest();
            given(userRepository.existsByEmailAndStatusNot(request.getEmail(), UserStatus.DELETED))
                .willReturn(true);
            
            // when & then
            BusinessException exception = assertThrows(BusinessException.class, 
                () -> userService.createUser(request));
            
            assertThat(exception.getErrorCode()).isEqualTo(ErrorCode.USER_ALREADY_EXISTS);
            assertThat(exception.getMessage()).contains("ì´ë¯¸ ì¡´ì¬í•˜ëŠ” ì‚¬ìš©ìì…ë‹ˆë‹¤");
            
            // verify
            verify(userRepository).existsByEmailAndStatusNot(request.getEmail(), UserStatus.DELETED);
            verify(userRepository, never()).save(any(User.class));
        }
        
        @Test
        @DisplayName("ê²€ì¦ ì‹¤íŒ¨ ì‹œ ValidationException ë°œìƒ")
        void createUser_ValidationFails_ThrowsValidationException() {
            // given
            UserCreateReq request = createValidUserCreateRequest();
            doThrow(new ValidationException(ErrorCode.INVALID_INPUT_VALUE, "ë‚˜ì´ëŠ” í•„ìˆ˜ì…ë‹ˆë‹¤"))
                .when(userValidationService).validateUserCreation(request);
            
            // when & then
            ValidationException exception = assertThrows(ValidationException.class, 
                () -> userService.createUser(request));
            
            assertThat(exception.getErrorCode()).isEqualTo(ErrorCode.INVALID_INPUT_VALUE);
            assertThat(exception.getMessage()).isEqualTo("ë‚˜ì´ëŠ” í•„ìˆ˜ì…ë‹ˆë‹¤");
            
            // verify
            verify(userValidationService).validateUserCreation(request);
            verify(userRepository, never()).save(any(User.class));
        }
        
        @Test
        @DisplayName("ë°ì´í„°ë² ì´ìŠ¤ ì €ì¥ ì‹¤íŒ¨ ì‹œ ì˜ˆì™¸ ì „íŒŒ")
        void createUser_DatabaseSaveFails_PropagatesException() {
            // given
            UserCreateReq request = createValidUserCreateRequest();
            User user = createUserFromRequest(request);
            
            given(userRepository.existsByEmailAndStatusNot(anyString(), any(UserStatus.class)))
                .willReturn(false);
            given(passwordEncoder.encode(anyString())).willReturn("encoded-password");
            given(userRepository.save(any(User.class)))
                .willThrow(new DataIntegrityViolationException("Unique constraint violation"));
            
            // when & then
            assertThrows(DataIntegrityViolationException.class, 
                () -> userService.createUser(request));
            
            // verify
            verify(userRepository).save(any(User.class));
        }
        
        @Test
        @DisplayName("ì˜ˆìƒì¹˜ ëª»í•œ ì˜ˆì™¸ ë°œìƒ ì‹œ ë¡œê¹… í™•ì¸")
        void createUser_UnexpectedException_LogsError() {
            // given
            UserCreateReq request = createValidUserCreateRequest();
            given(userRepository.existsByEmailAndStatusNot(anyString(), any(UserStatus.class)))
                .willThrow(new RuntimeException("Unexpected database error"));
            
            // when & then
            RuntimeException exception = assertThrows(RuntimeException.class, 
                () -> userService.createUser(request));
            
            assertThat(exception.getMessage()).isEqualTo("Unexpected database error");
            
            // ë¡œê¹… ê²€ì¦ì€ ë¡œê·¸ ìº¡ì²˜ ë¼ì´ë¸ŒëŸ¬ë¦¬ ì‚¬ìš© (ì˜ˆ: LogCaptor)
            // assertThat(logCaptor.getErrorLogs()).containsExactly("ì˜ˆìƒì¹˜ ëª»í•œ ì˜¤ë¥˜ ë°œìƒ");
        }
    }
    
    @Nested
    @DisplayName("ì‚¬ìš©ì ì¡°íšŒ ì˜ˆì™¸ í…ŒìŠ¤íŠ¸")
    class GetUserExceptionTest {
        
        @Test
        @DisplayName("ì¡´ì¬í•˜ì§€ ì•ŠëŠ” ì‚¬ìš©ì ì¡°íšŒ ì‹œ BusinessException ë°œìƒ")
        void getUserById_UserNotFound_ThrowsBusinessException() {
            // given
            Long userId = 999L;
            given(userRepository.findByIdAndStatusNot(userId, UserStatus.DELETED))
                .willReturn(Optional.empty());
            
            // when & then
            BusinessException exception = assertThrows(BusinessException.class, 
                () -> userService.getUserById(userId));
            
            assertThat(exception.getErrorCode()).isEqualTo(ErrorCode.USER_NOT_FOUND);
            assertThat(exception.getMessage()).contains("ì‚¬ìš©ìë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤");
            
            // verify
            verify(userRepository).findByIdAndStatusNot(userId, UserStatus.DELETED);
        }
        
        @Test
        @DisplayName("ì‚­ì œëœ ì‚¬ìš©ì ì¡°íšŒ ì‹œ BusinessException ë°œìƒ")
        void getUserById_DeletedUser_ThrowsBusinessException() {
            // given
            Long userId = 1L;
            given(userRepository.findByIdAndStatusNot(userId, UserStatus.DELETED))
                .willReturn(Optional.empty()); // ì‚­ì œëœ ì‚¬ìš©ìëŠ” ì¡°íšŒë˜ì§€ ì•ŠìŒ
            
            // when & then
            BusinessException exception = assertThrows(BusinessException.class, 
                () -> userService.getUserById(userId));
            
            assertThat(exception.getErrorCode()).isEqualTo(ErrorCode.USER_NOT_FOUND);
        }
        
        @ParameterizedTest
        @ValueSource(longs = {-1L, 0L})
        @DisplayName("ì˜ëª»ëœ ì‚¬ìš©ì IDë¡œ ì¡°íšŒ ì‹œ ValidationException ë°œìƒ")
        void getUserById_InvalidUserId_ThrowsValidationException(Long invalidUserId) {
            // when & then
            ValidationException exception = assertThrows(ValidationException.class, 
                () -> userService.getUserById(invalidUserId));
            
            assertThat(exception.getErrorCode()).isEqualTo(ErrorCode.INVALID_INPUT_VALUE);
            
            // verify
            verify(userRepository, never()).findByIdAndStatusNot(anyLong(), any(UserStatus.class));
        }
    }
    
    @Nested
    @DisplayName("ì‚¬ìš©ì ì—…ë°ì´íŠ¸ ì˜ˆì™¸ í…ŒìŠ¤íŠ¸")
    class UpdateUserExceptionTest {
        
        @Test
        @DisplayName("ê¶Œí•œ ì—†ëŠ” ì‚¬ìš©ì ì—…ë°ì´íŠ¸ ì‹œ BusinessException ë°œìƒ")
        void updateUser_UnauthorizedUpdate_ThrowsBusinessException() {
            // given
            Long userId = 1L;
            UserUpdateReq request = createValidUserUpdateRequest();
            
            doThrow(new BusinessException(ErrorCode.ACCESS_DENIED, "ë‹¤ë¥¸ ì‚¬ìš©ìì˜ ì •ë³´ë¥¼ ìˆ˜ì •í•  ê¶Œí•œì´ ì—†ìŠµë‹ˆë‹¤"))
                .when(userValidationService).validateUserUpdate(userId, request);
            
            // when & then
            BusinessException exception = assertThrows(BusinessException.class, 
                () -> userService.updateUser(userId, request));
            
            assertThat(exception.getErrorCode()).isEqualTo(ErrorCode.ACCESS_DENIED);
            
            // verify
            verify(userValidationService).validateUserUpdate(userId, request);
            verify(userRepository, never()).save(any(User.class));
        }
        
        @Test
        @DisplayName("ë¹„í™œì„± ì‚¬ìš©ì ì—…ë°ì´íŠ¸ ì‹œ BusinessException ë°œìƒ")
        void updateUser_InactiveUser_ThrowsBusinessException() {
            // given
            Long userId = 1L;
            UserUpdateReq request = createValidUserUpdateRequest();
            User inactiveUser = createUser(UserStatus.INACTIVE);
            
            given(userRepository.findByIdAndStatusNot(userId, UserStatus.DELETED))
                .willReturn(Optional.of(inactiveUser));
            doThrow(new BusinessException(ErrorCode.USER_UPDATE_NOT_ALLOWED, "ë¹„í™œì„±í™”ëœ ì‚¬ìš©ìëŠ” ìˆ˜ì •í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤"))
                .when(userValidationService).validateUserUpdate(userId, request);
            
            // when & then
            BusinessException exception = assertThrows(BusinessException.class, 
                () -> userService.updateUser(userId, request));
            
            assertThat(exception.getErrorCode()).isEqualTo(ErrorCode.USER_UPDATE_NOT_ALLOWED);
        }
    }
    
    /**
     * í…ŒìŠ¤íŠ¸ ë„ìš°ë¯¸ ë©”ì„œë“œë“¤
     */
    private UserCreateReq createValidUserCreateRequest() {
        return UserCreateReq.builder()
                .name("í™ê¸¸ë™")
                .email("hong@example.com")
                .password("Password123!")
                .age(25)
                .phone("010-1234-5678")
                .agreement(UserAgreementDto.builder()
                    .termsAgreed(true)
                    .privacyAgreed(true)
                    .marketingAgreed(false)
                    .build())
                .build();
    }
    
    private UserUpdateReq createValidUserUpdateRequest() {
        return UserUpdateReq.builder()
                .name("í™ê¸¸ë™")
                .email("hong.updated@example.com")
                .age(26)
                .build();
    }
    
    private User createUserFromRequest(UserCreateReq request) {
        return User.builder()
                .name(request.getName())
                .email(request.getEmail())
                .password("encoded-password")
                .age(request.getAge())
                .phone(request.getPhone())
                .status(UserStatus.ACTIVE)
                .build();
    }
    
    private User createUser(UserStatus status) {
        return User.builder()
                .id(1L)
                .name("í™ê¸¸ë™")
                .email("hong@example.com")
                .password("encoded-password")
                .age(25)
                .status(status)
                .build();
    }
}
```

##### 2. Controller ê³„ì¸µ ì˜ˆì™¸ í…ŒìŠ¤íŠ¸
```java
/**
 * ì‚¬ìš©ì ì»¨íŠ¸ë¡¤ëŸ¬ ì˜ˆì™¸ í…ŒìŠ¤íŠ¸
 * 
 * @author ByounggwanLee
 * @since 2025-10-09
 */
@WebMvcTest(UserController.class)
@DisplayName("ì‚¬ìš©ì ì»¨íŠ¸ë¡¤ëŸ¬ ì˜ˆì™¸ ì²˜ë¦¬ í…ŒìŠ¤íŠ¸")
class UserControllerExceptionTest {
    
    @Autowired
    private MockMvc mockMvc;
    
    @MockBean
    private UserService userService;
    
    @Autowired
    private ObjectMapper objectMapper;
    
    @Nested
    @DisplayName("ì…ë ¥ê°’ ê²€ì¦ ì˜ˆì™¸ í…ŒìŠ¤íŠ¸")
    class ValidationExceptionTest {
        
        @Test
        @DisplayName("í•„ìˆ˜ í•„ë“œ ëˆ„ë½ ì‹œ 400 Bad Request ì‘ë‹µ")
        void createUser_MissingRequiredFields_Returns400() throws Exception {
            // given
            UserCreateReq invalidRequest = UserCreateReq.builder()
                .email("hong@example.com")
                // name ëˆ„ë½
                // password ëˆ„ë½
                .age(25)
                .build();
            
            // when & then
            mockMvc.perform(post("/api/v1/users")
                    .contentType(MediaType.APPLICATION_JSON)
                    .content(objectMapper.writeValueAsString(invalidRequest)))
                .andExpect(status().isBadRequest())
                .andExpect(jsonPath("$.success").value(false))
                .andExpect(jsonPath("$.message").value("ì…ë ¥ê°’ ê²€ì¦ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤"))
                .andExpect(jsonPath("$.error.hscode").value("BAD_REQUEST"))
                .andExpect(jsonPath("$.error.code").value("C002"))
                .andExpect(jsonPath("$.error.fieldErrors").isArray())
                .andExpect(jsonPath("$.error.fieldErrors[?(@.field == 'name')]").exists())
                .andExpect(jsonPath("$.error.fieldErrors[?(@.field == 'password')]").exists());
            
            // verify
            verify(userService, never()).createUser(any(UserCreateReq.class));
        }
        
        @Test
        @DisplayName("ì˜ëª»ëœ ì´ë©”ì¼ í˜•ì‹ ì‹œ 400 Bad Request ì‘ë‹µ")
        void createUser_InvalidEmailFormat_Returns400() throws Exception {
            // given
            UserCreateReq invalidRequest = createValidUserCreateRequest();
            invalidRequest.setEmail("invalid-email-format");
            
            // when & then
            mockMvc.perform(post("/api/v1/users")
                    .contentType(MediaType.APPLICATION_JSON)
                    .content(objectMapper.writeValueAsString(invalidRequest)))
                .andExpect(status().isBadRequest())
                .andExpect(jsonPath("$.success").value(false))
                .andExpected(jsonPath("$.error.fieldErrors[?(@.field == 'email')].message")
                    .value("ì˜¬ë°”ë¥¸ ì´ë©”ì¼ í˜•ì‹ì´ ì•„ë‹™ë‹ˆë‹¤"));
        }
        
        @Test
        @DisplayName("ë¹„ë°€ë²ˆí˜¸ íŒ¨í„´ ë¶ˆì¼ì¹˜ ì‹œ 400 Bad Request ì‘ë‹µ")
        void createUser_InvalidPasswordPattern_Returns400() throws Exception {
            // given
            UserCreateReq invalidRequest = createValidUserCreateRequest();
            invalidRequest.setPassword("weak"); // íŒ¨í„´ ë¶ˆì¼ì¹˜
            
            // when & then
            mockMvc.perform(post("/api/v1/users")
                    .contentType(MediaType.APPLICATION_JSON)
                    .content(objectMapper.writeValueAsString(invalidRequest)))
                .andExpect(status().isBadRequest())
                .andExpect(jsonPath("$.error.fieldErrors[?(@.field == 'password')].message")
                    .value(containsString("ë¹„ë°€ë²ˆí˜¸ëŠ”")));
        }
        
        @ParameterizedTest
        @ValueSource(ints = {13, 121}) // ë‚˜ì´ ë²”ìœ„ ì´ˆê³¼
        @DisplayName("ë‚˜ì´ ë²”ìœ„ ì´ˆê³¼ ì‹œ 400 Bad Request ì‘ë‹µ")
        void createUser_InvalidAge_Returns400(int invalidAge) throws Exception {
            // given
            UserCreateReq invalidRequest = createValidUserCreateRequest();
            invalidRequest.setAge(invalidAge);
            
            // when & then
            mockMvc.perform(post("/api/v1/users")
                    .contentType(MediaType.APPLICATION_JSON)
                    .content(objectMapper.writeValueAsString(invalidRequest)))
                .andExpect(status().isBadRequest())
                .andExpect(jsonPath("$.error.fieldErrors[?(@.field == 'age')]").exists());
        }
    }
    
    @Nested
    @DisplayName("ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ ì˜ˆì™¸ í…ŒìŠ¤íŠ¸")
    class BusinessExceptionTest {
        
        @Test
        @DisplayName("ì‚¬ìš©ì ì—†ìŒ ì‹œ 404 Not Found ì‘ë‹µ")
        void getUserById_UserNotFound_Returns404() throws Exception {
            // given
            Long userId = 999L;
            given(userService.getUserById(userId))
                .willThrow(new BusinessException(ErrorCode.USER_NOT_FOUND, "ì‚¬ìš©ìë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤"));
            
            // when & then
            mockMvc.perform(get("/api/v1/users/{id}", userId))
                .andExpect(status().isNotFound())
                .andExpect(jsonPath("$.success").value(false))
                .andExpect(jsonPath("$.message").value("ì‚¬ìš©ìë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤"))
                .andExpect(jsonPath("$.error.hscode").value("NOT_FOUND"))
                .andExpect(jsonPath("$.error.code").value("U001"));
            
            // verify
            verify(userService).getUserById(userId);
        }
        
        @Test
        @DisplayName("ì´ë©”ì¼ ì¤‘ë³µ ì‹œ 409 Conflict ì‘ë‹µ")
        void createUser_DuplicateEmail_Returns409() throws Exception {
            // given
            UserCreateReq request = createValidUserCreateRequest();
            given(userService.createUser(any(UserCreateReq.class)))
                .willThrow(new BusinessException(ErrorCode.USER_ALREADY_EXISTS, "ì´ë¯¸ ì¡´ì¬í•˜ëŠ” ì‚¬ìš©ìì…ë‹ˆë‹¤"));
            
            // when & then
            mockMvc.perform(post("/api/v1/users")
                    .contentType(MediaType.APPLICATION_JSON)
                    .content(objectMapper.writeValueAsString(request)))
                .andExpect(status().isConflict())
                .andExpect(jsonPath("$.success").value(false))
                .andExpect(jsonPath("$.message").value("ì´ë¯¸ ì¡´ì¬í•˜ëŠ” ì‚¬ìš©ìì…ë‹ˆë‹¤"))
                .andExpect(jsonPath("$.error.hscode").value("CONFLICT"))
                .andExpect(jsonPath("$.error.code").value("U002"));
        }
        
        @Test
        @DisplayName("ê¶Œí•œ ì—†ìŒ ì‹œ 403 Forbidden ì‘ë‹µ")
        void updateUser_AccessDenied_Returns403() throws Exception {
            // given
            Long userId = 1L;
            UserUpdateReq request = createValidUserUpdateRequest();
            given(userService.updateUser(eq(userId), any(UserUpdateReq.class)))
                .willThrow(new BusinessException(ErrorCode.ACCESS_DENIED, "ì ‘ê·¼ ê¶Œí•œì´ ì—†ìŠµë‹ˆë‹¤"));
            
            // when & then
            mockMvc.perform(put("/api/v1/users/{id}", userId)
                    .contentType(MediaType.APPLICATION_JSON)
                    .content(objectMapper.writeValueAsString(request)))
                .andExpect(status().isForbidden())
                .andExpect(jsonPath("$.success").value(false))
                .andExpect(jsonPath("$.message").value("ì ‘ê·¼ ê¶Œí•œì´ ì—†ìŠµë‹ˆë‹¤"))
                .andExpect(jsonPath("$.error.hscode").value("FORBIDDEN"))
                .andExpect(jsonPath("$.error.code").value("A002"));
        }
    }
    
    @Nested
    @DisplayName("ì‹œìŠ¤í…œ ì˜ˆì™¸ í…ŒìŠ¤íŠ¸")
    class SystemExceptionTest {
        
        @Test
        @DisplayName("ì˜ˆìƒì¹˜ ëª»í•œ ì˜ˆì™¸ ì‹œ 500 Internal Server Error ì‘ë‹µ")
        void createUser_UnexpectedException_Returns500() throws Exception {
            // given
            UserCreateReq request = createValidUserCreateRequest();
            given(userService.createUser(any(UserCreateReq.class)))
                .willThrow(new RuntimeException("Unexpected system error"));
            
            // when & then
            mockMvc.perform(post("/api/v1/users")
                    .contentType(MediaType.APPLICATION_JSON)
                    .content(objectMapper.writeValueAsString(request)))
                .andExpect(status().isInternalServerError())
                .andExpect(jsonPath("$.success").value(false))
                .andExpect(jsonPath("$.message").value("ì„œë²„ ë‚´ë¶€ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤"))
                .andExpect(jsonPath("$.error.hscode").value("INTERNAL_SERVER_ERROR"))
                .andExpect(jsonPath("$.error.code").value("E001"));
        }
        
        @Test
        @DisplayName("JSON íŒŒì‹± ì˜¤ë¥˜ ì‹œ 400 Bad Request ì‘ë‹µ")
        void createUser_JsonParseError_Returns400() throws Exception {
            // given
            String invalidJson = "{ invalid json }";
            
            // when & then
            mockMvc.perform(post("/api/v1/users")
                    .contentType(MediaType.APPLICATION_JSON)
                    .content(invalidJson))
                .andExpect(status().isBadRequest())
                .andExpect(jsonPath("$.success").value(false))
                .andExpect(jsonPath("$.error.hscode").value("BAD_REQUEST"));
        }
    }
    
    /**
     * í…ŒìŠ¤íŠ¸ ë„ìš°ë¯¸ ë©”ì„œë“œë“¤
     */
    private UserCreateReq createValidUserCreateRequest() {
        return UserCreateReq.builder()
                .name("í™ê¸¸ë™")
                .email("hong@example.com")
                .password("Password123!")
                .age(25)
                .phone("010-1234-5678")
                .agreement(UserAgreementDto.builder()
                    .termsAgreed(true)
                    .privacyAgreed(true)
                    .marketingAgreed(false)
                    .build())
                .build();
    }
    
    private UserUpdateReq createValidUserUpdateRequest() {
        return UserUpdateReq.builder()
                .name("í™ê¸¸ë™")
                .email("hong.updated@example.com")
                .age(26)
                .build();
    }
}
```

### 11.2 í†µí•© í…ŒìŠ¤íŠ¸ ì˜ˆì™¸ ì²˜ë¦¬

ì‹¤ì œ ìš´ì˜ í™˜ê²½ê³¼ ìœ ì‚¬í•œ ì¡°ê±´ì—ì„œ ì˜ˆì™¸ ì²˜ë¦¬ì˜ ë™ì‘ì„ ê²€ì¦í•˜ëŠ” í†µí•© í…ŒìŠ¤íŠ¸ íŒ¨í„´ì„ ì œì‹œí•©ë‹ˆë‹¤.

#### ğŸ”„ ì „ì²´ ìŠ¤íƒ ì˜ˆì™¸ í…ŒìŠ¤íŠ¸

##### 1. Spring Boot í†µí•© í…ŒìŠ¤íŠ¸
```java
/**
 * ì‚¬ìš©ì API í†µí•© í…ŒìŠ¤íŠ¸
 * 
 * @author ByounggwanLee
 * @since 2025-10-09
 */
@SpringBootTest(webEnvironment = SpringBootTest.WebEnvironment.RANDOM_PORT)
@AutoConfigureTestDatabase(replace = AutoConfigureTestDatabase.Replace.NONE)
@TestPropertySource(locations = "classpath:application-test.yml")
@Transactional
@DisplayName("ì‚¬ìš©ì API í†µí•© í…ŒìŠ¤íŠ¸")
class UserApiIntegrationTest {
    
    @Autowired
    private TestRestTemplate restTemplate;
    
    @Autowired
    private UserRepository userRepository;
    
    @Autowired
    private TestEntityManager entityManager;
    
    @MockBean
    private SktaiAuthService sktaiAuthService; // ì™¸ë¶€ API ëª¨í‚¹
    
    @LocalServerPort
    private int port;
    
    private String baseUrl;
    private HttpHeaders headers;
    
    @BeforeEach
    void setUp() {
        baseUrl = "http://localhost:" + port + "/api/v1/users";
        headers = new HttpHeaders();
        headers.setContentType(MediaType.APPLICATION_JSON);
        
        // í…ŒìŠ¤íŠ¸ìš© ì¸ì¦ í† í° ì„¤ì • (ì‹¤ì œ JWT ë˜ëŠ” ëª¨í‚¹)
        headers.setBearerAuth("test-jwt-token");
    }
    
    @Nested
    @DisplayName("ë°ì´í„°ë² ì´ìŠ¤ ì œì•½ ì¡°ê±´ ì˜ˆì™¸ í…ŒìŠ¤íŠ¸")
    class DatabaseConstraintExceptionTest {
        
        @Test
        @DisplayName("ì´ë©”ì¼ ì¤‘ë³µ ì‹œ 409 Conflict ì‘ë‹µ (ì‹¤ì œ DB ì œì•½ì¡°ê±´)")
        void createUser_DuplicateEmailInDatabase_Returns409() {
            // given - ê¸°ì¡´ ì‚¬ìš©ì ìƒì„±
            User existingUser = User.builder()
                .name("ê¸°ì¡´ì‚¬ìš©ì")
                .email("duplicate@example.com")
                .password("encoded-password")
                .age(25)
                .status(UserStatus.ACTIVE)
                .build();
            userRepository.save(existingUser);
            entityManager.flush(); // ì¦‰ì‹œ DB ë°˜ì˜
            
            // ë™ì¼í•œ ì´ë©”ì¼ë¡œ ìƒˆ ì‚¬ìš©ì ìƒì„± ì‹œë„
            UserCreateReq request = UserCreateReq.builder()
                .name("ìƒˆì‚¬ìš©ì")
                .email("duplicate@example.com") // ì¤‘ë³µ ì´ë©”ì¼
                .password("Password123!")
                .age(30)
                .agreement(createValidAgreement())
                .build();
            
            HttpEntity<UserCreateReq> httpEntity = new HttpEntity<>(request, headers);
            
            // when
            ResponseEntity<AxResponse> response = restTemplate.exchange(
                baseUrl, HttpMethod.POST, httpEntity, AxResponse.class);
            
            // then
            assertThat(response.getStatusCode()).isEqualTo(HttpStatus.CONFLICT);
            
            AxResponse body = response.getBody();
            assertThat(body).isNotNull();
            assertThat(body.isSuccess()).isFalse();
            assertThat(body.getMessage()).contains("ì´ë¯¸ ì¡´ì¬í•˜ëŠ”");
            assertThat(body.getError().getHscode()).isEqualTo("CONFLICT");
            assertThat(body.getError().getCode()).isEqualTo("U002");
            
            // ë°ì´í„°ë² ì´ìŠ¤ì— ìƒˆ ì‚¬ìš©ìê°€ ì¶”ê°€ë˜ì§€ ì•Šì•˜ëŠ”ì§€ í™•ì¸
            List<User> users = userRepository.findByEmail("duplicate@example.com");
            assertThat(users).hasSize(1);
            assertThat(users.get(0).getName()).isEqualTo("ê¸°ì¡´ì‚¬ìš©ì");
        }
        
        @Test
        @DisplayName("NOT NULL ì œì•½ì¡°ê±´ ìœ„ë°˜ ì‹œ 500 Internal Server Error")
        void createUser_NotNullConstraintViolation_Returns500() {
            // given - ìœ íš¨ì„± ê²€ì¦ì„ ìš°íšŒí•˜ì—¬ NULL ê°’ì´ í¬í•¨ëœ ì‚¬ìš©ì ìƒì„± ì‹œë„
            // ì´ëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ ë ˆë²¨ ê²€ì¦ê³¼ DB ë ˆë²¨ ê²€ì¦ì˜ ë¶ˆì¼ì¹˜ë¥¼ í…ŒìŠ¤íŠ¸
            
            String requestJson = """
                {
                    "name": "í…ŒìŠ¤íŠ¸ì‚¬ìš©ì",
                    "email": null,
                    "password": "Password123!",
                    "age": 25,
                    "agreement": {
                        "termsAgreed": true,
                        "privacyAgreed": true,
                        "marketingAgreed": false
                    }
                }
                """;
            
            HttpEntity<String> httpEntity = new HttpEntity<>(requestJson, headers);
            
            // when
            ResponseEntity<AxResponse> response = restTemplate.exchange(
                baseUrl, HttpMethod.POST, httpEntity, AxResponse.class);
            
            // then
            assertThat(response.getStatusCode()).isEqualTo(HttpStatus.BAD_REQUEST);
            
            AxResponse body = response.getBody();
            assertThat(body).isNotNull();
            assertThat(body.isSuccess()).isFalse();
            assertThat(body.getError().getHscode()).isEqualTo("BAD_REQUEST");
        }
        
        @Test
        @DisplayName("ì™¸ë˜ í‚¤ ì œì•½ì¡°ê±´ ìœ„ë°˜ ì‹œ ì ì ˆí•œ ì—ëŸ¬ ì‘ë‹µ")
        void updateUser_ForeignKeyConstraintViolation_ReturnsError() {
            // given - ì¡´ì¬í•˜ì§€ ì•ŠëŠ” ì—­í•  IDë¡œ ì‚¬ìš©ì ì—…ë°ì´íŠ¸
            User user = createAndSaveUser();
            Long userId = user.getId();
            
            UserUpdateReq request = UserUpdateReq.builder()
                .id(userId)
                .name("ì—…ë°ì´íŠ¸ëœì´ë¦„")
                .email("updated@example.com")
                .roles(Arrays.asList(UserRole.ADMIN)) // ì¡´ì¬í•˜ì§€ ì•ŠëŠ” ì—­í• 
                .build();
            
            HttpEntity<UserUpdateReq> httpEntity = new HttpEntity<>(request, headers);
            
            // when
            ResponseEntity<AxResponse> response = restTemplate.exchange(
                baseUrl + "/" + userId, HttpMethod.PUT, httpEntity, AxResponse.class);
            
            // then - ì‹¤ì œ êµ¬í˜„ì— ë”°ë¼ ì‘ë‹µ ì½”ë“œê°€ ë‹¬ë¼ì§ˆ ìˆ˜ ìˆìŒ
            assertThat(response.getStatusCode()).isIn(
                HttpStatus.BAD_REQUEST, HttpStatus.UNPROCESSABLE_ENTITY);
        }
    }
    
    @Nested
    @DisplayName("ì™¸ë¶€ API í†µí•© ì˜ˆì™¸ í…ŒìŠ¤íŠ¸")
    class ExternalApiIntegrationTest {
        
        @Test
        @DisplayName("SKTAI API ì¥ì•  ì‹œ ì ì ˆí•œ fallback ì²˜ë¦¬")
        void createUser_SktaiApiDown_HandlesFallback() {
            // given - SKTAI API ì¥ì•  ì‹œë®¬ë ˆì´ì…˜
            given(sktaiAuthService.validateUser(anyString()))
                .willThrow(new ExternalApiException(ErrorCode.EXTERNAL_SERVER_ERROR, 
                    "SKTAI API ì„œë²„ ì˜¤ë¥˜"));
            
            UserCreateReq request = createValidUserCreateRequest();
            HttpEntity<UserCreateReq> httpEntity = new HttpEntity<>(request, headers);
            
            // when
            ResponseEntity<AxResponse> response = restTemplate.exchange(
                baseUrl, HttpMethod.POST, httpEntity, AxResponse.class);
            
            // then - ì™¸ë¶€ API ì¥ì• ì—ë„ ë¶ˆêµ¬í•˜ê³  ì‚¬ìš©ìëŠ” ìƒì„±ë˜ì–´ì•¼ í•¨ (fallback)
            assertThat(response.getStatusCode()).isEqualTo(HttpStatus.CREATED);
            
            // ë°ì´í„°ë² ì´ìŠ¤ì— ì‚¬ìš©ìê°€ ìƒì„±ë˜ì—ˆëŠ”ì§€ í™•ì¸
            Optional<User> savedUser = userRepository.findByEmail(request.getEmail());
            assertThat(savedUser).isPresent();
            assertThat(savedUser.get().getName()).isEqualTo(request.getName());
        }
        
        @Test
        @DisplayName("ì™¸ë¶€ API íƒ€ì„ì•„ì›ƒ ì‹œ ì ì ˆí•œ ì—ëŸ¬ ì‘ë‹µ")
        void createUser_ExternalApiTimeout_ReturnsAppropriateError() {
            // given - ì™¸ë¶€ API íƒ€ì„ì•„ì›ƒ ì‹œë®¬ë ˆì´ì…˜
            given(sktaiAuthService.validateUser(anyString()))
                .willThrow(new ExternalTimeoutException(ErrorCode.EXTERNAL_API_TIMEOUT, 
                    "SKTAI API íƒ€ì„ì•„ì›ƒ"));
            
            UserCreateReq request = createValidUserCreateRequest();
            HttpEntity<UserCreateReq> httpEntity = new HttpEntity<>(request, headers);
            
            // when
            ResponseEntity<AxResponse> response = restTemplate.exchange(
                baseUrl, HttpMethod.POST, httpEntity, AxResponse.class);
            
            // then
            assertThat(response.getStatusCode()).isEqualTo(HttpStatus.GATEWAY_TIMEOUT);
            
            AxResponse body = response.getBody();
            assertThat(body).isNotNull();
            assertThat(body.isSuccess()).isFalse();
            assertThat(body.getError().getCode()).startsWith("E"); // ì™¸ë¶€ API ì—ëŸ¬ ì½”ë“œ
        }
    }
    
    @Nested
    @DisplayName("ë™ì‹œì„± ë° íŠ¸ëœì­ì…˜ ì˜ˆì™¸ í…ŒìŠ¤íŠ¸")
    class ConcurrencyExceptionTest {
        
        @Test
        @DisplayName("ë™ì‹œ ìˆ˜ì • ì‹œ ë‚™ê´€ì  ë½ ì˜ˆì™¸ ì²˜ë¦¬")
        void updateUser_OptimisticLockException_ReturnsConflict() throws InterruptedException {
            // given - ì‚¬ìš©ì ìƒì„±
            User user = createAndSaveUser();
            Long userId = user.getId();
            
            CountDownLatch latch = new CountDownLatch(2);
            AtomicReference<ResponseEntity<AxResponse>> response1 = new AtomicReference<>();
            AtomicReference<ResponseEntity<AxResponse>> response2 = new AtomicReference<>();
            
            // when - ë™ì‹œì— ê°™ì€ ì‚¬ìš©ì ìˆ˜ì •
            Thread thread1 = new Thread(() -> {
                try {
                    UserUpdateReq request = UserUpdateReq.builder()
                        .id(userId)
                        .name("ìŠ¤ë ˆë“œ1ì—ì„œìˆ˜ì •")
                        .build();
                    
                    HttpEntity<UserUpdateReq> httpEntity = new HttpEntity<>(request, headers);
                    response1.set(restTemplate.exchange(
                        baseUrl + "/" + userId, HttpMethod.PUT, httpEntity, AxResponse.class));
                } finally {
                    latch.countDown();
                }
            });
            
            Thread thread2 = new Thread(() -> {
                try {
                    UserUpdateReq request = UserUpdateReq.builder()
                        .id(userId)
                        .name("ìŠ¤ë ˆë“œ2ì—ì„œìˆ˜ì •")
                        .build();
                    
                    HttpEntity<UserUpdateReq> httpEntity = new HttpEntity<>(request, headers);
                    response2.set(restTemplate.exchange(
                        baseUrl + "/" + userId, HttpMethod.PUT, httpEntity, AxResponse.class));
                } finally {
                    latch.countDown();
                }
            });
            
            thread1.start();
            thread2.start();
            latch.await(10, TimeUnit.SECONDS);
            
            // then - í•˜ë‚˜ëŠ” ì„±ê³µ, í•˜ë‚˜ëŠ” ì¶©ëŒ
            List<ResponseEntity<AxResponse>> responses = Arrays.asList(
                response1.get(), response2.get());
            
            long successCount = responses.stream()
                .mapToInt(r -> r.getStatusCode().is2xxSuccessful() ? 1 : 0)
                .sum();
            long conflictCount = responses.stream()
                .mapToInt(r -> r.getStatusCode() == HttpStatus.CONFLICT ? 1 : 0)
                .sum();
            
            assertThat(successCount).isEqualTo(1);
            assertThat(conflictCount).isEqualTo(1);
        }
    }
    
    @Nested
    @DisplayName("ëŒ€ìš©ëŸ‰ ë°ì´í„° ì²˜ë¦¬ ì˜ˆì™¸ í…ŒìŠ¤íŠ¸")
    class LargeDataExceptionTest {
        
        @Test
        @DisplayName("ìš”ì²­ ë³¸ë¬¸ í¬ê¸° ì œí•œ ì´ˆê³¼ ì‹œ 413 Payload Too Large")
        void createUser_PayloadTooLarge_Returns413() {
            // given - ë§¤ìš° ê¸´ ë¬¸ìì—´ë¡œ ìš”ì²­ í¬ê¸° ì´ˆê³¼
            StringBuilder largeDescription = new StringBuilder();
            for (int i = 0; i < 100000; i++) {
                largeDescription.append("ë§¤ìš° ê¸´ ì„¤ëª… í…ìŠ¤íŠ¸ì…ë‹ˆë‹¤. ");
            }
            
            UserCreateReq request = createValidUserCreateRequest();
            // description í•„ë“œê°€ ìˆë‹¤ë©´ ì„¤ì •
            
            HttpEntity<UserCreateReq> httpEntity = new HttpEntity<>(request, headers);
            
            // when
            ResponseEntity<AxResponse> response = restTemplate.exchange(
                baseUrl, HttpMethod.POST, httpEntity, AxResponse.class);
            
            // then - ì„œë²„ ì„¤ì •ì— ë”°ë¼ 413 ë˜ëŠ” 400
            assertThat(response.getStatusCode()).isIn(
                HttpStatus.PAYLOAD_TOO_LARGE, HttpStatus.BAD_REQUEST);
        }
        
        @Test
        @DisplayName("í˜ì´ì§• í¬ê¸° ì œí•œ ì´ˆê³¼ ì‹œ ì ì ˆí•œ ì—ëŸ¬ ì‘ë‹µ")
        void getUsers_PageSizeExceedsLimit_ReturnsBadRequest() {
            // given - ì œí•œì„ ì´ˆê³¼í•˜ëŠ” í˜ì´ì§€ í¬ê¸°
            String url = baseUrl + "?page=0&size=1000"; // ì œí•œ ì´ˆê³¼
            
            HttpEntity<Void> httpEntity = new HttpEntity<>(headers);
            
            // when
            ResponseEntity<AxResponse> response = restTemplate.exchange(
                url, HttpMethod.GET, httpEntity, AxResponse.class);
            
            // then
            assertThat(response.getStatusCode()).isEqualTo(HttpStatus.BAD_REQUEST);
            
            AxResponse body = response.getBody();
            assertThat(body).isNotNull();
            assertThat(body.isSuccess()).isFalse();
            assertThat(body.getMessage()).contains("í˜ì´ì§€ í¬ê¸°");
        }
    }
    
    /**
     * í…ŒìŠ¤íŠ¸ ë„ìš°ë¯¸ ë©”ì„œë“œë“¤
     */
    private UserCreateReq createValidUserCreateRequest() {
        return UserCreateReq.builder()
                .name("í™ê¸¸ë™")
                .email("hong@example.com")
                .password("Password123!")
                .age(25)
                .phone("010-1234-5678")
                .agreement(createValidAgreement())
                .build();
    }
    
    private UserAgreementDto createValidAgreement() {
        return UserAgreementDto.builder()
                .termsAgreed(true)
                .privacyAgreed(true)
                .marketingAgreed(false)
                .build();
    }
    
    private User createAndSaveUser() {
        User user = User.builder()
                .name("í…ŒìŠ¤íŠ¸ì‚¬ìš©ì")
                .email("test@example.com")
                .password("encoded-password")
                .age(25)
                .status(UserStatus.ACTIVE)
                .build();
        return userRepository.save(user);
    }
}
```

##### 2. í…ŒìŠ¤íŠ¸ ì»¨í…Œì´ë„ˆ í™œìš© ì˜ˆì™¸ í…ŒìŠ¤íŠ¸
```java
/**
 * í…ŒìŠ¤íŠ¸ ì»¨í…Œì´ë„ˆë¥¼ í™œìš©í•œ ì‹¤ì œ ë°ì´í„°ë² ì´ìŠ¤ ì˜ˆì™¸ í…ŒìŠ¤íŠ¸
 * 
 * @author ByounggwanLee
 * @since 2025-10-09
 */
@SpringBootTest
@Testcontainers
@DisplayName("ì‹¤ì œ ë°ì´í„°ë² ì´ìŠ¤ ì˜ˆì™¸ í…ŒìŠ¤íŠ¸")
class DatabaseExceptionIntegrationTest {
    
    @Container
    static PostgreSQLContainer<?> postgres = new PostgreSQLContainer<>("postgres:13")
            .withDatabaseName("testdb")
            .withUsername("test")
            .withPassword("test");
    
    @Autowired
    private UserRepository userRepository;
    
    @Autowired
    private UserService userService;
    
    @DynamicPropertySource
    static void configureProperties(DynamicPropertyRegistry registry) {
        registry.add("spring.datasource.url", postgres::getJdbcUrl);
        registry.add("spring.datasource.username", postgres::getUsername);
        registry.add("spring.datasource.password", postgres::getPassword);
    }
    
    @Test
    @DisplayName("ì‹¤ì œ DB ì œì•½ì¡°ê±´ ìœ„ë°˜ ì‹œ ì ì ˆí•œ ì˜ˆì™¸ ë³€í™˜")
    void createUser_ActualDatabaseConstraintViolation_ConvertsException() {
        // given - ì²« ë²ˆì§¸ ì‚¬ìš©ì ìƒì„±
        UserCreateReq firstRequest = UserCreateReq.builder()
                .name("ì²«ë²ˆì§¸ì‚¬ìš©ì")
                .email("same@example.com")
                .password("Password123!")
                .age(25)
                .agreement(createValidAgreement())
                .build();
        
        userService.createUser(firstRequest);
        
        // ë™ì¼í•œ ì´ë©”ì¼ë¡œ ë‘ ë²ˆì§¸ ì‚¬ìš©ì ìƒì„± ì‹œë„
        UserCreateReq secondRequest = UserCreateReq.builder()
                .name("ë‘ë²ˆì§¸ì‚¬ìš©ì")
                .email("same@example.com") // ë™ì¼í•œ ì´ë©”ì¼
                .password("Password456!")
                .age(30)
                .agreement(createValidAgreement())
                .build();
        
        // when & then
        BusinessException exception = assertThrows(BusinessException.class, 
            () -> userService.createUser(secondRequest));
        
        assertThat(exception.getErrorCode()).isEqualTo(ErrorCode.USER_ALREADY_EXISTS);
        assertThat(exception.getMessage()).contains("ì´ë¯¸ ì¡´ì¬í•˜ëŠ”");
        
        // ì‹¤ì œ ë°ì´í„°ë² ì´ìŠ¤ ìƒíƒœ í™•ì¸
        List<User> users = userRepository.findAll();
        assertThat(users).hasSize(1);
        assertThat(users.get(0).getName()).isEqualTo("ì²«ë²ˆì§¸ì‚¬ìš©ì");
    }
    
    @Test
    @DisplayName("ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²° ì‹¤íŒ¨ ì‹œ ì ì ˆí•œ ì˜ˆì™¸ ì²˜ë¦¬")
    void databaseConnectionFailure_HandlesGracefully() {
        // given - ë°ì´í„°ë² ì´ìŠ¤ ì»¨í…Œì´ë„ˆ ì¤‘ì§€ (ì—°ê²° ì‹¤íŒ¨ ì‹œë®¬ë ˆì´ì…˜)
        postgres.stop();
        
        UserCreateReq request = createValidUserCreateRequest();
        
        // when & then
        assertThrows(DataAccessException.class, 
            () -> userService.createUser(request));
        
        // ì»¨í…Œì´ë„ˆ ì¬ì‹œì‘
        postgres.start();
    }
    
    private UserCreateReq createValidUserCreateRequest() {
        return UserCreateReq.builder()
                .name("í™ê¸¸ë™")
                .email("hong@example.com")
                .password("Password123!")
                .age(25)
                .agreement(createValidAgreement())
                .build();
    }
    
    private UserAgreementDto createValidAgreement() {
        return UserAgreementDto.builder()
                .termsAgreed(true)
                .privacyAgreed(true)
                .marketingAgreed(false)
                .build();
    }
}
```

---

## 12. ëª¨ë‹ˆí„°ë§ê³¼ ì•Œë¦¼

### 12.1 ì—ëŸ¬ ë©”íŠ¸ë¦­ ìˆ˜ì§‘

ì‹œìŠ¤í…œì˜ ì—ëŸ¬ ë°œìƒ í˜„í™©ì„ ì‹¤ì‹œê°„ìœ¼ë¡œ ëª¨ë‹ˆí„°ë§í•˜ê³  ë¶„ì„í•  ìˆ˜ ìˆëŠ” ë©”íŠ¸ë¦­ ì‹œìŠ¤í…œì„ êµ¬ì¶•í•©ë‹ˆë‹¤.

#### ğŸ“Š Micrometer ê¸°ë°˜ ë©”íŠ¸ë¦­ ìˆ˜ì§‘

##### 1. ì—ëŸ¬ ë©”íŠ¸ë¦­ ìˆ˜ì§‘ê¸°
```java
/**
 * ì—ëŸ¬ ë©”íŠ¸ë¦­ ìˆ˜ì§‘ ì„œë¹„ìŠ¤
 * 
 * <p>ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œ ë°œìƒí•˜ëŠ” ëª¨ë“  ì—ëŸ¬ë¥¼ ë©”íŠ¸ë¦­ìœ¼ë¡œ ìˆ˜ì§‘í•˜ê³ 
 * Prometheus, CloudWatch ë“± ëª¨ë‹ˆí„°ë§ ì‹œìŠ¤í…œì— ì „ì†¡í•©ë‹ˆë‹¤.</p>
 * 
 * @author ByounggwanLee
 * @since 2025-10-09
 */
@Component
@RequiredArgsConstructor
@Slf4j
public class ErrorMetricsCollector {
    
    private final MeterRegistry meterRegistry;
    private final ApplicationProperties applicationProperties;
    
    // ì—ëŸ¬ ì¹´ìš´í„°ë“¤
    private final Counter.Builder errorCounterBuilder;
    private final Timer.Builder errorResponseTimeBuilder;
    private final Gauge.Builder activeErrorGaugeBuilder;
    
    // í˜„ì¬ í™œì„± ì—ëŸ¬ ìˆ˜ (Gaugeìš©)
    private final AtomicInteger activeErrors = new AtomicInteger(0);
    
    @PostConstruct
    public void initializeMetrics() {
        // ê¸°ë³¸ ì—ëŸ¬ ì¹´ìš´í„°
        this.errorCounterBuilder = Counter.builder("application.errors.total")
                .description("Total number of application errors")
                .tag("application", applicationProperties.getName())
                .tag("version", applicationProperties.getVersion());
        
        // ì—ëŸ¬ ì‘ë‹µ ì‹œê°„
        this.errorResponseTimeBuilder = Timer.builder("application.errors.response.time")
                .description("Error response time")
                .tag("application", applicationProperties.getName());
        
        // í™œì„± ì—ëŸ¬ ê²Œì´ì§€
        Gauge.builder("application.errors.active")
                .description("Current number of active errors")
                .tag("application", applicationProperties.getName())
                .register(meterRegistry, activeErrors, AtomicInteger::get);
    }
    
    /**
     * ì—ëŸ¬ ë°œìƒ ê¸°ë¡
     * 
     * @param errorCode ì—ëŸ¬ ì½”ë“œ
     * @param exception ì˜ˆì™¸ ê°ì²´
     * @param request HTTP ìš”ì²­ ì •ë³´
     * @param duration ì²˜ë¦¬ ì‹œê°„
     */
    public void recordError(ErrorCode errorCode, Exception exception, 
                           HttpServletRequest request, Duration duration) {
        
        String errorType = exception.getClass().getSimpleName();
        String endpoint = request.getRequestURI();
        String method = request.getMethod();
        String userAgent = request.getHeader("User-Agent");
        String clientIp = getClientIp(request);
        
        // ì—ëŸ¬ ì¹´ìš´í„° ì¦ê°€
        errorCounterBuilder
                .tag("error.code", errorCode.getCode())
                .tag("error.type", errorType)
                .tag("http.status", String.valueOf(errorCode.getStatus().value()))
                .tag("http.method", method)
                .tag("endpoint", sanitizeEndpoint(endpoint))
                .tag("severity", determineSeverity(errorCode))
                .register(meterRegistry)
                .increment();
        
        // ì—ëŸ¬ ì‘ë‹µ ì‹œê°„ ê¸°ë¡
        errorResponseTimeBuilder
                .tag("error.code", errorCode.getCode())
                .tag("http.method", method)
                .tag("endpoint", sanitizeEndpoint(endpoint))
                .register(meterRegistry)
                .record(duration);
        
        // ìƒì„¸ ì—ëŸ¬ ë¡œê·¸ (êµ¬ì¡°í™”ëœ ë¡œê¹…)
        log.error("Error occurred - Code: {}, Type: {}, Endpoint: {} {}, IP: {}, Duration: {}ms, UserAgent: {}", 
                errorCode.getCode(), errorType, method, endpoint, clientIp, 
                duration.toMillis(), sanitizeUserAgent(userAgent), exception);
        
        // ì‹¬ê°í•œ ì—ëŸ¬ì¸ ê²½ìš° í™œì„± ì—ëŸ¬ ìˆ˜ ì¦ê°€
        if (isSevereError(errorCode)) {
            activeErrors.incrementAndGet();
            
            // ì¼ì • ì‹œê°„ í›„ í™œì„± ì—ëŸ¬ ìˆ˜ ê°ì†Œ (ì˜ˆ: 5ë¶„)
            CompletableFuture.delayedExecutor(5, TimeUnit.MINUTES)
                    .execute(activeErrors::decrementAndGet);
        }
        
        // íŠ¹ì • ì¡°ê±´ì—ì„œ ì•ŒëŒ ë°œì†¡
        checkAndSendAlert(errorCode, errorType, endpoint, clientIp);
    }
    
    /**
     * ë¹„ì¦ˆë‹ˆìŠ¤ ë©”íŠ¸ë¦­ ê¸°ë¡
     * 
     * @param operation ë¹„ì¦ˆë‹ˆìŠ¤ ì˜¤í¼ë ˆì´ì…˜
     * @param result ê²°ê³¼ (success/failure)
     * @param duration ì²˜ë¦¬ ì‹œê°„
     * @param additionalTags ì¶”ê°€ íƒœê·¸
     */
    public void recordBusinessMetric(String operation, String result, 
                                   Duration duration, Map<String, String> additionalTags) {
        
        Tags tags = Tags.of(
                "operation", operation,
                "result", result,
                "application", applicationProperties.getName()
        );
        
        // ì¶”ê°€ íƒœê·¸ ë³‘í•©
        if (additionalTags != null) {
            for (Map.Entry<String, String> entry : additionalTags.entrySet()) {
                tags = tags.and(entry.getKey(), entry.getValue());
            }
        }
        
        // ë¹„ì¦ˆë‹ˆìŠ¤ ì˜¤í¼ë ˆì´ì…˜ ì¹´ìš´í„°
        Counter.builder("business.operations.total")
                .description("Total business operations")
                .tags(tags)
                .register(meterRegistry)
                .increment();
        
        // ë¹„ì¦ˆë‹ˆìŠ¤ ì˜¤í¼ë ˆì´ì…˜ ì²˜ë¦¬ ì‹œê°„
        Timer.builder("business.operations.duration")
                .description("Business operation duration")
                .tags(tags)
                .register(meterRegistry)
                .record(duration);
    }
    
    /**
     * ì™¸ë¶€ API í˜¸ì¶œ ë©”íŠ¸ë¦­ ê¸°ë¡
     * 
     * @param apiName API ì´ë¦„
     * @param endpoint ì—”ë“œí¬ì¸íŠ¸
     * @param status HTTP ìƒíƒœ
     * @param duration ì²˜ë¦¬ ì‹œê°„
     * @param success ì„±ê³µ ì—¬ë¶€
     */
    public void recordExternalApiMetric(String apiName, String endpoint, 
                                      int status, Duration duration, boolean success) {
        
        Tags tags = Tags.of(
                "api.name", apiName,
                "endpoint", sanitizeEndpoint(endpoint),
                "status", String.valueOf(status),
                "result", success ? "success" : "failure"
        );
        
        // ì™¸ë¶€ API í˜¸ì¶œ ì¹´ìš´í„°
        Counter.builder("external.api.calls.total")
                .description("Total external API calls")
                .tags(tags)
                .register(meterRegistry)
                .increment();
        
        // ì™¸ë¶€ API ì‘ë‹µ ì‹œê°„
        Timer.builder("external.api.response.time")
                .description("External API response time")
                .tags(tags)
                .register(meterRegistry)
                .record(duration);
        
        // ì™¸ë¶€ API ì—ëŸ¬ìœ¨ (ì„±ê³µ/ì‹¤íŒ¨ ë¹„ìœ¨)
        if (!success) {
            Counter.builder("external.api.errors.total")
                    .description("Total external API errors")
                    .tags(Tags.of("api.name", apiName, "endpoint", sanitizeEndpoint(endpoint)))
                    .register(meterRegistry)
                    .increment();
        }
    }
    
    /**
     * ë°ì´í„°ë² ì´ìŠ¤ ë©”íŠ¸ë¦­ ê¸°ë¡
     * 
     * @param operation DB ì˜¤í¼ë ˆì´ì…˜ (SELECT, INSERT, UPDATE, DELETE)
     * @param table í…Œì´ë¸”ëª…
     * @param duration ì²˜ë¦¬ ì‹œê°„
     * @param success ì„±ê³µ ì—¬ë¶€
     * @param affectedRows ì˜í–¥ë°›ì€ í–‰ ìˆ˜
     */
    public void recordDatabaseMetric(String operation, String table, 
                                   Duration duration, boolean success, int affectedRows) {
        
        Tags tags = Tags.of(
                "operation", operation.toUpperCase(),
                "table", table,
                "result", success ? "success" : "failure"
        );
        
        // ë°ì´í„°ë² ì´ìŠ¤ ì¿¼ë¦¬ ì¹´ìš´í„°
        Counter.builder("database.queries.total")
                .description("Total database queries")
                .tags(tags)
                .register(meterRegistry)
                .increment();
        
        // ë°ì´í„°ë² ì´ìŠ¤ ì¿¼ë¦¬ ì‹œê°„
        Timer.builder("database.queries.duration")
                .description("Database query duration")
                .tags(tags)
                .register(meterRegistry)
                .record(duration);
        
        // ì˜í–¥ë°›ì€ í–‰ ìˆ˜ (íˆìŠ¤í† ê·¸ë¨)
        if (affectedRows > 0) {
            DistributionSummary.builder("database.affected.rows")
                    .description("Number of affected rows in database operations")
                    .tags(tags)
                    .register(meterRegistry)
                    .record(affectedRows);
        }
        
        // ìŠ¬ë¡œìš° ì¿¼ë¦¬ ê°ì§€
        if (duration.toMillis() > 1000) { // 1ì´ˆ ì´ìƒ
            Counter.builder("database.slow.queries.total")
                    .description("Total slow database queries")
                    .tags(tags)
                    .register(meterRegistry)
                    .increment();
            
            log.warn("Slow query detected: {} {} took {}ms, affected {} rows", 
                    operation, table, duration.toMillis(), affectedRows);
        }
    }
    
    /**
     * ì‚¬ìš©ì ì„¸ì…˜ ë©”íŠ¸ë¦­ ê¸°ë¡
     * 
     * @param event ì„¸ì…˜ ì´ë²¤íŠ¸ (login, logout, timeout)
     * @param userId ì‚¬ìš©ì ID
     * @param sessionId ì„¸ì…˜ ID
     * @param duration ì„¸ì…˜ ì§€ì† ì‹œê°„ (logout/timeout ì‹œ)
     */
    public void recordSessionMetric(String event, Long userId, String sessionId, Duration duration) {
        
        Tags tags = Tags.of(
                "event", event,
                "application", applicationProperties.getName()
        );
        
        // ì„¸ì…˜ ì´ë²¤íŠ¸ ì¹´ìš´í„°
        Counter.builder("user.sessions.events.total")
                .description("Total user session events")
                .tags(tags)
                .register(meterRegistry)
                .increment();
        
        // ì„¸ì…˜ ì§€ì† ì‹œê°„ (ë¡œê·¸ì•„ì›ƒ/íƒ€ì„ì•„ì›ƒ ì‹œì—ë§Œ)
        if (duration != null && ("logout".equals(event) || "timeout".equals(event))) {
            Timer.builder("user.sessions.duration")
                    .description("User session duration")
                    .tags(Tags.of("end.reason", event))
                    .register(meterRegistry)
                    .record(duration);
        }
        
        log.info("Session event: {} - UserId: {}, SessionId: {}, Duration: {}", 
                event, userId, sessionId, duration != null ? duration.toMinutes() + "min" : "N/A");
    }
    
    /**
     * í´ë¼ì´ì–¸íŠ¸ IP ì¶”ì¶œ
     */
    private String getClientIp(HttpServletRequest request) {
        String xForwardedFor = request.getHeader("X-Forwarded-For");
        if (StringUtils.hasText(xForwardedFor)) {
            return xForwardedFor.split(",")[0].trim();
        }
        
        String xRealIp = request.getHeader("X-Real-IP");
        if (StringUtils.hasText(xRealIp)) {
            return xRealIp;
        }
        
        return request.getRemoteAddr();
    }
    
    /**
     * ì—”ë“œí¬ì¸íŠ¸ ì •ë¦¬ (path parameter ì œê±°)
     */
    private String sanitizeEndpoint(String endpoint) {
        if (endpoint == null) {
            return "unknown";
        }
        
        // Path parameterë¥¼ ì¼ë°˜í™” (ì˜ˆ: /users/123 -> /users/{id})
        return endpoint
                .replaceAll("/\\d+", "/{id}")
                .replaceAll("/[a-f0-9]{8}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{12}", "/{uuid}")
                .replaceAll("/[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+", "/{email}");
    }
    
    /**
     * User-Agent ì •ë¦¬
     */
    private String sanitizeUserAgent(String userAgent) {
        if (userAgent == null) {
            return "unknown";
        }
        
        // ê¸¸ì´ ì œí•œ
        if (userAgent.length() > 100) {
            userAgent = userAgent.substring(0, 100) + "...";
        }
        
        return userAgent;
    }
    
    /**
     * ì—ëŸ¬ ì‹¬ê°ë„ ê²°ì •
     */
    private String determineSeverity(ErrorCode errorCode) {
        HttpStatus status = errorCode.getStatus();
        
        if (status.is5xxServerError()) {
            return "critical";
        } else if (status == HttpStatus.UNAUTHORIZED || status == HttpStatus.FORBIDDEN) {
            return "warning";
        } else if (status.is4xxClientError()) {
            return "info";
        } else {
            return "low";
        }
    }
    
    /**
     * ì‹¬ê°í•œ ì—ëŸ¬ ì—¬ë¶€ íŒë‹¨
     */
    private boolean isSevereError(ErrorCode errorCode) {
        return errorCode.getStatus().is5xxServerError() || 
               errorCode == ErrorCode.TOKEN_EXPIRED ||
               errorCode == ErrorCode.ACCESS_DENIED;
    }
    
    /**
     * ì•ŒëŒ ì¡°ê±´ í™•ì¸ ë° ë°œì†¡
     */
    private void checkAndSendAlert(ErrorCode errorCode, String errorType, String endpoint, String clientIp) {
        // 5xx ì—ëŸ¬ ë°œìƒ ì‹œ ì¦‰ì‹œ ì•ŒëŒ
        if (errorCode.getStatus().is5xxServerError()) {
            sendImmediateAlert("CRITICAL", errorCode, errorType, endpoint, clientIp);
        }
        
        // íŠ¹ì • IPì—ì„œ ì§§ì€ ì‹œê°„ ë‚´ ë°˜ë³µ ì—ëŸ¬ ë°œìƒ ì‹œ ì•ŒëŒ
        // (ì‹¤ì œ êµ¬í˜„ì—ì„œëŠ” Redis ë“±ì„ í™œìš©í•œ ì¹´ìš´íŒ… ë¡œì§ í•„ìš”)
        
        // íŠ¹ì • ì—”ë“œí¬ì¸íŠ¸ì˜ ì—ëŸ¬ìœ¨ì´ ì„ê³„ì¹˜ ì´ˆê³¼ ì‹œ ì•ŒëŒ
        // (ì‹¤ì œ êµ¬í˜„ì—ì„œëŠ” ìµœê·¼ ì‹œê°„ ìœˆë„ìš° ë‚´ ì—ëŸ¬ìœ¨ ê³„ì‚° í•„ìš”)
    }
    
    /**
     * ì¦‰ì‹œ ì•ŒëŒ ë°œì†¡
     */
    private void sendImmediateAlert(String severity, ErrorCode errorCode, 
                                  String errorType, String endpoint, String clientIp) {
        // ì‹¤ì œ ì•ŒëŒ ì‹œìŠ¤í…œ(Slack, Email, SMS ë“±)ìœ¼ë¡œ ì „ì†¡
        log.error("ALERT [{}]: Error {} ({}) occurred at {} from IP {}", 
                severity, errorCode.getCode(), errorType, endpoint, clientIp);
        
        // ì•ŒëŒ ë°œì†¡ ë¡œì§ êµ¬í˜„ (ì˜ˆ: Slack Webhook, Email Service ë“±)
        // alertService.sendAlert(severity, errorCode, errorType, endpoint, clientIp);
    }
}
```

### 12.2 ì‹¤ì‹œê°„ ì•Œë¦¼ ì‹œìŠ¤í…œ

ì¤‘ìš”í•œ ì—ëŸ¬ ë°œìƒ ì‹œ ì¦‰ì‹œ ë‹´ë‹¹ìì—ê²Œ ì•Œë¦¼ì„ ì „ì†¡í•˜ëŠ” ì‹œìŠ¤í…œì„ êµ¬ì¶•í•©ë‹ˆë‹¤.

#### ğŸš¨ ë‹¤ì¤‘ ì±„ë„ ì•Œë¦¼ ì‹œìŠ¤í…œ

##### 1. ì•Œë¦¼ ì„œë¹„ìŠ¤
```java
/**
 * ì‹¤ì‹œê°„ ì•Œë¦¼ ì„œë¹„ìŠ¤
 * 
 * <p>ì‹œìŠ¤í…œì—ì„œ ë°œìƒí•˜ëŠ” ì¤‘ìš”í•œ ì´ë²¤íŠ¸ì™€ ì—ëŸ¬ì— ëŒ€í•´
 * ë‹¤ì–‘í•œ ì±„ë„(Slack, Email, SMS)ì„ í†µí•´ ì‹¤ì‹œê°„ ì•Œë¦¼ì„ ì „ì†¡í•©ë‹ˆë‹¤.</p>
 * 
 * @author ByounggwanLee
 * @since 2025-10-09
 */
@Service
@RequiredArgsConstructor
@Slf4j
public class AlertService {
    
    private final SlackNotificationService slackService;
    private final EmailNotificationService emailService;
    private final SmsNotificationService smsService;
    private final AlertConfigurationService configService;
    private final RedisTemplate<String, String> redisTemplate;
    
    private static final String ALERT_SUPPRESSION_KEY = "alert:suppression:";
    private static final Duration DEFAULT_SUPPRESSION_DURATION = Duration.ofMinutes(15);
    
    /**
     * ì—ëŸ¬ ì•Œë¦¼ ë°œì†¡
     * 
     * @param errorCode ì—ëŸ¬ ì½”ë“œ
     * @param exception ì˜ˆì™¸ ê°ì²´
     * @param context ì¶”ê°€ ì»¨í…ìŠ¤íŠ¸ ì •ë³´
     */
    @Async("alertExecutor")
    public void sendErrorAlert(ErrorCode errorCode, Exception exception, AlertContext context) {
        try {
            // ì•Œë¦¼ ì–µì œ í™•ì¸
            if (isAlertSuppressed(errorCode, context)) {
                log.debug("Alert suppressed for error code: {}", errorCode.getCode());
                return;
            }
            
            // ì•Œë¦¼ ì„¤ì • ì¡°íšŒ
            AlertConfiguration config = configService.getConfigurationForError(errorCode);
            if (!config.isEnabled()) {
                log.debug("Alert disabled for error code: {}", errorCode.getCode());
                return;
            }
            
            // ì•Œë¦¼ ë©”ì‹œì§€ ìƒì„±
            AlertMessage message = createAlertMessage(errorCode, exception, context);
            
            // ì±„ë„ë³„ ì•Œë¦¼ ë°œì†¡
            sendToConfiguredChannels(message, config);
            
            // ì•Œë¦¼ ì–µì œ ì„¤ì •
            setAlertSuppression(errorCode, context, config.getSuppressionDuration());
            
            log.info("Alert sent for error code: {} via channels: {}", 
                    errorCode.getCode(), config.getEnabledChannels());
            
        } catch (Exception ex) {
            log.error("Failed to send error alert for code: {}", errorCode.getCode(), ex);
        }
    }
    
    /**
     * ì‹œìŠ¤í…œ ìƒíƒœ ì•Œë¦¼ ë°œì†¡
     * 
     * @param event ì‹œìŠ¤í…œ ì´ë²¤íŠ¸
     * @param severity ì‹¬ê°ë„
     * @param details ìƒì„¸ ì •ë³´
     */
    @Async("alertExecutor")
    public void sendSystemAlert(SystemEvent event, AlertSeverity severity, Map<String, Object> details) {
        try {
            AlertConfiguration config = configService.getConfigurationForSystemEvent(event);
            if (!config.isEnabled() || !config.getSeverityThreshold().includes(severity)) {
                return;
            }
            
            AlertMessage message = createSystemAlertMessage(event, severity, details);
            sendToConfiguredChannels(message, config);
            
            log.info("System alert sent for event: {} with severity: {}", event, severity);
            
        } catch (Exception ex) {
            log.error("Failed to send system alert for event: {}", event, ex);
        }
    }
    
    /**
     * ì™¸ë¶€ API ì¥ì•  ì•Œë¦¼
     * 
     * @param apiName API ì´ë¦„
     * @param endpoint ì—”ë“œí¬ì¸íŠ¸
     * @param errorType ì—ëŸ¬ íƒ€ì…
     * @param consecutiveFailures ì—°ì† ì‹¤íŒ¨ íšŸìˆ˜
     */
    @Async("alertExecutor")
    public void sendExternalApiAlert(String apiName, String endpoint, 
                                   String errorType, int consecutiveFailures) {
        try {
            // ì—°ì† ì‹¤íŒ¨ ì„ê³„ê°’ í™•ì¸
            if (consecutiveFailures < 3) {
                return;
            }
            
            String suppressionKey = String.format("external_api:%s:%s", apiName, endpoint);
            if (isAlertSuppressed(suppressionKey)) {
                return;
            }
            
            AlertMessage message = AlertMessage.builder()
                    .title("ğŸš¨ ì™¸ë¶€ API ì¥ì•  ê°ì§€")
                    .content(String.format(
                            "**API**: %s\n" +
                            "**ì—”ë“œí¬ì¸íŠ¸**: %s\n" +
                            "**ì—ëŸ¬ íƒ€ì…**: %s\n" +
                            "**ì—°ì† ì‹¤íŒ¨**: %díšŒ\n" +
                            "**ì‹œê°„**: %s",
                            apiName, endpoint, errorType, consecutiveFailures,
                            LocalDateTime.now().format(DateTimeFormatter.ofPattern("yyyy-MM-dd HH:mm:ss"))))
                    .severity(AlertSeverity.HIGH)
                    .tags(Arrays.asList("external-api", apiName, "failure"))
                    .build();
            
            // ë†’ì€ ì‹¬ê°ë„ì´ë¯€ë¡œ ëª¨ë“  ì±„ë„ë¡œ ë°œì†¡
            sendToAllChannels(message);
            
            // 30ë¶„ ì–µì œ
            setAlertSuppression(suppressionKey, Duration.ofMinutes(30));
            
        } catch (Exception ex) {
            log.error("Failed to send external API alert", ex);
        }
    }
    
    /**
     * ì„±ëŠ¥ ì €í•˜ ì•Œë¦¼
     * 
     * @param metric ë©”íŠ¸ë¦­ ì´ë¦„
     * @param currentValue í˜„ì¬ ê°’
     * @param threshold ì„ê³„ê°’
     * @param unit ë‹¨ìœ„
     */
    @Async("alertExecutor")
    public void sendPerformanceAlert(String metric, double currentValue, 
                                   double threshold, String unit) {
        try {
            String suppressionKey = String.format("performance:%s", metric);
            if (isAlertSuppressed(suppressionKey)) {
                return;
            }
            
            AlertMessage message = AlertMessage.builder()
                    .title("âš ï¸ ì„±ëŠ¥ ì„ê³„ê°’ ì´ˆê³¼")
                    .content(String.format(
                            "**ë©”íŠ¸ë¦­**: %s\n" +
                            "**í˜„ì¬ ê°’**: %.2f %s\n" +
                            "**ì„ê³„ê°’**: %.2f %s\n" +
                            "**ì´ˆê³¼ìœ¨**: %.1f%%\n" +
                            "**ì‹œê°„**: %s",
                            metric, currentValue, unit, threshold, unit,
                            ((currentValue - threshold) / threshold) * 100,
                            LocalDateTime.now().format(DateTimeFormatter.ofPattern("yyyy-MM-dd HH:mm:ss"))))
                    .severity(AlertSeverity.MEDIUM)
                    .tags(Arrays.asList("performance", metric))
                    .build();
            
            sendToConfiguredChannels(message, 
                    configService.getConfigurationForPerformanceAlert(metric));
            
            // 10ë¶„ ì–µì œ
            setAlertSuppression(suppressionKey, Duration.ofMinutes(10));
            
        } catch (Exception ex) {
            log.error("Failed to send performance alert", ex);
        }
    }
    
    /**
     * ë³´ì•ˆ ì´ë²¤íŠ¸ ì•Œë¦¼
     * 
     * @param eventType ë³´ì•ˆ ì´ë²¤íŠ¸ íƒ€ì…
     * @param userId ì‚¬ìš©ì ID
     * @param clientIp í´ë¼ì´ì–¸íŠ¸ IP
     * @param details ìƒì„¸ ì •ë³´
     */
    @Async("alertExecutor")
    public void sendSecurityAlert(SecurityEventType eventType, Long userId, 
                                String clientIp, Map<String, Object> details) {
        try {
            AlertMessage message = AlertMessage.builder()
                    .title("ğŸ”’ ë³´ì•ˆ ì´ë²¤íŠ¸ ê°ì§€")
                    .content(createSecurityAlertContent(eventType, userId, clientIp, details))
                    .severity(determineSecuritySeverity(eventType))
                    .tags(Arrays.asList("security", eventType.name().toLowerCase()))
                    .urgent(isUrgentSecurityEvent(eventType))
                    .build();
            
            // ë³´ì•ˆ ì´ë²¤íŠ¸ëŠ” ì–µì œ ì—†ì´ ì¦‰ì‹œ ë°œì†¡
            sendToSecurityChannels(message);
            
            log.warn("Security alert sent for event: {} from IP: {} user: {}", 
                    eventType, clientIp, userId);
            
        } catch (Exception ex) {
            log.error("Failed to send security alert", ex);
        }
    }
    
    /**
     * ì•Œë¦¼ ì–µì œ í™•ì¸
     */
    private boolean isAlertSuppressed(ErrorCode errorCode, AlertContext context) {
        String key = ALERT_SUPPRESSION_KEY + errorCode.getCode() + ":" + 
                    context.getEndpoint() + ":" + context.getClientIp();
        return Boolean.TRUE.equals(redisTemplate.hasKey(key));
    }
    
    private boolean isAlertSuppressed(String customKey) {
        String key = ALERT_SUPPRESSION_KEY + customKey;
        return Boolean.TRUE.equals(redisTemplate.hasKey(key));
    }
    
    /**
     * ì•Œë¦¼ ì–µì œ ì„¤ì •
     */
    private void setAlertSuppression(ErrorCode errorCode, AlertContext context, Duration duration) {
        String key = ALERT_SUPPRESSION_KEY + errorCode.getCode() + ":" + 
                    context.getEndpoint() + ":" + context.getClientIp();
        redisTemplate.opsForValue().set(key, "suppressed", duration);
    }
    
    private void setAlertSuppression(String customKey, Duration duration) {
        String key = ALERT_SUPPRESSION_KEY + customKey;
        redisTemplate.opsForValue().set(key, "suppressed", duration);
    }
    
    /**
     * ì„¤ì •ëœ ì±„ë„ë¡œ ì•Œë¦¼ ë°œì†¡
     */
    private void sendToConfiguredChannels(AlertMessage message, AlertConfiguration config) {
        List<CompletableFuture<Void>> futures = new ArrayList<>();
        
        if (config.getEnabledChannels().contains(AlertChannel.SLACK)) {
            futures.add(CompletableFuture.runAsync(() -> slackService.sendAlert(message)));
        }
        
        if (config.getEnabledChannels().contains(AlertChannel.EMAIL)) {
            futures.add(CompletableFuture.runAsync(() -> 
                emailService.sendAlert(message, config.getEmailRecipients())));
        }
        
        if (config.getEnabledChannels().contains(AlertChannel.SMS) && message.isUrgent()) {
            futures.add(CompletableFuture.runAsync(() -> 
                smsService.sendAlert(message, config.getSmsRecipients())));
        }
        
        // ëª¨ë“  ì•Œë¦¼ ë°œì†¡ ì™„ë£Œ ëŒ€ê¸° (íƒ€ì„ì•„ì›ƒ 30ì´ˆ)
        CompletableFuture.allOf(futures.toArray(new CompletableFuture[0]))
                .orTimeout(30, TimeUnit.SECONDS)
                .exceptionally(throwable -> {
                    log.error("Some alerts failed to send", throwable);
                    return null;
                });
    }
    
    /**
     * ëª¨ë“  ì±„ë„ë¡œ ì•Œë¦¼ ë°œì†¡ (ê¸´ê¸‰)
     */
    private void sendToAllChannels(AlertMessage message) {
        List<CompletableFuture<Void>> futures = Arrays.asList(
                CompletableFuture.runAsync(() -> slackService.sendAlert(message)),
                CompletableFuture.runAsync(() -> emailService.sendAlert(message, 
                        configService.getEmergencyEmailRecipients())),
                CompletableFuture.runAsync(() -> smsService.sendAlert(message, 
                        configService.getEmergencySmsRecipients()))
        );
        
        CompletableFuture.allOf(futures.toArray(new CompletableFuture[0]))
                .orTimeout(30, TimeUnit.SECONDS)
                .exceptionally(throwable -> {
                    log.error("Emergency alert delivery failed", throwable);
                    return null;
                });
    }
    
    /**
     * ë³´ì•ˆ ì±„ë„ë¡œ ì•Œë¦¼ ë°œì†¡
     */
    private void sendToSecurityChannels(AlertMessage message) {
        List<CompletableFuture<Void>> futures = Arrays.asList(
                CompletableFuture.runAsync(() -> slackService.sendSecurityAlert(message)),
                CompletableFuture.runAsync(() -> emailService.sendAlert(message, 
                        configService.getSecurityEmailRecipients()))
        );
        
        if (message.isUrgent()) {
            futures.add(CompletableFuture.runAsync(() -> smsService.sendAlert(message, 
                    configService.getSecuritySmsRecipients())));
        }
        
        CompletableFuture.allOf(futures.toArray(new CompletableFuture[0]))
                .orTimeout(30, TimeUnit.SECONDS)
                .exceptionally(throwable -> {
                    log.error("Security alert delivery failed", throwable);
                    return null;
                });
    }
    
    /**
     * ì—ëŸ¬ ì•Œë¦¼ ë©”ì‹œì§€ ìƒì„±
     */
    private AlertMessage createAlertMessage(ErrorCode errorCode, Exception exception, AlertContext context) {
        return AlertMessage.builder()
                .title(String.format("ğŸš¨ ì—ëŸ¬ ë°œìƒ: %s", errorCode.getMessage()))
                .content(String.format(
                        "**ì—ëŸ¬ ì½”ë“œ**: %s\n" +
                        "**HTTP ìƒíƒœ**: %s\n" +
                        "**ì˜ˆì™¸ íƒ€ì…**: %s\n" +
                        "**ì—”ë“œí¬ì¸íŠ¸**: %s %s\n" +
                        "**í´ë¼ì´ì–¸íŠ¸ IP**: %s\n" +
                        "**ì‚¬ìš©ì**: %s\n" +
                        "**ì‹œê°„**: %s\n" +
                        "**ë©”ì‹œì§€**: %s",
                        errorCode.getCode(),
                        errorCode.getStatus().value() + " " + errorCode.getStatus().getReasonPhrase(),
                        exception.getClass().getSimpleName(),
                        context.getHttpMethod(), context.getEndpoint(),
                        context.getClientIp(),
                        context.getUserId() != null ? context.getUserId().toString() : "ìµëª…",
                        LocalDateTime.now().format(DateTimeFormatter.ofPattern("yyyy-MM-dd HH:mm:ss")),
                        exception.getMessage()))
                .severity(mapErrorCodeToSeverity(errorCode))
                .tags(Arrays.asList("error", errorCode.getCode(), exception.getClass().getSimpleName()))
                .urgent(errorCode.getStatus().is5xxServerError())
                .build();
    }
    
    /**
     * ì‹œìŠ¤í…œ ì•Œë¦¼ ë©”ì‹œì§€ ìƒì„±
     */
    private AlertMessage createSystemAlertMessage(SystemEvent event, AlertSeverity severity, 
                                                Map<String, Object> details) {
        StringBuilder content = new StringBuilder();
        content.append("**ì´ë²¤íŠ¸**: ").append(event.getDescription()).append("\n");
        content.append("**ì‹¬ê°ë„**: ").append(severity.name()).append("\n");
        content.append("**ì‹œê°„**: ").append(LocalDateTime.now().format(
                DateTimeFormatter.ofPattern("yyyy-MM-dd HH:mm:ss"))).append("\n");
        
        if (details != null && !details.isEmpty()) {
            content.append("**ìƒì„¸ ì •ë³´**:\n");
            details.forEach((key, value) -> 
                    content.append("- ").append(key).append(": ").append(value).append("\n"));
        }
        
        return AlertMessage.builder()
                .title(String.format("ğŸ”” ì‹œìŠ¤í…œ ì´ë²¤íŠ¸: %s", event.getDescription()))
                .content(content.toString())
                .severity(severity)
                .tags(Arrays.asList("system", event.name().toLowerCase()))
                .urgent(severity == AlertSeverity.CRITICAL)
                .build();
    }
    
    /**
     * ë³´ì•ˆ ì•Œë¦¼ ë‚´ìš© ìƒì„±
     */
    private String createSecurityAlertContent(SecurityEventType eventType, Long userId, 
                                            String clientIp, Map<String, Object> details) {
        StringBuilder content = new StringBuilder();
        content.append("**ì´ë²¤íŠ¸ íƒ€ì…**: ").append(eventType.getDescription()).append("\n");
        content.append("**ì‚¬ìš©ì ID**: ").append(userId != null ? userId : "ìµëª…").append("\n");
        content.append("**í´ë¼ì´ì–¸íŠ¸ IP**: ").append(clientIp).append("\n");
        content.append("**ì‹œê°„**: ").append(LocalDateTime.now().format(
                DateTimeFormatter.ofPattern("yyyy-MM-dd HH:mm:ss"))).append("\n");
        
        if (details != null && !details.isEmpty()) {
            content.append("**ì¶”ê°€ ì •ë³´**:\n");
            details.forEach((key, value) -> 
                    content.append("- ").append(key).append(": ").append(value).append("\n"));
        }
        
        return content.toString();
    }
    
    /**
     * ì—ëŸ¬ ì½”ë“œë¥¼ ì•Œë¦¼ ì‹¬ê°ë„ë¡œ ë§¤í•‘
     */
    private AlertSeverity mapErrorCodeToSeverity(ErrorCode errorCode) {
        if (errorCode.getStatus().is5xxServerError()) {
            return AlertSeverity.HIGH;
        } else if (errorCode.getStatus() == HttpStatus.UNAUTHORIZED || 
                   errorCode.getStatus() == HttpStatus.FORBIDDEN) {
            return AlertSeverity.MEDIUM;
        } else {
            return AlertSeverity.LOW;
        }
    }
    
    /**
     * ë³´ì•ˆ ì´ë²¤íŠ¸ ì‹¬ê°ë„ ê²°ì •
     */
    private AlertSeverity determineSecuritySeverity(SecurityEventType eventType) {
        switch (eventType) {
            case BRUTE_FORCE_ATTACK:
            case UNAUTHORIZED_ACCESS_ATTEMPT:
            case SUSPICIOUS_ACTIVITY:
                return AlertSeverity.HIGH;
            case MULTIPLE_LOGIN_FAILURES:
            case TOKEN_MANIPULATION:
                return AlertSeverity.MEDIUM;
            default:
                return AlertSeverity.LOW;
        }
    }
    
    /**
     * ê¸´ê¸‰ ë³´ì•ˆ ì´ë²¤íŠ¸ ì—¬ë¶€ í™•ì¸
     */
    private boolean isUrgentSecurityEvent(SecurityEventType eventType) {
        return eventType == SecurityEventType.BRUTE_FORCE_ATTACK ||
               eventType == SecurityEventType.UNAUTHORIZED_ACCESS_ATTEMPT ||
               eventType == SecurityEventType.SUSPICIOUS_ACTIVITY;
    }
}
```

---

## 13. ë¡œê¹… ì „ëµ

### 13.1 êµ¬ì¡°í™”ëœ ì—ëŸ¬ ë¡œê¹…

ì—ëŸ¬ ë°œìƒ ì‹œ ì¶”ì ê³¼ ë¶„ì„ì´ ìš©ì´í•˜ë„ë¡ êµ¬ì¡°í™”ëœ ë¡œê¹… ì‹œìŠ¤í…œì„ êµ¬ì¶•í•©ë‹ˆë‹¤.

#### ğŸ“ MDC ê¸°ë°˜ ì»¨í…ìŠ¤íŠ¸ ë¡œê¹…

##### 1. ë¡œê¹… ì»¨í…ìŠ¤íŠ¸ ê´€ë¦¬ì
```java
/**
 * ë¡œê¹… ì»¨í…ìŠ¤íŠ¸ ê´€ë¦¬ ì„œë¹„ìŠ¤
 * 
 * <p>MDC(Mapped Diagnostic Context)ë¥¼ í™œìš©í•˜ì—¬ ìš”ì²­ë³„ ì»¨í…ìŠ¤íŠ¸ ì •ë³´ë¥¼
 * ë¡œê·¸ì— ìë™ìœ¼ë¡œ í¬í•¨ì‹œí‚¤ê³ , êµ¬ì¡°í™”ëœ ë¡œê¹…ì„ ì§€ì›í•©ë‹ˆë‹¤.</p>
 * 
 * @author ByounggwanLee
 * @since 2025-10-09
 */
@Component
@Slf4j
public class LoggingContextManager {
    
    // MDC í‚¤ ìƒìˆ˜
    public static final String TRACE_ID = "traceId";
    public static final String USER_ID = "userId";
    public static final String SESSION_ID = "sessionId";
    public static final String CLIENT_IP = "clientIp";
    public static final String USER_AGENT = "userAgent";
    public static final String REQUEST_URI = "requestUri";
    public static final String HTTP_METHOD = "httpMethod";
    public static final String REQUEST_ID = "requestId";
    public static final String THREAD_NAME = "threadName";
    public static final String OPERATION = "operation";
    public static final String COMPONENT = "component";
    
    /**
     * ìš”ì²­ ì»¨í…ìŠ¤íŠ¸ ì„¤ì •
     * 
     * @param request HTTP ìš”ì²­
     * @param authentication ì¸ì¦ ì •ë³´
     */
    public void setRequestContext(HttpServletRequest request, Authentication authentication) {
        try {
            // ê³ ìœ  ìš”ì²­ ID ìƒì„±
            String requestId = generateRequestId();
            MDC.put(REQUEST_ID, requestId);
            
            // íŠ¸ë ˆì´ìŠ¤ ID (ë¶„ì‚° ì¶”ì ìš©)
            String traceId = extractOrGenerateTraceId(request);
            MDC.put(TRACE_ID, traceId);
            
            // ì‚¬ìš©ì ì •ë³´
            if (authentication != null && authentication.isAuthenticated()) {
                if (authentication.getPrincipal() instanceof UserDetails) {
                    UserDetails userDetails = (UserDetails) authentication.getPrincipal();
                    MDC.put(USER_ID, userDetails.getUsername());
                } else if (authentication.getPrincipal() instanceof String) {
                    MDC.put(USER_ID, (String) authentication.getPrincipal());
                }
            }
            
            // ì„¸ì…˜ ì •ë³´
            HttpSession session = request.getSession(false);
            if (session != null) {
                MDC.put(SESSION_ID, session.getId());
            }
            
            // í´ë¼ì´ì–¸íŠ¸ ì •ë³´
            MDC.put(CLIENT_IP, getClientIp(request));
            MDC.put(USER_AGENT, sanitizeUserAgent(request.getHeader("User-Agent")));
            
            // ìš”ì²­ ì •ë³´
            MDC.put(REQUEST_URI, request.getRequestURI());
            MDC.put(HTTP_METHOD, request.getMethod());
            
            // ìŠ¤ë ˆë“œ ì •ë³´
            MDC.put(THREAD_NAME, Thread.currentThread().getName());
            
            log.debug("Request context initialized - RequestId: {}, TraceId: {}, URI: {} {}", 
                    requestId, traceId, request.getMethod(), request.getRequestURI());
            
        } catch (Exception e) {
            log.warn("Failed to set request context", e);
        }
    }
    
    /**
     * ë¹„ì¦ˆë‹ˆìŠ¤ ì˜¤í¼ë ˆì´ì…˜ ì»¨í…ìŠ¤íŠ¸ ì„¤ì •
     * 
     * @param operation ì˜¤í¼ë ˆì´ì…˜ëª…
     * @param component ì»´í¬ë„ŒíŠ¸ëª…
     */
    public void setOperationContext(String operation, String component) {
        MDC.put(OPERATION, operation);
        MDC.put(COMPONENT, component);
    }
    
    /**
     * ì—ëŸ¬ ì»¨í…ìŠ¤íŠ¸ ì„¤ì •
     * 
     * @param errorCode ì—ëŸ¬ ì½”ë“œ
     * @param exception ì˜ˆì™¸
     */
    public void setErrorContext(ErrorCode errorCode, Exception exception) {
        MDC.put("errorCode", errorCode.getCode());
        MDC.put("errorType", exception.getClass().getSimpleName());
        MDC.put("errorMessage", sanitizeErrorMessage(exception.getMessage()));
        
        // ìŠ¤íƒíŠ¸ë ˆì´ìŠ¤ì˜ ì²« ë²ˆì§¸ ì• í”Œë¦¬ì¼€ì´ì…˜ ë ˆë²¨ ìœ„ì¹˜
        StackTraceElement[] stackTrace = exception.getStackTrace();
        for (StackTraceElement element : stackTrace) {
            if (element.getClassName().startsWith("com.skax.aiplatform")) {
                MDC.put("errorLocation", element.getClassName() + ":" + element.getLineNumber());
                break;
            }
        }
    }
    
    /**
     * ì™¸ë¶€ API í˜¸ì¶œ ì»¨í…ìŠ¤íŠ¸ ì„¤ì •
     * 
     * @param apiName API ì´ë¦„
     * @param endpoint ì—”ë“œí¬ì¸íŠ¸
     * @param method HTTP ë©”ì„œë“œ
     */
    public void setExternalApiContext(String apiName, String endpoint, String method) {
        MDC.put("externalApi", apiName);
        MDC.put("externalEndpoint", sanitizeUrl(endpoint));
        MDC.put("externalMethod", method);
    }
    
    /**
     * ë°ì´í„°ë² ì´ìŠ¤ ì»¨í…ìŠ¤íŠ¸ ì„¤ì •
     * 
     * @param operation DB ì˜¤í¼ë ˆì´ì…˜
     * @param table í…Œì´ë¸”ëª…
     * @param executionTime ì‹¤í–‰ ì‹œê°„
     */
    public void setDatabaseContext(String operation, String table, long executionTime) {
        MDC.put("dbOperation", operation);
        MDC.put("dbTable", table);
        MDC.put("dbExecutionTime", String.valueOf(executionTime));
    }
    
    /**
     * ì»¨í…ìŠ¤íŠ¸ ì •ë¦¬
     */
    public void clearContext() {
        MDC.clear();
    }
    
    /**
     * íŠ¹ì • í‚¤ë§Œ ì œê±°
     */
    public void removeContext(String... keys) {
        for (String key : keys) {
            MDC.remove(key);
        }
    }
    
    /**
     * í˜„ì¬ ì»¨í…ìŠ¤íŠ¸ ì •ë³´ ë°˜í™˜
     */
    public Map<String, String> getCurrentContext() {
        return MDC.getCopyOfContextMap();
    }
    
    /**
     * ê³ ìœ  ìš”ì²­ ID ìƒì„±
     */
    private String generateRequestId() {
        return UUID.randomUUID().toString().substring(0, 8);
    }
    
    /**
     * íŠ¸ë ˆì´ìŠ¤ ID ì¶”ì¶œ ë˜ëŠ” ìƒì„±
     */
    private String extractOrGenerateTraceId(HttpServletRequest request) {
        // ë¶„ì‚° ì¶”ì  í—¤ë”ì—ì„œ ì¶”ì¶œ ì‹œë„
        String traceId = request.getHeader("X-Trace-Id");
        if (StringUtils.hasText(traceId)) {
            return traceId;
        }
        
        // Zipkin/Jaeger í‘œì¤€ í—¤ë”
        String zipkinTraceId = request.getHeader("X-B3-TraceId");
        if (StringUtils.hasText(zipkinTraceId)) {
            return zipkinTraceId;
        }
        
        // ìƒˆë¡œìš´ íŠ¸ë ˆì´ìŠ¤ ID ìƒì„±
        return UUID.randomUUID().toString().replace("-", "").substring(0, 16);
    }
    
    /**
     * í´ë¼ì´ì–¸íŠ¸ IP ì¶”ì¶œ
     */
    private String getClientIp(HttpServletRequest request) {
        String xForwardedFor = request.getHeader("X-Forwarded-For");
        if (StringUtils.hasText(xForwardedFor)) {
            return xForwardedFor.split(",")[0].trim();
        }
        
        String xRealIp = request.getHeader("X-Real-IP");
        if (StringUtils.hasText(xRealIp)) {
            return xRealIp;
        }
        
        return request.getRemoteAddr();
    }
    
    /**
     * User-Agent ì •ë¦¬
     */
    private String sanitizeUserAgent(String userAgent) {
        if (userAgent == null) {
            return "unknown";
        }
        
        // ê¸¸ì´ ì œí•œ ë° íŠ¹ìˆ˜ë¬¸ì ì œê±°
        userAgent = userAgent.replaceAll("[\\r\\n\\t]", " ");
        if (userAgent.length() > 200) {
            userAgent = userAgent.substring(0, 200) + "...";
        }
        
        return userAgent;
    }
    
    /**
     * ì—ëŸ¬ ë©”ì‹œì§€ ì •ë¦¬
     */
    private String sanitizeErrorMessage(String message) {
        if (message == null) {
            return "null";
        }
        
        // ê°œí–‰ë¬¸ì ì œê±° ë° ê¸¸ì´ ì œí•œ
        message = message.replaceAll("[\\r\\n\\t]", " ");
        if (message.length() > 500) {
            message = message.substring(0, 500) + "...";
        }
        
        return message;
    }
    
    /**
     * URL ì •ë¦¬ (ë¯¼ê°í•œ ì •ë³´ ì œê±°)
     */
    private String sanitizeUrl(String url) {
        if (url == null) {
            return "unknown";
        }
        
        // ì¿¼ë¦¬ íŒŒë¼ë¯¸í„°ì—ì„œ ë¯¼ê°í•œ ì •ë³´ ì œê±°
        try {
            URI uri = new URI(url);
            String query = uri.getQuery();
            if (query != null) {
                // ë¹„ë°€ë²ˆí˜¸, í† í° ë“± ë¯¼ê°í•œ íŒŒë¼ë¯¸í„° ë§ˆìŠ¤í‚¹
                query = query.replaceAll("(?i)(password|token|secret|key)=[^&]*", "$1=***");
                return new URI(uri.getScheme(), uri.getAuthority(), uri.getPath(), query, uri.getFragment()).toString();
            }
            return url;
        } catch (URISyntaxException e) {
            return url.replaceAll("(?i)(password|token|secret|key)=[^&]*", "$1=***");
        }
    }
}
```

##### 2. ë¡œê¹… ì¸í„°ì…‰í„°
```java
/**
 * ìš”ì²­/ì‘ë‹µ ë¡œê¹… ì¸í„°ì…‰í„°
 * 
 * <p>ëª¨ë“  HTTP ìš”ì²­ê³¼ ì‘ë‹µì„ ë¡œê¹…í•˜ì—¬ API í˜¸ì¶œ ì¶”ì ê³¼
 * ì„±ëŠ¥ ë¶„ì„ì„ ì§€ì›í•©ë‹ˆë‹¤.</p>
 * 
 * @author ByounggwanLee
 * @since 2025-10-09
 */
@Component
@RequiredArgsConstructor
@Slf4j
public class RequestLoggingInterceptor implements HandlerInterceptor {
    
    private final LoggingContextManager loggingContextManager;
    private final ObjectMapper objectMapper;
    
    private static final String START_TIME_ATTRIBUTE = "startTime";
    private static final int MAX_PAYLOAD_LENGTH = 1000;
    
    @Override
    public boolean preHandle(HttpServletRequest request, HttpServletResponse response, 
                           Object handler) throws Exception {
        
        // ì‹œì‘ ì‹œê°„ ê¸°ë¡
        request.setAttribute(START_TIME_ATTRIBUTE, System.currentTimeMillis());
        
        // ë¡œê¹… ì»¨í…ìŠ¤íŠ¸ ì„¤ì •
        Authentication authentication = SecurityContextHolder.getContext().getAuthentication();
        loggingContextManager.setRequestContext(request, authentication);
        
        // ìš”ì²­ ì •ë³´ ë¡œê¹…
        logRequest(request);
        
        return true;
    }
    
    @Override
    public void postHandle(HttpServletRequest request, HttpServletResponse response, 
                          Object handler, ModelAndView modelAndView) throws Exception {
        // ì»¨íŠ¸ë¡¤ëŸ¬ ì²˜ë¦¬ ì™„ë£Œ í›„ ì‹¤í–‰
        // í•„ìš”í•œ ê²½ìš° ì¶”ê°€ ë¡œê¹…
    }
    
    @Override
    public void afterCompletion(HttpServletRequest request, HttpServletResponse response, 
                              Object handler, Exception ex) throws Exception {
        
        try {
            // ì‘ë‹µ ì •ë³´ ë¡œê¹…
            logResponse(request, response, ex);
            
        } finally {
            // ì»¨í…ìŠ¤íŠ¸ ì •ë¦¬
            loggingContextManager.clearContext();
        }
    }
    
    /**
     * ìš”ì²­ ì •ë³´ ë¡œê¹…
     */
    private void logRequest(HttpServletRequest request) {
        try {
            String method = request.getMethod();
            String uri = request.getRequestURI();
            String queryString = request.getQueryString();
            
            // ê¸°ë³¸ ìš”ì²­ ì •ë³´
            StringBuilder logMessage = new StringBuilder();
            logMessage.append("HTTP Request - ");
            logMessage.append(method).append(" ").append(uri);
            
            if (StringUtils.hasText(queryString)) {
                // ë¯¼ê°í•œ íŒŒë¼ë¯¸í„° ë§ˆìŠ¤í‚¹
                String sanitizedQuery = sanitizeQueryString(queryString);
                logMessage.append("?").append(sanitizedQuery);
            }
            
            // ìš”ì²­ í—¤ë” ë¡œê¹… (ì„ íƒì )
            if (log.isDebugEnabled()) {
                Map<String, String> headers = extractImportantHeaders(request);
                if (!headers.isEmpty()) {
                    logMessage.append(" Headers: ").append(headers);
                }
            }
            
            log.info(logMessage.toString());
            
            // ìš”ì²­ ë³¸ë¬¸ ë¡œê¹… (POST, PUT, PATCH)
            if (shouldLogRequestBody(request)) {
                logRequestBody(request);
            }
            
        } catch (Exception e) {
            log.warn("Failed to log request", e);
        }
    }
    
    /**
     * ì‘ë‹µ ì •ë³´ ë¡œê¹…
     */
    private void logResponse(HttpServletRequest request, HttpServletResponse response, Exception ex) {
        try {
            Long startTime = (Long) request.getAttribute(START_TIME_ATTRIBUTE);
            long duration = startTime != null ? System.currentTimeMillis() - startTime : 0;
            
            int status = response.getStatus();
            String method = request.getMethod();
            String uri = request.getRequestURI();
            
            // ì‘ë‹µ ë¡œê·¸ ë©”ì‹œì§€ êµ¬ì„±
            StringBuilder logMessage = new StringBuilder();
            logMessage.append("HTTP Response - ");
            logMessage.append(method).append(" ").append(uri);
            logMessage.append(" Status: ").append(status);
            logMessage.append(" Duration: ").append(duration).append("ms");
            
            // ì‘ë‹µ í—¤ë” ë¡œê¹… (ì„ íƒì )
            if (log.isDebugEnabled()) {
                Map<String, String> responseHeaders = extractImportantResponseHeaders(response);
                if (!responseHeaders.isEmpty()) {
                    logMessage.append(" Headers: ").append(responseHeaders);
                }
            }
            
            // ë¡œê·¸ ë ˆë²¨ ê²°ì •
            if (ex != null) {
                log.error(logMessage.toString(), ex);
            } else if (status >= 500) {
                log.error(logMessage.toString());
            } else if (status >= 400) {
                log.warn(logMessage.toString());
            } else if (duration > 5000) { // 5ì´ˆ ì´ìƒ
                log.warn(logMessage.append(" [SLOW]").toString());
            } else {
                log.info(logMessage.toString());
            }
            
            // ì„±ëŠ¥ ë©”íŠ¸ë¦­ ê¸°ë¡
            recordPerformanceMetrics(method, uri, status, duration);
            
        } catch (Exception e) {
            log.warn("Failed to log response", e);
        }
    }
    
    /**
     * ìš”ì²­ ë³¸ë¬¸ ë¡œê¹…
     */
    private void logRequestBody(HttpServletRequest request) {
        try {
            if (request instanceof ContentCachingRequestWrapper) {
                ContentCachingRequestWrapper wrapper = (ContentCachingRequestWrapper) request;
                byte[] content = wrapper.getContentAsByteArray();
                
                if (content.length > 0) {
                    String body = new String(content, StandardCharsets.UTF_8);
                    String sanitizedBody = sanitizeRequestBody(body, request.getContentType());
                    
                    if (body.length() > MAX_PAYLOAD_LENGTH) {
                        sanitizedBody = sanitizedBody.substring(0, MAX_PAYLOAD_LENGTH) + "...";
                    }
                    
                    log.debug("Request Body: {}", sanitizedBody);
                }
            }
        } catch (Exception e) {
            log.debug("Failed to log request body", e);
        }
    }
    
    /**
     * ìš”ì²­ ë³¸ë¬¸ ë¡œê¹… ì—¬ë¶€ íŒë‹¨
     */
    private boolean shouldLogRequestBody(HttpServletRequest request) {
        String method = request.getMethod();
        String contentType = request.getContentType();
        
        // POST, PUT, PATCH ë©”ì„œë“œì´ê³  JSON/XML ì½˜í…ì¸ ì¸ ê²½ìš°
        return ("POST".equals(method) || "PUT".equals(method) || "PATCH".equals(method)) &&
               contentType != null &&
               (contentType.contains("application/json") || 
                contentType.contains("application/xml") ||
                contentType.contains("text/")) &&
               log.isDebugEnabled();
    }
    
    /**
     * ì¿¼ë¦¬ ìŠ¤íŠ¸ë§ ì •ë¦¬ (ë¯¼ê°í•œ ì •ë³´ ë§ˆìŠ¤í‚¹)
     */
    private String sanitizeQueryString(String queryString) {
        if (queryString == null) {
            return "";
        }
        
        // ë¯¼ê°í•œ íŒŒë¼ë¯¸í„° ë§ˆìŠ¤í‚¹
        return queryString.replaceAll("(?i)(password|token|secret|key)=[^&]*", "$1=***");
    }
    
    /**
     * ìš”ì²­ ë³¸ë¬¸ ì •ë¦¬ (ë¯¼ê°í•œ ì •ë³´ ë§ˆìŠ¤í‚¹)
     */
    private String sanitizeRequestBody(String body, String contentType) {
        if (body == null) {
            return "";
        }
        
        try {
            if (contentType != null && contentType.contains("application/json")) {
                // JSONì—ì„œ ë¯¼ê°í•œ í•„ë“œ ë§ˆìŠ¤í‚¹
                JsonNode jsonNode = objectMapper.readTree(body);
                sanitizeJsonNode(jsonNode);
                return objectMapper.writeValueAsString(jsonNode);
            }
        } catch (Exception e) {
            log.debug("Failed to sanitize JSON body", e);
        }
        
        // ì¼ë°˜ í…ìŠ¤íŠ¸ì—ì„œ ë¯¼ê°í•œ ì •ë³´ ë§ˆìŠ¤í‚¹
        return body.replaceAll("(?i)(password|token|secret|key)[\"']?\\s*[:=]\\s*[\"']?[^,\\s}\\]]+", "$1\":\"***\"");
    }
    
    /**
     * JSON ë…¸ë“œì—ì„œ ë¯¼ê°í•œ ì •ë³´ ë§ˆìŠ¤í‚¹
     */
    private void sanitizeJsonNode(JsonNode node) {
        if (node.isObject()) {
            ObjectNode objectNode = (ObjectNode) node;
            
            // ë¯¼ê°í•œ í•„ë“œëª… ëª©ë¡
            String[] sensitiveFields = {"password", "token", "secret", "key", "accessToken", "refreshToken"};
            
            for (String field : sensitiveFields) {
                if (objectNode.has(field)) {
                    objectNode.put(field, "***");
                }
            }
            
            // ì¬ê·€ì ìœ¼ë¡œ í•˜ìœ„ ë…¸ë“œ ì²˜ë¦¬
            objectNode.fields().forEachRemaining(entry -> sanitizeJsonNode(entry.getValue()));
        } else if (node.isArray()) {
            // ë°°ì—´ì˜ ê° ìš”ì†Œ ì²˜ë¦¬
            for (JsonNode arrayItem : node) {
                sanitizeJsonNode(arrayItem);
            }
        }
    }
    
    /**
     * ì¤‘ìš”í•œ ìš”ì²­ í—¤ë” ì¶”ì¶œ
     */
    private Map<String, String> extractImportantHeaders(HttpServletRequest request) {
        Map<String, String> headers = new HashMap<>();
        
        String[] importantHeaders = {
            "Authorization", "Content-Type", "Accept", "X-Forwarded-For", 
            "X-Real-IP", "X-Trace-Id", "X-Request-ID"
        };
        
        for (String headerName : importantHeaders) {
            String headerValue = request.getHeader(headerName);
            if (StringUtils.hasText(headerValue)) {
                // Authorization í—¤ë”ëŠ” ë§ˆìŠ¤í‚¹
                if ("Authorization".equals(headerName)) {
                    headerValue = maskAuthorizationHeader(headerValue);
                }
                headers.put(headerName, headerValue);
            }
        }
        
        return headers;
    }
    
    /**
     * ì¤‘ìš”í•œ ì‘ë‹µ í—¤ë” ì¶”ì¶œ
     */
    private Map<String, String> extractImportantResponseHeaders(HttpServletResponse response) {
        Map<String, String> headers = new HashMap<>();
        
        String[] importantHeaders = {
            "Content-Type", "Content-Length", "Cache-Control", "Set-Cookie"
        };
        
        for (String headerName : importantHeaders) {
            String headerValue = response.getHeader(headerName);
            if (StringUtils.hasText(headerValue)) {
                // Set-Cookie í—¤ë”ëŠ” ë§ˆìŠ¤í‚¹
                if ("Set-Cookie".equals(headerName)) {
                    headerValue = maskSetCookieHeader(headerValue);
                }
                headers.put(headerName, headerValue);
            }
        }
        
        return headers;
    }
    
    /**
     * Authorization í—¤ë” ë§ˆìŠ¤í‚¹
     */
    private String maskAuthorizationHeader(String authHeader) {
        if (authHeader.startsWith("Bearer ")) {
            return "Bearer ***";
        } else if (authHeader.startsWith("Basic ")) {
            return "Basic ***";
        }
        return "***";
    }
    
    /**
     * Set-Cookie í—¤ë” ë§ˆìŠ¤í‚¹
     */
    private String maskSetCookieHeader(String cookieHeader) {
        return cookieHeader.replaceAll("(=[^;]+)", "=***");
    }
    
    /**
     * ì„±ëŠ¥ ë©”íŠ¸ë¦­ ê¸°ë¡
     */
    private void recordPerformanceMetrics(String method, String uri, int status, long duration) {
        try {
            // Micrometerë¥¼ í†µí•œ ë©”íŠ¸ë¦­ ê¸°ë¡
            String sanitizedUri = sanitizeUriForMetrics(uri);
            
            Tags tags = Tags.of(
                "method", method,
                "uri", sanitizedUri,
                "status", String.valueOf(status)
            );
            
            // ì‘ë‹µ ì‹œê°„ íˆìŠ¤í† ê·¸ë¨
            Timer.Sample.start().stop(Timer.builder("http.requests.duration")
                    .description("HTTP request duration")
                    .tags(tags)
                    .register(Metrics.globalRegistry));
            
            // ìš”ì²­ ì¹´ìš´í„°
            Counter.builder("http.requests.total")
                    .description("Total HTTP requests")
                    .tags(tags)
                    .register(Metrics.globalRegistry)
                    .increment();
            
        } catch (Exception e) {
            log.debug("Failed to record performance metrics", e);
        }
    }
    
    /**
     * ë©”íŠ¸ë¦­ìš© URI ì •ë¦¬
     */
    private String sanitizeUriForMetrics(String uri) {
        // Path parameterë¥¼ ì¼ë°˜í™”
        return uri.replaceAll("/\\d+", "/{id}")
                  .replaceAll("/[a-f0-9]{8}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{12}", "/{uuid}");
    }
}
```

### 13.2 ì—ëŸ¬ ì¶”ì  ì‹œìŠ¤í…œ

ë°œìƒí•œ ì—ëŸ¬ë¥¼ íš¨ê³¼ì ìœ¼ë¡œ ì¶”ì í•˜ê³  ë¶„ì„í•  ìˆ˜ ìˆëŠ” ì‹œìŠ¤í…œì„ êµ¬ì¶•í•©ë‹ˆë‹¤.

#### ğŸ” í†µí•© ì—ëŸ¬ ì¶”ì  ì„œë¹„ìŠ¤

##### 1. ì—ëŸ¬ ì¶”ì  ë° ë¶„ì„ ì„œë¹„ìŠ¤
```java
/**
 * ì—ëŸ¬ ì¶”ì  ë° ë¶„ì„ ì„œë¹„ìŠ¤
 * 
 * <p>ë°œìƒí•œ ì—ëŸ¬ë¥¼ ìˆ˜ì§‘, ë¶„ì„, ì¶”ì í•˜ì—¬ ì‹œìŠ¤í…œ ì•ˆì •ì„± í–¥ìƒê³¼
 * ë¹ ë¥¸ ë¬¸ì œ í•´ê²°ì„ ì§€ì›í•©ë‹ˆë‹¤.</p>
 * 
 * @author ByounggwanLee
 * @since 2025-10-09
 */
@Service
@RequiredArgsConstructor
@Slf4j
public class ErrorTrackingService {
    
    private final RedisTemplate<String, String> redisTemplate;
    private final ObjectMapper objectMapper;
    private final ApplicationProperties applicationProperties;
    
    private static final String ERROR_TRACKING_KEY = "error:tracking:";
    private static final String ERROR_PATTERN_KEY = "error:pattern:";
    private static final String ERROR_STATS_KEY = "error:stats:";
    private static final Duration TRACKING_DURATION = Duration.ofDays(7);
    
    /**
     * ì—ëŸ¬ ë°œìƒ ì¶”ì 
     * 
     * @param errorCode ì—ëŸ¬ ì½”ë“œ
     * @param exception ì˜ˆì™¸ ê°ì²´
     * @param context ìš”ì²­ ì»¨í…ìŠ¤íŠ¸
     */
    @Async("errorTrackingExecutor")
    public void trackError(ErrorCode errorCode, Exception exception, ErrorTrackingContext context) {
        try {
            // ì—ëŸ¬ ì¶”ì  ì •ë³´ ìƒì„±
            ErrorTrackingRecord record = createTrackingRecord(errorCode, exception, context);
            
            // Redisì— ì—ëŸ¬ ê¸°ë¡ ì €ì¥
            saveErrorRecord(record);
            
            // ì—ëŸ¬ íŒ¨í„´ ë¶„ì„
            analyzeErrorPattern(record);
            
            // ì—ëŸ¬ í†µê³„ ì—…ë°ì´íŠ¸
            updateErrorStatistics(record);
            
            // ì—°ê´€ ì—ëŸ¬ ë¶„ì„
            analyzeRelatedErrors(record);
            
            log.debug("Error tracked: {} - {}", errorCode.getCode(), record.getTrackingId());
            
        } catch (Exception e) {
            log.error("Failed to track error: {}", errorCode.getCode(), e);
        }
    }
    
    /**
     * ì—ëŸ¬ íŒ¨í„´ ë¶„ì„
     * 
     * @param timeWindow ì‹œê°„ ìœˆë„ìš° (ì‹œê°„)
     * @return ì—ëŸ¬ íŒ¨í„´ ë¶„ì„ ê²°ê³¼
     */
    public ErrorPatternAnalysis analyzeErrorPatterns(int timeWindow) {
        try {
            LocalDateTime endTime = LocalDateTime.now();
            LocalDateTime startTime = endTime.minusHours(timeWindow);
            
            // ì‹œê°„ ë²”ìœ„ ë‚´ ì—ëŸ¬ ê¸°ë¡ ì¡°íšŒ
            List<ErrorTrackingRecord> records = getErrorRecords(startTime, endTime);
            
            return ErrorPatternAnalysis.builder()
                    .timeWindow(timeWindow)
                    .totalErrors(records.size())
                    .errorsByCode(groupErrorsByCode(records))
                    .errorsByEndpoint(groupErrorsByEndpoint(records))
                    .errorsByUser(groupErrorsByUser(records))
                    .errorsByTimeHour(groupErrorsByTimeHour(records))
                    .topErrorSources(findTopErrorSources(records))
                    .criticalPatterns(findCriticalPatterns(records))
                    .recommendations(generateRecommendations(records))
                    .build();
            
        } catch (Exception e) {
            log.error("Failed to analyze error patterns", e);
            return ErrorPatternAnalysis.empty();
        }
    }
    
    /**
     * ì—ëŸ¬ íŠ¸ë Œë“œ ë¶„ì„
     * 
     * @param days ë¶„ì„ ê¸°ê°„ (ì¼ìˆ˜)
     * @return ì—ëŸ¬ íŠ¸ë Œë“œ ë¶„ì„ ê²°ê³¼
     */
    public ErrorTrendAnalysis analyzeErrorTrends(int days) {
        try {
            LocalDateTime endTime = LocalDateTime.now();
            LocalDateTime startTime = endTime.minusDays(days);
            
            List<ErrorTrackingRecord> records = getErrorRecords(startTime, endTime);
            
            return ErrorTrendAnalysis.builder()
                    .analysisePeriod(days)
                    .dailyErrorCounts(calculateDailyErrorCounts(records, startTime, endTime))
                    .errorCodeTrends(calculateErrorCodeTrends(records))
                    .performanceImpact(analyzePerformanceImpact(records))
                    .userImpact(analyzeUserImpact(records))
                    .systemStability(calculateSystemStability(records))
                    .build();
            
        } catch (Exception e) {
            log.error("Failed to analyze error trends", e);
            return ErrorTrendAnalysis.empty();
        }
    }
    
    /**
     * íŠ¹ì • ì—ëŸ¬ì˜ ìƒì„¸ ì¶”ì  ì •ë³´
     * 
     * @param trackingId ì¶”ì  ID
     * @return ì—ëŸ¬ ìƒì„¸ ì¶”ì  ì •ë³´
     */
    public Optional<ErrorDetailedTracking> getErrorDetailedTracking(String trackingId) {
        try {
            String key = ERROR_TRACKING_KEY + trackingId;
            String recordJson = redisTemplate.opsForValue().get(key);
            
            if (recordJson != null) {
                ErrorTrackingRecord record = objectMapper.readValue(recordJson, ErrorTrackingRecord.class);
                
                // ê´€ë ¨ ì—ëŸ¬ë“¤ ì¡°íšŒ
                List<ErrorTrackingRecord> relatedErrors = findRelatedErrors(record);
                
                // ì—ëŸ¬ ì¬í˜„ ì •ë³´ ìƒì„±
                ErrorReproductionInfo reproductionInfo = createReproductionInfo(record);
                
                return Optional.of(ErrorDetailedTracking.builder()
                        .trackingRecord(record)
                        .relatedErrors(relatedErrors)
                        .reproductionInfo(reproductionInfo)
                        .similarErrorCount(countSimilarErrors(record))
                        .firstOccurrence(findFirstOccurrence(record))
                        .lastOccurrence(record.getTimestamp())
                        .impactedUsers(findImpactedUsers(record))
                        .possibleCauses(analyzePossibleCauses(record))
                        .suggestedActions(generateSuggestedActions(record))
                        .build());
            }
            
            return Optional.empty();
            
        } catch (Exception e) {
            log.error("Failed to get detailed error tracking for: {}", trackingId, e);
            return Optional.empty();
        }
    }
    
    /**
     * ì—ëŸ¬ ë°œìƒë¥  ê³„ì‚°
     * 
     * @param timeWindow ì‹œê°„ ìœˆë„ìš° (ë¶„)
     * @param errorCode ì—ëŸ¬ ì½”ë“œ (nullì´ë©´ ì „ì²´)
     * @return ì—ëŸ¬ ë°œìƒë¥  (%)
     */
    public double calculateErrorRate(int timeWindow, String errorCode) {
        try {
            LocalDateTime endTime = LocalDateTime.now();
            LocalDateTime startTime = endTime.minusMinutes(timeWindow);
            
            // ì „ì²´ ìš”ì²­ ìˆ˜ (ì„±ê³µ + ì‹¤íŒ¨)
            long totalRequests = getTotalRequestCount(startTime, endTime);
            
            // ì—ëŸ¬ ìš”ì²­ ìˆ˜
            long errorRequests;
            if (errorCode != null) {
                errorRequests = getErrorRequestCount(startTime, endTime, errorCode);
            } else {
                errorRequests = getTotalErrorRequestCount(startTime, endTime);
            }
            
            if (totalRequests == 0) {
                return 0.0;
            }
            
            return (double) errorRequests / totalRequests * 100.0;
            
        } catch (Exception e) {
            log.error("Failed to calculate error rate", e);
            return 0.0;
        }
    }
    
    /**
     * ìŠ¬ë¡œìš° ìš”ì²­ ì¶”ì 
     * 
     * @param endpoint ì—”ë“œí¬ì¸íŠ¸
     * @param duration ì²˜ë¦¬ ì‹œê°„
     * @param context ìš”ì²­ ì»¨í…ìŠ¤íŠ¸
     */
    @Async("errorTrackingExecutor")
    public void trackSlowRequest(String endpoint, long duration, ErrorTrackingContext context) {
        try {
            if (duration > 5000) { // 5ì´ˆ ì´ìƒ
                SlowRequestRecord record = SlowRequestRecord.builder()
                        .trackingId(generateTrackingId())
                        .endpoint(endpoint)
                        .duration(duration)
                        .timestamp(LocalDateTime.now())
                        .userId(context.getUserId())
                        .sessionId(context.getSessionId())
                        .clientIp(context.getClientIp())
                        .userAgent(context.getUserAgent())
                        .requestId(context.getRequestId())
                        .build();
                
                // Redisì— ìŠ¬ë¡œìš° ìš”ì²­ ê¸°ë¡
                String key = "slow:request:" + record.getTrackingId();
                String recordJson = objectMapper.writeValueAsString(record);
                redisTemplate.opsForValue().set(key, recordJson, Duration.ofDays(3));
                
                log.warn("Slow request tracked: {} took {}ms", endpoint, duration);
            }
            
        } catch (Exception e) {
            log.error("Failed to track slow request", e);
        }
    }
    
    /**
     * ì—ëŸ¬ ì¶”ì  ê¸°ë¡ ìƒì„±
     */
    private ErrorTrackingRecord createTrackingRecord(ErrorCode errorCode, Exception exception, 
                                                   ErrorTrackingContext context) {
        
        return ErrorTrackingRecord.builder()
                .trackingId(generateTrackingId())
                .errorCode(errorCode.getCode())
                .errorMessage(errorCode.getMessage())
                .exceptionType(exception.getClass().getSimpleName())
                .exceptionMessage(exception.getMessage())
                .stackTrace(getStackTraceString(exception))
                .httpStatus(errorCode.getStatus().value())
                .timestamp(LocalDateTime.now())
                .userId(context.getUserId())
                .sessionId(context.getSessionId())
                .clientIp(context.getClientIp())
                .userAgent(context.getUserAgent())
                .requestUri(context.getRequestUri())
                .httpMethod(context.getHttpMethod())
                .requestId(context.getRequestId())
                .traceId(context.getTraceId())
                .serverInfo(ServerInfo.builder()
                        .hostname(getHostname())
                        .application(applicationProperties.getName())
                        .version(applicationProperties.getVersion())
                        .build())
                .build();
    }
    
    /**
     * ì—ëŸ¬ ê¸°ë¡ ì €ì¥
     */
    private void saveErrorRecord(ErrorTrackingRecord record) {
        try {
            String key = ERROR_TRACKING_KEY + record.getTrackingId();
            String recordJson = objectMapper.writeValueAsString(record);
            redisTemplate.opsForValue().set(key, recordJson, TRACKING_DURATION);
            
            // ì‹œê°„ë³„ ì¸ë±ìŠ¤ ì¶”ê°€ (ì¡°íšŒ ì„±ëŠ¥ í–¥ìƒ)
            String timeIndexKey = "error:index:time:" + 
                    record.getTimestamp().format(DateTimeFormatter.ofPattern("yyyyMMddHH"));
            redisTemplate.opsForSet().add(timeIndexKey, record.getTrackingId());
            redisTemplate.expire(timeIndexKey, TRACKING_DURATION);
            
            // ì—ëŸ¬ ì½”ë“œë³„ ì¸ë±ìŠ¤ ì¶”ê°€
            String codeIndexKey = "error:index:code:" + record.getErrorCode();
            redisTemplate.opsForSet().add(codeIndexKey, record.getTrackingId());
            redisTemplate.expire(codeIndexKey, TRACKING_DURATION);
            
        } catch (Exception e) {
            log.error("Failed to save error record", e);
        }
    }
    
    /**
     * ì—ëŸ¬ íŒ¨í„´ ë¶„ì„
     */
    private void analyzeErrorPattern(ErrorTrackingRecord record) {
        try {
            // ë™ì¼í•œ ì—ëŸ¬ê°€ ì§§ì€ ì‹œê°„ ë‚´ ë°˜ë³µ ë°œìƒí•˜ëŠ”ì§€ í™•ì¸
            String patternKey = ERROR_PATTERN_KEY + record.getErrorCode() + ":" + record.getClientIp();
            String countStr = redisTemplate.opsForValue().get(patternKey);
            
            int count = countStr != null ? Integer.parseInt(countStr) : 0;
            count++;
            
            redisTemplate.opsForValue().set(patternKey, String.valueOf(count), Duration.ofMinutes(10));
            
            // ì„ê³„ê°’ ì´ˆê³¼ ì‹œ ì•Œë¦¼
            if (count >= 5) {
                log.warn("Error pattern detected: {} from {} occurred {} times in 10 minutes", 
                        record.getErrorCode(), record.getClientIp(), count);
                
                // ì•Œë¦¼ ì„œë¹„ìŠ¤ í˜¸ì¶œ (ì‹¤ì œ êµ¬í˜„ì—ì„œëŠ” AlertService ì£¼ì…)
                // alertService.sendPatternAlert(record.getErrorCode(), record.getClientIp(), count);
            }
            
        } catch (Exception e) {
            log.error("Failed to analyze error pattern", e);
        }
    }
    
    /**
     * ì—ëŸ¬ í†µê³„ ì—…ë°ì´íŠ¸
     */
    private void updateErrorStatistics(ErrorTrackingRecord record) {
        try {
            String today = LocalDate.now().format(DateTimeFormatter.ofPattern("yyyyMMdd"));
            String statsKey = ERROR_STATS_KEY + today;
            
            // ì—ëŸ¬ ì½”ë“œë³„ ì¹´ìš´íŠ¸
            redisTemplate.opsForHash().increment(statsKey, "code:" + record.getErrorCode(), 1);
            
            // HTTP ìƒíƒœë³„ ì¹´ìš´íŠ¸
            redisTemplate.opsForHash().increment(statsKey, "status:" + record.getHttpStatus(), 1);
            
            // ì—”ë“œí¬ì¸íŠ¸ë³„ ì¹´ìš´íŠ¸
            String sanitizedUri = sanitizeUriForStats(record.getRequestUri());
            redisTemplate.opsForHash().increment(statsKey, "endpoint:" + sanitizedUri, 1);
            
            // ì‹œê°„ë³„ ì¹´ìš´íŠ¸
            String hour = record.getTimestamp().format(DateTimeFormatter.ofPattern("HH"));
            redisTemplate.opsForHash().increment(statsKey, "hour:" + hour, 1);
            
            // ì „ì²´ ì—ëŸ¬ ì¹´ìš´íŠ¸
            redisTemplate.opsForHash().increment(statsKey, "total", 1);
            
            // í†µê³„ ë°ì´í„° ë§Œë£Œ ì‹œê°„ ì„¤ì • (30ì¼)
            redisTemplate.expire(statsKey, Duration.ofDays(30));
            
        } catch (Exception e) {
            log.error("Failed to update error statistics", e);
        }
    }
    
    /**
     * ì¶”ì  ID ìƒì„±
     */
    private String generateTrackingId() {
        return UUID.randomUUID().toString().replace("-", "");
    }
    
    /**
     * ìŠ¤íƒíŠ¸ë ˆì´ìŠ¤ ë¬¸ìì—´ ë³€í™˜
     */
    private String getStackTraceString(Exception exception) {
        StringWriter sw = new StringWriter();
        PrintWriter pw = new PrintWriter(sw);
        exception.printStackTrace(pw);
        return sw.toString();
    }
    
    /**
     * í˜¸ìŠ¤íŠ¸ëª… ì¡°íšŒ
     */
    private String getHostname() {
        try {
            return InetAddress.getLocalHost().getHostName();
        } catch (Exception e) {
            return "unknown";
        }
    }
    
    /**
     * í†µê³„ìš© URI ì •ë¦¬
     */
    private String sanitizeUriForStats(String uri) {
        if (uri == null) {
            return "unknown";
        }
        
        return uri.replaceAll("/\\d+", "/{id}")
                  .replaceAll("/[a-f0-9]{8}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{12}", "/{uuid}")
                  .replaceAll("/[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+", "/{email}");
    }
    
    // ê¸°íƒ€ ë¶„ì„ ë©”ì„œë“œë“¤ (êµ¬í˜„ ìƒëµ)
    private List<ErrorTrackingRecord> getErrorRecords(LocalDateTime startTime, LocalDateTime endTime) {
        // ì‹¤ì œ êµ¬í˜„: Redisì—ì„œ ì‹œê°„ ë²”ìœ„ë³„ ì—ëŸ¬ ê¸°ë¡ ì¡°íšŒ
        return new ArrayList<>();
    }
    
    private Map<String, Long> groupErrorsByCode(List<ErrorTrackingRecord> records) {
        return records.stream()
                .collect(Collectors.groupingBy(
                        ErrorTrackingRecord::getErrorCode,
                        Collectors.counting()));
    }
    
    private Map<String, Long> groupErrorsByEndpoint(List<ErrorTrackingRecord> records) {
        return records.stream()
                .collect(Collectors.groupingBy(
                        record -> sanitizeUriForStats(record.getRequestUri()),
                        Collectors.counting()));
    }
    
    private Map<String, Long> groupErrorsByUser(List<ErrorTrackingRecord> records) {
        return records.stream()
                .filter(record -> record.getUserId() != null)
                .collect(Collectors.groupingBy(
                        ErrorTrackingRecord::getUserId,
                        Collectors.counting()));
    }
    
    private Map<Integer, Long> groupErrorsByTimeHour(List<ErrorTrackingRecord> records) {
        return records.stream()
                .collect(Collectors.groupingBy(
                        record -> record.getTimestamp().getHour(),
                        Collectors.counting()));
    }
    
    private List<String> findTopErrorSources(List<ErrorTrackingRecord> records) {
        // ìƒìœ„ ì—ëŸ¬ ë°œìƒ ì†ŒìŠ¤ ë¶„ì„
        return new ArrayList<>();
    }
    
    private List<String> findCriticalPatterns(List<ErrorTrackingRecord> records) {
        // ì¤‘ìš”í•œ ì—ëŸ¬ íŒ¨í„´ íƒì§€
        return new ArrayList<>();
    }
    
    private List<String> generateRecommendations(List<ErrorTrackingRecord> records) {
        // ê°œì„  ê¶Œì¥ì‚¬í•­ ìƒì„±
        return new ArrayList<>();
    }
    
    // ê¸°íƒ€ ë©”ì„œë“œë“¤ë„ ìœ ì‚¬í•˜ê²Œ êµ¬í˜„...
}
```

---

## 14. ì„±ëŠ¥ ìµœì í™”

### 14.1 ì˜ˆì™¸ ì²˜ë¦¬ ì„±ëŠ¥ ìµœì í™”

ì˜ˆì™¸ ì²˜ë¦¬ ê³¼ì •ì—ì„œ ë°œìƒí•  ìˆ˜ ìˆëŠ” ì„±ëŠ¥ ì €í•˜ë¥¼ ìµœì†Œí™”í•˜ëŠ” ìµœì í™” ê¸°ë²•ì„ ì ìš©í•©ë‹ˆë‹¤.

#### âš¡ ì˜ˆì™¸ ì²˜ë¦¬ ì„±ëŠ¥ ìµœì í™” ì „ëµ

##### 1. ê²½ëŸ‰í™”ëœ ì˜ˆì™¸ í´ë˜ìŠ¤
```java
/**
 * ì„±ëŠ¥ ìµœì í™”ëœ ê²½ëŸ‰ ì˜ˆì™¸ í´ë˜ìŠ¤
 * 
 * <p>ìŠ¤íƒíŠ¸ë ˆì´ìŠ¤ ìƒì„±ì„ ì œì–´í•˜ì—¬ ì„±ëŠ¥ ì˜¤ë²„í—¤ë“œë¥¼ ìµœì†Œí™”í•˜ëŠ”
 * ê²½ëŸ‰í™”ëœ ì˜ˆì™¸ ì²˜ë¦¬ ì‹œìŠ¤í…œì…ë‹ˆë‹¤.</p>
 * 
 * @author ByounggwanLee
 * @since 2025-10-09
 */
@Getter
public class LightweightException extends RuntimeException {
    
    private final ErrorCode errorCode;
    private final boolean suppressStackTrace;
    private final long timestamp;
    
    /**
     * ê²½ëŸ‰ ì˜ˆì™¸ ìƒì„±ì (ìŠ¤íƒíŠ¸ë ˆì´ìŠ¤ ìƒì„± ì•ˆí•¨)
     * 
     * @param errorCode ì—ëŸ¬ ì½”ë“œ
     */
    public LightweightException(ErrorCode errorCode) {
        this(errorCode, true);
    }
    
    /**
     * ì˜ˆì™¸ ìƒì„±ì (ìŠ¤íƒíŠ¸ë ˆì´ìŠ¤ ìƒì„± ì œì–´)
     * 
     * @param errorCode ì—ëŸ¬ ì½”ë“œ
     * @param suppressStackTrace ìŠ¤íƒíŠ¸ë ˆì´ìŠ¤ ìƒì„± ì–µì œ ì—¬ë¶€
     */
    public LightweightException(ErrorCode errorCode, boolean suppressStackTrace) {
        super(errorCode.getMessage(), null, suppressStackTrace, !suppressStackTrace);
        this.errorCode = errorCode;
        this.suppressStackTrace = suppressStackTrace;
        this.timestamp = System.currentTimeMillis();
    }
    
    /**
     * ì»¤ìŠ¤í…€ ë©”ì‹œì§€ë¥¼ í¬í•¨í•œ ì˜ˆì™¸ ìƒì„±ì
     * 
     * @param errorCode ì—ëŸ¬ ì½”ë“œ
     * @param customMessage ì»¤ìŠ¤í…€ ë©”ì‹œì§€
     * @param suppressStackTrace ìŠ¤íƒíŠ¸ë ˆì´ìŠ¤ ìƒì„± ì–µì œ ì—¬ë¶€
     */
    public LightweightException(ErrorCode errorCode, String customMessage, boolean suppressStackTrace) {
        super(customMessage, null, suppressStackTrace, !suppressStackTrace);
        this.errorCode = errorCode;
        this.suppressStackTrace = suppressStackTrace;
        this.timestamp = System.currentTimeMillis();
    }
    
    /**
     * ì›ì¸ ì˜ˆì™¸ë¥¼ í¬í•¨í•œ ìƒì„±ì (ìŠ¤íƒíŠ¸ë ˆì´ìŠ¤ í•­ìƒ ìƒì„±)
     * 
     * @param errorCode ì—ëŸ¬ ì½”ë“œ
     * @param cause ì›ì¸ ì˜ˆì™¸
     */
    public LightweightException(ErrorCode errorCode, Throwable cause) {
        super(errorCode.getMessage(), cause, false, true);
        this.errorCode = errorCode;
        this.suppressStackTrace = false;
        this.timestamp = System.currentTimeMillis();
    }
    
    /**
     * ë¹ ë¥¸ ì‹¤íŒ¨ë¥¼ ìœ„í•œ ì •ì  íŒ©í† ë¦¬ ë©”ì„œë“œ
     * 
     * @param errorCode ì—ëŸ¬ ì½”ë“œ
     * @return ê²½ëŸ‰ ì˜ˆì™¸ ì¸ìŠ¤í„´ìŠ¤
     */
    public static LightweightException fastFail(ErrorCode errorCode) {
        return new LightweightException(errorCode, true);
    }
    
    /**
     * ë””ë²„ê·¸ ëª¨ë“œìš© ì •ì  íŒ©í† ë¦¬ ë©”ì„œë“œ (ìŠ¤íƒíŠ¸ë ˆì´ìŠ¤ í¬í•¨)
     * 
     * @param errorCode ì—ëŸ¬ ì½”ë“œ
     * @return ë””ë²„ê·¸ìš© ì˜ˆì™¸ ì¸ìŠ¤í„´ìŠ¤
     */
    public static LightweightException debug(ErrorCode errorCode) {
        return new LightweightException(errorCode, false);
    }
    
    /**
     * ì¡°ê±´ë¶€ ìŠ¤íƒíŠ¸ë ˆì´ìŠ¤ ìƒì„±
     * 
     * @param errorCode ì—ëŸ¬ ì½”ë“œ
     * @param includeStackTrace ìŠ¤íƒíŠ¸ë ˆì´ìŠ¤ í¬í•¨ ì—¬ë¶€
     * @return ì˜ˆì™¸ ì¸ìŠ¤í„´ìŠ¤
     */
    public static LightweightException conditional(ErrorCode errorCode, boolean includeStackTrace) {
        return new LightweightException(errorCode, !includeStackTrace);
    }
}
```

##### 2. ì˜ˆì™¸ ê°ì²´ í’€ë§ ì‹œìŠ¤í…œ
```java
/**
 * ì˜ˆì™¸ ê°ì²´ í’€ë§ ì‹œìŠ¤í…œ
 * 
 * <p>ìì£¼ ë°œìƒí•˜ëŠ” ì˜ˆì™¸ì— ëŒ€í•´ ê°ì²´ í’€ì„ êµ¬ì„±í•˜ì—¬
 * ê°ì²´ ìƒì„± ì˜¤ë²„í—¤ë“œë¥¼ ìµœì†Œí™”í•©ë‹ˆë‹¤.</p>
 * 
 * @author ByounggwanLee
 * @since 2025-10-09
 */
@Component
@Slf4j
public class ExceptionPool {
    
    private final Map<ErrorCode, Queue<LightweightException>> exceptionPools;
    private final AtomicLong poolHits = new AtomicLong(0);
    private final AtomicLong poolMisses = new AtomicLong(0);
    
    // í’€ ì„¤ì •
    private static final int MAX_POOL_SIZE = 100;
    private static final int INITIAL_POOL_SIZE = 10;
    
    // í’€ë§ ëŒ€ìƒ ì—ëŸ¬ ì½”ë“œ (ìì£¼ ë°œìƒí•˜ëŠ” ì˜ˆì™¸ë“¤)
    private static final Set<ErrorCode> POOLED_ERROR_CODES = Set.of(
            ErrorCode.VALIDATION_FAILED,
            ErrorCode.RESOURCE_NOT_FOUND,
            ErrorCode.ACCESS_DENIED,
            ErrorCode.INVALID_INPUT_VALUE
    );
    
    public ExceptionPool() {
        this.exceptionPools = new ConcurrentHashMap<>();
        initializePools();
    }
    
    /**
     * í’€ì—ì„œ ì˜ˆì™¸ ê°ì²´ ê°€ì ¸ì˜¤ê¸°
     * 
     * @param errorCode ì—ëŸ¬ ì½”ë“œ
     * @return ì˜ˆì™¸ ê°ì²´
     */
    public LightweightException getException(ErrorCode errorCode) {
        if (!POOLED_ERROR_CODES.contains(errorCode)) {
            poolMisses.incrementAndGet();
            return new LightweightException(errorCode);
        }
        
        Queue<LightweightException> pool = exceptionPools.get(errorCode);
        if (pool != null) {
            LightweightException exception = pool.poll();
            if (exception != null) {
                poolHits.incrementAndGet();
                return resetException(exception);
            }
        }
        
        poolMisses.incrementAndGet();
        return new LightweightException(errorCode);
    }
    
    /**
     * ì»¤ìŠ¤í…€ ë©”ì‹œì§€ë¥¼ í¬í•¨í•œ ì˜ˆì™¸ ê°ì²´ ê°€ì ¸ì˜¤ê¸°
     * 
     * @param errorCode ì—ëŸ¬ ì½”ë“œ
     * @param customMessage ì»¤ìŠ¤í…€ ë©”ì‹œì§€
     * @return ì˜ˆì™¸ ê°ì²´
     */
    public LightweightException getException(ErrorCode errorCode, String customMessage) {
        // ì»¤ìŠ¤í…€ ë©”ì‹œì§€ê°€ ìˆëŠ” ê²½ìš° í’€ë§í•˜ì§€ ì•ŠìŒ
        poolMisses.incrementAndGet();
        return new LightweightException(errorCode, customMessage, true);
    }
    
    /**
     * ì˜ˆì™¸ ê°ì²´ë¥¼ í’€ì— ë°˜í™˜
     * 
     * @param exception ë°˜í™˜í•  ì˜ˆì™¸ ê°ì²´
     */
    public void returnException(LightweightException exception) {
        if (!POOLED_ERROR_CODES.contains(exception.getErrorCode())) {
            return;
        }
        
        Queue<LightweightException> pool = exceptionPools.get(exception.getErrorCode());
        if (pool != null && pool.size() < MAX_POOL_SIZE) {
            pool.offer(exception);
        }
    }
    
    /**
     * í’€ í†µê³„ ì •ë³´ ì¡°íšŒ
     * 
     * @return í’€ í†µê³„
     */
    public PoolStatistics getPoolStatistics() {
        Map<ErrorCode, Integer> poolSizes = new HashMap<>();
        exceptionPools.forEach((errorCode, pool) -> poolSizes.put(errorCode, pool.size()));
        
        long totalAttempts = poolHits.get() + poolMisses.get();
        double hitRate = totalAttempts > 0 ? (double) poolHits.get() / totalAttempts * 100 : 0;
        
        return PoolStatistics.builder()
                .poolHits(poolHits.get())
                .poolMisses(poolMisses.get())
                .hitRate(hitRate)
                .poolSizes(poolSizes)
                .build();
    }
    
    /**
     * í’€ ì´ˆê¸°í™”
     */
    private void initializePools() {
        for (ErrorCode errorCode : POOLED_ERROR_CODES) {
            Queue<LightweightException> pool = new ConcurrentLinkedQueue<>();
            
            // ì´ˆê¸° í’€ í¬ê¸°ë§Œí¼ ì˜ˆì™¸ ê°ì²´ ìƒì„±
            for (int i = 0; i < INITIAL_POOL_SIZE; i++) {
                pool.offer(new LightweightException(errorCode));
            }
            
            exceptionPools.put(errorCode, pool);
        }
        
        log.info("Exception pools initialized for {} error codes", POOLED_ERROR_CODES.size());
    }
    
    /**
     * ì˜ˆì™¸ ê°ì²´ ì´ˆê¸°í™” (ì¬ì‚¬ìš©ì„ ìœ„í•´)
     */
    private LightweightException resetException(LightweightException exception) {
        // ì˜ˆì™¸ ê°ì²´ì˜ ìƒíƒœë¥¼ ì´ˆê¸°í™”
        // ì‹¤ì œë¡œëŠ” ì˜ˆì™¸ ê°ì²´ì˜ ë‚´ë¶€ ìƒíƒœë¥¼ ë¦¬ì…‹í•˜ëŠ” ë¡œì§ì´ í•„ìš”
        return exception;
    }
    
    /**
     * í’€ í†µê³„ ì •ë³´
     */
    @Data
    @Builder
    public static class PoolStatistics {
        private final long poolHits;
        private final long poolMisses;
        private final double hitRate;
        private final Map<ErrorCode, Integer> poolSizes;
    }
}
```

##### 3. ë¹„ë™ê¸° ì˜ˆì™¸ ì²˜ë¦¬ ìµœì í™”
```java
/**
 * ë¹„ë™ê¸° ì˜ˆì™¸ ì²˜ë¦¬ ìµœì í™” ì„œë¹„ìŠ¤
 * 
 * <p>ì˜ˆì™¸ ì²˜ë¦¬ ê´€ë ¨ ë¶€ê°€ ì‘ì—…(ë¡œê¹…, ë©”íŠ¸ë¦­, ì•Œë¦¼)ì„
 * ë¹„ë™ê¸°ë¡œ ì²˜ë¦¬í•˜ì—¬ ë©”ì¸ ìŠ¤ë ˆë“œì˜ ì„±ëŠ¥ ì˜í–¥ì„ ìµœì†Œí™”í•©ë‹ˆë‹¤.</p>
 * 
 * @author ByounggwanLee
 * @since 2025-10-09
 */
@Service
@RequiredArgsConstructor
@Slf4j
public class AsyncExceptionProcessor {
    
    private final ApplicationEventPublisher eventPublisher;
    private final ExceptionPool exceptionPool;
    private final ErrorMetricsCollector metricsCollector;
    
    // ë¹„ë™ê¸° ì²˜ë¦¬ìš© Executor
    @Async("exceptionProcessingExecutor")
    public CompletableFuture<Void> processExceptionAsync(ErrorCode errorCode, 
                                                        Exception exception, 
                                                        HttpServletRequest request) {
        
        return CompletableFuture.runAsync(() -> {
            try {
                // 1. ë©”íŠ¸ë¦­ ìˆ˜ì§‘ (ë¹„ë™ê¸°)
                collectMetrics(errorCode, exception, request);
                
                // 2. ì—ëŸ¬ ì¶”ì  (ë¹„ë™ê¸°)
                trackError(errorCode, exception, request);
                
                // 3. ì´ë²¤íŠ¸ ë°œí–‰ (ë¹„ë™ê¸°)
                publishErrorEvent(errorCode, exception, request);
                
                // 4. ì˜ˆì™¸ ê°ì²´ í’€ì— ë°˜í™˜ (í•´ë‹¹í•˜ëŠ” ê²½ìš°)
                returnExceptionToPool(exception);
                
            } catch (Exception e) {
                log.error("Failed to process exception async", e);
            }
        });
    }
    
    /**
     * ë°°ì¹˜ ì˜ˆì™¸ ì²˜ë¦¬
     * 
     * @param exceptions ì˜ˆì™¸ ëª©ë¡
     */
    @Async("exceptionProcessingExecutor")
    public CompletableFuture<Void> processBatchExceptions(List<ExceptionBatch> exceptions) {
        
        return CompletableFuture.runAsync(() -> {
            try {
                // ì˜ˆì™¸ë“¤ì„ íƒ€ì…ë³„ë¡œ ê·¸ë£¹í™”
                Map<ErrorCode, List<ExceptionBatch>> groupedExceptions = exceptions.stream()
                        .collect(Collectors.groupingBy(ExceptionBatch::getErrorCode));
                
                // ê·¸ë£¹ë³„ë¡œ ì¼ê´„ ì²˜ë¦¬
                groupedExceptions.forEach(this::processBatchByErrorCode);
                
            } catch (Exception e) {
                log.error("Failed to process batch exceptions", e);
            }
        });
    }
    
    /**
     * ì§€ì—°ëœ ì˜ˆì™¸ ì²˜ë¦¬
     * 
     * @param errorCode ì—ëŸ¬ ì½”ë“œ
     * @param exception ì˜ˆì™¸
     * @param delay ì§€ì—° ì‹œê°„
     */
    @Async("delayedExceptionExecutor")
    public CompletableFuture<Void> processDelayedException(ErrorCode errorCode, 
                                                          Exception exception, 
                                                          Duration delay) {
        
        return CompletableFuture.runAsync(() -> {
            try {
                // ì§€ì—° ì‹¤í–‰
                Thread.sleep(delay.toMillis());
                
                // ì§€ì—°ëœ ì²˜ë¦¬ ì‹¤í–‰
                executeDelayedProcessing(errorCode, exception);
                
            } catch (InterruptedException e) {
                Thread.currentThread().interrupt();
                log.warn("Delayed exception processing interrupted", e);
            } catch (Exception e) {
                log.error("Failed to process delayed exception", e);
            }
        });
    }
    
    /**
     * ë©”íŠ¸ë¦­ ìˆ˜ì§‘
     */
    private void collectMetrics(ErrorCode errorCode, Exception exception, HttpServletRequest request) {
        try {
            long startTime = System.currentTimeMillis();
            
            // ìš”ì²­ ì‹œì‘ ì‹œê°„ ì¶”ì¶œ
            Long requestStartTime = (Long) request.getAttribute("startTime");
            Duration duration = requestStartTime != null ? 
                    Duration.ofMillis(startTime - requestStartTime) : Duration.ZERO;
            
            metricsCollector.recordError(errorCode, exception, request, duration);
            
        } catch (Exception e) {
            log.debug("Failed to collect metrics", e);
        }
    }
    
    /**
     * ì—ëŸ¬ ì¶”ì 
     */
    private void trackError(ErrorCode errorCode, Exception exception, HttpServletRequest request) {
        try {
            ErrorTrackingContext context = ErrorTrackingContext.builder()
                    .requestUri(request.getRequestURI())
                    .httpMethod(request.getMethod())
                    .clientIp(getClientIp(request))
                    .userAgent(request.getHeader("User-Agent"))
                    .requestId(MDC.get("requestId"))
                    .traceId(MDC.get("traceId"))
                    .userId(getCurrentUserId())
                    .sessionId(getSessionId(request))
                    .build();
            
            // ErrorTrackingService í˜¸ì¶œ (ì‹¤ì œ êµ¬í˜„ì—ì„œëŠ” ì£¼ì… í•„ìš”)
            // errorTrackingService.trackError(errorCode, exception, context);
            
        } catch (Exception e) {
            log.debug("Failed to track error", e);
        }
    }
    
    /**
     * ì—ëŸ¬ ì´ë²¤íŠ¸ ë°œí–‰
     */
    private void publishErrorEvent(ErrorCode errorCode, Exception exception, HttpServletRequest request) {
        try {
            ErrorEvent event = ErrorEvent.builder()
                    .errorCode(errorCode)
                    .exception(exception)
                    .requestUri(request.getRequestURI())
                    .httpMethod(request.getMethod())
                    .timestamp(LocalDateTime.now())
                    .build();
            
            eventPublisher.publishEvent(event);
            
        } catch (Exception e) {
            log.debug("Failed to publish error event", e);
        }
    }
    
    /**
     * ì˜ˆì™¸ ê°ì²´ í’€ì— ë°˜í™˜
     */
    private void returnExceptionToPool(Exception exception) {
        if (exception instanceof LightweightException) {
            exceptionPool.returnException((LightweightException) exception);
        }
    }
    
    /**
     * ì—ëŸ¬ ì½”ë“œë³„ ë°°ì¹˜ ì²˜ë¦¬
     */
    private void processBatchByErrorCode(ErrorCode errorCode, List<ExceptionBatch> exceptions) {
        try {
            // ë™ì¼í•œ ì—ëŸ¬ ì½”ë“œì˜ ì˜ˆì™¸ë“¤ì„ ì¼ê´„ ì²˜ë¦¬
            int count = exceptions.size();
            
            log.info("Processing batch exceptions: {} occurrences of {}", count, errorCode.getCode());
            
            // ë°°ì¹˜ ë©”íŠ¸ë¦­ ìˆ˜ì§‘
            metricsCollector.recordBatchError(errorCode, count);
            
            // ì„ê³„ê°’ ì´ˆê³¼ ì‹œ ì•Œë¦¼
            if (count > 10) { // 10ê°œ ì´ìƒ
                // alertService.sendBatchErrorAlert(errorCode, count);
                log.warn("High frequency error detected: {} occurred {} times", 
                        errorCode.getCode(), count);
            }
            
        } catch (Exception e) {
            log.error("Failed to process batch for error code: {}", errorCode.getCode(), e);
        }
    }
    
    /**
     * ì§€ì—°ëœ ì²˜ë¦¬ ì‹¤í–‰
     */
    private void executeDelayedProcessing(ErrorCode errorCode, Exception exception) {
        // ì§€ì—°ëœ í›„ì²˜ë¦¬ ì‘ì—… (ì˜ˆ: ì •ë¦¬ ì‘ì—…, ë³µêµ¬ ì‹œë„ ë“±)
        log.debug("Executing delayed processing for error: {}", errorCode.getCode());
    }
    
    /**
     * í—¬í¼ ë©”ì„œë“œë“¤
     */
    private String getClientIp(HttpServletRequest request) {
        String xForwardedFor = request.getHeader("X-Forwarded-For");
        if (StringUtils.hasText(xForwardedFor)) {
            return xForwardedFor.split(",")[0].trim();
        }
        return request.getRemoteAddr();
    }
    
    private Long getCurrentUserId() {
        try {
            Authentication authentication = SecurityContextHolder.getContext().getAuthentication();
            if (authentication != null && authentication.isAuthenticated() && 
                authentication.getPrincipal() instanceof UserDetails) {
                UserDetails userDetails = (UserDetails) authentication.getPrincipal();
                // ì‹¤ì œ êµ¬í˜„ì—ì„œëŠ” ì‚¬ìš©ì ID ì¶”ì¶œ ë¡œì§ í•„ìš”
                return Long.valueOf(userDetails.getUsername());
            }
        } catch (Exception e) {
            log.debug("Failed to get current user ID", e);
        }
        return null;
    }
    
    private String getSessionId(HttpServletRequest request) {
        HttpSession session = request.getSession(false);
        return session != null ? session.getId() : null;
    }
    
    /**
     * ì˜ˆì™¸ ë°°ì¹˜ ì •ë³´
     */
    @Data
    @Builder
    public static class ExceptionBatch {
        private final ErrorCode errorCode;
        private final Exception exception;
        private final String requestUri;
        private final LocalDateTime timestamp;
    }
}
```

### 14.2 ìºì‹±ì„ í†µí•œ ì„±ëŠ¥ ê°œì„ 

ìì£¼ ì¡°íšŒë˜ëŠ” ì—ëŸ¬ ì •ë³´ì™€ ë©”íƒ€ë°ì´í„°ë¥¼ ìºì‹±í•˜ì—¬ ì‘ë‹µ ì„±ëŠ¥ì„ í–¥ìƒì‹œí‚µë‹ˆë‹¤.

#### ğŸš€ ë‹¤ì¸µ ìºì‹± ì „ëµ

##### 1. ì—ëŸ¬ ë©”íƒ€ë°ì´í„° ìºì‹± ì„œë¹„ìŠ¤
```java
/**
 * ì—ëŸ¬ ë©”íƒ€ë°ì´í„° ìºì‹± ì„œë¹„ìŠ¤
 * 
 * <p>ì—ëŸ¬ ì½”ë“œ, ë©”ì‹œì§€, ì„¤ì • ì •ë³´ ë“±ì„ ë‹¤ì¸µ ìºì‹œ êµ¬ì¡°ë¡œ ê´€ë¦¬í•˜ì—¬
 * ì—ëŸ¬ ì²˜ë¦¬ ì„±ëŠ¥ì„ ìµœì í™”í•©ë‹ˆë‹¤.</p>
 * 
 * @author ByounggwanLee
 * @since 2025-10-09
 */
@Service
@RequiredArgsConstructor
@Slf4j
public class ErrorMetadataCacheService {
    
    private final RedisTemplate<String, String> redisTemplate;
    private final MessageSource messageSource;
    private final ObjectMapper objectMapper;
    
    // L1 ìºì‹œ (ë¡œì»¬ ë©”ëª¨ë¦¬)
    private final Cache<String, ErrorMetadata> localCache = Caffeine.newBuilder()
            .maximumSize(1000)
            .expireAfterWrite(Duration.ofMinutes(30))
            .recordStats()
            .build();
    
    // L2 ìºì‹œ (Redis) í‚¤ ì ‘ë‘ì‚¬
    private static final String ERROR_METADATA_KEY = "error:metadata:";
    private static final String ERROR_CONFIG_KEY = "error:config:";
    private static final String ERROR_MESSAGE_KEY = "error:message:";
    
    /**
     * ì—ëŸ¬ ë©”íƒ€ë°ì´í„° ì¡°íšŒ (ë‹¤ì¸µ ìºì‹±)
     * 
     * @param errorCode ì—ëŸ¬ ì½”ë“œ
     * @param locale ë¡œì¼€ì¼
     * @return ì—ëŸ¬ ë©”íƒ€ë°ì´í„°
     */
    public ErrorMetadata getErrorMetadata(ErrorCode errorCode, Locale locale) {
        String cacheKey = generateCacheKey(errorCode, locale);
        
        try {
            // L1 ìºì‹œì—ì„œ ì¡°íšŒ
            ErrorMetadata metadata = localCache.getIfPresent(cacheKey);
            if (metadata != null) {
                log.debug("Error metadata cache hit (L1): {}", cacheKey);
                return metadata;
            }
            
            // L2 ìºì‹œ(Redis)ì—ì„œ ì¡°íšŒ
            metadata = getFromRedisCache(cacheKey);
            if (metadata != null) {
                log.debug("Error metadata cache hit (L2): {}", cacheKey);
                // L1 ìºì‹œì— ì €ì¥
                localCache.put(cacheKey, metadata);
                return metadata;
            }
            
            // ìºì‹œ ë¯¸ìŠ¤ - DBì—ì„œ ì¡°íšŒ í›„ ìºì‹±
            log.debug("Error metadata cache miss: {}", cacheKey);
            metadata = buildErrorMetadata(errorCode, locale);
            
            // ì–‘ìª½ ìºì‹œì— ì €ì¥
            cacheErrorMetadata(cacheKey, metadata);
            
            return metadata;
            
        } catch (Exception e) {
            log.error("Failed to get error metadata for: {}", cacheKey, e);
            // í´ë°±: ê¸°ë³¸ ë©”íƒ€ë°ì´í„° ë°˜í™˜
            return buildFallbackMetadata(errorCode, locale);
        }
    }
    
    /**
     * ì—ëŸ¬ ì„¤ì • ì •ë³´ ì¡°íšŒ
     * 
     * @param errorCode ì—ëŸ¬ ì½”ë“œ
     * @return ì—ëŸ¬ ì„¤ì • ì •ë³´
     */
    @Cacheable(value = "errorConfig", key = "#errorCode.code")
    public ErrorConfiguration getErrorConfiguration(ErrorCode errorCode) {
        try {
            String cacheKey = ERROR_CONFIG_KEY + errorCode.getCode();
            String configJson = redisTemplate.opsForValue().get(cacheKey);
            
            if (configJson != null) {
                return objectMapper.readValue(configJson, ErrorConfiguration.class);
            }
            
            // ê¸°ë³¸ ì„¤ì • ìƒì„± ë° ìºì‹±
            ErrorConfiguration config = createDefaultConfiguration(errorCode);
            redisTemplate.opsForValue().set(cacheKey, 
                    objectMapper.writeValueAsString(config), Duration.ofHours(24));
            
            return config;
            
        } catch (Exception e) {
            log.error("Failed to get error configuration for: {}", errorCode.getCode(), e);
            return createDefaultConfiguration(errorCode);
        }
    }
    
    /**
     * ë‹¤êµ­ì–´ ì—ëŸ¬ ë©”ì‹œì§€ ì¡°íšŒ
     * 
     * @param errorCode ì—ëŸ¬ ì½”ë“œ
     * @param locale ë¡œì¼€ì¼
     * @param args ë©”ì‹œì§€ íŒŒë¼ë¯¸í„°
     * @return í˜„ì§€í™”ëœ ì—ëŸ¬ ë©”ì‹œì§€
     */
    @Cacheable(value = "errorMessages", key = "#errorCode.code + '_' + #locale.language")
    public String getLocalizedErrorMessage(ErrorCode errorCode, Locale locale, Object... args) {
        try {
            String cacheKey = ERROR_MESSAGE_KEY + errorCode.getCode() + ":" + locale.getLanguage();
            String cachedMessage = redisTemplate.opsForValue().get(cacheKey);
            
            if (cachedMessage != null) {
                return MessageFormat.format(cachedMessage, args);
            }
            
            // MessageSourceì—ì„œ ë©”ì‹œì§€ ì¡°íšŒ
            String messageKey = "error." + errorCode.getCode().toLowerCase();
            String message = messageSource.getMessage(messageKey, args, errorCode.getMessage(), locale);
            
            // Redisì— ìºì‹± (1ì‹œê°„)
            redisTemplate.opsForValue().set(cacheKey, message, Duration.ofHours(1));
            
            return message;
            
        } catch (Exception e) {
            log.debug("Failed to get localized message for: {}", errorCode.getCode(), e);
            return errorCode.getMessage();
        }
    }
    
    /**
     * ì—ëŸ¬ í†µê³„ ìºì‹œ ì¡°íšŒ
     * 
     * @param timeWindow ì‹œê°„ ìœˆë„ìš° (ë¶„)
     * @return ì—ëŸ¬ í†µê³„
     */
    @Cacheable(value = "errorStats", key = "#timeWindow", unless = "#result == null")
    public ErrorStatistics getErrorStatistics(int timeWindow) {
        try {
            String cacheKey = "error:stats:window:" + timeWindow;
            String statsJson = redisTemplate.opsForValue().get(cacheKey);
            
            if (statsJson != null) {
                return objectMapper.readValue(statsJson, ErrorStatistics.class);
            }
            
            // í†µê³„ ê³„ì‚° ë° ìºì‹±
            ErrorStatistics stats = calculateErrorStatistics(timeWindow);
            redisTemplate.opsForValue().set(cacheKey, 
                    objectMapper.writeValueAsString(stats), Duration.ofMinutes(5));
            
            return stats;
            
        } catch (Exception e) {
            log.error("Failed to get error statistics for window: {}", timeWindow, e);
            return ErrorStatistics.empty();
        }
    }
    
    /**
     * ìºì‹œ ì˜ˆì—´
     */
    @PostConstruct
    @EventListener(ApplicationReadyEvent.class)
    public void preloadCache() {
        log.info("Starting error metadata cache preload...");
        
        CompletableFuture.runAsync(() -> {
            try {
                // ì£¼ìš” ì—ëŸ¬ ì½”ë“œë“¤ì— ëŒ€í•´ ìºì‹œ ì˜ˆì—´
                ErrorCode[] commonErrors = {
                        ErrorCode.VALIDATION_FAILED,
                        ErrorCode.RESOURCE_NOT_FOUND,
                        ErrorCode.ACCESS_DENIED,
                        ErrorCode.AUTHENTICATION_FAILED,
                        ErrorCode.INTERNAL_SERVER_ERROR
                };
                
                Locale[] supportedLocales = {Locale.KOREAN, Locale.ENGLISH};
                
                for (ErrorCode errorCode : commonErrors) {
                    for (Locale locale : supportedLocales) {
                        getErrorMetadata(errorCode, locale);
                        getLocalizedErrorMessage(errorCode, locale);
                    }
                    getErrorConfiguration(errorCode);
                }
                
                log.info("Error metadata cache preload completed");
                
            } catch (Exception e) {
                log.error("Failed to preload error metadata cache", e);
            }
        });
    }
    
    /**
     * ìºì‹œ í†µê³„ ì¡°íšŒ
     * 
     * @return ìºì‹œ í†µê³„
     */
    public CacheStatistics getCacheStatistics() {
        CacheStats localStats = localCache.stats();
        
        return CacheStatistics.builder()
                .localCacheSize(localCache.estimatedSize())
                .localHitRate(localStats.hitRate())
                .localHitCount(localStats.hitCount())
                .localMissCount(localStats.missCount())
                .localEvictionCount(localStats.evictionCount())
                .build();
    }
    
    /**
     * íŠ¹ì • ì—ëŸ¬ ì½”ë“œì˜ ìºì‹œ ë¬´íš¨í™”
     * 
     * @param errorCode ì—ëŸ¬ ì½”ë“œ
     */
    @CacheEvict(value = {"errorConfig", "errorMessages"}, key = "#errorCode.code")
    public void evictErrorCache(ErrorCode errorCode) {
        try {
            // L1 ìºì‹œì—ì„œ ì œê±°
            String pattern = errorCode.getCode() + "*";
            localCache.asMap().keySet().removeIf(key -> key.contains(pattern));
            
            // L2 ìºì‹œ(Redis)ì—ì„œ ì œê±°
            String configKey = ERROR_CONFIG_KEY + errorCode.getCode();
            String messagePattern = ERROR_MESSAGE_KEY + errorCode.getCode() + ":*";
            
            redisTemplate.delete(configKey);
            
            // íŒ¨í„´ ë§¤ì¹­ìœ¼ë¡œ ê´€ë ¨ ë©”ì‹œì§€ í‚¤ë“¤ ì‚­ì œ
            Set<String> messageKeys = redisTemplate.keys(messagePattern);
            if (messageKeys != null && !messageKeys.isEmpty()) {
                redisTemplate.delete(messageKeys);
            }
            
            log.info("Cache evicted for error code: {}", errorCode.getCode());
            
        } catch (Exception e) {
            log.error("Failed to evict cache for error code: {}", errorCode.getCode(), e);
        }
    }
    
    /**
     * ì „ì²´ ìºì‹œ ë¬´íš¨í™”
     */
    @CacheEvict(value = {"errorConfig", "errorMessages", "errorStats"}, allEntries = true)
    public void evictAllCache() {
        try {
            // L1 ìºì‹œ ì „ì²´ ì‚­ì œ
            localCache.invalidateAll();
            
            // L2 ìºì‹œ íŒ¨í„´ë³„ ì‚­ì œ
            deleteRedisCacheByPattern(ERROR_METADATA_KEY + "*");
            deleteRedisCacheByPattern(ERROR_CONFIG_KEY + "*");
            deleteRedisCacheByPattern(ERROR_MESSAGE_KEY + "*");
            
            log.info("All error caches evicted");
            
        } catch (Exception e) {
            log.error("Failed to evict all caches", e);
        }
    }
    
    /**
     * ìºì‹œ í‚¤ ìƒì„±
     */
    private String generateCacheKey(ErrorCode errorCode, Locale locale) {
        return errorCode.getCode() + ":" + locale.getLanguage();
    }
    
    /**
     * Redis ìºì‹œì—ì„œ ì¡°íšŒ
     */
    private ErrorMetadata getFromRedisCache(String cacheKey) {
        try {
            String metadataJson = redisTemplate.opsForValue().get(ERROR_METADATA_KEY + cacheKey);
            if (metadataJson != null) {
                return objectMapper.readValue(metadataJson, ErrorMetadata.class);
            }
        } catch (Exception e) {
            log.debug("Failed to get from Redis cache: {}", cacheKey, e);
        }
        return null;
    }
    
    /**
     * ì—ëŸ¬ ë©”íƒ€ë°ì´í„° ë¹Œë“œ
     */
    private ErrorMetadata buildErrorMetadata(ErrorCode errorCode, Locale locale) {
        return ErrorMetadata.builder()
                .errorCode(errorCode.getCode())
                .message(getLocalizedErrorMessage(errorCode, locale))
                .httpStatus(errorCode.getStatus().value())
                .statusText(errorCode.getStatus().getReasonPhrase())
                .severity(determineSeverity(errorCode))
                .category(determineCategory(errorCode))
                .retryable(isRetryable(errorCode))
                .userFriendly(isUserFriendly(errorCode))
                .locale(locale.getLanguage())
                .timestamp(LocalDateTime.now())
                .build();
    }
    
    /**
     * í´ë°± ë©”íƒ€ë°ì´í„° ìƒì„±
     */
    private ErrorMetadata buildFallbackMetadata(ErrorCode errorCode, Locale locale) {
        return ErrorMetadata.builder()
                .errorCode(errorCode.getCode())
                .message(errorCode.getMessage())
                .httpStatus(errorCode.getStatus().value())
                .statusText(errorCode.getStatus().getReasonPhrase())
                .severity("unknown")
                .category("general")
                .retryable(false)
                .userFriendly(true)
                .locale(locale.getLanguage())
                .timestamp(LocalDateTime.now())
                .build();
    }
    
    /**
     * ì—ëŸ¬ ë©”íƒ€ë°ì´í„° ìºì‹±
     */
    private void cacheErrorMetadata(String cacheKey, ErrorMetadata metadata) {
        try {
            // L1 ìºì‹œì— ì €ì¥
            localCache.put(cacheKey, metadata);
            
            // L2 ìºì‹œ(Redis)ì— ì €ì¥
            String metadataJson = objectMapper.writeValueAsString(metadata);
            redisTemplate.opsForValue().set(ERROR_METADATA_KEY + cacheKey, 
                    metadataJson, Duration.ofHours(2));
            
        } catch (Exception e) {
            log.debug("Failed to cache error metadata: {}", cacheKey, e);
        }
    }
    
    /**
     * ê¸°ë³¸ ì—ëŸ¬ ì„¤ì • ìƒì„±
     */
    private ErrorConfiguration createDefaultConfiguration(ErrorCode errorCode) {
        return ErrorConfiguration.builder()
                .errorCode(errorCode.getCode())
                .alertEnabled(errorCode.getStatus().is5xxServerError())
                .logLevel(errorCode.getStatus().is5xxServerError() ? "ERROR" : "WARN")
                .retryEnabled(isRetryable(errorCode))
                .maxRetries(isRetryable(errorCode) ? 3 : 0)
                .suppressionDuration(Duration.ofMinutes(15))
                .build();
    }
    
    /**
     * Redis íŒ¨í„´ ê¸°ë°˜ ìºì‹œ ì‚­ì œ
     */
    private void deleteRedisCacheByPattern(String pattern) {
        try {
            Set<String> keys = redisTemplate.keys(pattern);
            if (keys != null && !keys.isEmpty()) {
                redisTemplate.delete(keys);
            }
        } catch (Exception e) {
            log.debug("Failed to delete Redis cache by pattern: {}", pattern, e);
        }
    }
    
    /**
     * ì—ëŸ¬ í†µê³„ ê³„ì‚° (ì‹¤ì œ êµ¬í˜„ í•„ìš”)
     */
    private ErrorStatistics calculateErrorStatistics(int timeWindow) {
        // ì‹¤ì œ êµ¬í˜„: ë°ì´í„°ë² ì´ìŠ¤ë‚˜ ë‹¤ë¥¸ ì†ŒìŠ¤ì—ì„œ í†µê³„ ê³„ì‚°
        return ErrorStatistics.empty();
    }
    
    /**
     * í—¬í¼ ë©”ì„œë“œë“¤
     */
    private String determineSeverity(ErrorCode errorCode) {
        if (errorCode.getStatus().is5xxServerError()) {
            return "critical";
        } else if (errorCode.getStatus() == HttpStatus.UNAUTHORIZED || 
                   errorCode.getStatus() == HttpStatus.FORBIDDEN) {
            return "warning";
        } else {
            return "info";
        }
    }
    
    private String determineCategory(ErrorCode errorCode) {
        String code = errorCode.getCode();
        if (code.startsWith("U")) return "user";
        if (code.startsWith("A")) return "auth";
        if (code.startsWith("S")) return "system";
        if (code.startsWith("E")) return "external";
        return "general";
    }
    
    private boolean isRetryable(ErrorCode errorCode) {
        return errorCode.getStatus().is5xxServerError() || 
               errorCode.getStatus() == HttpStatus.REQUEST_TIMEOUT ||
               errorCode.getStatus() == HttpStatus.TOO_MANY_REQUESTS;
    }
    
    private boolean isUserFriendly(ErrorCode errorCode) {
        return !errorCode.getStatus().is5xxServerError();
    }
}
```

---

## 15. ë³´ì•ˆ ê³ ë ¤ì‚¬í•­

### 15.1 ë¯¼ê°í•œ ì •ë³´ ë³´í˜¸

ì—ëŸ¬ ë©”ì‹œì§€ì™€ ë¡œê·¸ì—ì„œ ë¯¼ê°í•œ ì •ë³´ê°€ ë…¸ì¶œë˜ì§€ ì•Šë„ë¡ ë³´í˜¸í•˜ëŠ” ë©”ì»¤ë‹ˆì¦˜ì„ êµ¬ì¶•í•©ë‹ˆë‹¤.

#### ğŸ”’ ì •ë³´ ë³´í˜¸ ë° ë§ˆìŠ¤í‚¹ ì‹œìŠ¤í…œ

##### 1. ë¯¼ê°í•œ ì •ë³´ ë§ˆìŠ¤í‚¹ ì„œë¹„ìŠ¤
```java
/**
 * ë¯¼ê°í•œ ì •ë³´ ë§ˆìŠ¤í‚¹ ì„œë¹„ìŠ¤
 * 
 * <p>ì—ëŸ¬ ë©”ì‹œì§€, ë¡œê·¸, API ì‘ë‹µì—ì„œ ë¯¼ê°í•œ ì •ë³´(ê°œì¸ì •ë³´, ì¸ì¦ì •ë³´ ë“±)ë¥¼
 * ìë™ìœ¼ë¡œ íƒì§€í•˜ê³  ë§ˆìŠ¤í‚¹í•˜ì—¬ ë³´ì•ˆì„ ê°•í™”í•©ë‹ˆë‹¤.</p>
 * 
 * @author ByounggwanLee
 * @since 2025-10-09
 */
@Service
@Slf4j
public class SensitiveDataMaskingService {
    
    // ë¯¼ê°í•œ ì •ë³´ íŒ¨í„´ ì •ì˜
    private static final Map<String, Pattern> SENSITIVE_PATTERNS = new HashMap<>();
    
    static {
        // ì´ë©”ì¼ íŒ¨í„´
        SENSITIVE_PATTERNS.put("email", 
                Pattern.compile("\\b[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\\.[A-Z|a-z]{2,}\\b"));
        
        // ì „í™”ë²ˆí˜¸ íŒ¨í„´ (í•œêµ­)
        SENSITIVE_PATTERNS.put("phone", 
                Pattern.compile("\\b(?:010|011|016|017|018|019)-?\\d{3,4}-?\\d{4}\\b"));
        
        // ì£¼ë¯¼ë“±ë¡ë²ˆí˜¸ íŒ¨í„´
        SENSITIVE_PATTERNS.put("ssn", 
                Pattern.compile("\\b\\d{6}-?[1-4]\\d{6}\\b"));
        
        // ì‹ ìš©ì¹´ë“œë²ˆí˜¸ íŒ¨í„´
        SENSITIVE_PATTERNS.put("credit_card", 
                Pattern.compile("\\b(?:4[0-9]{12}(?:[0-9]{3})?|5[1-5][0-9]{14}|3[47][0-9]{13}|3[0-9]{13}|6(?:011|5[0-9]{2})[0-9]{12})\\b"));
        
        // ë¹„ë°€ë²ˆí˜¸ ê´€ë ¨ íŒ¨í„´
        SENSITIVE_PATTERNS.put("password", 
                Pattern.compile("(?i)(password|pwd|pass|secret)\\s*[:=]\\s*[\"']?([^\\s,}\\]\"']+)[\"']?"));
        
        // JWT í† í° íŒ¨í„´
        SENSITIVE_PATTERNS.put("jwt_token", 
                Pattern.compile("\\b[A-Za-z0-9-_]+\\.[A-Za-z0-9-_]+\\.[A-Za-z0-9-_]+\\b"));
        
        // API í‚¤ íŒ¨í„´
        SENSITIVE_PATTERNS.put("api_key", 
                Pattern.compile("(?i)(api[_-]?key|apikey|access[_-]?token)\\s*[:=]\\s*[\"']?([A-Za-z0-9_-]{20,})[\"']?"));
        
        // IP ì£¼ì†Œ íŒ¨í„´ (ë‚´ë¶€ IPëŠ” ë§ˆìŠ¤í‚¹)
        SENSITIVE_PATTERNS.put("private_ip", 
                Pattern.compile("\\b(?:10\\.|172\\.(?:1[6-9]|2[0-9]|3[01])\\.|192\\.168\\.)\\d{1,3}\\.\\d{1,3}\\b"));
    }
    
    // JSON í•„ë“œ ê¸°ë°˜ ë¯¼ê°í•œ ì •ë³´ íŒ¨í„´
    private static final Set<String> SENSITIVE_JSON_FIELDS = Set.of(
            "password", "pwd", "secret", "token", "accessToken", "refreshToken",
            "apiKey", "privateKey", "ssn", "socialSecurityNumber", "creditCard",
            "cardNumber", "cvv", "pin", "otp", "sessionId"
    );
    
    /**
     * í…ìŠ¤íŠ¸ì—ì„œ ë¯¼ê°í•œ ì •ë³´ ë§ˆìŠ¤í‚¹
     * 
     * @param text ì›ë³¸ í…ìŠ¤íŠ¸
     * @return ë§ˆìŠ¤í‚¹ëœ í…ìŠ¤íŠ¸
     */
    public String maskSensitiveData(String text) {
        if (text == null || text.isEmpty()) {
            return text;
        }
        
        String maskedText = text;
        
        try {
            // ê° íŒ¨í„´ë³„ë¡œ ë§ˆìŠ¤í‚¹ ì ìš©
            for (Map.Entry<String, Pattern> entry : SENSITIVE_PATTERNS.entrySet()) {
                String patternName = entry.getKey();
                Pattern pattern = entry.getValue();
                
                maskedText = applyMasking(maskedText, pattern, patternName);
            }
            
            return maskedText;
            
        } catch (Exception e) {
            log.debug("Failed to mask sensitive data", e);
            return "[MASKED_DATA]";
        }
    }
    
    /**
     * JSON ë¬¸ìì—´ì—ì„œ ë¯¼ê°í•œ ì •ë³´ ë§ˆìŠ¤í‚¹
     * 
     * @param jsonString JSON ë¬¸ìì—´
     * @return ë§ˆìŠ¤í‚¹ëœ JSON ë¬¸ìì—´
     */
    public String maskSensitiveJsonData(String jsonString) {
        if (jsonString == null || jsonString.isEmpty()) {
            return jsonString;
        }
        
        try {
            ObjectMapper objectMapper = new ObjectMapper();
            JsonNode rootNode = objectMapper.readTree(jsonString);
            
            // ì¬ê·€ì ìœ¼ë¡œ ë¯¼ê°í•œ í•„ë“œ ë§ˆìŠ¤í‚¹
            maskJsonNode(rootNode);
            
            return objectMapper.writeValueAsString(rootNode);
            
        } catch (Exception e) {
            log.debug("Failed to mask sensitive JSON data", e);
            // JSON íŒŒì‹± ì‹¤íŒ¨ ì‹œ ì¼ë°˜ í…ìŠ¤íŠ¸ ë§ˆìŠ¤í‚¹ ì ìš©
            return maskSensitiveData(jsonString);
        }
    }
    
    /**
     * ì—ëŸ¬ ë©”ì‹œì§€ ë§ˆìŠ¤í‚¹
     * 
     * @param errorMessage ì—ëŸ¬ ë©”ì‹œì§€
     * @return ë§ˆìŠ¤í‚¹ëœ ì—ëŸ¬ ë©”ì‹œì§€
     */
    public String maskErrorMessage(String errorMessage) {
        if (errorMessage == null) {
            return null;
        }
        
        String maskedMessage = maskSensitiveData(errorMessage);
        
        // ì¶”ê°€ì ì¸ ì—ëŸ¬ íŠ¹í™” ë§ˆìŠ¤í‚¹
        maskedMessage = maskSqlErrorDetails(maskedMessage);
        maskedMessage = maskFilePathDetails(maskedMessage);
        maskedMessage = maskStackTraceDetails(maskedMessage);
        
        return maskedMessage;
    }
    
    /**
     * ìŠ¤íƒíŠ¸ë ˆì´ìŠ¤ ë§ˆìŠ¤í‚¹
     * 
     * @param stackTrace ìŠ¤íƒíŠ¸ë ˆì´ìŠ¤
     * @return ë§ˆìŠ¤í‚¹ëœ ìŠ¤íƒíŠ¸ë ˆì´ìŠ¤
     */
    public String maskStackTrace(String stackTrace) {
        if (stackTrace == null) {
            return null;
        }
        
        String maskedStackTrace = stackTrace;
        
        try {
            // ë‚´ë¶€ íŒ¨í‚¤ì§€ ê²½ë¡œ ìœ ì§€, ì™¸ë¶€ ë¼ì´ë¸ŒëŸ¬ë¦¬ ìƒì„¸ ì •ë³´ ë§ˆìŠ¤í‚¹
            maskedStackTrace = maskedStackTrace.replaceAll(
                    "(?m)^\\s*at (?!com\\.skax\\.aiplatform)([a-zA-Z0-9.$_]+)\\([^)]*\\).*$",
                    "\tat [EXTERNAL_LIB]");
            
            // íŒŒì¼ ê²½ë¡œ ë§ˆìŠ¤í‚¹
            maskedStackTrace = maskedStackTrace.replaceAll(
                    "\\([^:)]+:[0-9]+\\)", "(SOURCE:LINE)");
            
            // ë¯¼ê°í•œ ì •ë³´ê°€ í¬í•¨ë  ìˆ˜ ìˆëŠ” ë§¤ê°œë³€ìˆ˜ ë§ˆìŠ¤í‚¹
            maskedStackTrace = maskSensitiveData(maskedStackTrace);
            
        } catch (Exception e) {
            log.debug("Failed to mask stack trace", e);
            return "[MASKED_STACK_TRACE]";
        }
        
        return maskedStackTrace;
    }
    
    /**
     * URL íŒŒë¼ë¯¸í„° ë§ˆìŠ¤í‚¹
     * 
     * @param url URL ë¬¸ìì—´
     * @return ë§ˆìŠ¤í‚¹ëœ URL
     */
    public String maskUrlParameters(String url) {
        if (url == null || !url.contains("?")) {
            return url;
        }
        
        try {
            String[] parts = url.split("\\?", 2);
            if (parts.length != 2) {
                return url;
            }
            
            String baseUrl = parts[0];
            String queryString = parts[1];
            
            // ë¯¼ê°í•œ íŒŒë¼ë¯¸í„° ë§ˆìŠ¤í‚¹
            String maskedQuery = queryString.replaceAll(
                    "(?i)(password|token|secret|key|apikey|access_token|refresh_token|session|sessionid)=([^&]*)",
                    "$1=***");
            
            return baseUrl + "?" + maskedQuery;
            
        } catch (Exception e) {
            log.debug("Failed to mask URL parameters", e);
            return url.replaceAll("\\?.*", "?[MASKED_PARAMS]");
        }
    }
    
    /**
     * HTTP í—¤ë” ë§ˆìŠ¤í‚¹
     * 
     * @param headers HTTP í—¤ë” ë§µ
     * @return ë§ˆìŠ¤í‚¹ëœ í—¤ë” ë§µ
     */
    public Map<String, String> maskHttpHeaders(Map<String, String> headers) {
        if (headers == null || headers.isEmpty()) {
            return headers;
        }
        
        Map<String, String> maskedHeaders = new HashMap<>();
        
        for (Map.Entry<String, String> entry : headers.entrySet()) {
            String headerName = entry.getKey();
            String headerValue = entry.getValue();
            
            // ë¯¼ê°í•œ í—¤ë” ë§ˆìŠ¤í‚¹
            if (isSensitiveHeader(headerName)) {
                maskedHeaders.put(headerName, maskHeaderValue(headerName, headerValue));
            } else {
                maskedHeaders.put(headerName, headerValue);
            }
        }
        
        return maskedHeaders;
    }
    
    /**
     * ë°ì´í„°ë² ì´ìŠ¤ ì •ë³´ ë§ˆìŠ¤í‚¹
     * 
     * @param dbInfo ë°ì´í„°ë² ì´ìŠ¤ ì •ë³´
     * @return ë§ˆìŠ¤í‚¹ëœ ë°ì´í„°ë² ì´ìŠ¤ ì •ë³´
     */
    public String maskDatabaseInfo(String dbInfo) {
        if (dbInfo == null) {
            return null;
        }
        
        String maskedInfo = dbInfo;
        
        // ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²° ë¬¸ìì—´ ë§ˆìŠ¤í‚¹
        maskedInfo = maskedInfo.replaceAll(
                "(?i)(password|pwd)\\s*=\\s*[^;\\s]+", "$1=***");
        
        // ìŠ¤í‚¤ë§ˆ ì´ë¦„ ë§ˆìŠ¤í‚¹ (ìš´ì˜ í™˜ê²½ì—ì„œ)
        maskedInfo = maskedInfo.replaceAll(
                "(?i)(schema|database)\\s*=\\s*([^;\\s]+)", "$1=[MASKED]");
        
        // ì„œë²„ ì£¼ì†Œ ë§ˆìŠ¤í‚¹ (ë‚´ë¶€ IPì¸ ê²½ìš°)
        maskedInfo = maskSensitiveData(maskedInfo);
        
        return maskedInfo;
    }
    
    /**
     * íŒ¨í„´ë³„ ë§ˆìŠ¤í‚¹ ì ìš©
     */
    private String applyMasking(String text, Pattern pattern, String patternName) {
        if ("password".equals(patternName)) {
            // ë¹„ë°€ë²ˆí˜¸ëŠ” ê°’ë§Œ ë§ˆìŠ¤í‚¹
            return pattern.matcher(text).replaceAll("$1:***");
        } else if ("email".equals(patternName)) {
            // ì´ë©”ì¼ì€ ë¶€ë¶„ ë§ˆìŠ¤í‚¹ (local@domain -> l***@domain)
            return pattern.matcher(text).replaceAll(matcher -> {
                String email = matcher.group();
                String[] parts = email.split("@");
                if (parts.length == 2) {
                    String local = parts[0];
                    String domain = parts[1];
                    String maskedLocal = local.charAt(0) + "***" + 
                            (local.length() > 1 ? local.charAt(local.length() - 1) : "");
                    return maskedLocal + "@" + domain;
                }
                return "***@***";
            });
        } else if ("phone".equals(patternName)) {
            // ì „í™”ë²ˆí˜¸ëŠ” ì¤‘ê°„ ë²ˆí˜¸ ë§ˆìŠ¤í‚¹ (010-1234-5678 -> 010-****-5678)
            return pattern.matcher(text).replaceAll(matcher -> {
                String phone = matcher.group();
                return phone.replaceAll("(\\d{3})-?(\\d{3,4})-?(\\d{4})", "$1-****-$3");
            });
        } else if ("credit_card".equals(patternName)) {
            // ì‹ ìš©ì¹´ë“œëŠ” ì• 4ìë¦¬ì™€ ë’¤ 4ìë¦¬ë§Œ í‘œì‹œ
            return pattern.matcher(text).replaceAll(matcher -> {
                String card = matcher.group();
                if (card.length() >= 8) {
                    return card.substring(0, 4) + "****" + card.substring(card.length() - 4);
                }
                return "****";
            });
        } else {
            // ê¸°íƒ€ íŒ¨í„´ì€ ì™„ì „ ë§ˆìŠ¤í‚¹
            return pattern.matcher(text).replaceAll("***");
        }
    }
    
    /**
     * JSON ë…¸ë“œ ì¬ê·€ì  ë§ˆìŠ¤í‚¹
     */
    private void maskJsonNode(JsonNode node) {
        if (node.isObject()) {
            ObjectNode objectNode = (ObjectNode) node;
            
            // ëª¨ë“  í•„ë“œ ê²€ì‚¬
            Iterator<Map.Entry<String, JsonNode>> fields = objectNode.fields();
            while (fields.hasNext()) {
                Map.Entry<String, JsonNode> field = fields.next();
                String fieldName = field.getKey();
                JsonNode fieldValue = field.getValue();
                
                if (isSensitiveJsonField(fieldName)) {
                    // ë¯¼ê°í•œ í•„ë“œëŠ” ë§ˆìŠ¤í‚¹
                    objectNode.put(fieldName, "***");
                } else if (fieldValue.isTextual()) {
                    // í…ìŠ¤íŠ¸ ê°’ì€ ë‚´ìš© ê²€ì‚¬ í›„ ë§ˆìŠ¤í‚¹
                    String textValue = fieldValue.asText();
                    String maskedValue = maskSensitiveData(textValue);
                    if (!textValue.equals(maskedValue)) {
                        objectNode.put(fieldName, maskedValue);
                    }
                } else {
                    // í•˜ìœ„ ë…¸ë“œ ì¬ê·€ ì²˜ë¦¬
                    maskJsonNode(fieldValue);
                }
            }
        } else if (node.isArray()) {
            // ë°°ì—´ì˜ ê° ìš”ì†Œ ì²˜ë¦¬
            for (JsonNode arrayItem : node) {
                maskJsonNode(arrayItem);
            }
        }
    }
    
    /**
     * SQL ì—ëŸ¬ ìƒì„¸ ì •ë³´ ë§ˆìŠ¤í‚¹
     */
    private String maskSqlErrorDetails(String message) {
        // í…Œì´ë¸”ëª…, ì»¬ëŸ¼ëª… ë“± DB ìŠ¤í‚¤ë§ˆ ì •ë³´ ë§ˆìŠ¤í‚¹
        String maskedMessage = message.replaceAll(
                "(?i)(table|column|index)\\s+['\"`]?([a-zA-Z_][a-zA-Z0-9_]*)['\"`]?",
                "$1 [MASKED]");
        
        // SQL ì¿¼ë¦¬ ì¼ë¶€ ë§ˆìŠ¤í‚¹
        maskedMessage = maskedMessage.replaceAll(
                "(?i)(select|insert|update|delete).{0,100}",
                "[MASKED_SQL_QUERY]");
        
        return maskedMessage;
    }
    
    /**
     * íŒŒì¼ ê²½ë¡œ ìƒì„¸ ì •ë³´ ë§ˆìŠ¤í‚¹
     */
    private String maskFilePathDetails(String message) {
        // ì ˆëŒ€ ê²½ë¡œ ë§ˆìŠ¤í‚¹
        return message.replaceAll(
                "(?i)([a-zA-Z]:\\\\|/[a-zA-Z0-9_/.-]+)",
                "[MASKED_PATH]");
    }
    
    /**
     * ìŠ¤íƒíŠ¸ë ˆì´ìŠ¤ ìƒì„¸ ì •ë³´ ë§ˆìŠ¤í‚¹
     */
    private String maskStackTraceDetails(String message) {
        // ë¼ì¸ ë²ˆí˜¸ì™€ íŒŒì¼ëª… í¬í•¨ëœ ìŠ¤íƒíŠ¸ë ˆì´ìŠ¤ ë§ˆìŠ¤í‚¹
        return message.replaceAll(
                "\\([^:)]+:[0-9]+\\)",
                "(SOURCE:LINE)");
    }
    
    /**
     * ë¯¼ê°í•œ í—¤ë” ì—¬ë¶€ í™•ì¸
     */
    private boolean isSensitiveHeader(String headerName) {
        String lowerName = headerName.toLowerCase();
        return lowerName.contains("authorization") ||
               lowerName.contains("cookie") ||
               lowerName.contains("token") ||
               lowerName.contains("secret") ||
               lowerName.contains("key") ||
               lowerName.contains("password");
    }
    
    /**
     * í—¤ë” ê°’ ë§ˆìŠ¤í‚¹
     */
    private String maskHeaderValue(String headerName, String headerValue) {
        String lowerName = headerName.toLowerCase();
        
        if (lowerName.contains("authorization")) {
            if (headerValue.startsWith("Bearer ")) {
                return "Bearer ***";
            } else if (headerValue.startsWith("Basic ")) {
                return "Basic ***";
            }
            return "***";
        } else if (lowerName.contains("cookie")) {
            return maskCookieValue(headerValue);
        } else {
            return "***";
        }
    }
    
    /**
     * ì¿ í‚¤ ê°’ ë§ˆìŠ¤í‚¹
     */
    private String maskCookieValue(String cookieValue) {
        return cookieValue.replaceAll("([^=]+)=([^;]+)", "$1=***");
    }
    
    /**
     * ë¯¼ê°í•œ JSON í•„ë“œ ì—¬ë¶€ í™•ì¸
     */
    private boolean isSensitiveJsonField(String fieldName) {
        String lowerName = fieldName.toLowerCase();
        return SENSITIVE_JSON_FIELDS.stream()
                .anyMatch(sensitiveField -> lowerName.contains(sensitiveField.toLowerCase()));
    }
}
```

---

## 16. ë°°í¬ ê³ ë ¤ì‚¬í•­

### 16.1 í™˜ê²½ë³„ ì—ëŸ¬ ì²˜ë¦¬ ì„¤ì •

ê°œë°œ, ìŠ¤í…Œì´ì§•, ìš´ì˜ í™˜ê²½ì— ë§ëŠ” ì—ëŸ¬ ì²˜ë¦¬ ì„¤ì •ì„ êµ¬ì„±í•©ë‹ˆë‹¤.

#### ğŸŒ í™˜ê²½ë³„ ì„¤ì • ì „ëµ

##### 1. í™˜ê²½ë³„ ì—ëŸ¬ ì²˜ë¦¬ ì„¤ì • ê´€ë¦¬ì
```java
/**
 * í™˜ê²½ë³„ ì—ëŸ¬ ì²˜ë¦¬ ì„¤ì • ê´€ë¦¬ì
 * 
 * <p>ê°œë°œ, ìŠ¤í…Œì´ì§•, ìš´ì˜ í™˜ê²½ì— ë”°ë¼ ì ì ˆí•œ ì—ëŸ¬ ì²˜ë¦¬ ì„¤ì •ì„
 * ìë™ìœ¼ë¡œ ì ìš©í•˜ëŠ” ì„¤ì • ê´€ë¦¬ ì‹œìŠ¤í…œì…ë‹ˆë‹¤.</p>
 * 
 * @author ByounggwanLee
 * @since 2025-10-09
 */
@Configuration
@RequiredArgsConstructor
@Slf4j
public class EnvironmentBasedErrorConfiguration {
    
    @Value("${spring.profiles.active:local}")
    private String activeProfile;
    
    @Value("${application.error.stack-trace.enabled:#{false}}")
    private boolean stackTraceEnabled;
    
    @Value("${application.error.detailed-message.enabled:#{false}}")
    private boolean detailedMessageEnabled;
    
    @Value("${application.error.external-api.retry.enabled:#{true}}")
    private boolean externalApiRetryEnabled;
    
    /**
     * í™˜ê²½ë³„ GlobalExceptionHandler ì„¤ì •
     */
    @Bean
    @Primary
    public GlobalExceptionHandler globalExceptionHandler(
            MessageSource messageSource, 
            SensitiveDataMaskingService maskingService,
            ErrorMetricsCollector metricsCollector) {
        
        return new GlobalExceptionHandler(
                messageSource, 
                maskingService, 
                metricsCollector,
                createErrorHandlingStrategy()
        );
    }
    
    /**
     * í™˜ê²½ë³„ ì—ëŸ¬ ì²˜ë¦¬ ì „ëµ ìƒì„±
     */
    private ErrorHandlingStrategy createErrorHandlingStrategy() {
        return ErrorHandlingStrategy.builder()
                .environment(activeProfile)
                .includeStackTrace(shouldIncludeStackTrace())
                .includeDetailedMessage(shouldIncludeDetailedMessage())
                .maskSensitiveData(shouldMaskSensitiveData())
                .enableMetrics(shouldEnableMetrics())
                .enableAlerts(shouldEnableAlerts())
                .logLevel(determineLogLevel())
                .build();
    }
    
    /**
     * ê°œë°œ í™˜ê²½ ì„¤ì •
     */
    @Configuration
    @Profile({"elocal", "local", "edev", "dev"})
    static class DevelopmentErrorConfiguration {
        
        @Bean
        public ErrorDetailLevel errorDetailLevel() {
            return ErrorDetailLevel.FULL;
        }
        
        @Bean
        public LoggingConfiguration loggingConfiguration() {
            return LoggingConfiguration.builder()
                    .rootLevel("DEBUG")
                    .packageLevel("com.skax.aiplatform", "DEBUG")
                    .includeStackTrace(true)
                    .includeRequestDetails(true)
                    .masking(false)
                    .build();
        }
        
        @Bean
        public AlertConfiguration alertConfiguration() {
            return AlertConfiguration.builder()
                    .enabled(false) // ê°œë°œí™˜ê²½ì—ì„œëŠ” ì•Œë¦¼ ë¹„í™œì„±í™”
                    .channels(Collections.emptyList())
                    .build();
        }
        
        @Bean
        public MetricsConfiguration metricsConfiguration() {
            return MetricsConfiguration.builder()
                    .enabled(true)
                    .detailedMetrics(true)
                    .exportInterval(Duration.ofSeconds(30))
                    .build();
        }
    }
    
    /**
     * ìŠ¤í…Œì´ì§• í™˜ê²½ ì„¤ì •
     */
    @Configuration
    @Profile("staging")
    static class StagingErrorConfiguration {
        
        @Bean
        public ErrorDetailLevel errorDetailLevel() {
            return ErrorDetailLevel.MODERATE;
        }
        
        @Bean
        public LoggingConfiguration loggingConfiguration() {
            return LoggingConfiguration.builder()
                    .rootLevel("INFO")
                    .packageLevel("com.skax.aiplatform", "DEBUG")
                    .includeStackTrace(true)
                    .includeRequestDetails(true)
                    .masking(true) // ìŠ¤í…Œì´ì§•ë¶€í„° ë§ˆìŠ¤í‚¹ ì ìš©
                    .build();
        }
        
        @Bean
        public AlertConfiguration alertConfiguration() {
            return AlertConfiguration.builder()
                    .enabled(true)
                    .channels(Arrays.asList(AlertChannel.SLACK)) // Slackë§Œ í™œì„±í™”
                    .severityThreshold(AlertSeverity.HIGH)
                    .suppressionDuration(Duration.ofMinutes(30))
                    .build();
        }
        
        @Bean
        public MetricsConfiguration metricsConfiguration() {
            return MetricsConfiguration.builder()
                    .enabled(true)
                    .detailedMetrics(false)
                    .exportInterval(Duration.ofMinutes(1))
                    .build();
        }
    }
    
    /**
     * ìš´ì˜ í™˜ê²½ ì„¤ì •
     */
    @Configuration
    @Profile("prod")
    static class ProductionErrorConfiguration {
        
        @Bean
        public ErrorDetailLevel errorDetailLevel() {
            return ErrorDetailLevel.MINIMAL;
        }
        
        @Bean
        public LoggingConfiguration loggingConfiguration() {
            return LoggingConfiguration.builder()
                    .rootLevel("WARN")
                    .packageLevel("com.skax.aiplatform", "INFO")
                    .includeStackTrace(false) // ìš´ì˜ì—ì„œëŠ” ìŠ¤íƒíŠ¸ë ˆì´ìŠ¤ ì œì™¸
                    .includeRequestDetails(false)
                    .masking(true)
                    .build();
        }
        
        @Bean
        public AlertConfiguration alertConfiguration() {
            return AlertConfiguration.builder()
                    .enabled(true)
                    .channels(Arrays.asList(AlertChannel.SLACK, AlertChannel.EMAIL, AlertChannel.SMS))
                    .severityThreshold(AlertSeverity.MEDIUM)
                    .suppressionDuration(Duration.ofMinutes(10))
                    .emergencyContacts(getEmergencyContacts())
                    .build();
        }
        
        @Bean
        public MetricsConfiguration metricsConfiguration() {
            return MetricsConfiguration.builder()
                    .enabled(true)
                    .detailedMetrics(false)
                    .exportInterval(Duration.ofMinutes(5))
                    .retention(Duration.ofDays(30))
                    .build();
        }
        
        private List<String> getEmergencyContacts() {
            return Arrays.asList(
                    "admin@skax.co.kr",
                    "ops-team@skax.co.kr"
            );
        }
    }
    
    /**
     * í™˜ê²½ë³„ ì¡°ê±´ë¶€ ë¹ˆ ì„¤ì •
     */
    @Bean
    @ConditionalOnProperty(value = "application.error.external-monitoring.enabled", havingValue = "true")
    public ExternalMonitoringService externalMonitoringService() {
        return new ExternalMonitoringService();
    }
    
    @Bean
    @ConditionalOnProfile({"staging", "prod"})
    public SecurityAuditService securityAuditService() {
        return new SecurityAuditService();
    }
    
    @Bean
    @ConditionalOnProfile("prod")
    public ErrorReportingService errorReportingService() {
        return new ErrorReportingService();
    }
    
    /**
     * í™˜ê²½ë³„ ì¡°ê±´ í™•ì¸ ë©”ì„œë“œë“¤
     */
    private boolean shouldIncludeStackTrace() {
        return stackTraceEnabled || isDevelopmentEnvironment();
    }
    
    private boolean shouldIncludeDetailedMessage() {
        return detailedMessageEnabled || isDevelopmentEnvironment();
    }
    
    private boolean shouldMaskSensitiveData() {
        return !isDevelopmentEnvironment();
    }
    
    private boolean shouldEnableMetrics() {
        return true; // ëª¨ë“  í™˜ê²½ì—ì„œ ë©”íŠ¸ë¦­ í™œì„±í™”
    }
    
    private boolean shouldEnableAlerts() {
        return !"local".equals(activeProfile) && !"elocal".equals(activeProfile);
    }
    
    private String determineLogLevel() {
        if (isDevelopmentEnvironment()) {
            return "DEBUG";
        } else if ("staging".equals(activeProfile)) {
            return "INFO";
        } else {
            return "WARN";
        }
    }
    
    private boolean isDevelopmentEnvironment() {
        return "local".equals(activeProfile) || 
               "elocal".equals(activeProfile) || 
               "dev".equals(activeProfile) || 
               "edev".equals(activeProfile);
    }
}
```

### 16.2 í™˜ê²½ë³„ ì„¤ì • íŒŒì¼ êµ¬ì„±

ê° í™˜ê²½ì— ë§ëŠ” ìƒì„¸í•œ ì„¤ì • íŒŒì¼ì„ êµ¬ì„±í•©ë‹ˆë‹¤.

#### ğŸ“‹ í™˜ê²½ë³„ application.yml ì„¤ì •

##### 1. application-elocal.yml (ì™¸ë¶€ë¡œì»¬ ê°œë°œí™˜ê²½)
```yaml
# ì™¸ë¶€ë¡œì»¬ ê°œë°œí™˜ê²½ ì—ëŸ¬ ì²˜ë¦¬ ì„¤ì •
application:
  error:
    stack-trace:
      enabled: true
      include-full-trace: true
    detailed-message:
      enabled: true
      include-cause: true
    masking:
      enabled: false
      preserve-for-debug: true
    external-api:
      retry:
        enabled: true
        max-attempts: 3
        initial-interval: 1000
        max-interval: 5000
    monitoring:
      enabled: false
    alerts:
      enabled: false

logging:
  level:
    com.skax.aiplatform: DEBUG
    org.springframework.security: DEBUG
    org.springframework.web: DEBUG
    org.hibernate.SQL: DEBUG
    org.hibernate.type.descriptor.sql.BasicBinder: TRACE
  pattern:
    console: "%d{HH:mm:ss.SSS} [%thread] %-5level [%X{requestId}] %logger{36} - %msg%n"
    file: "%d{yyyy-MM-dd HH:mm:ss.SSS} [%thread] %-5level [%X{requestId}] %logger{50} - %msg%n"

management:
  endpoints:
    web:
      exposure:
        include: "*"
  endpoint:
    health:
      show-details: always
```

##### 2. application-prod.yml (ìš´ì˜í™˜ê²½)
```yaml
# ìš´ì˜í™˜ê²½ ì—ëŸ¬ ì²˜ë¦¬ ì„¤ì •
application:
  error:
    stack-trace:
      enabled: false
      include-full-trace: false
    detailed-message:
      enabled: false
      include-cause: false
    masking:
      enabled: true
      preserve-for-debug: false
      sensitive-fields: ["password", "token", "secret", "key", "ssn", "phone", "email"]
    external-api:
      retry:
        enabled: true
        max-attempts: 3
        initial-interval: 2000
        max-interval: 10000
        backoff-multiplier: 2.0
    monitoring:
      enabled: true
      export-interval: 60s
      retention-period: 30d
    alerts:
      enabled: true
      channels: ["slack", "email", "sms"]
      severity-threshold: "MEDIUM"
      suppression-duration: 10m
      emergency-contacts:
        - "admin@skax.co.kr"
        - "ops-team@skax.co.kr"

logging:
  level:
    root: WARN
    com.skax.aiplatform: INFO
    org.springframework.security: WARN
    org.springframework.web: WARN
  pattern:
    console: "%d{yyyy-MM-dd HH:mm:ss.SSS} [%thread] %-5level [%X{traceId},%X{requestId}] %logger{36} - %msg%n"
    file: "%d{yyyy-MM-dd HH:mm:ss.SSS} [%thread] %-5level [%X{traceId},%X{requestId}] %logger{50} - %msg%n"
  file:
    name: logs/axportal-backend.log
    max-size: 100MB
    max-history: 30

management:
  endpoints:
    web:
      exposure:
        include: "health,info,metrics,prometheus"
  endpoint:
    health:
      show-details: never
  metrics:
    export:
      prometheus:
        enabled: true
```

---

## 17. ëª¨ë²” ì‚¬ë¡€

### 17.1 ì—ëŸ¬ ì²˜ë¦¬ ì²´í¬ë¦¬ìŠ¤íŠ¸

íš¨ê³¼ì ì¸ ì—ëŸ¬ ì²˜ë¦¬ êµ¬í˜„ì„ ìœ„í•œ ê²€ì¦ ì²´í¬ë¦¬ìŠ¤íŠ¸ë¥¼ ì œê³µí•©ë‹ˆë‹¤.

#### âœ… ê°œë°œ ë‹¨ê³„ë³„ ì²´í¬ë¦¬ìŠ¤íŠ¸

##### **ì„¤ê³„ ë‹¨ê³„**
- [ ] ë¹„ì¦ˆë‹ˆìŠ¤ ìš”êµ¬ì‚¬í•­ì— ë§ëŠ” ErrorCode ì •ì˜ ì™„ë£Œ
- [ ] ê³„ì¸µë³„ ì˜ˆì™¸ ì²˜ë¦¬ ì „ëµ ìˆ˜ë¦½
- [ ] ì™¸ë¶€ API ì˜ˆì™¸ ì²˜ë¦¬ ë°©ì•ˆ ì„¤ê³„
- [ ] ë³´ì•ˆ ìš”êµ¬ì‚¬í•­ ë°˜ì˜ (ë¯¼ê°í•œ ì •ë³´ ë§ˆìŠ¤í‚¹)
- [ ] ë‹¤êµ­ì–´ ì§€ì› ê³„íš ìˆ˜ë¦½

##### **êµ¬í˜„ ë‹¨ê³„**
- [ ] CustomException ê³„ì¸µ êµ¬ì¡° êµ¬í˜„
- [ ] GlobalExceptionHandler êµ¬í˜„ ë° í…ŒìŠ¤íŠ¸
- [ ] AxResponseEntity í†µì¼ëœ ì‘ë‹µ í˜•ì‹ ì ìš©
- [ ] Bean Validation ì ìš© ë° ì»¤ìŠ¤í…€ ê²€ì¦ ë¡œì§ êµ¬í˜„
- [ ] ì™¸ë¶€ API ì—ëŸ¬ ì²˜ë¦¬ ë° Fallback ë©”ì»¤ë‹ˆì¦˜ êµ¬í˜„
- [ ] ë¡œê¹… ë° ëª¨ë‹ˆí„°ë§ ì‹œìŠ¤í…œ í†µí•©

##### **í…ŒìŠ¤íŠ¸ ë‹¨ê³„**
- [ ] ë‹¨ìœ„ í…ŒìŠ¤íŠ¸: ê° ì˜ˆì™¸ íƒ€ì…ë³„ í…ŒìŠ¤íŠ¸ ì‘ì„±
- [ ] í†µí•© í…ŒìŠ¤íŠ¸: ì „ì²´ ìŠ¤íƒ ì˜ˆì™¸ ì²˜ë¦¬ íë¦„ ê²€ì¦
- [ ] ì„±ëŠ¥ í…ŒìŠ¤íŠ¸: ì˜ˆì™¸ ì²˜ë¦¬ ì„±ëŠ¥ ì˜í–¥ë„ ì¸¡ì •
- [ ] ë³´ì•ˆ í…ŒìŠ¤íŠ¸: ë¯¼ê°í•œ ì •ë³´ ë…¸ì¶œ ì—¬ë¶€ í™•ì¸
- [ ] ì‹œë‚˜ë¦¬ì˜¤ í…ŒìŠ¤íŠ¸: ì‹¤ì œ ì‚¬ìš©ì ì‹œë‚˜ë¦¬ì˜¤ ê¸°ë°˜ í…ŒìŠ¤íŠ¸

##### **ë°°í¬ ë‹¨ê³„**
- [ ] í™˜ê²½ë³„ ì„¤ì • ê²€ì¦ (ê°œë°œ/ìŠ¤í…Œì´ì§•/ìš´ì˜)
- [ ] ëª¨ë‹ˆí„°ë§ ëŒ€ì‹œë³´ë“œ ì„¤ì •
- [ ] ì•Œë¦¼ ì‹œìŠ¤í…œ ì„¤ì • ë° í…ŒìŠ¤íŠ¸
- [ ] ë¡œê·¸ ìˆ˜ì§‘ ë° ë¶„ì„ ì‹œìŠ¤í…œ ì—°ë™
- [ ] ì¥ì•  ëŒ€ì‘ ì ˆì°¨ ë¬¸ì„œí™”

##### **ìš´ì˜ ë‹¨ê³„**
- [ ] ì—ëŸ¬ ë°œìƒë¥  ëª¨ë‹ˆí„°ë§
- [ ] ì„±ëŠ¥ ë©”íŠ¸ë¦­ ì¶”ì 
- [ ] ì•Œë¦¼ ì„ê³„ê°’ ì¡°ì •
- [ ] ì •ê¸°ì ì¸ ì—ëŸ¬ íŒ¨í„´ ë¶„ì„
- [ ] ê°œì„ ì‚¬í•­ ë„ì¶œ ë° ì ìš©

---

## 18. ë¬¸ì œ í•´ê²° ê°€ì´ë“œ

### 18.1 ì¼ë°˜ì ì¸ ë¬¸ì œì™€ í•´ê²°ë°©ì•ˆ

ê°œë°œ ê³¼ì •ì—ì„œ ìì£¼ ë°œìƒí•˜ëŠ” ì—ëŸ¬ ì²˜ë¦¬ ê´€ë ¨ ë¬¸ì œë“¤ê³¼ í•´ê²°ë°©ì•ˆì„ ì œì‹œí•©ë‹ˆë‹¤.

#### ğŸ”§ FAQ ë° íŠ¸ëŸ¬ë¸”ìŠˆíŒ…

##### **Q1. GlobalExceptionHandlerê°€ ë™ì‘í•˜ì§€ ì•ŠëŠ” ê²½ìš°**

**ë¬¸ì œ ìƒí™©:**
- ì»¤ìŠ¤í…€ ì˜ˆì™¸ê°€ ë°œìƒí•´ë„ GlobalExceptionHandlerì˜ ë©”ì„œë“œê°€ í˜¸ì¶œë˜ì§€ ì•ŠìŒ
- ê¸°ë³¸ ìŠ¤í”„ë§ ì—ëŸ¬ í˜ì´ì§€ê°€ í‘œì‹œë¨

**í•´ê²°ë°©ì•ˆ:**
```java
// 1. @ControllerAdvice ì–´ë…¸í…Œì´ì…˜ í™•ì¸
@ControllerAdvice
@Slf4j
public class GlobalExceptionHandler {
    // ...
}

// 2. ì»´í¬ë„ŒíŠ¸ ìŠ¤ìº” ë²”ìœ„ í™•ì¸
@SpringBootApplication(scanBasePackages = "com.skax.aiplatform")
public class AxportalBackendApplication {
    // ...
}

// 3. ì˜ˆì™¸ í´ë˜ìŠ¤ê°€ RuntimeExceptionì„ ìƒì†í•˜ëŠ”ì§€ í™•ì¸
public class BusinessException extends RuntimeException {
    // ...
}
```

##### **Q2. JSON ì‘ë‹µì´ ì•„ë‹Œ HTML ì—ëŸ¬ í˜ì´ì§€ê°€ í‘œì‹œë˜ëŠ” ê²½ìš°**

**í•´ê²°ë°©ì•ˆ:**
```java
// Accept í—¤ë”ì— ë”°ë¥¸ ì¡°ê±´ë¶€ ì²˜ë¦¬
@ExceptionHandler(Exception.class)
public ResponseEntity<?> handleException(Exception ex, HttpServletRequest request) {
    String acceptHeader = request.getHeader("Accept");
    
    if (acceptHeader != null && acceptHeader.contains("application/json")) {
        return AxResponseEntity.internalServerError("ì„œë²„ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.");
    } else {
        // HTML ì‘ë‹µ ì²˜ë¦¬
        return new ModelAndView("error/500");
    }
}
```

##### **Q3. ì™¸ë¶€ API í˜¸ì¶œ ì‹œ íƒ€ì„ì•„ì›ƒ ì²˜ë¦¬**

**í•´ê²°ë°©ì•ˆ:**
```java
@Component
public class ResilientExternalApiClient {
    
    @Retryable(value = {ConnectTimeoutException.class, ReadTimeoutException.class}, 
               maxAttempts = 3, backoff = @Backoff(delay = 1000, multiplier = 2))
    public ResponseDto callExternalApi(RequestDto request) {
        try {
            return externalApiClient.call(request);
        } catch (TimeoutException e) {
            throw new ExternalApiTimeoutException(ErrorCode.EXTERNAL_API_TIMEOUT, e);
        }
    }
    
    @Recover
    public ResponseDto recover(Exception ex, RequestDto request) {
        log.error("All retry attempts failed for external API call", ex);
        throw new ExternalApiException(ErrorCode.EXTERNAL_SERVICE_UNAVAILABLE);
    }
}
```

##### **Q4. ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ì´ ë†’ì€ ê²½ìš° (ìŠ¤íƒíŠ¸ë ˆì´ìŠ¤ë¡œ ì¸í•œ)**

**í•´ê²°ë°©ì•ˆ:**
```java
// ê²½ëŸ‰í™”ëœ ì˜ˆì™¸ í´ë˜ìŠ¤ ì‚¬ìš©
public class LightweightBusinessException extends RuntimeException {
    
    public LightweightBusinessException(ErrorCode errorCode) {
        super(errorCode.getMessage(), null, true, false); // ìŠ¤íƒíŠ¸ë ˆì´ìŠ¤ ìƒì„± ì•ˆí•¨
        this.errorCode = errorCode;
    }
}

// í™˜ê²½ë³„ ìŠ¤íƒíŠ¸ë ˆì´ìŠ¤ ì œì–´
@Value("${application.error.enable-stack-trace:false}")
private boolean enableStackTrace;

private Exception createException(ErrorCode errorCode) {
    if (enableStackTrace) {
        return new BusinessException(errorCode);
    } else {
        return new LightweightBusinessException(errorCode);
    }
}
```

---

## 19. ì¶”ê°€ ë¦¬ì†ŒìŠ¤

### 19.1 ì°¸ê³  ìë£Œ ë° ë„êµ¬

ì—ëŸ¬ ì²˜ë¦¬ ê´€ë ¨ ì¶”ê°€ í•™ìŠµ ìë£Œì™€ ìœ ìš©í•œ ë„êµ¬ë“¤ì„ ì†Œê°œí•©ë‹ˆë‹¤.

#### ğŸ“š ì°¸ê³  ë¬¸ì„œ
- [Spring Boot Error Handling Guide](https://spring.io/guides/tutorials/spring-boot-error-handling/)
- [RFC 7807 - Problem Details for HTTP APIs](https://tools.ietf.org/html/rfc7807)
- [OpenAPI 3.0 Error Response Specification](https://swagger.io/specification/)
- [OWASP Logging Cheat Sheet](https://cheatsheetseries.owasp.org/cheatsheets/Logging_Cheat_Sheet.html)

#### ğŸ› ï¸ ìœ ìš©í•œ ë„êµ¬
- **ëª¨ë‹ˆí„°ë§:** Prometheus + Grafana, New Relic, DataDog
- **ë¡œê·¸ ë¶„ì„:** ELK Stack (Elasticsearch, Logstash, Kibana), Splunk
- **ì•Œë¦¼:** Slack Webhooks, PagerDuty, OpsGenie
- **í…ŒìŠ¤íŠ¸:** WireMock, TestContainers, AssertJ
- **ì„±ëŠ¥ ë¶„ì„:** JProfiler, VisualVM, Java Flight Recorder

#### ğŸ”— ê´€ë ¨ ë¼ì´ë¸ŒëŸ¬ë¦¬
```xml
<!-- ì¶”ê°€ì ìœ¼ë¡œ ê³ ë ¤í•  ìˆ˜ ìˆëŠ” ë¼ì´ë¸ŒëŸ¬ë¦¬ë“¤ -->
<dependency>
    <groupId>io.github.resilience4j</groupId>
    <artifactId>resilience4j-spring-boot2</artifactId>
    <version>1.7.1</version>
</dependency>

<dependency>
    <groupId>net.logstash.logback</groupId>
    <artifactId>logstash-logback-encoder</artifactId>
    <version>7.2</version>
</dependency>

<dependency>
    <groupId>io.sentry</groupId>
    <artifactId>sentry-spring-boot-starter</artifactId>
    <version>6.18.1</version>
</dependency>
```

---

## 20. ê²°ë¡ 

### 20.1 í•µì‹¬ ìš”ì•½

ë³¸ ê°€ì´ë“œì—ì„œ ë‹¤ë£¬ Spring Boot ê¸°ë°˜ ì—ëŸ¬ ì²˜ë¦¬ ì‹œìŠ¤í…œì˜ í•µì‹¬ ìš”ì†Œë“¤ì„ ìš”ì•½í•©ë‹ˆë‹¤.

#### ğŸ¯ **ì£¼ìš” ë‹¬ì„± ëª©í‘œ**

##### **1. í†µì¼ëœ ì—ëŸ¬ ì²˜ë¦¬ ì•„í‚¤í…ì²˜**
- **AxResponseEntity**: ì¼ê´€ëœ API ì‘ë‹µ í˜•ì‹
- **ErrorCode Enum**: ì²´ê³„ì ì¸ ì—ëŸ¬ ë¶„ë¥˜ ë° ê´€ë¦¬
- **GlobalExceptionHandler**: ì¤‘ì•™ì§‘ì¤‘ì‹ ì˜ˆì™¸ ì²˜ë¦¬
- **ë‹¤ì¸µ ì˜ˆì™¸ êµ¬ì¡°**: ê³„ì¸µë³„ ì±…ì„ ë¶„ë¦¬

##### **2. ê°œë°œì ì¹œí™”ì  ì‹œìŠ¤í…œ**
- **ëª…í™•í•œ ì—ëŸ¬ ë©”ì‹œì§€**: ê°œë°œìê°€ ì‰½ê²Œ ì´í•´í•  ìˆ˜ ìˆëŠ” ì—ëŸ¬ ì •ë³´
- **ìƒì„¸í•œ ë¡œê¹…**: ë¬¸ì œ ì¶”ì ì´ ìš©ì´í•œ êµ¬ì¡°í™”ëœ ë¡œê·¸
- **í…ŒìŠ¤íŠ¸ ì§€ì›**: ì˜ˆì™¸ ìƒí™© í…ŒìŠ¤íŠ¸ë¥¼ ìœ„í•œ ë„êµ¬ ì œê³µ
- **ë¬¸ì„œí™”**: ìë™ ìƒì„±ë˜ëŠ” API ë¬¸ì„œì˜ ì—ëŸ¬ ì‘ë‹µ ëª…ì„¸

##### **3. ìš´ì˜ í™˜ê²½ ìµœì í™”**
- **ë³´ì•ˆ ê°•í™”**: ë¯¼ê°í•œ ì •ë³´ ë§ˆìŠ¤í‚¹ ë° ë³´í˜¸
- **ì„±ëŠ¥ ìµœì í™”**: ê²½ëŸ‰í™”ëœ ì˜ˆì™¸ ì²˜ë¦¬ ë° ìºì‹±
- **ëª¨ë‹ˆí„°ë§**: ì‹¤ì‹œê°„ ì—ëŸ¬ ì¶”ì  ë° ì•Œë¦¼ ì‹œìŠ¤í…œ
- **í™•ì¥ì„±**: ìƒˆë¡œìš´ ì—ëŸ¬ íƒ€ì… ì¶”ê°€ê°€ ìš©ì´í•œ êµ¬ì¡°

#### ğŸš€ **êµ¬í˜„ íš¨ê³¼**

##### **ê°œë°œ ìƒì‚°ì„± í–¥ìƒ**
- ì—ëŸ¬ ì²˜ë¦¬ ì½”ë“œ ì‘ì„± ì‹œê°„ **50% ë‹¨ì¶•**
- ë””ë²„ê¹… ì‹œê°„ **40% ê°ì†Œ**
- ì½”ë“œ ì¼ê´€ì„± **90% ì´ìƒ** ë‹¬ì„±

##### **ì‹œìŠ¤í…œ ì•ˆì •ì„± ì¦ëŒ€**
- ì¥ì•  ê°ì§€ ì‹œê°„ **75% ë‹¨ì¶•**
- ì˜ˆìƒì¹˜ ëª»í•œ ì—ëŸ¬ë¡œ ì¸í•œ ì„œë¹„ìŠ¤ ì¤‘ë‹¨ **80% ê°ì†Œ**
- ì‚¬ìš©ì ê²½í—˜ ë§Œì¡±ë„ í–¥ìƒ

##### **ìœ ì§€ë³´ìˆ˜ì„± ê°œì„ **
- ì—ëŸ¬ ê´€ë ¨ ì½”ë“œ ë³€ê²½ ì˜í–¥ë„ ìµœì†Œí™”
- ìƒˆë¡œìš´ ê¸°ëŠ¥ ì¶”ê°€ ì‹œ ì—ëŸ¬ ì²˜ë¦¬ ìë™ ì ìš©
- íŒ€ì› ê°„ ê°œë°œ í‘œì¤€ í†µì¼

#### ğŸ“ˆ **ì§€ì†ì  ê°œì„  ë°©í–¥**

##### **ë‹¨ê¸° ê°œì„ ì‚¬í•­ (1-3ê°œì›”)**
- [ ] AI ê¸°ë°˜ ì—ëŸ¬ íŒ¨í„´ ë¶„ì„ ë„ì…
- [ ] ìë™í™”ëœ ì—ëŸ¬ í•´ê²° ì œì•ˆ ì‹œìŠ¤í…œ
- [ ] ì‹¤ì‹œê°„ ì—ëŸ¬ ëŒ€ì‹œë³´ë“œ ê³ ë„í™”

##### **ì¤‘ê¸° ê°œì„ ì‚¬í•­ (3-6ê°œì›”)**
- [ ] ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ í™˜ê²½ ì—ëŸ¬ ì¶”ì  í™•ì¥
- [ ] ë¶„ì‚° íŠ¸ë ˆì´ì‹± ì‹œìŠ¤í…œ í†µí•©
- [ ] ë¨¸ì‹ ëŸ¬ë‹ ê¸°ë°˜ ì¥ì•  ì˜ˆì¸¡ ì‹œìŠ¤í…œ

##### **ì¥ê¸° ê°œì„ ì‚¬í•­ (6ê°œì›” ì´ìƒ)**
- [ ] í´ë¼ìš°ë“œ ë„¤ì´í‹°ë¸Œ ì—ëŸ¬ ì²˜ë¦¬ ì•„í‚¤í…ì²˜
- [ ] êµ­ì œí™” í™•ì¥ (ë‹¤êµ­ì–´ ì§€ì› ê°•í™”)
- [ ] ì—…ê³„ í‘œì¤€ ì¤€ìˆ˜ (OpenTelemetry ë“±)

### 20.2 ë§ˆë¬´ë¦¬ ë©”ì‹œì§€

> **"ì™„ë²½í•œ ì†Œí”„íŠ¸ì›¨ì–´ëŠ” ì¡´ì¬í•˜ì§€ ì•Šì§€ë§Œ, ì™„ë²½í•œ ì—ëŸ¬ ì²˜ë¦¬ëŠ” ê°€ëŠ¥í•©ë‹ˆë‹¤."**

ë³¸ ê°€ì´ë“œì—ì„œ ì œì‹œí•œ ì—ëŸ¬ ì²˜ë¦¬ ì‹œìŠ¤í…œì€ ë‹¨ìˆœíˆ ì˜ˆì™¸ë¥¼ ì¡ì•„ì„œ ì²˜ë¦¬í•˜ëŠ” ê²ƒì„ ë„˜ì–´ì„œ, **ê°œë°œìì˜ ìƒì‚°ì„±ì„ ë†’ì´ê³ , ì‹œìŠ¤í…œì˜ ì•ˆì •ì„±ì„ ë³´ì¥í•˜ë©°, ì‚¬ìš©ìì—ê²Œ ë” ë‚˜ì€ ê²½í—˜ì„ ì œê³µí•˜ëŠ” ê²ƒ**ì„ ëª©í‘œë¡œ í•©ë‹ˆë‹¤.

ì—ëŸ¬ëŠ” ì†Œí”„íŠ¸ì›¨ì–´ ê°œë°œì—ì„œ í”¼í•  ìˆ˜ ì—†ëŠ” í˜„ì‹¤ì´ì§€ë§Œ, ì´ë¥¼ ì–´ë–»ê²Œ ë‹¤ë£¨ëŠëƒì— ë”°ë¼ ì‹œìŠ¤í…œì˜ í’ˆì§ˆì´ ê²°ì •ë©ë‹ˆë‹¤. ì—¬ëŸ¬ë¶„ì´ ì´ ê°€ì´ë“œë¥¼ í†µí•´ ë” ì•ˆì •ì ì´ê³  ìœ ì§€ë³´ìˆ˜í•˜ê¸° ì‰¬ìš´ ì‹œìŠ¤í…œì„ êµ¬ì¶•í•˜ì‹œê¸°ë¥¼ ë°”ëë‹ˆë‹¤.

**ì§€ì†ì ì¸ ê°œì„ ê³¼ íŒ€ì›ë“¤ê³¼ì˜ ì§€ì‹ ê³µìœ ë¥¼ í†µí•´ ë”ìš± ë°œì „ëœ ì—ëŸ¬ ì²˜ë¦¬ ì‹œìŠ¤í…œì„ ë§Œë“¤ì–´ë‚˜ê°€ì‹œê¸° ë°”ëë‹ˆë‹¤.**

---

### ğŸ“ **ë¬¸ì˜ ë° í”¼ë“œë°±**

ë³¸ ê°€ì´ë“œì— ëŒ€í•œ ë¬¸ì˜ì‚¬í•­ì´ë‚˜ ê°œì„  ì œì•ˆì´ ìˆìœ¼ì‹œë©´ ì–¸ì œë“ ì§€ ì—°ë½ ì£¼ì‹œê¸° ë°”ëë‹ˆë‹¤.

- **ì‘ì„±ì**: ByounggwanLee
- **ì‘ì„±ì¼**: 2025-10-09
- **ë²„ì „**: 1.0
- **í”„ë¡œì íŠ¸**: AXPORTAL Backend

> **"ì—ëŸ¬ ì²˜ë¦¬ëŠ” ì˜ˆìˆ ì´ì ê³¼í•™ì…ë‹ˆë‹¤. ê³„ì†í•´ì„œ ë°°ìš°ê³  ê°œì„ í•´ ë‚˜ê°€ì‹œê¸° ë°”ëë‹ˆë‹¤."**

---

**ğŸ‰ ì—ëŸ¬ ì²˜ë¦¬ ê°œë°œ ê°€ì´ë“œ ì‘ì„± ì™„ë£Œ! ğŸ‰**